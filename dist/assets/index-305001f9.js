import{r as de,c as ce,g as Jd}from"./index-21a91155.js";function Zd(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const f=Object.getOwnPropertyDescriptor(n,o);f&&Object.defineProperty(e,o,f.get?f:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Ba={exports:{}},Wt=typeof Reflect=="object"?Reflect:null,mo=Wt&&typeof Wt.apply=="function"?Wt.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Pr;Wt&&typeof Wt.ownKeys=="function"?Pr=Wt.ownKeys:Object.getOwnPropertySymbols?Pr=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Pr=function(t){return Object.getOwnPropertyNames(t)};function Qd(e){console&&console.warn&&console.warn(e)}var of=Number.isNaN||function(t){return t!==t};function Se(){Se.init.call(this)}Ba.exports=Se;Ba.exports.once=nc;Se.EventEmitter=Se;Se.prototype._events=void 0;Se.prototype._eventsCount=0;Se.prototype._maxListeners=void 0;var wo=10;function Jr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Se,"defaultMaxListeners",{enumerable:!0,get:function(){return wo},set:function(e){if(typeof e!="number"||e<0||of(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");wo=e}});Se.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Se.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||of(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function sf(e){return e._maxListeners===void 0?Se.defaultMaxListeners:e._maxListeners}Se.prototype.getMaxListeners=function(){return sf(this)};Se.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var o=t==="error",f=this._events;if(f!==void 0)o=o&&f.error===void 0;else if(!o)return!1;if(o){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var p=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw p.context=c,p}var g=f[t];if(g===void 0)return!1;if(typeof g=="function")mo(g,this,r);else for(var y=g.length,m=cf(g,y),n=0;n<y;++n)mo(m[n],this,r);return!0};function lf(e,t,r,n){var o,f,c;if(Jr(r),f=e._events,f===void 0?(f=e._events=Object.create(null),e._eventsCount=0):(f.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),f=e._events),c=f[t]),c===void 0)c=f[t]=r,++e._eventsCount;else if(typeof c=="function"?c=f[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),o=sf(e),o>0&&c.length>o&&!c.warned){c.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=c.length,Qd(p)}return e}Se.prototype.addListener=function(t,r){return lf(this,t,r,!1)};Se.prototype.on=Se.prototype.addListener;Se.prototype.prependListener=function(t,r){return lf(this,t,r,!0)};function ec(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ff(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=ec.bind(n);return o.listener=r,n.wrapFn=o,o}Se.prototype.once=function(t,r){return Jr(r),this.on(t,ff(this,t,r)),this};Se.prototype.prependOnceListener=function(t,r){return Jr(r),this.prependListener(t,ff(this,t,r)),this};Se.prototype.removeListener=function(t,r){var n,o,f,c,p;if(Jr(r),o=this._events,o===void 0)return this;if(n=o[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(f=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){p=n[c].listener,f=c;break}if(f<0)return this;f===0?n.shift():tc(n,f),n.length===1&&(o[t]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",t,p||r)}return this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.removeAllListeners=function(t){var r,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var f=Object.keys(n),c;for(o=0;o<f.length;++o)c=f[o],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(o=r.length-1;o>=0;o--)this.removeListener(t,r[o]);return this};function uf(e,t,r){var n=e._events;if(n===void 0)return[];var o=n[t];return o===void 0?[]:typeof o=="function"?r?[o.listener||o]:[o]:r?rc(o):cf(o,o.length)}Se.prototype.listeners=function(t){return uf(this,t,!0)};Se.prototype.rawListeners=function(t){return uf(this,t,!1)};Se.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):df.call(e,t)};Se.prototype.listenerCount=df;function df(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Se.prototype.eventNames=function(){return this._eventsCount>0?Pr(this._events):[]};function cf(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function tc(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function rc(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function nc(e,t){return new Promise(function(r,n){function o(c){e.removeListener(t,f),n(c)}function f(){typeof e.removeListener=="function"&&e.removeListener("error",o),r([].slice.call(arguments))}hf(e,t,f,{once:!0}),t!=="error"&&ic(e,o,{once:!0})})}function ic(e,t,r){typeof e.on=="function"&&hf(e,"error",t,r)}function hf(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(f){n.once&&e.removeEventListener(t,o),r(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var xe=Ba.exports,Vi={exports:{}};typeof Object.create=="function"?Vi.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Vi.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var oe=Vi.exports,Er={exports:{}},pf={exports:{}},gf={exports:{}};(function(e){const t=e.exports;t.digitCount=function(n){const o=n<0?1:0;return n=Math.abs(Number(n||1)),Math.floor(Math.log10(n))+1+o},t.getType=function(n){return Buffer.isBuffer(n)?"buffer":ArrayBuffer.isView(n)?"arraybufferview":Array.isArray(n)?"array":n instanceof Number?"number":n instanceof Boolean?"boolean":n instanceof Set?"set":n instanceof Map?"map":n instanceof String?"string":n instanceof ArrayBuffer?"arraybuffer":typeof n}})(gf);var vf=gf.exports;const{getType:ac}=vf;function Ee(e,t,r){const n=[];let o=null;return Ee._encode(n,e),o=Buffer.concat(n),Ee.bytes=o.length,Buffer.isBuffer(t)?(o.copy(t,r),t):o}Ee.bytes=-1;Ee._floatConversionDetected=!1;Ee._encode=function(e,t){if(t!=null)switch(ac(t)){case"buffer":Ee.buffer(e,t);break;case"object":Ee.dict(e,t);break;case"map":Ee.dictMap(e,t);break;case"array":Ee.list(e,t);break;case"set":Ee.listSet(e,t);break;case"string":Ee.string(e,t);break;case"number":Ee.number(e,t);break;case"boolean":Ee.number(e,t);break;case"arraybufferview":Ee.buffer(e,Buffer.from(t.buffer,t.byteOffset,t.byteLength));break;case"arraybuffer":Ee.buffer(e,Buffer.from(t));break}};const Zr=Buffer.from("e"),_f=Buffer.from("d"),yf=Buffer.from("l");Ee.buffer=function(e,t){e.push(Buffer.from(t.length+":"),t)};Ee.string=function(e,t){e.push(Buffer.from(Buffer.byteLength(t)+":"+t))};Ee.number=function(e,t){const n=t/2147483648<<0,o=t%2147483648<<0,f=n*2147483648+o;e.push(Buffer.from("i"+f+"e")),f!==t&&!Ee._floatConversionDetected&&(Ee._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+t+'":','Bencoding only defines support for integers, value was converted to "'+f+'"'),console.trace())};Ee.dict=function(e,t){e.push(_f);let r=0,n;const o=Object.keys(t).sort(),f=o.length;for(;r<f;r++)n=o[r],t[n]!=null&&(Ee.string(e,n),Ee._encode(e,t[n]));e.push(Zr)};Ee.dictMap=function(e,t){e.push(_f);const r=Array.from(t.keys()).sort();for(const n of r)t.get(n)!=null&&(Buffer.isBuffer(n)?Ee._encode(e,n):Ee.string(e,String(n)),Ee._encode(e,t.get(n)));e.push(Zr)};Ee.list=function(e,t){let r=0;const n=t.length;for(e.push(yf);r<n;r++)t[r]!=null&&Ee._encode(e,t[r]);e.push(Zr)};Ee.listSet=function(e,t){e.push(yf);for(const r of t)r!=null&&Ee._encode(e,r);e.push(Zr)};var oc=Ee;const sc=105,lc=58,fc=100,uc=108,Oa=101;function mf(e,t,r){let n=0,o=1;for(let f=t;f<r;f++){const c=e[f];if(c<58&&c>=48){n=n*10+(c-48);continue}if(!(f===t&&c===43)){if(f===t&&c===45){o=-1;continue}if(c===46)break;throw new Error("not a number: buffer["+f+"] = "+c)}}return n*o}function le(e,t,r,n){return e==null||e.length===0?null:(typeof t!="number"&&n==null&&(n=t,t=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),le.position=0,le.encoding=n||null,le.data=Buffer.isBuffer(e)?e.slice(t,r):Buffer.from(e),le.bytes=le.data.length,le.next())}le.bytes=0;le.position=0;le.data=null;le.encoding=null;le.next=function(){switch(le.data[le.position]){case fc:return le.dictionary();case uc:return le.list();case sc:return le.integer();default:return le.buffer()}};le.find=function(e){let t=le.position;const r=le.data.length,n=le.data;for(;t<r;){if(n[t]===e)return t;t++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(e)+'" [0x'+e.toString(16)+"]")};le.dictionary=function(){le.position++;const e={};for(;le.data[le.position]!==Oa;)e[le.buffer()]=le.next();return le.position++,e};le.list=function(){le.position++;const e=[];for(;le.data[le.position]!==Oa;)e.push(le.next());return le.position++,e};le.integer=function(){const e=le.find(Oa),t=mf(le.data,le.position+1,e);return le.position+=e+1-le.position,t};le.buffer=function(){let e=le.find(lc);const t=mf(le.data,le.position,e),r=++e+t;return le.position=r,le.encoding?le.data.toString(le.encoding,e,r):le.data.slice(e,r)};var dc=le;const{digitCount:qt,getType:cc}=vf;function hc(e){let t=2;for(const r of e)t+=Qr(r);return t}function pc(e){let t=2;for(const[r,n]of e){const o=Buffer.byteLength(r);t+=qt(o)+1+o,t+=Qr(n)}return t}function gc(e){let t=2;const r=Object.keys(e);for(let n=0;n<r.length;n++){const o=Buffer.byteLength(r[n]);t+=qt(o)+1+o,t+=Qr(e[r[n]])}return t}function vc(e){const t=Buffer.byteLength(e);return qt(t)+1+t}function _c(e){const t=e.byteLength-e.byteOffset;return qt(t)+1+t}function Qr(e){if(e==null)return 0;const r=cc(e);switch(r){case"buffer":return qt(e.length)+1+e.length;case"arraybufferview":return _c(e);case"string":return vc(e);case"array":case"set":return hc(e);case"number":return 1+qt(Math.floor(e))+1;case"bigint":return 1+e.toString().length+1;case"object":return gc(e);case"map":return pc(e);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var yc=Qr;(function(e){const t=e.exports;t.encode=oc,t.decode=dc,t.byteLength=t.encodingLength=yc})(pf);var en=pf.exports;/*! blob-to-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var mc=function(t,r){if(typeof Blob>"u"||!(t instanceof Blob))throw new Error("first argument must be a Blob");if(typeof r!="function")throw new Error("second argument must be a function");const n=new FileReader;function o(f){n.removeEventListener("loadend",o,!1),f.error?r(f.error):r(null,Buffer.from(n.result))}n.addEventListener("loadend",o,!1),n.readAsArrayBuffer(t)};/*! simple-concat. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var wf=function(e,t){var r=[];e.on("data",function(n){r.push(n)}),e.once("end",function(){t&&t(null,Buffer.concat(r)),t=null}),e.once("error",function(n){t&&t(n),t=null})},Ia={exports:{}},wc=bf;function bf(e,t){if(e&&t)return bf(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];var f=e.apply(this,n),c=n[n.length-1];return typeof f=="function"&&f!==c&&Object.keys(c).forEach(function(p){f[p]=c[p]}),f}}var Ef=wc;Ia.exports=Ef(Nr);Ia.exports.strict=Ef(Sf);Nr.proto=Nr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Nr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Sf(this)},configurable:!0})});function Nr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Sf(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var At=Ia.exports,Pa=Ht;const bc=wf,bo=de,Ec=de,Sc=de,Rc=At,xc=de,Eo=de,Mn=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";function Ht(e,t){if(e=Object.assign({maxRedirects:10},typeof e=="string"?{url:e}:e),t=Rc(t),e.url){const{hostname:p,port:g,protocol:y,auth:m,path:w}=Eo.parse(e.url);delete e.url,!p&&!g&&!y&&!m?e.path=w:Object.assign(e,{hostname:p,port:g,protocol:y,auth:m,path:w})}const r={"accept-encoding":"gzip, deflate"};e.headers&&Object.keys(e.headers).forEach(p=>r[p.toLowerCase()]=e.headers[p]),e.headers=r;let n;e.body?n=e.json&&!Mn(e.body)?JSON.stringify(e.body):e.body:e.form&&(n=typeof e.form=="string"?e.form:xc.stringify(e.form),e.headers["content-type"]="application/x-www-form-urlencoded"),n&&(e.method||(e.method="POST"),Mn(n)||(e.headers["content-length"]=Buffer.byteLength(n)),e.json&&!e.form&&(e.headers["content-type"]="application/json")),delete e.body,delete e.form,e.json&&(e.headers.accept="application/json"),e.method&&(e.method=e.method.toUpperCase());const o=e.hostname,c=(e.protocol==="https:"?Sc:Ec).request(e,p=>{if(e.followRedirects!==!1&&p.statusCode>=300&&p.statusCode<400&&p.headers.location){e.url=p.headers.location,delete e.headers.host,p.resume();const y=Eo.parse(e.url).hostname;return y!==null&&y!==o&&(delete e.headers.cookie,delete e.headers.authorization),e.method==="POST"&&[301,302].includes(p.statusCode)&&(e.method="GET",delete e.headers["content-length"],delete e.headers["content-type"]),e.maxRedirects--===0?t(new Error("too many redirects")):Ht(e,t)}const g=typeof bo=="function"&&e.method!=="HEAD";t(null,g?bo(p):p)});return c.on("timeout",()=>{c.abort(),t(new Error("Request timed out"))}),c.on("error",t),Mn(n)?n.on("error",t).pipe(c):c.end(n),c}Ht.concat=(e,t)=>Ht(e,(r,n)=>{if(r)return t(r);bc(n,(o,f)=>{if(o)return t(o);if(e.json)try{f=JSON.parse(f.toString())}catch(c){return t(c,n,f)}t(null,n,f)})});["get","post","put","patch","head","delete"].forEach(e=>{Ht[e]=(t,r)=>(typeof t=="string"&&(t={url:t}),Ht(Object.assign({method:e.toUpperCase()},t),r))});var tn={exports:{}},Na={},Da={},Tc="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",So=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255];function Cc(e){var t=Math.floor(e.length/5);return e.length%5===0?t:t+1}Da.encode=function(e){Buffer.isBuffer(e)||(e=new Buffer(e));for(var t=0,r=0,n=0,o=0,f=new Buffer(Cc(e)*8);t<e.length;){var c=e[t];n>3?(o=c&255>>n,n=(n+5)%8,o=o<<n|(t+1<e.length?e[t+1]:0)>>8-n,t++):(o=c>>8-(n+5)&31,n=(n+5)%8,n===0&&t++),f[r]=Tc.charCodeAt(o),r++}for(t=r;t<f.length;t++)f[t]=61;return f};Da.decode=function(e){var t=0,r=0,n,o=0;Buffer.isBuffer(e)||(e=new Buffer(e));for(var f=new Buffer(Math.ceil(e.length*5/8)),c=0;c<e.length&&e[c]!==61;c++){var p=e[c]-48;if(p<So.length)r=So[p],t<=3?(t=(t+5)%8,t===0?(n|=r,f[o]=n,o++,n=0):n|=255&r<<8-t):(t=(t+5)%8,n|=255&r>>>t,f[o]=n,o++,n=255&r<<8-t);else throw new Error("Invalid input - it is not base32 encoded string")}return f.slice(0,o)};var Rf=Da;Na.encode=Rf.encode;Na.decode=Rf.decode;var rn={exports:{}};rn.exports=xf;rn.exports.parse=xf;rn.exports.compose=kc;function kc(e){return e.reduce((t,r,n,o)=>((n===0||r!==o[n-1]+1)&&t.push([]),t[t.length-1].push(r),t),[]).map(t=>t.length>1?`${t[0]}-${t[t.length-1]}`:`${t[0]}`)}function xf(e){const t=(r,n=r)=>Array.from({length:n-r+1},(o,f)=>f+r);return e.reduce((r,n,o,f)=>{const c=n.split("-").map(p=>parseInt(p));return r.concat(t(...c))},[])}var Ac=rn.exports;/*! magnet-uri. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */tn.exports=Cf;tn.exports.decode=Cf;tn.exports.encode=Mc;const Lc=Na,Tf=Ac;function Cf(e){const t={},r=e.split("magnet:?")[1];(r&&r.length>=0?r.split("&"):[]).forEach(f=>{const c=f.split("=");if(c.length!==2)return;const p=c[0];let g=c[1];p==="dn"&&(g=decodeURIComponent(g).replace(/\+/g," ")),(p==="tr"||p==="xs"||p==="as"||p==="ws")&&(g=decodeURIComponent(g)),p==="kt"&&(g=decodeURIComponent(g).split("+")),p==="ix"&&(g=Number(g)),p==="so"&&(g=Tf.parse(decodeURIComponent(g).split(","))),t[p]?(Array.isArray(t[p])||(t[p]=[t[p]]),t[p].push(g)):t[p]=g}),t["x.pe"]&&(t["x.pe"]=Array.isArray(t["x.pe"])?Array.from(new Set(t["x.pe"])):[t["x.pe"]]);let o;return t.xt&&(Array.isArray(t.xt)?t.xt:[t.xt]).forEach(c=>{if(o=c.match(/^urn:btih:(.{40})/))t.infoHash=o[1].toLowerCase();else if(o=c.match(/^urn:btih:(.{32})/)){const p=Lc.decode(o[1]);t.infoHash=Buffer.from(p,"binary").toString("hex")}}),t.infoHash&&(t.infoHashBuffer=Buffer.from(t.infoHash,"hex")),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),t["x.pe"]&&(t.peerAddresses=t["x.pe"]),typeof t.tr=="string"?t.announce=[t.tr]:Array.isArray(t.tr)?t.announce=t.tr:t.announce=[],t.urlList=[],(typeof t.as=="string"||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),(typeof t.ws=="string"||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList)),t["x.pe"]&&(t.x={pe:t["x.pe"]},delete t["x.pe"]),t}function Mc(e){e=Object.assign({},e),e.infoHashBuffer&&(e.xt=`urn:btih:${e.infoHashBuffer.toString("hex")}`),e.infoHash&&(e.xt=`urn:btih:${e.infoHash}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as),e.peerAddresses&&(e["x.pe"]=e.peerAddresses),e.x&&e.x.pe&&(e["x.pe"]=e.x.pe);let t="magnet:?";return Object.keys(e).filter(r=>r.length===2||r==="x.pe").forEach((r,n)=>{const o=Array.isArray(e[r])?e[r]:[e[r]];o.forEach((f,c)=>{(n>0||c>0)&&(r!=="kt"&&r!=="so"||c===0)&&(t+="&"),r==="dn"&&(f=encodeURIComponent(f).replace(/%20/g,"+")),(r==="tr"||r==="xs"||r==="as"||r==="ws")&&(f=encodeURIComponent(f)),r==="kt"&&(f=encodeURIComponent(f)),r!=="so"&&(r==="kt"&&c>0?t+=`+${f}`:t+=`${r}=${f}`)}),r==="so"&&(t+=`${r}=${Tf.compose(o)}`)}),t}var Bc=tn.exports,Fa={exports:{}},kf={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(typeof self<"u"?self:ce,function(){return function(r){var n={};function o(f){if(n[f])return n[f].exports;var c=n[f]={i:f,l:!1,exports:{}};return r[f].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=r,o.c=n,o.d=function(f,c,p){o.o(f,c)||Object.defineProperty(f,c,{configurable:!1,enumerable:!0,get:p})},o.n=function(f){var c=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(c,"a",c),c},o.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},o.p="",o(o.s=3)}([function(r,n,o){function f(R,s){if(!(R instanceof s))throw new TypeError("Cannot call a class as a function")}var c=o(5),p=o(1),g=p.toHex,y=p.ceilHeapSize,m=o(6),w=function(R){for(R+=9;R%64>0;R+=1);return R},k=function(R,s){var v=new Uint8Array(R.buffer),u=s%4,d=s-u;switch(u){case 0:v[d+3]=0;case 1:v[d+2]=0;case 2:v[d+1]=0;case 3:v[d+0]=0}for(var b=(s>>2)+1;b<R.length;b++)R[b]=0},A=function(R,s,v){R[s>>2]|=128<<24-(s%4<<3),R[((s>>2)+2&-16)+14]=v/(1<<29)|0,R[((s>>2)+2&-16)+15]=v<<3},x=function(R,s){var v=new Int32Array(R,s+320,5),u=new Int32Array(5),d=new DataView(u.buffer);return d.setInt32(0,v[0],!1),d.setInt32(4,v[1],!1),d.setInt32(8,v[2],!1),d.setInt32(12,v[3],!1),d.setInt32(16,v[4],!1),u},C=function(){function R(s){if(f(this,R),s=s||64*1024,s%64>0)throw new Error("Chunk size must be a multiple of 128 bit");this._offset=0,this._maxChunkLen=s,this._padMaxChunkLen=w(s),this._heap=new ArrayBuffer(y(this._padMaxChunkLen+320+20)),this._h32=new Int32Array(this._heap),this._h8=new Int8Array(this._heap),this._core=new c({Int32Array},{},this._heap)}return R.prototype._initState=function(v,u){this._offset=0;var d=new Int32Array(v,u+320,5);d[0]=1732584193,d[1]=-271733879,d[2]=-1732584194,d[3]=271733878,d[4]=-1009589776},R.prototype._padChunk=function(v,u){var d=w(v),b=new Int32Array(this._heap,0,d>>2);return k(b,v),A(b,v,u),d},R.prototype._write=function(v,u,d,b){m(v,this._h8,this._h32,u,d,b||0)},R.prototype._coreCall=function(v,u,d,b,L){var N=d;this._write(v,u,d),L&&(N=this._padChunk(d,b)),this._core.hash(N,this._padMaxChunkLen)},R.prototype.rawDigest=function(v){var u=v.byteLength||v.length||v.size||0;this._initState(this._heap,this._padMaxChunkLen);var d=0,b=this._maxChunkLen;for(d=0;u>d+b;d+=b)this._coreCall(v,d,b,u,!1);return this._coreCall(v,d,u-d,u,!0),x(this._heap,this._padMaxChunkLen)},R.prototype.digest=function(v){return g(this.rawDigest(v).buffer)},R.prototype.digestFromString=function(v){return this.digest(v)},R.prototype.digestFromBuffer=function(v){return this.digest(v)},R.prototype.digestFromArrayBuffer=function(v){return this.digest(v)},R.prototype.resetState=function(){return this._initState(this._heap,this._padMaxChunkLen),this},R.prototype.append=function(v){var u=0,d=v.byteLength||v.length||v.size||0,b=this._offset%this._maxChunkLen,L=void 0;for(this._offset+=d;u<d;)L=Math.min(d-u,this._maxChunkLen-b),this._write(v,u,L,b),b+=L,u+=L,b===this._maxChunkLen&&(this._core.hash(this._maxChunkLen,this._padMaxChunkLen),b=0);return this},R.prototype.getState=function(){var v=this._offset%this._maxChunkLen,u=void 0;if(v)u=this._heap.slice(0);else{var d=new Int32Array(this._heap,this._padMaxChunkLen+320,5);u=d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}return{offset:this._offset,heap:u}},R.prototype.setState=function(v){if(this._offset=v.offset,v.heap.byteLength===20){var u=new Int32Array(this._heap,this._padMaxChunkLen+320,5);u.set(new Int32Array(v.heap))}else this._h32.set(new Int32Array(v.heap));return this},R.prototype.rawEnd=function(){var v=this._offset,u=v%this._maxChunkLen,d=this._padChunk(u,v);this._core.hash(d,this._padMaxChunkLen);var b=x(this._heap,this._padMaxChunkLen);return this._initState(this._heap,this._padMaxChunkLen),b},R.prototype.end=function(){return g(this.rawEnd().buffer)},R}();r.exports=C,r.exports._core=c},function(r,n){for(var o=new Array(256),f=0;f<256;f++)o[f]=(f<16?"0":"")+f.toString(16);r.exports.toHex=function(c){for(var p=new Uint8Array(c),g=new Array(c.byteLength),y=0;y<g.length;y++)g[y]=o[p[y]];return g.join("")},r.exports.ceilHeapSize=function(c){var p=0;if(c<=65536)return 65536;if(c<16777216)for(p=1;p<c;p=p<<1);else for(p=16777216;p<c;p+=16777216);return p},r.exports.isDedicatedWorkerScope=function(c){var p="WorkerGlobalScope"in c&&c instanceof c.WorkerGlobalScope,g="SharedWorkerGlobalScope"in c&&c instanceof c.SharedWorkerGlobalScope,y="ServiceWorkerGlobalScope"in c&&c instanceof c.ServiceWorkerGlobalScope;return p&&!g&&!y}},function(r,n,o){r.exports=function(){var f=o(0),c=function(y,m,w){try{return w(null,y.digest(m))}catch(k){return w(k)}},p=function(y,m,w,k,A){var x=new self.FileReader;x.onloadend=function(){if(x.error)return A(x.error);var R=x.result;m+=x.result.byteLength;try{y.append(R)}catch(s){A(s);return}m<k.size?p(y,m,w,k,A):A(null,y.end())},x.readAsArrayBuffer(k.slice(m,m+w))},g=!0;return self.onmessage=function(y){if(g){var m=y.data.data,w=y.data.file,k=y.data.id;if(!(typeof k>"u")&&!(!w&&!m)){var A=y.data.blockSize||4*1024*1024,x=new f(A);x.resetState();var C=function(R,s){R?self.postMessage({id:k,error:R.name}):self.postMessage({id:k,hash:s})};m&&c(x,m,C),w&&p(x,0,A,w,C)}}},function(){g=!1}}},function(r,n,o){var f=o(4),c=o(0),p=o(7),g=o(2),y=o(1),m=y.isDedicatedWorkerScope,w=typeof self<"u"&&m(self);c.disableWorkerBehaviour=w?g():function(){},c.createWorker=function(){var k=f(2),A=k.terminate;return k.terminate=function(){URL.revokeObjectURL(k.objectURL),A.call(k)},k},c.createHash=p,r.exports=c},function(r,n,o){function f(k){var A={};function x(R){if(A[R])return A[R].exports;var s=A[R]={i:R,l:!1,exports:{}};return k[R].call(s.exports,s,s.exports,x),s.l=!0,s.exports}x.m=k,x.c=A,x.i=function(R){return R},x.d=function(R,s,v){x.o(R,s)||Object.defineProperty(R,s,{configurable:!1,enumerable:!0,get:v})},x.r=function(R){Object.defineProperty(R,"__esModule",{value:!0})},x.n=function(R){var s=R&&R.__esModule?function(){return R.default}:function(){return R};return x.d(s,"a",s),s},x.o=function(R,s){return Object.prototype.hasOwnProperty.call(R,s)},x.p="/",x.oe=function(R){throw console.error(R),R};var C=x(x.s=ENTRY_MODULE);return C.default||C}var c="[\\.|\\-|\\+|\\w|/|@]+",p="\\((/\\*.*?\\*/)?s?.*?("+c+").*?\\)";function g(k){return(k+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function y(k,A,x){var C={};C[x]=[];var R=A.toString(),s=R.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return C;for(var v=s[1],u=new RegExp("(\\\\n|\\W)"+g(v)+p,"g"),d;d=u.exec(R);)d[3]!=="dll-reference"&&C[x].push(d[3]);for(u=new RegExp("\\("+g(v)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+p,"g");d=u.exec(R);)k[d[2]]||(C[x].push(d[1]),k[d[2]]=o(d[1]).m),C[d[2]]=C[d[2]]||[],C[d[2]].push(d[4]);return C}function m(k){var A=Object.keys(k);return A.reduce(function(x,C){return x||k[C].length>0},!1)}function w(k,A){for(var x={main:[A]},C={main:[]},R={main:{}};m(x);)for(var s=Object.keys(x),v=0;v<s.length;v++){var u=s[v],d=x[u],b=d.pop();if(R[u]=R[u]||{},!(R[u][b]||!k[u][b])){R[u][b]=!0,C[u]=C[u]||[],C[u].push(b);for(var L=y(k,k[u][b],u),N=Object.keys(L),P=0;P<N.length;P++)x[N[P]]=x[N[P]]||[],x[N[P]]=x[N[P]].concat(L[N[P]])}}return C}r.exports=function(k,A){A=A||{};var x={main:o.m},C=A.all?{main:Object.keys(x)}:w(x,k),R="";Object.keys(C).filter(function(b){return b!=="main"}).forEach(function(b){for(var L=0;C[b][L];)L++;C[b].push(L),x[b][L]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",R=R+"var "+b+" = ("+f.toString().replace("ENTRY_MODULE",JSON.stringify(L))+")({"+C[b].map(function(N){return""+JSON.stringify(N)+": "+x[b][N].toString()}).join(",")+`});
`}),R=R+"("+f.toString().replace("ENTRY_MODULE",JSON.stringify(k))+")({"+C.main.map(function(b){return""+JSON.stringify(b)+": "+x.main[b].toString()}).join(",")+"})(self);";var s=new window.Blob([R],{type:"text/javascript"});if(A.bare)return s;var v=window.URL||window.webkitURL||window.mozURL||window.msURL,u=v.createObjectURL(s),d=new window.Worker(u);return d.objectURL=u,d}},function(r,n){r.exports=function(f,c,p){var g=new f.Int32Array(p);function y(m,w){m=m|0,w=w|0;var k=0,A=0,x=0,C=0,R=0,s=0,v=0,u=0,d=0,b=0,L=0,N=0,P=0,I=0;for(x=g[w+320>>2]|0,R=g[w+324>>2]|0,v=g[w+328>>2]|0,d=g[w+332>>2]|0,L=g[w+336>>2]|0,k=0;(k|0)<(m|0);k=k+64|0){for(C=x,s=R,u=v,b=d,N=L,A=0;(A|0)<64;A=A+4|0)I=g[k+A>>2]|0,P=((x<<5|x>>>27)+(R&v|~R&d)|0)+((I+L|0)+1518500249|0)|0,L=d,d=v,v=R<<30|R>>>2,R=x,x=P,g[m+A>>2]=I;for(A=m+64|0;(A|0)<(m+80|0);A=A+4|0)I=(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])<<1|(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])>>>31,P=((x<<5|x>>>27)+(R&v|~R&d)|0)+((I+L|0)+1518500249|0)|0,L=d,d=v,v=R<<30|R>>>2,R=x,x=P,g[A>>2]=I;for(A=m+80|0;(A|0)<(m+160|0);A=A+4|0)I=(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])<<1|(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])>>>31,P=((x<<5|x>>>27)+(R^v^d)|0)+((I+L|0)+1859775393|0)|0,L=d,d=v,v=R<<30|R>>>2,R=x,x=P,g[A>>2]=I;for(A=m+160|0;(A|0)<(m+240|0);A=A+4|0)I=(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])<<1|(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])>>>31,P=((x<<5|x>>>27)+(R&v|R&d|v&d)|0)+((I+L|0)-1894007588|0)|0,L=d,d=v,v=R<<30|R>>>2,R=x,x=P,g[A>>2]=I;for(A=m+240|0;(A|0)<(m+320|0);A=A+4|0)I=(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])<<1|(g[A-12>>2]^g[A-32>>2]^g[A-56>>2]^g[A-64>>2])>>>31,P=((x<<5|x>>>27)+(R^v^d)|0)+((I+L|0)-899497514|0)|0,L=d,d=v,v=R<<30|R>>>2,R=x,x=P,g[A>>2]=I;x=x+C|0,R=R+s|0,v=v+u|0,d=d+b|0,L=L+N|0}g[w+320>>2]=x,g[w+324>>2]=R,g[w+328>>2]=v,g[w+332>>2]=d,g[w+336>>2]=L}return{hash:y}}},function(r,n){var o=this,f=void 0;typeof self<"u"&&typeof self.FileReaderSync<"u"&&(f=new self.FileReaderSync);var c=function(y,m,w,k,A,x){var C=void 0,R=x%4,s=(A+R)%4,v=A-s;switch(R){case 0:m[x]=y.charCodeAt(k+3);case 1:m[x+1-(R<<1)|0]=y.charCodeAt(k+2);case 2:m[x+2-(R<<1)|0]=y.charCodeAt(k+1);case 3:m[x+3-(R<<1)|0]=y.charCodeAt(k)}if(!(A<s+(4-R))){for(C=4-R;C<v;C=C+4|0)w[x+C>>2]=y.charCodeAt(k+C)<<24|y.charCodeAt(k+C+1)<<16|y.charCodeAt(k+C+2)<<8|y.charCodeAt(k+C+3);switch(s){case 3:m[x+v+1|0]=y.charCodeAt(k+v+2);case 2:m[x+v+2|0]=y.charCodeAt(k+v+1);case 1:m[x+v+3|0]=y.charCodeAt(k+v)}}},p=function(y,m,w,k,A,x){var C=void 0,R=x%4,s=(A+R)%4,v=A-s;switch(R){case 0:m[x]=y[k+3];case 1:m[x+1-(R<<1)|0]=y[k+2];case 2:m[x+2-(R<<1)|0]=y[k+1];case 3:m[x+3-(R<<1)|0]=y[k]}if(!(A<s+(4-R))){for(C=4-R;C<v;C=C+4|0)w[x+C>>2|0]=y[k+C]<<24|y[k+C+1]<<16|y[k+C+2]<<8|y[k+C+3];switch(s){case 3:m[x+v+1|0]=y[k+v+2];case 2:m[x+v+2|0]=y[k+v+1];case 1:m[x+v+3|0]=y[k+v]}}},g=function(y,m,w,k,A,x){var C=void 0,R=x%4,s=(A+R)%4,v=A-s,u=new Uint8Array(f.readAsArrayBuffer(y.slice(k,k+A)));switch(R){case 0:m[x]=u[3];case 1:m[x+1-(R<<1)|0]=u[2];case 2:m[x+2-(R<<1)|0]=u[1];case 3:m[x+3-(R<<1)|0]=u[0]}if(!(A<s+(4-R))){for(C=4-R;C<v;C=C+4|0)w[x+C>>2|0]=u[C]<<24|u[C+1]<<16|u[C+2]<<8|u[C+3];switch(s){case 3:m[x+v+1|0]=u[v+2];case 2:m[x+v+2|0]=u[v+1];case 1:m[x+v+3|0]=u[v]}}};r.exports=function(y,m,w,k,A,x){if(typeof y=="string")return c(y,m,w,k,A,x);if(y instanceof Array||o&&o.Buffer&&o.Buffer.isBuffer(y))return p(y,m,w,k,A,x);if(y instanceof ArrayBuffer)return p(new Uint8Array(y),m,w,k,A,x);if(y.buffer instanceof ArrayBuffer)return p(new Uint8Array(y.buffer,y.byteOffset,y.byteLength),m,w,k,A,x);if(y instanceof Blob)return g(y,m,w,k,A,x);throw new Error("Unsupported data type.")}},function(r,n,o){var f=function(){function w(k,A){for(var x=0;x<A.length;x++){var C=A[x];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,A,x){return A&&w(k.prototype,A),x&&w(k,x),k}}();function c(w,k){if(!(w instanceof k))throw new TypeError("Cannot call a class as a function")}var p=o(0),g=o(1),y=g.toHex,m=function(){function w(){c(this,w),this._rusha=new p,this._rusha.resetState()}return w.prototype.update=function(A){return this._rusha.append(A),this},w.prototype.digest=function(A){var x=this._rusha.rawEnd().buffer;if(!A)return x;if(A==="hex")return y(x);throw new Error("unsupported digest encoding")},f(w,[{key:"state",get:function(){return this._rusha.getState()},set:function(k){this._rusha.setState(k)}}]),w}();r.exports=function(){return new m}}])})})(kf);var Ua=kf.exports,Oc=Ua,Ic=new Oc,Ro=typeof window<"u"?window:self,xo=Ro.crypto||Ro.msCrypto||{},fr=xo.subtle||xo.webkitSubtle;function Ki(e){return Ic.digest(e)}try{fr.digest({name:"sha-1"},new Uint8Array).catch(function(){fr=!1})}catch{fr=!1}function Pc(e,t){if(!fr){setTimeout(t,0,Ki(e));return}typeof e=="string"&&(e=Nc(e)),fr.digest({name:"sha-1"},e).then(function(n){t(Dc(new Uint8Array(n)))},function(n){t(Ki(e))})}function Nc(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function Dc(e){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];r.push((o>>>4).toString(16)),r.push((o&15).toString(16))}return r.join("")}Fa.exports=Pc;Fa.exports.sync=Ki;var nn=Fa.exports;function Fc(e,t){for(var r=1,n=e.length,o=e[0],f=e[0],c=1;c<n;++c)if(f=o,o=e[c],t(o,f)){if(c===r){r++;continue}e[r++]=o}return e.length=r,e}function Uc(e){for(var t=1,r=e.length,n=e[0],o=e[0],f=1;f<r;++f,o=n)if(o=n,n=e[f],n!==o){if(f===t){t++;continue}e[t++]=n}return e.length=t,e}function $c(e,t,r){return e.length===0?e:t?(r||e.sort(t),Fc(e,t)):(r||e.sort(),Uc(e))}var Af=$c;const Yi=en,jc=mc,To=de,Co=Pa,Dr=Bc,ko=de,Wc=nn,Ao=Af;Er.exports=Xi;Er.exports.remote=qc;Er.exports.toMagnetURI=Dr.encode;Er.exports.toTorrentFile=zc;function Xi(e){if(typeof e=="string"&&/^(stream-)?magnet:/.test(e))return Dr(e);if(typeof e=="string"&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return Dr(`magnet:?xt=urn:btih:${e}`);if(Buffer.isBuffer(e)&&e.length===20)return Dr(`magnet:?xt=urn:btih:${e.toString("hex")}`);if(Buffer.isBuffer(e))return Hc(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),typeof e.announce=="string"&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}function qc(e,t){let r;if(typeof t!="function")throw new Error("second argument must be a Function");try{r=Xi(e)}catch{}r&&r.infoHash?process.nextTick(()=>{t(null,r)}):Gc(e)?jc(e,(o,f)=>{if(o)return t(new Error(`Error converting Blob: ${o.message}`));n(f)}):typeof Co=="function"&&/^https?:/.test(e)?Co.concat({url:e,timeout:30*1e3,headers:{"user-agent":"WebTorrent (https://webtorrent.io)"}},(o,f,c)=>{if(o)return t(new Error(`Error downloading torrent: ${o.message}`));n(c)}):typeof To.readFile=="function"&&typeof e=="string"?To.readFile(e,(o,f)=>{if(o)return t(new Error("Invalid torrent identifier"));n(f)}):process.nextTick(()=>{t(new Error("Invalid torrent identifier"))});function n(o){try{r=Xi(o)}catch(f){return t(f)}r&&r.infoHash?t(null,r):t(new Error("Invalid torrent identifier"))}}function Hc(e){Buffer.isBuffer(e)&&(e=Yi.decode(e)),Rt(e.info,"info"),Rt(e.info["name.utf-8"]||e.info.name,"info.name"),Rt(e.info["piece length"],"info['piece length']"),Rt(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(o=>{Rt(typeof o.length=="number","info.files[0].length"),Rt(o["path.utf-8"]||o.path,"info.files[0].path")}):Rt(typeof e.info.length=="number","info.length");const t={info:e.info,infoBuffer:Yi.encode(e.info),name:(e.info["name.utf-8"]||e.info.name).toString(),announce:[]};t.infoHash=Wc.sync(t.infoBuffer),t.infoHashBuffer=Buffer.from(t.infoHash,"hex"),e.info.private!==void 0&&(t.private=!!e.info.private),e["creation date"]&&(t.created=new Date(e["creation date"]*1e3)),e["created by"]&&(t.createdBy=e["created by"].toString()),Buffer.isBuffer(e.comment)&&(t.comment=e.comment.toString()),Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach(o=>{o.forEach(f=>{t.announce.push(f.toString())})}):e.announce&&t.announce.push(e.announce.toString()),Buffer.isBuffer(e["url-list"])&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]),t.urlList=(e["url-list"]||[]).map(o=>o.toString()),Ao(t.announce),Ao(t.urlList);const r=e.info.files||[e.info];t.files=r.map((o,f)=>{const c=[].concat(t.name,o["path.utf-8"]||o.path||[]).map(p=>p.toString());return{path:ko.join.apply(null,[ko.sep].concat(c)).slice(1),name:c[c.length-1],length:o.length,offset:r.slice(0,f).reduce(Lo,0)}}),t.length=r.reduce(Lo,0);const n=t.files[t.files.length-1];return t.pieceLength=e.info["piece length"],t.lastPieceLength=(n.offset+n.length)%t.pieceLength||t.pieceLength,t.pieces=Vc(e.info.pieces),t}function zc(e){const t={info:e.info};return t["announce-list"]=(e.announce||[]).map(r=>(t.announce||(t.announce=r),r=Buffer.from(r,"utf8"),[r])),t["url-list"]=e.urlList||[],e.private!==void 0&&(t.private=Number(e.private)),e.created&&(t["creation date"]=e.created.getTime()/1e3|0),e.createdBy&&(t["created by"]=e.createdBy),e.comment&&(t.comment=e.comment),Yi.encode(t)}function Gc(e){return typeof Blob<"u"&&e instanceof Blob}function Lo(e,t){return e+t.length}function Vc(e){const t=[];for(let r=0;r<e.length;r+=20)t.push(e.slice(r,r+20).toString("hex"));return t}function Rt(e,t){if(!e)throw new Error(`Torrent is missing required field: ${t}`)}Buffer.alloc(0);var an=Er.exports,$a=Kc;function Kc(e){var t,r,n;if(e!=null&&typeof e!="function")throw new Error("cb must be a function");e==null&&typeof Promise<"u"&&(t=new Promise(function(f,c){r=f,n=c}));function o(f,c){if(t)f?n(f):r(c);else if(e)e(f,c);else if(f)throw f}return o.promise=t,o}var ja=Me,Lf=xe.EventEmitter,Yc=oe,Fe=$a,jt=typeof window>"u"?self:window,Ji=jt.indexedDB||jt.mozIndexedDB||jt.webkitIndexedDB||jt.msIndexedDB;Me.INDEXEDDB_SUPPORT=Ji!=null;Me.BROADCAST_SUPPORT=jt.BroadcastChannel!=null;Yc(Me,Lf);function Me(e,t,r){var n=this;if(typeof e!="string")throw new Error("A name must be supplied of type string");if(!Ji)throw new Error("IndexedDB not supported");if(typeof t=="function")return new Me(e,null,t);if(!(n instanceof Me))return new Me(e,t,r);if(t||(t={}),Lf.call(n),n._db=null,n._closed=!1,n._channel=null,n._waiters=[],t.disableBroadcast!==!0){var o=t.channel||jt.BroadcastChannel;o&&(n._channel=new o(e),n._channel.onmessage=k)}var f=Ji.open(e);f.onerror=c,f.onsuccess=g,f.onupgradeneeded=y,n.on("newListener",w);function c(A){We(A),n._close(A.target.error),r&&r(A.target.error)}function p(A){We(A),n._close(A.target.error)}function g(A){if(n._closed)A.target.result.close();else{n._db=A.target.result,n._db.onclose=m,n._db.onerror=p;for(var x in n._waiters)n._waiters[x]._init(null);n._waiters=null,r&&r(null),n.emit("open")}}function y(A){var x=A.target.result;x.createObjectStore("kv",{autoIncrement:!0})}function m(){n._close()}function w(A){if(!(A!=="add"&&A!=="set"&&A!=="remove")&&!n._channel)return n.emit("error",new Error("No BroadcastChannel support"))}function k(A){A.data.method==="add"?n.emit("add",A.data):A.data.method==="set"?n.emit("set",A.data):A.data.method==="remove"&&n.emit("remove",A.data)}}Me.prototype.get=function(e,t){return this.transaction("readonly").get(e,t)};Me.prototype.getMultiple=function(e,t){return this.transaction("readonly").getMultiple(e,t)};Me.prototype.set=function(e,t,r){r=Fe(r);var n=null,o=this.transaction("readwrite",function(f){n=n||f,r(n)});return o.set(e,t,function(f){n=f}),r.promise};Me.prototype.json=function(e,t){return this.transaction("readonly").json(e,t)};Me.prototype.keys=function(e,t){return this.transaction("readonly").keys(e,t)};Me.prototype.values=function(e,t){return this.transaction("readonly").values(e,t)};Me.prototype.remove=function(e,t){t=Fe(t);var r=null,n=this.transaction("readwrite",function(o){r=r||o,t(r)});return n.remove(e,function(o){r=o}),t.promise};Me.prototype.clear=function(e){e=Fe(e);var t=null,r=this.transaction("readwrite",function(n){t=t||n,e(t)});return r.clear(function(n){t=n}),e.promise};Me.prototype.count=function(e,t){return this.transaction("readonly").count(e,t)};Me.prototype.add=function(e,t,r){r=Fe(r);var n=null,o=this.transaction("readwrite",function(f){n=n||f,r(n)});return o.add(e,t,function(f){n=f}),r.promise};Me.prototype.iterator=function(e,t){return this.transaction("readonly").iterator(e,t)};Me.prototype.transaction=function(e,t){if(this._closed)throw new Error("Database is closed");var r=new Ne(this,e,t);return this._db?r._init(null):this._waiters.push(r),r};Me.prototype.close=function(){this._close()};Me.prototype._close=function(e){if(!this._closed){this._closed=!0,this._db&&this._db.close(),this._channel&&this._channel.close(),this._db=null,this._channel=null,e&&this.emit("error",e),this.emit("close");for(var t in this._waiters)this._waiters[t]._init(e||new Error("Database is closed"));this._waiters=null,this.removeAllListeners()}};function Ne(e,t,r){if(typeof t=="function")return new Ne(e,null,t);if(this._kvStore=e,this._mode=t||"readwrite",this._objectStore=null,this._waiters=null,this.finished=!1,this.onfinish=Fe(r),this.done=this.onfinish.promise,this._mode!=="readonly"&&this._mode!=="readwrite")throw new Error('mode must be either "readonly" or "readwrite"')}Ne.prototype._init=function(e){var t=this;if(t.finished)return;if(e)return t._close(e);var r=t._kvStore._db.transaction("kv",t._mode);r.oncomplete=o,r.onerror=f,r.onabort=f,t._objectStore=r.objectStore("kv");for(var n in t._waiters)t._waiters[n](null,t._objectStore);t._waiters=null;function o(){t._close(null)}function f(c){We(c),t._close(c.target.error)}};Ne.prototype._getObjectStore=function(e){if(this.finished)throw new Error("Transaction is finished");if(this._objectStore)return e(null,this._objectStore);this._waiters=this._waiters||[],this._waiters.push(e)};Ne.prototype.set=function(e,t,r){var n=this;if(e==null||t==null)throw new Error("A key and value must be given");return r=Fe(r),n._getObjectStore(function(o,f){if(o)return r(o);try{var c=f.put(t,e)}catch(p){return r(p)}c.onerror=We.bind(this,r),c.onsuccess=function(){n._kvStore._channel&&n._kvStore._channel.postMessage({method:"set",key:e,value:t}),r(null)}}),r.promise};Ne.prototype.add=function(e,t,r){var n=this;if(t==null&&e!=null)return n.add(void 0,e,r);if(typeof t=="function"||t==null&&r==null)return n.add(void 0,e,t);if(t==null)throw new Error("A value must be provided as an argument");return r=Fe(r),n._getObjectStore(function(o,f){if(o)return r(o);try{var c=e==null?f.add(t):f.add(t,e)}catch(p){return r(p)}c.onerror=We.bind(this,r),c.onsuccess=function(){n._kvStore._channel&&n._kvStore._channel.postMessage({method:"add",key:e,value:t}),r(null)}}),r.promise};Ne.prototype.get=function(e,t){var r=this;if(e==null)throw new Error("A key must be given as an argument");return t=Fe(t),r._getObjectStore(function(n,o){if(n)return t(n);try{var f=o.get(e)}catch(c){return t(c)}f.onerror=We.bind(this,t),f.onsuccess=function(c){t(null,c.target.result)}}),t.promise};Ne.prototype.getMultiple=function(e,t){var r=this;if(e==null)throw new Error("An array of keys must be given as an argument");return t=Fe(t),e.length===0?(t(null,[]),t.promise):(r._getObjectStore(function(n,o){if(n)return t(n);var f=e.slice().sort(),c=0,p={},g=function(){return e.map(function(m){return p[m]})},y=o.openCursor();y.onerror=We.bind(this,t),y.onsuccess=function(m){var w=m.target.result;if(!w){t(null,g());return}for(var k=w.key;k>f[c];)if(++c,c===f.length){t(null,g());return}k===f[c]?(p[k]=w.value,w.continue()):w.continue(f[c])}}),t.promise)};Ne.prototype.json=function(e,t){var r=this;if(typeof e=="function")return r.json(null,e);t=Fe(t);var n={};return r.iterator(e,function(o,f){if(o)return t(o);f?(n[f.key]=f.value,f.continue()):t(null,n)}),t.promise};Ne.prototype.keys=function(e,t){var r=this;if(typeof e=="function")return r.keys(null,e);t=Fe(t);var n=[];return r.iterator(e,function(o,f){if(o)return t(o);f?(n.push(f.key),f.continue()):t(null,n)}),t.promise};Ne.prototype.values=function(e,t){var r=this;if(typeof e=="function")return r.values(null,e);t=Fe(t);var n=[];return r.iterator(e,function(o,f){if(o)return t(o);f?(n.push(f.value),f.continue()):t(null,n)}),t.promise};Ne.prototype.remove=function(e,t){var r=this;if(e==null)throw new Error("A key must be given as an argument");return t=Fe(t),r._getObjectStore(function(n,o){if(n)return t(n);try{var f=o.delete(e)}catch(c){return t(c)}f.onerror=We.bind(this,t),f.onsuccess=function(){r._kvStore._channel&&r._kvStore._channel.postMessage({method:"remove",key:e}),t(null)}}),t.promise};Ne.prototype.clear=function(e){var t=this;return e=Fe(e),t._getObjectStore(function(r,n){if(r)return e(r);try{var o=n.clear()}catch(f){return e(f)}o.onerror=We.bind(this,e),o.onsuccess=function(){e(null)}}),e.promise};Ne.prototype.count=function(e,t){var r=this;return typeof e=="function"?r.count(null,e):(t=Fe(t),r._getObjectStore(function(n,o){if(n)return t(n);try{var f=e==null?o.count():o.count(e)}catch(c){return t(c)}f.onerror=We.bind(this,t),f.onsuccess=function(c){t(null,c.target.result)}}),t.promise)};Ne.prototype.iterator=function(e,t){var r=this;if(typeof e=="function")return r.iterator(null,e);if(typeof t!="function")throw new Error("A function must be given");r._getObjectStore(function(n,o){if(n)return t(n);try{var f=e==null?o.openCursor():o.openCursor(e)}catch(c){return t(c)}f.onerror=We.bind(this,t),f.onsuccess=function(c){var p=c.target.result;t(null,p)}})};Ne.prototype.abort=function(){if(this.finished)throw new Error("Transaction is finished");this._objectStore&&this._objectStore.transaction.abort(),this._close(new Error("Transaction aborted"))};Ne.prototype._close=function(e){if(!this.finished){this.finished=!0,this._kvStore=null,this._objectStore=null;for(var t in this._waiters)this._waiters[t](e||new Error("Transaction is finished"));this._waiters=null,this.onfinish&&this.onfinish(e),this.onfinish=null}};function We(e,t){if(t==null)return We(null,e);t.preventDefault(),t.stopPropagation(),e&&e(t.target.error)}var Xc=Ue,Zi=ja,Jc=oe,Mf=xe.EventEmitter;Ue.SUPPORT=Zi.INDEXEDDB_SUPPORT&&Zi.BROADCAST_SUPPORT;Jc(Ue,Mf);function Ue(e,t){var r=this;if(!Ue.SUPPORT)throw new Error("No indexDB or BroadcastChannel support");if(typeof e>"u")throw new Error('"name" cannot be undefined');if(!(r instanceof Ue))return new Ue(e);Mf.call(r),r.isLeader=!1,r.destroyed=!1,r._locking=!1,r._db=new Zi("tab-elect-"+e),r._db.on("remove",n),r._db.on("error",o),r._db.on("close",f),addEventListener("beforeunload",c),r.elect();function n(p){r._onDbRemove(p)}function o(p){r._destroy(p)}function f(){r._destroy(new Error("IDB database unexpectedly closed"))}function c(){r._destroy()}}Ue.prototype.elect=function(e){var t=this;if(e=e||Wa,t.destroyed)throw new Error("Already destroyed");if(t.isLeader)throw new Error("Already the leader");if(t._locking)return setTimeout(e,0,null,!1);t._db.remove("lock").then(function(){return t._lock(e)}).catch(function(r){e(r)})};Ue.prototype._lock=function(e){var t=this;if(e=e||Wa,!t.destroyed)return t._locking?e(null,!1):(t._locking=!0,t._db.add("lock",!0).then(function(){if(t._locking=!1,t.isLeader=!0,t.destroyed)return t._destroyDB();e(null,!0),t.emit("elected")}).catch(function(r){if(t._locking=!1,t.destroyed)return t._destroyDB();r.name==="ConstraintError"?e(null,!1):e(r)}))};Ue.prototype.stepDown=function(){if(this.destroyed)throw new Error("Already destroyed");if(!this.isLeader)throw new Error("Can not step down when not the leader");this._db.remove("lock",Wa),this._onDepose()};Ue.prototype._onDepose=function(){this.isLeader=!1,this.emit("deposed")};Ue.prototype._onDbRemove=function(e){this.destroyed||e.key!=="lock"||(this.isLeader?this._onDepose():this._lock())};Ue.prototype.destroy=function(){this._destroy()};Ue.prototype._destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.removeAllListeners(),this._destroyDB(),self.isLeader=!1)};Ue.prototype._destroyDB=function(){var e=this;if(!e._db)return;e.isLeader?this._db.remove("lock",t):e.locking||t();function t(){e._db.close(),e._db=null}};function Wa(){}var Zc=et,Qc=ja;function et(e,t,r){var n=this;if(typeof e!="number")throw new Error("chunkLength must be a number");if(typeof t=="function")return et(e,null,t);if(!(n instanceof et))return new et(e,t,r);t||(t={}),n.chunkLength=e,n.length=Number(t.length)||1/0,n.closed=!1,n._groupPutDelay=t.groupPutDelay||10,n._groupPutCallbacks=[],n._groupPutData={},n._groupPutTimeout=null,n._lastGroupPut=0,n.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,n.lastChunkIndex=Math.ceil(n.length/n.chunkLength)-1);var o=t.name||""+Math.round(9e16*Math.random());t.torrent&&t.torrent.infoHash&&(o=t.torrent.infoHash),n._store=new Qc(o,r),n._store.on("close",f),n._store.on("error",c);function f(){n._close(new Error("IndexedDB database unexpectedly closed"))}function c(p){n._close(p)}}et.prototype.put=function(e,t,r){var n=this;if(n.closed)throw new Error("Store is closed");if(typeof e!="number")throw new Error("index must be a number");Buffer.isBuffer(t)||(t=Buffer.from(t));var o=e===n.lastChunkIndex,f=o&&t.length!==n.lastChunkLength||!o&&t.length!==n.chunkLength;if(f)return Bf(r,new Error("Invalid buffer length"));n._groupPutData[e]=t,r&&n._groupPutCallbacks.push(r),n._lastGroupPut+n._groupPutDelay<Date.now()?n._groupPut():n._groupPutTimeout==null&&(n._groupPutTimeout=setTimeout(n._groupPut.bind(n),n._groupPutDelay))};et.prototype._groupPut=function(){var e=this;if(!e.closed){var t=e._groupPutCallbacks,r=e._groupPutData;e._groupPutCallbacks=[],e._groupPutData={},e._lastGroupPut=Date.now(),e._groupPutTimeout!=null&&clearTimeout(e._groupPutTimeout),e._groupPutTimeout=null;var n=e._store.transaction("readwrite");for(var o in r)n.set(Number(o),r[o],Of);n.onfinish=function(f){for(var c in t)t[c](f)}}};et.prototype.get=function(e,t,r){var n=this;if(typeof t=="function")return n.get(e,null,t);if(typeof r!="function")throw new Error("cb must be a function");if(n.closed)throw new Error("Store is closed");if(typeof e!="number")throw new Error("index must be a number");t||(t={}),n._store.get(e,function(o,f){if(o)return r(o);if(typeof f>"u"){var c=new Error("Chunk does not exist");return c.name="MissingChunkError",r(c)}var p="offset"in t?t.offset:0,g="length"in t?t.length:f.length-p;r(null,Buffer.from(f).slice(p,p+g))})};et.prototype.close=function(e){this._close(),Bf(e,null)};et.prototype._close=function(e){if(!this.closed){this.closed=!0,this._store.close(),this._store=null,this._groupPutData=null,clearTimeout(this._groupPutTimeout),e=e||new Error("Store is closed");for(var t in this._groupPutCallbacks)this._groupPutCallbacks[t](e);this._groupPutCallbacks=null}};et.prototype.destroy=function(e){var t=this;if(t.closed)throw new Error("Store is closed");t._store.clear(Of),t.close(e)};function Bf(){arguments[0]!=null&&process.nextTick.apply(this,arguments)}function Of(){}var eh=wt,on=xe.EventEmitter,If=oe,Pf=ja,th=Zc;If(wt,on);function wt(e){on.call(this);var t=this;t._namespace=e,t._store=new Pf(e+"-torrents"),t._store.on("set",function(r){t.emit("add",r.value)})}wt.prototype.add=function(e,t,r){if(!this._store)throw new Error("Database is closed");this._store.set(e,t,r)};wt.prototype.remove=function(e,t){if(!this._store)throw new Error("Database is closed");this._store.remove(e,t)};wt.prototype.getAll=function(e){if(!this._store)throw new Error("Database is closed");this._store.values(e)};wt.prototype.updateMeta=function(e,t,r){var n=this;if(!n._store)throw new Error("Database is closed");var o=n._store.transaction();o.get(e,function(f,c){if(f)return r(f);c||r(new Error("Torrent does not exist")),c.torrentMetaBuffer=t,o.set(e,c,function(p){p?r&&r(p):(n.emit("add",c),r&&r(null))})})};wt.prototype.connectTorrentDB=function(e){return new ze(this,this._namespace,e)};wt.prototype.close=function(){this._store&&(this._store.close(),this._store=null,this.removeAllListeners())};If(ze,on);function ze(e,t,r){var n=this;on.call(n),n.closed=!1,n._torrentStore=e,n._infoHash=r,n._priorityDbName=t+"-priority-"+r,n._chunkStoreDbName=t+"-data-"+r,n._priority=new Pf(n._priorityDbName),n._priority.on("add",o);function o(f){n.emit("priority",f.value)}}ze.prototype.updateMeta=function(e,t){if(this.closed)throw new Error("Torrent database is closed");this._torrentStore.updateMeta(this._infoHash,e,t)};ze.prototype.getPriorities=function(e){if(this.closed)throw new Error("Torrent database is closed");this._priority.values(e)};ze.prototype.addPriority=function(e,t,r,n){if(this.closed)throw new Error("Torrent database is closed");if(typeof r=="function")return this.addPriority(e,t,null,r);this._setPriority("select",e,t,r,n)};ze.prototype.removePriority=function(e,t,r,n){if(this.closed)throw new Error("Torrent database is closed");if(typeof r=="function")return this.removePriority(e,t,null,r);this._setPriority("deselect",e,t,r,n)};ze.prototype.critical=function(e,t,r){if(this.closed)throw new Error("Torrent database is closed");this._setPriority("critical",e,t,r)};ze.prototype._setPriority=function(e,t,r,n,o){if(this.closed)throw new Error("Torrent database is closed");n=n||1;var f={type:e,start:t,end:r,priority:n};this._priority.add(f,o),this.emit("priority",f)};ze.prototype.removeAllPriorities=function(e){if(this.closed)throw new Error("Torrent database is closed");this._priority.clear(e)};ze.prototype.createChunkStore=function(e,t){if(this.closed)throw new Error("Torrent database is closed");var r={};for(var n in t)r[n]=t[n];return r.name=this._chunkStoreDbName,delete r.torrent,new th(e,r)};ze.prototype.close=function(){this.closed||(this.closed=!0,this._priority.close(),this._priority=null,this._torrentStore=null,this.removeAllListeners())};ze.prototype.destroy=function(){this.close(),indexedDB.deleteDatabase(this._priorityDbName),indexedDB.deleteDatabase(this._chunkStoreDbName)};var Qi={exports:{}},ea={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?ea.exports={nextTick:rh}:ea.exports=process;function rh(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,f,c;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(f=new Array(o-1),c=0;c<f.length;)f[c++]=arguments[c];return process.nextTick(function(){e.apply(null,f)})}}var sn=ea.exports,nh={}.toString,ih=Array.isArray||function(e){return nh.call(e)=="[object Array]"},Nf=xe.EventEmitter,ta={exports:{}},Te={},ln={};ln.byteLength=sh;ln.toByteArray=fh;ln.fromByteArray=ch;var Qe=[],je=[],ah=typeof Uint8Array<"u"?Uint8Array:Array,Bn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ft=0,oh=Bn.length;Ft<oh;++Ft)Qe[Ft]=Bn[Ft],je[Bn.charCodeAt(Ft)]=Ft;je["-".charCodeAt(0)]=62;je["_".charCodeAt(0)]=63;function Df(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function sh(e){var t=Df(e),r=t[0],n=t[1];return(r+n)*3/4-n}function lh(e,t,r){return(t+r)*3/4-r}function fh(e){var t,r=Df(e),n=r[0],o=r[1],f=new ah(lh(e,n,o)),c=0,p=o>0?n-4:n,g;for(g=0;g<p;g+=4)t=je[e.charCodeAt(g)]<<18|je[e.charCodeAt(g+1)]<<12|je[e.charCodeAt(g+2)]<<6|je[e.charCodeAt(g+3)],f[c++]=t>>16&255,f[c++]=t>>8&255,f[c++]=t&255;return o===2&&(t=je[e.charCodeAt(g)]<<2|je[e.charCodeAt(g+1)]>>4,f[c++]=t&255),o===1&&(t=je[e.charCodeAt(g)]<<10|je[e.charCodeAt(g+1)]<<4|je[e.charCodeAt(g+2)]>>2,f[c++]=t>>8&255,f[c++]=t&255),f}function uh(e){return Qe[e>>18&63]+Qe[e>>12&63]+Qe[e>>6&63]+Qe[e&63]}function dh(e,t,r){for(var n,o=[],f=t;f<r;f+=3)n=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),o.push(uh(n));return o.join("")}function ch(e){for(var t,r=e.length,n=r%3,o=[],f=16383,c=0,p=r-n;c<p;c+=f)o.push(dh(e,c,c+f>p?p:c+f));return n===1?(t=e[r-1],o.push(Qe[t>>2]+Qe[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(Qe[t>>10]+Qe[t>>4&63]+Qe[t<<2&63]+"=")),o.join("")}var qa={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qa.read=function(e,t,r,n,o){var f,c,p=o*8-n-1,g=(1<<p)-1,y=g>>1,m=-7,w=r?o-1:0,k=r?-1:1,A=e[t+w];for(w+=k,f=A&(1<<-m)-1,A>>=-m,m+=p;m>0;f=f*256+e[t+w],w+=k,m-=8);for(c=f&(1<<-m)-1,f>>=-m,m+=n;m>0;c=c*256+e[t+w],w+=k,m-=8);if(f===0)f=1-y;else{if(f===g)return c?NaN:(A?-1:1)*(1/0);c=c+Math.pow(2,n),f=f-y}return(A?-1:1)*c*Math.pow(2,f-n)};qa.write=function(e,t,r,n,o,f){var c,p,g,y=f*8-o-1,m=(1<<y)-1,w=m>>1,k=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:f-1,x=n?1:-1,C=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,c=m):(c=Math.floor(Math.log(t)/Math.LN2),t*(g=Math.pow(2,-c))<1&&(c--,g*=2),c+w>=1?t+=k/g:t+=k*Math.pow(2,1-w),t*g>=2&&(c++,g/=2),c+w>=m?(p=0,c=m):c+w>=1?(p=(t*g-1)*Math.pow(2,o),c=c+w):(p=t*Math.pow(2,w-1)*Math.pow(2,o),c=0));o>=8;e[r+A]=p&255,A+=x,p/=256,o-=8);for(c=c<<o|p,y+=o;y>0;e[r+A]=c&255,A+=x,c/=256,y-=8);e[r+A-x]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ln,r=qa,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=p,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,p.TYPED_ARRAY_SUPPORT=f(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const B=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(B,S),B.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function c(B){if(B>o)throw new RangeError('The value "'+B+'" is invalid for option "size"');const S=new Uint8Array(B);return Object.setPrototypeOf(S,p.prototype),S}function p(B,S,T){if(typeof B=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(B)}return g(B,S,T)}p.poolSize=8192;function g(B,S,T){if(typeof B=="string")return k(B,S);if(ArrayBuffer.isView(B))return x(B);if(B==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B);if(we(B,ArrayBuffer)||B&&we(B.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(B,SharedArrayBuffer)||B&&we(B.buffer,SharedArrayBuffer)))return C(B,S,T);if(typeof B=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=B.valueOf&&B.valueOf();if(U!=null&&U!==B)return p.from(U,S,T);const W=R(B);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof B[Symbol.toPrimitive]=="function")return p.from(B[Symbol.toPrimitive]("string"),S,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof B)}p.from=function(B,S,T){return g(B,S,T)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array);function y(B){if(typeof B!="number")throw new TypeError('"size" argument must be of type number');if(B<0)throw new RangeError('The value "'+B+'" is invalid for option "size"')}function m(B,S,T){return y(B),B<=0?c(B):S!==void 0?typeof T=="string"?c(B).fill(S,T):c(B).fill(S):c(B)}p.alloc=function(B,S,T){return m(B,S,T)};function w(B){return y(B),c(B<0?0:s(B)|0)}p.allocUnsafe=function(B){return w(B)},p.allocUnsafeSlow=function(B){return w(B)};function k(B,S){if((typeof S!="string"||S==="")&&(S="utf8"),!p.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const T=u(B,S)|0;let U=c(T);const W=U.write(B,S);return W!==T&&(U=U.slice(0,W)),U}function A(B){const S=B.length<0?0:s(B.length)|0,T=c(S);for(let U=0;U<S;U+=1)T[U]=B[U]&255;return T}function x(B){if(we(B,Uint8Array)){const S=new Uint8Array(B);return C(S.buffer,S.byteOffset,S.byteLength)}return A(B)}function C(B,S,T){if(S<0||B.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(B.byteLength<S+(T||0))throw new RangeError('"length" is outside of buffer bounds');let U;return S===void 0&&T===void 0?U=new Uint8Array(B):T===void 0?U=new Uint8Array(B,S):U=new Uint8Array(B,S,T),Object.setPrototypeOf(U,p.prototype),U}function R(B){if(p.isBuffer(B)){const S=s(B.length)|0,T=c(S);return T.length===0||B.copy(T,0,0,S),T}if(B.length!==void 0)return typeof B.length!="number"||me(B.length)?c(0):A(B);if(B.type==="Buffer"&&Array.isArray(B.data))return A(B.data)}function s(B){if(B>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return B|0}function v(B){return+B!=B&&(B=0),p.alloc(+B)}p.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==p.prototype},p.compare=function(S,T){if(we(S,Uint8Array)&&(S=p.from(S,S.offset,S.byteLength)),we(T,Uint8Array)&&(T=p.from(T,T.offset,T.byteLength)),!p.isBuffer(S)||!p.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===T)return 0;let U=S.length,W=T.length;for(let G=0,Y=Math.min(U,W);G<Y;++G)if(S[G]!==T[G]){U=S[G],W=T[G];break}return U<W?-1:W<U?1:0},p.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(S,T){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return p.alloc(0);let U;if(T===void 0)for(T=0,U=0;U<S.length;++U)T+=S[U].length;const W=p.allocUnsafe(T);let G=0;for(U=0;U<S.length;++U){let Y=S[U];if(we(Y,Uint8Array))G+Y.length>W.length?(p.isBuffer(Y)||(Y=p.from(Y)),Y.copy(W,G)):Uint8Array.prototype.set.call(W,Y,G);else if(p.isBuffer(Y))Y.copy(W,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Y.length}return W};function u(B,S){if(p.isBuffer(B))return B.length;if(ArrayBuffer.isView(B)||we(B,ArrayBuffer))return B.byteLength;if(typeof B!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof B);const T=B.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&T===0)return 0;let W=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return H(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return Ce(B).length;default:if(W)return U?-1:H(B).length;S=(""+S).toLowerCase(),W=!0}}p.byteLength=u;function d(B,S,T){let U=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,S>>>=0,T<=S))return"";for(B||(B="utf8");;)switch(B){case"hex":return q(this,S,T);case"utf8":case"utf-8":return ae(this,S,T);case"ascii":return F(this,S,T);case"latin1":case"binary":return $(this,S,T);case"base64":return ne(this,S,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,S,T);default:if(U)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),U=!0}}p.prototype._isBuffer=!0;function b(B,S,T){const U=B[S];B[S]=B[T],B[T]=U}p.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<S;T+=2)b(this,T,T+1);return this},p.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<S;T+=4)b(this,T,T+3),b(this,T+1,T+2);return this},p.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<S;T+=8)b(this,T,T+7),b(this,T+1,T+6),b(this,T+2,T+5),b(this,T+3,T+4);return this},p.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?ae(this,0,S):d.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(S){if(!p.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:p.compare(this,S)===0},p.prototype.inspect=function(){let S="";const T=e.INSPECT_MAX_BYTES;return S=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(S+=" ... "),"<Buffer "+S+">"},n&&(p.prototype[n]=p.prototype.inspect),p.prototype.compare=function(S,T,U,W,G){if(we(S,Uint8Array)&&(S=p.from(S,S.offset,S.byteLength)),!p.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(T===void 0&&(T=0),U===void 0&&(U=S?S.length:0),W===void 0&&(W=0),G===void 0&&(G=this.length),T<0||U>S.length||W<0||G>this.length)throw new RangeError("out of range index");if(W>=G&&T>=U)return 0;if(W>=G)return-1;if(T>=U)return 1;if(T>>>=0,U>>>=0,W>>>=0,G>>>=0,this===S)return 0;let Y=G-W,ge=U-T;const Ae=Math.min(Y,ge),ke=this.slice(W,G),Le=S.slice(T,U);for(let Re=0;Re<Ae;++Re)if(ke[Re]!==Le[Re]){Y=ke[Re],ge=Le[Re];break}return Y<ge?-1:ge<Y?1:0};function L(B,S,T,U,W){if(B.length===0)return-1;if(typeof T=="string"?(U=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,me(T)&&(T=W?0:B.length-1),T<0&&(T=B.length+T),T>=B.length){if(W)return-1;T=B.length-1}else if(T<0)if(W)T=0;else return-1;if(typeof S=="string"&&(S=p.from(S,U)),p.isBuffer(S))return S.length===0?-1:N(B,S,T,U,W);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(B,S,T):Uint8Array.prototype.lastIndexOf.call(B,S,T):N(B,[S],T,U,W);throw new TypeError("val must be string, number or Buffer")}function N(B,S,T,U,W){let G=1,Y=B.length,ge=S.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(B.length<2||S.length<2)return-1;G=2,Y/=2,ge/=2,T/=2}function Ae(Le,Re){return G===1?Le[Re]:Le.readUInt16BE(Re*G)}let ke;if(W){let Le=-1;for(ke=T;ke<Y;ke++)if(Ae(B,ke)===Ae(S,Le===-1?0:ke-Le)){if(Le===-1&&(Le=ke),ke-Le+1===ge)return Le*G}else Le!==-1&&(ke-=ke-Le),Le=-1}else for(T+ge>Y&&(T=Y-ge),ke=T;ke>=0;ke--){let Le=!0;for(let Re=0;Re<ge;Re++)if(Ae(B,ke+Re)!==Ae(S,Re)){Le=!1;break}if(Le)return ke}return-1}p.prototype.includes=function(S,T,U){return this.indexOf(S,T,U)!==-1},p.prototype.indexOf=function(S,T,U){return L(this,S,T,U,!0)},p.prototype.lastIndexOf=function(S,T,U){return L(this,S,T,U,!1)};function P(B,S,T,U){T=Number(T)||0;const W=B.length-T;U?(U=Number(U),U>W&&(U=W)):U=W;const G=S.length;U>G/2&&(U=G/2);let Y;for(Y=0;Y<U;++Y){const ge=parseInt(S.substr(Y*2,2),16);if(me(ge))return Y;B[T+Y]=ge}return Y}function I(B,S,T,U){return Oe(H(S,B.length-T),B,T,U)}function V(B,S,T,U){return Oe(ue(S),B,T,U)}function ee(B,S,T,U){return Oe(Ce(S),B,T,U)}function ie(B,S,T,U){return Oe(ye(S,B.length-T),B,T,U)}p.prototype.write=function(S,T,U,W){if(T===void 0)W="utf8",U=this.length,T=0;else if(U===void 0&&typeof T=="string")W=T,U=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(U)?(U=U>>>0,W===void 0&&(W="utf8")):(W=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-T;if((U===void 0||U>G)&&(U=G),S.length>0&&(U<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let Y=!1;for(;;)switch(W){case"hex":return P(this,S,T,U);case"utf8":case"utf-8":return I(this,S,T,U);case"ascii":case"latin1":case"binary":return V(this,S,T,U);case"base64":return ee(this,S,T,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,S,T,U);default:if(Y)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),Y=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(B,S,T){return S===0&&T===B.length?t.fromByteArray(B):t.fromByteArray(B.slice(S,T))}function ae(B,S,T){T=Math.min(B.length,T);const U=[];let W=S;for(;W<T;){const G=B[W];let Y=null,ge=G>239?4:G>223?3:G>191?2:1;if(W+ge<=T){let Ae,ke,Le,Re;switch(ge){case 1:G<128&&(Y=G);break;case 2:Ae=B[W+1],(Ae&192)===128&&(Re=(G&31)<<6|Ae&63,Re>127&&(Y=Re));break;case 3:Ae=B[W+1],ke=B[W+2],(Ae&192)===128&&(ke&192)===128&&(Re=(G&15)<<12|(Ae&63)<<6|ke&63,Re>2047&&(Re<55296||Re>57343)&&(Y=Re));break;case 4:Ae=B[W+1],ke=B[W+2],Le=B[W+3],(Ae&192)===128&&(ke&192)===128&&(Le&192)===128&&(Re=(G&15)<<18|(Ae&63)<<12|(ke&63)<<6|Le&63,Re>65535&&Re<1114112&&(Y=Re))}}Y===null?(Y=65533,ge=1):Y>65535&&(Y-=65536,U.push(Y>>>10&1023|55296),Y=56320|Y&1023),U.push(Y),W+=ge}return he(U)}const Q=4096;function he(B){const S=B.length;if(S<=Q)return String.fromCharCode.apply(String,B);let T="",U=0;for(;U<S;)T+=String.fromCharCode.apply(String,B.slice(U,U+=Q));return T}function F(B,S,T){let U="";T=Math.min(B.length,T);for(let W=S;W<T;++W)U+=String.fromCharCode(B[W]&127);return U}function $(B,S,T){let U="";T=Math.min(B.length,T);for(let W=S;W<T;++W)U+=String.fromCharCode(B[W]);return U}function q(B,S,T){const U=B.length;(!S||S<0)&&(S=0),(!T||T<0||T>U)&&(T=U);let W="";for(let G=S;G<T;++G)W+=be[B[G]];return W}function K(B,S,T){const U=B.slice(S,T);let W="";for(let G=0;G<U.length-1;G+=2)W+=String.fromCharCode(U[G]+U[G+1]*256);return W}p.prototype.slice=function(S,T){const U=this.length;S=~~S,T=T===void 0?U:~~T,S<0?(S+=U,S<0&&(S=0)):S>U&&(S=U),T<0?(T+=U,T<0&&(T=0)):T>U&&(T=U),T<S&&(T=S);const W=this.subarray(S,T);return Object.setPrototypeOf(W,p.prototype),W};function X(B,S,T){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+S>T)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(S,T,U){S=S>>>0,T=T>>>0,U||X(S,T,this.length);let W=this[S],G=1,Y=0;for(;++Y<T&&(G*=256);)W+=this[S+Y]*G;return W},p.prototype.readUintBE=p.prototype.readUIntBE=function(S,T,U){S=S>>>0,T=T>>>0,U||X(S,T,this.length);let W=this[S+--T],G=1;for(;T>0&&(G*=256);)W+=this[S+--T]*G;return W},p.prototype.readUint8=p.prototype.readUInt8=function(S,T){return S=S>>>0,T||X(S,1,this.length),this[S]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(S,T){return S=S>>>0,T||X(S,2,this.length),this[S]|this[S+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(S,T){return S=S>>>0,T||X(S,2,this.length),this[S]<<8|this[S+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(S,T){return S=S>>>0,T||X(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(S,T){return S=S>>>0,T||X(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},p.prototype.readBigUInt64LE=pe(function(S){S=S>>>0,E(S,"offset");const T=this[S],U=this[S+7];(T===void 0||U===void 0)&&M(S,this.length-8);const W=T+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,G=this[++S]+this[++S]*2**8+this[++S]*2**16+U*2**24;return BigInt(W)+(BigInt(G)<<BigInt(32))}),p.prototype.readBigUInt64BE=pe(function(S){S=S>>>0,E(S,"offset");const T=this[S],U=this[S+7];(T===void 0||U===void 0)&&M(S,this.length-8);const W=T*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],G=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+U;return(BigInt(W)<<BigInt(32))+BigInt(G)}),p.prototype.readIntLE=function(S,T,U){S=S>>>0,T=T>>>0,U||X(S,T,this.length);let W=this[S],G=1,Y=0;for(;++Y<T&&(G*=256);)W+=this[S+Y]*G;return G*=128,W>=G&&(W-=Math.pow(2,8*T)),W},p.prototype.readIntBE=function(S,T,U){S=S>>>0,T=T>>>0,U||X(S,T,this.length);let W=T,G=1,Y=this[S+--W];for(;W>0&&(G*=256);)Y+=this[S+--W]*G;return G*=128,Y>=G&&(Y-=Math.pow(2,8*T)),Y},p.prototype.readInt8=function(S,T){return S=S>>>0,T||X(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},p.prototype.readInt16LE=function(S,T){S=S>>>0,T||X(S,2,this.length);const U=this[S]|this[S+1]<<8;return U&32768?U|4294901760:U},p.prototype.readInt16BE=function(S,T){S=S>>>0,T||X(S,2,this.length);const U=this[S+1]|this[S]<<8;return U&32768?U|4294901760:U},p.prototype.readInt32LE=function(S,T){return S=S>>>0,T||X(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},p.prototype.readInt32BE=function(S,T){return S=S>>>0,T||X(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},p.prototype.readBigInt64LE=pe(function(S){S=S>>>0,E(S,"offset");const T=this[S],U=this[S+7];(T===void 0||U===void 0)&&M(S,this.length-8);const W=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(U<<24);return(BigInt(W)<<BigInt(32))+BigInt(T+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),p.prototype.readBigInt64BE=pe(function(S){S=S>>>0,E(S,"offset");const T=this[S],U=this[S+7];(T===void 0||U===void 0)&&M(S,this.length-8);const W=(T<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(W)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+U)}),p.prototype.readFloatLE=function(S,T){return S=S>>>0,T||X(S,4,this.length),r.read(this,S,!0,23,4)},p.prototype.readFloatBE=function(S,T){return S=S>>>0,T||X(S,4,this.length),r.read(this,S,!1,23,4)},p.prototype.readDoubleLE=function(S,T){return S=S>>>0,T||X(S,8,this.length),r.read(this,S,!0,52,8)},p.prototype.readDoubleBE=function(S,T){return S=S>>>0,T||X(S,8,this.length),r.read(this,S,!1,52,8)};function Z(B,S,T,U,W,G){if(!p.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>W||S<G)throw new RangeError('"value" argument is out of bounds');if(T+U>B.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(S,T,U,W){if(S=+S,T=T>>>0,U=U>>>0,!W){const ge=Math.pow(2,8*U)-1;Z(this,S,T,U,ge,0)}let G=1,Y=0;for(this[T]=S&255;++Y<U&&(G*=256);)this[T+Y]=S/G&255;return T+U},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(S,T,U,W){if(S=+S,T=T>>>0,U=U>>>0,!W){const ge=Math.pow(2,8*U)-1;Z(this,S,T,U,ge,0)}let G=U-1,Y=1;for(this[T+G]=S&255;--G>=0&&(Y*=256);)this[T+G]=S/Y&255;return T+U},p.prototype.writeUint8=p.prototype.writeUInt8=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,1,255,0),this[T]=S&255,T+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,2,65535,0),this[T]=S&255,this[T+1]=S>>>8,T+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,2,65535,0),this[T]=S>>>8,this[T+1]=S&255,T+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,4,4294967295,0),this[T+3]=S>>>24,this[T+2]=S>>>16,this[T+1]=S>>>8,this[T]=S&255,T+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,4,4294967295,0),this[T]=S>>>24,this[T+1]=S>>>16,this[T+2]=S>>>8,this[T+3]=S&255,T+4};function te(B,S,T,U,W){a(S,U,W,B,T,7);let G=Number(S&BigInt(4294967295));B[T++]=G,G=G>>8,B[T++]=G,G=G>>8,B[T++]=G,G=G>>8,B[T++]=G;let Y=Number(S>>BigInt(32)&BigInt(4294967295));return B[T++]=Y,Y=Y>>8,B[T++]=Y,Y=Y>>8,B[T++]=Y,Y=Y>>8,B[T++]=Y,T}function J(B,S,T,U,W){a(S,U,W,B,T,7);let G=Number(S&BigInt(4294967295));B[T+7]=G,G=G>>8,B[T+6]=G,G=G>>8,B[T+5]=G,G=G>>8,B[T+4]=G;let Y=Number(S>>BigInt(32)&BigInt(4294967295));return B[T+3]=Y,Y=Y>>8,B[T+2]=Y,Y=Y>>8,B[T+1]=Y,Y=Y>>8,B[T]=Y,T+8}p.prototype.writeBigUInt64LE=pe(function(S,T=0){return te(this,S,T,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=pe(function(S,T=0){return J(this,S,T,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(S,T,U,W){if(S=+S,T=T>>>0,!W){const Ae=Math.pow(2,8*U-1);Z(this,S,T,U,Ae-1,-Ae)}let G=0,Y=1,ge=0;for(this[T]=S&255;++G<U&&(Y*=256);)S<0&&ge===0&&this[T+G-1]!==0&&(ge=1),this[T+G]=(S/Y>>0)-ge&255;return T+U},p.prototype.writeIntBE=function(S,T,U,W){if(S=+S,T=T>>>0,!W){const Ae=Math.pow(2,8*U-1);Z(this,S,T,U,Ae-1,-Ae)}let G=U-1,Y=1,ge=0;for(this[T+G]=S&255;--G>=0&&(Y*=256);)S<0&&ge===0&&this[T+G+1]!==0&&(ge=1),this[T+G]=(S/Y>>0)-ge&255;return T+U},p.prototype.writeInt8=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,1,127,-128),S<0&&(S=255+S+1),this[T]=S&255,T+1},p.prototype.writeInt16LE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,2,32767,-32768),this[T]=S&255,this[T+1]=S>>>8,T+2},p.prototype.writeInt16BE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,2,32767,-32768),this[T]=S>>>8,this[T+1]=S&255,T+2},p.prototype.writeInt32LE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,4,2147483647,-2147483648),this[T]=S&255,this[T+1]=S>>>8,this[T+2]=S>>>16,this[T+3]=S>>>24,T+4},p.prototype.writeInt32BE=function(S,T,U){return S=+S,T=T>>>0,U||Z(this,S,T,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[T]=S>>>24,this[T+1]=S>>>16,this[T+2]=S>>>8,this[T+3]=S&255,T+4},p.prototype.writeBigInt64LE=pe(function(S,T=0){return te(this,S,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=pe(function(S,T=0){return J(this,S,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function re(B,S,T,U,W,G){if(T+U>B.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function h(B,S,T,U,W){return S=+S,T=T>>>0,W||re(B,S,T,4),r.write(B,S,T,U,23,4),T+4}p.prototype.writeFloatLE=function(S,T,U){return h(this,S,T,!0,U)},p.prototype.writeFloatBE=function(S,T,U){return h(this,S,T,!1,U)};function l(B,S,T,U,W){return S=+S,T=T>>>0,W||re(B,S,T,8),r.write(B,S,T,U,52,8),T+8}p.prototype.writeDoubleLE=function(S,T,U){return l(this,S,T,!0,U)},p.prototype.writeDoubleBE=function(S,T,U){return l(this,S,T,!1,U)},p.prototype.copy=function(S,T,U,W){if(!p.isBuffer(S))throw new TypeError("argument should be a Buffer");if(U||(U=0),!W&&W!==0&&(W=this.length),T>=S.length&&(T=S.length),T||(T=0),W>0&&W<U&&(W=U),W===U||S.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),S.length-T<W-U&&(W=S.length-T+U);const G=W-U;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,U,W):Uint8Array.prototype.set.call(S,this.subarray(U,W),T),G},p.prototype.fill=function(S,T,U,W){if(typeof S=="string"){if(typeof T=="string"?(W=T,T=0,U=this.length):typeof U=="string"&&(W=U,U=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!p.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(S.length===1){const Y=S.charCodeAt(0);(W==="utf8"&&Y<128||W==="latin1")&&(S=Y)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(T<0||this.length<T||this.length<U)throw new RangeError("Out of range index");if(U<=T)return this;T=T>>>0,U=U===void 0?this.length:U>>>0,S||(S=0);let G;if(typeof S=="number")for(G=T;G<U;++G)this[G]=S;else{const Y=p.isBuffer(S)?S:p.from(S,W),ge=Y.length;if(ge===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(G=0;G<U-T;++G)this[G+T]=Y[G%ge]}return this};const _={};function O(B,S,T){_[B]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${B}]`,this.stack,delete this.name}get code(){return B}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${B}]: ${this.message}`}}}O("ERR_BUFFER_OUT_OF_BOUNDS",function(B){return B?`${B} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(B,S){return`The "${B}" argument must be of type number. Received type ${typeof S}`},TypeError),O("ERR_OUT_OF_RANGE",function(B,S,T){let U=`The value of "${B}" is out of range.`,W=T;return Number.isInteger(T)&&Math.abs(T)>2**32?W=D(String(T)):typeof T=="bigint"&&(W=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(W=D(W)),W+="n"),U+=` It must be ${S}. Received ${W}`,U},RangeError);function D(B){let S="",T=B.length;const U=B[0]==="-"?1:0;for(;T>=U+4;T-=3)S=`_${B.slice(T-3,T)}${S}`;return`${B.slice(0,T)}${S}`}function i(B,S,T){E(S,"offset"),(B[S]===void 0||B[S+T]===void 0)&&M(S,B.length-(T+1))}function a(B,S,T,U,W,G){if(B>T||B<S){const Y=typeof S=="bigint"?"n":"";let ge;throw G>3?S===0||S===BigInt(0)?ge=`>= 0${Y} and < 2${Y} ** ${(G+1)*8}${Y}`:ge=`>= -(2${Y} ** ${(G+1)*8-1}${Y}) and < 2 ** ${(G+1)*8-1}${Y}`:ge=`>= ${S}${Y} and <= ${T}${Y}`,new _.ERR_OUT_OF_RANGE("value",ge,B)}i(U,W,G)}function E(B,S){if(typeof B!="number")throw new _.ERR_INVALID_ARG_TYPE(S,"number",B)}function M(B,S,T){throw Math.floor(B)!==B?(E(B,T),new _.ERR_OUT_OF_RANGE(T||"offset","an integer",B)):S<0?new _.ERR_BUFFER_OUT_OF_BOUNDS:new _.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${S}`,B)}const z=/[^+/0-9A-Za-z-_]/g;function j(B){if(B=B.split("=")[0],B=B.trim().replace(z,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function H(B,S){S=S||1/0;let T;const U=B.length;let W=null;const G=[];for(let Y=0;Y<U;++Y){if(T=B.charCodeAt(Y),T>55295&&T<57344){if(!W){if(T>56319){(S-=3)>-1&&G.push(239,191,189);continue}else if(Y+1===U){(S-=3)>-1&&G.push(239,191,189);continue}W=T;continue}if(T<56320){(S-=3)>-1&&G.push(239,191,189),W=T;continue}T=(W-55296<<10|T-56320)+65536}else W&&(S-=3)>-1&&G.push(239,191,189);if(W=null,T<128){if((S-=1)<0)break;G.push(T)}else if(T<2048){if((S-=2)<0)break;G.push(T>>6|192,T&63|128)}else if(T<65536){if((S-=3)<0)break;G.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((S-=4)<0)break;G.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return G}function ue(B){const S=[];for(let T=0;T<B.length;++T)S.push(B.charCodeAt(T)&255);return S}function ye(B,S){let T,U,W;const G=[];for(let Y=0;Y<B.length&&!((S-=2)<0);++Y)T=B.charCodeAt(Y),U=T>>8,W=T%256,G.push(W),G.push(U);return G}function Ce(B){return t.toByteArray(j(B))}function Oe(B,S,T,U){let W;for(W=0;W<U&&!(W+T>=S.length||W>=B.length);++W)S[W+T]=B[W];return W}function we(B,S){return B instanceof S||B!=null&&B.constructor!=null&&B.constructor.name!=null&&B.constructor.name===S.name}function me(B){return B!==B}const be=function(){const B="0123456789abcdef",S=new Array(256);for(let T=0;T<16;++T){const U=T*16;for(let W=0;W<16;++W)S[U+W]=B[T]+B[W]}return S}();function pe(B){return typeof BigInt>"u"?ve:B}function ve(){throw new Error("BigInt not supported")}})(Te);(function(e,t){var r=Te,n=r.Buffer;function o(c,p){for(var g in c)p[g]=c[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=f);function f(c,p,g){return n(c,p,g)}o(n,f),f.from=function(c,p,g){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,p,g)},f.alloc=function(c,p,g){if(typeof c!="number")throw new TypeError("Argument must be a number");var y=n(c);return p!==void 0?typeof g=="string"?y.fill(p,g):y.fill(p):y.fill(0),y},f.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},f.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}})(ta,ta.exports);var Ha=ta.exports,Ie={};function hh(e){return Array.isArray?Array.isArray(e):fn(e)==="[object Array]"}Ie.isArray=hh;function ph(e){return typeof e=="boolean"}Ie.isBoolean=ph;function gh(e){return e===null}Ie.isNull=gh;function vh(e){return e==null}Ie.isNullOrUndefined=vh;function _h(e){return typeof e=="number"}Ie.isNumber=_h;function yh(e){return typeof e=="string"}Ie.isString=yh;function mh(e){return typeof e=="symbol"}Ie.isSymbol=mh;function wh(e){return e===void 0}Ie.isUndefined=wh;function bh(e){return fn(e)==="[object RegExp]"}Ie.isRegExp=bh;function Eh(e){return typeof e=="object"&&e!==null}Ie.isObject=Eh;function Sh(e){return fn(e)==="[object Date]"}Ie.isDate=Sh;function Rh(e){return fn(e)==="[object Error]"||e instanceof Error}Ie.isError=Rh;function xh(e){return typeof e=="function"}Ie.isFunction=xh;function Th(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}Ie.isPrimitive=Th;Ie.isBuffer=Te.Buffer.isBuffer;function fn(e){return Object.prototype.toString.call(e)}var On={exports:{}},Mo;function Ch(){return Mo||(Mo=1,function(e){function t(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var r=Ha.Buffer,n=de;function o(f,c,p){f.copy(c,p)}e.exports=function(){function f(){t(this,f),this.head=null,this.tail=null,this.length=0}return f.prototype.push=function(p){var g={data:p,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length},f.prototype.unshift=function(p){var g={data:p,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length},f.prototype.shift=function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}},f.prototype.clear=function(){this.head=this.tail=null,this.length=0},f.prototype.join=function(p){if(this.length===0)return"";for(var g=this.head,y=""+g.data;g=g.next;)y+=p+g.data;return y},f.prototype.concat=function(p){if(this.length===0)return r.alloc(0);for(var g=r.allocUnsafe(p>>>0),y=this.head,m=0;y;)o(y.data,g,m),m+=y.data.length,y=y.next;return g},f}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var f=n.inspect({length:this.length});return this.constructor.name+" "+f})}(On)),On.exports}var Ar=sn;function kh(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ar.nextTick(Lr,this,e)):Ar.nextTick(Lr,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,Ar.nextTick(Lr,r,f)):Ar.nextTick(Lr,r,f):t&&t(f)}),this)}function Ah(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Lr(e,t){e.emit("error",t)}var Ff={destroy:kh,undestroy:Ah},Lt=Lh;function Lh(e,t){if(In("noDeprecation"))return e;var r=!1;function n(){if(!r){if(In("throwDeprecation"))throw new Error(t);In("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function In(e){try{if(!ce.localStorage)return!1}catch{return!1}var t=ce.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var Pn,Bo;function Uf(){if(Bo)return Pn;Bo=1;var e=sn;Pn=C;function t(F){var $=this;this.next=null,this.entry=null,this.finish=function(){he($,F)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;C.WritableState=A;var o=Object.create(Ie);o.inherits=oe;var f={deprecate:Lt},c=Nf,p=Ha.Buffer,g=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function y(F){return p.from(F)}function m(F){return p.isBuffer(F)||F instanceof g}var w=Ff;o.inherits(C,c);function k(){}function A(F,$){n=n||zt(),F=F||{};var q=$ instanceof n;this.objectMode=!!F.objectMode,q&&(this.objectMode=this.objectMode||!!F.writableObjectMode);var K=F.highWaterMark,X=F.writableHighWaterMark,Z=this.objectMode?16:16*1024;K||K===0?this.highWaterMark=K:q&&(X||X===0)?this.highWaterMark=X:this.highWaterMark=Z,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=F.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(J){N($,J)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}A.prototype.getBuffer=function(){for(var $=this.bufferedRequest,q=[];$;)q.push($),$=$.next;return q},function(){try{Object.defineProperty(A.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var x;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(x=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(F){return x.call(this,F)?!0:this!==C?!1:F&&F._writableState instanceof A}})):x=function(F){return F instanceof this};function C(F){if(n=n||zt(),!x.call(C,this)&&!(this instanceof n))return new C(F);this._writableState=new A(F,this),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),c.call(this)}C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function R(F,$){var q=new Error("write after end");F.emit("error",q),e.nextTick($,q)}function s(F,$,q,K){var X=!0,Z=!1;return q===null?Z=new TypeError("May not write null values to stream"):typeof q!="string"&&q!==void 0&&!$.objectMode&&(Z=new TypeError("Invalid non-string/buffer chunk")),Z&&(F.emit("error",Z),e.nextTick(K,Z),X=!1),X}C.prototype.write=function(F,$,q){var K=this._writableState,X=!1,Z=!K.objectMode&&m(F);return Z&&!p.isBuffer(F)&&(F=y(F)),typeof $=="function"&&(q=$,$=null),Z?$="buffer":$||($=K.defaultEncoding),typeof q!="function"&&(q=k),K.ended?R(this,q):(Z||s(this,K,F,q))&&(K.pendingcb++,X=u(this,K,Z,F,$,q)),X},C.prototype.cork=function(){var F=this._writableState;F.corked++},C.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,!F.writing&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&V(this,F))},C.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+$);return this._writableState.defaultEncoding=$,this};function v(F,$,q){return!F.objectMode&&F.decodeStrings!==!1&&typeof $=="string"&&($=p.from($,q)),$}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function u(F,$,q,K,X,Z){if(!q){var te=v($,K,X);K!==te&&(q=!0,X="buffer",K=te)}var J=$.objectMode?1:K.length;$.length+=J;var re=$.length<$.highWaterMark;if(re||($.needDrain=!0),$.writing||$.corked){var h=$.lastBufferedRequest;$.lastBufferedRequest={chunk:K,encoding:X,isBuf:q,callback:Z,next:null},h?h.next=$.lastBufferedRequest:$.bufferedRequest=$.lastBufferedRequest,$.bufferedRequestCount+=1}else d(F,$,!1,J,K,X,Z);return re}function d(F,$,q,K,X,Z,te){$.writelen=K,$.writecb=te,$.writing=!0,$.sync=!0,q?F._writev(X,$.onwrite):F._write(X,Z,$.onwrite),$.sync=!1}function b(F,$,q,K,X){--$.pendingcb,q?(e.nextTick(X,K),e.nextTick(ae,F,$),F._writableState.errorEmitted=!0,F.emit("error",K)):(X(K),F._writableState.errorEmitted=!0,F.emit("error",K),ae(F,$))}function L(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}function N(F,$){var q=F._writableState,K=q.sync,X=q.writecb;if(L(q),$)b(F,q,K,$,X);else{var Z=ee(q);!Z&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&V(F,q),K?r(P,F,q,Z,X):P(F,q,Z,X)}}function P(F,$,q,K){q||I(F,$),$.pendingcb--,K(),ae(F,$)}function I(F,$){$.length===0&&$.needDrain&&($.needDrain=!1,F.emit("drain"))}function V(F,$){$.bufferProcessing=!0;var q=$.bufferedRequest;if(F._writev&&q&&q.next){var K=$.bufferedRequestCount,X=new Array(K),Z=$.corkedRequestsFree;Z.entry=q;for(var te=0,J=!0;q;)X[te]=q,q.isBuf||(J=!1),q=q.next,te+=1;X.allBuffers=J,d(F,$,!0,$.length,X,"",Z.finish),$.pendingcb++,$.lastBufferedRequest=null,Z.next?($.corkedRequestsFree=Z.next,Z.next=null):$.corkedRequestsFree=new t($),$.bufferedRequestCount=0}else{for(;q;){var re=q.chunk,h=q.encoding,l=q.callback,_=$.objectMode?1:re.length;if(d(F,$,!1,_,re,h,l),q=q.next,$.bufferedRequestCount--,$.writing)break}q===null&&($.lastBufferedRequest=null)}$.bufferedRequest=q,$.bufferProcessing=!1}C.prototype._write=function(F,$,q){q(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(F,$,q){var K=this._writableState;typeof F=="function"?(q=F,F=null,$=null):typeof $=="function"&&(q=$,$=null),F!=null&&this.write(F,$),K.corked&&(K.corked=1,this.uncork()),K.ending||Q(this,K,q)};function ee(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function ie(F,$){F._final(function(q){$.pendingcb--,q&&F.emit("error",q),$.prefinished=!0,F.emit("prefinish"),ae(F,$)})}function ne(F,$){!$.prefinished&&!$.finalCalled&&(typeof F._final=="function"?($.pendingcb++,$.finalCalled=!0,e.nextTick(ie,F,$)):($.prefinished=!0,F.emit("prefinish")))}function ae(F,$){var q=ee($);return q&&(ne(F,$),$.pendingcb===0&&($.finished=!0,F.emit("finish"))),q}function Q(F,$,q){$.ending=!0,ae(F,$),q&&($.finished?e.nextTick(q):F.once("finish",q)),$.ended=!0,F.writable=!1}function he(F,$,q){var K=F.entry;for(F.entry=null;K;){var X=K.callback;$.pendingcb--,X(q),K=K.next}$.corkedRequestsFree.next=F}return Object.defineProperty(C.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),C.prototype.destroy=w.destroy,C.prototype._undestroy=w.undestroy,C.prototype._destroy=function(F,$){this.end(),$(F)},Pn}var Nn,Oo;function zt(){if(Oo)return Nn;Oo=1;var e=sn,t=Object.keys||function(w){var k=[];for(var A in w)k.push(A);return k};Nn=g;var r=Object.create(Ie);r.inherits=oe;var n=$f(),o=Uf();r.inherits(g,n);for(var f=t(o.prototype),c=0;c<f.length;c++){var p=f[c];g.prototype[p]||(g.prototype[p]=o.prototype[p])}function g(w){if(!(this instanceof g))return new g(w);n.call(this,w),o.call(this,w),w&&w.readable===!1&&(this.readable=!1),w&&w.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,w&&w.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",y)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function y(){this.allowHalfOpen||this._writableState.ended||e.nextTick(m,this)}function m(w){w.end()}return Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(w){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=w,this._writableState.destroyed=w)}}),g.prototype._destroy=function(w,k){this.push(null),this.end(),e.nextTick(k,w)},Nn}var Dn={},Mr={exports:{}},Io;function Mh(){return Io||(Io=1,function(e,t){var r=Te,n=r.Buffer;function o(c,p){for(var g in c)p[g]=c[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=f);function f(c,p,g){return n(c,p,g)}o(n,f),f.from=function(c,p,g){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,p,g)},f.alloc=function(c,p,g){if(typeof c!="number")throw new TypeError("Argument must be a number");var y=n(c);return p!==void 0?typeof g=="string"?y.fill(p,g):y.fill(p):y.fill(0),y},f.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},f.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}}(Mr,Mr.exports)),Mr.exports}var Po;function No(){if(Po)return Dn;Po=1;var e=Mh().Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}Dn.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return Dn}var Fn,Do;function $f(){if(Do)return Fn;Do=1;var e=sn;Fn=v;var t=ih,r;v.ReadableState=s,xe.EventEmitter;var n=function(l,_){return l.listeners(_).length},o=Nf,f=Ha.Buffer,c=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(l){return f.from(l)}function g(l){return f.isBuffer(l)||l instanceof c}var y=Object.create(Ie);y.inherits=oe;var m=de,w=void 0;m&&m.debuglog?w=m.debuglog("stream"):w=function(){};var k=Ch(),A=Ff,x;y.inherits(v,o);var C=["error","close","destroy","pause","resume"];function R(l,_,O){if(typeof l.prependListener=="function")return l.prependListener(_,O);!l._events||!l._events[_]?l.on(_,O):t(l._events[_])?l._events[_].unshift(O):l._events[_]=[O,l._events[_]]}function s(l,_){r=r||zt(),l=l||{};var O=_ instanceof r;this.objectMode=!!l.objectMode,O&&(this.objectMode=this.objectMode||!!l.readableObjectMode);var D=l.highWaterMark,i=l.readableHighWaterMark,a=this.objectMode?16:16*1024;D||D===0?this.highWaterMark=D:O&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new k,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=l.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,l.encoding&&(x||(x=No().StringDecoder),this.decoder=new x(l.encoding),this.encoding=l.encoding)}function v(l){if(r=r||zt(),!(this instanceof v))return new v(l);this._readableState=new s(l,this),this.readable=!0,l&&(typeof l.read=="function"&&(this._read=l.read),typeof l.destroy=="function"&&(this._destroy=l.destroy)),o.call(this)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(l){this._readableState&&(this._readableState.destroyed=l)}}),v.prototype.destroy=A.destroy,v.prototype._undestroy=A.undestroy,v.prototype._destroy=function(l,_){this.push(null),_(l)},v.prototype.push=function(l,_){var O=this._readableState,D;return O.objectMode?D=!0:typeof l=="string"&&(_=_||O.defaultEncoding,_!==O.encoding&&(l=f.from(l,_),_=""),D=!0),u(this,l,_,!1,D)},v.prototype.unshift=function(l){return u(this,l,null,!0,!1)};function u(l,_,O,D,i){var a=l._readableState;if(_===null)a.reading=!1,V(l,a);else{var E;i||(E=b(a,_)),E?l.emit("error",E):a.objectMode||_&&_.length>0?(typeof _!="string"&&!a.objectMode&&Object.getPrototypeOf(_)!==f.prototype&&(_=p(_)),D?a.endEmitted?l.emit("error",new Error("stream.unshift() after end event")):d(l,a,_,!0):a.ended?l.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!O?(_=a.decoder.write(_),a.objectMode||_.length!==0?d(l,a,_,!1):ne(l,a)):d(l,a,_,!1))):D||(a.reading=!1)}return L(a)}function d(l,_,O,D){_.flowing&&_.length===0&&!_.sync?(l.emit("data",O),l.read(0)):(_.length+=_.objectMode?1:O.length,D?_.buffer.unshift(O):_.buffer.push(O),_.needReadable&&ee(l)),ne(l,_)}function b(l,_){var O;return!g(_)&&typeof _!="string"&&_!==void 0&&!l.objectMode&&(O=new TypeError("Invalid non-string/buffer chunk")),O}function L(l){return!l.ended&&(l.needReadable||l.length<l.highWaterMark||l.length===0)}v.prototype.isPaused=function(){return this._readableState.flowing===!1},v.prototype.setEncoding=function(l){return x||(x=No().StringDecoder),this._readableState.decoder=new x(l),this._readableState.encoding=l,this};var N=8388608;function P(l){return l>=N?l=N:(l--,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,l++),l}function I(l,_){return l<=0||_.length===0&&_.ended?0:_.objectMode?1:l!==l?_.flowing&&_.length?_.buffer.head.data.length:_.length:(l>_.highWaterMark&&(_.highWaterMark=P(l)),l<=_.length?l:_.ended?_.length:(_.needReadable=!0,0))}v.prototype.read=function(l){w("read",l),l=parseInt(l,10);var _=this._readableState,O=l;if(l!==0&&(_.emittedReadable=!1),l===0&&_.needReadable&&(_.length>=_.highWaterMark||_.ended))return w("read: emitReadable",_.length,_.ended),_.length===0&&_.ended?J(this):ee(this),null;if(l=I(l,_),l===0&&_.ended)return _.length===0&&J(this),null;var D=_.needReadable;w("need readable",D),(_.length===0||_.length-l<_.highWaterMark)&&(D=!0,w("length less than watermark",D)),_.ended||_.reading?(D=!1,w("reading or ended",D)):D&&(w("do read"),_.reading=!0,_.sync=!0,_.length===0&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(l=I(O,_)));var i;return l>0?i=K(l,_):i=null,i===null?(_.needReadable=!0,l=0):_.length-=l,_.length===0&&(_.ended||(_.needReadable=!0),O!==l&&_.ended&&J(this)),i!==null&&this.emit("data",i),i};function V(l,_){if(!_.ended){if(_.decoder){var O=_.decoder.end();O&&O.length&&(_.buffer.push(O),_.length+=_.objectMode?1:O.length)}_.ended=!0,ee(l)}}function ee(l){var _=l._readableState;_.needReadable=!1,_.emittedReadable||(w("emitReadable",_.flowing),_.emittedReadable=!0,_.sync?e.nextTick(ie,l):ie(l))}function ie(l){w("emit readable"),l.emit("readable"),q(l)}function ne(l,_){_.readingMore||(_.readingMore=!0,e.nextTick(ae,l,_))}function ae(l,_){for(var O=_.length;!_.reading&&!_.flowing&&!_.ended&&_.length<_.highWaterMark&&(w("maybeReadMore read 0"),l.read(0),O!==_.length);)O=_.length;_.readingMore=!1}v.prototype._read=function(l){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(l,_){var O=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=l;break;case 1:D.pipes=[D.pipes,l];break;default:D.pipes.push(l);break}D.pipesCount+=1,w("pipe count=%d opts=%j",D.pipesCount,_);var i=(!_||_.end!==!1)&&l!==process.stdout&&l!==process.stderr,a=i?M:me;D.endEmitted?e.nextTick(a):O.once("end",a),l.on("unpipe",E);function E(be,pe){w("onunpipe"),be===O&&pe&&pe.hasUnpiped===!1&&(pe.hasUnpiped=!0,H())}function M(){w("onend"),l.end()}var z=Q(O);l.on("drain",z);var j=!1;function H(){w("cleanup"),l.removeListener("close",Oe),l.removeListener("finish",we),l.removeListener("drain",z),l.removeListener("error",Ce),l.removeListener("unpipe",E),O.removeListener("end",M),O.removeListener("end",me),O.removeListener("data",ye),j=!0,D.awaitDrain&&(!l._writableState||l._writableState.needDrain)&&z()}var ue=!1;O.on("data",ye);function ye(be){w("ondata"),ue=!1;var pe=l.write(be);pe===!1&&!ue&&((D.pipesCount===1&&D.pipes===l||D.pipesCount>1&&h(D.pipes,l)!==-1)&&!j&&(w("false write response, pause",D.awaitDrain),D.awaitDrain++,ue=!0),O.pause())}function Ce(be){w("onerror",be),me(),l.removeListener("error",Ce),n(l,"error")===0&&l.emit("error",be)}R(l,"error",Ce);function Oe(){l.removeListener("finish",we),me()}l.once("close",Oe);function we(){w("onfinish"),l.removeListener("close",Oe),me()}l.once("finish",we);function me(){w("unpipe"),O.unpipe(l)}return l.emit("pipe",O),D.flowing||(w("pipe resume"),O.resume()),l};function Q(l){return function(){var _=l._readableState;w("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,_.awaitDrain===0&&n(l,"data")&&(_.flowing=!0,q(l))}}v.prototype.unpipe=function(l){var _=this._readableState,O={hasUnpiped:!1};if(_.pipesCount===0)return this;if(_.pipesCount===1)return l&&l!==_.pipes?this:(l||(l=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,l&&l.emit("unpipe",this,O),this);if(!l){var D=_.pipes,i=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var a=0;a<i;a++)D[a].emit("unpipe",this,{hasUnpiped:!1});return this}var E=h(_.pipes,l);return E===-1?this:(_.pipes.splice(E,1),_.pipesCount-=1,_.pipesCount===1&&(_.pipes=_.pipes[0]),l.emit("unpipe",this,O),this)},v.prototype.on=function(l,_){var O=o.prototype.on.call(this,l,_);if(l==="data")this._readableState.flowing!==!1&&this.resume();else if(l==="readable"){var D=this._readableState;!D.endEmitted&&!D.readableListening&&(D.readableListening=D.needReadable=!0,D.emittedReadable=!1,D.reading?D.length&&ee(this):e.nextTick(he,this))}return O},v.prototype.addListener=v.prototype.on;function he(l){w("readable nexttick read 0"),l.read(0)}v.prototype.resume=function(){var l=this._readableState;return l.flowing||(w("resume"),l.flowing=!0,F(this,l)),this};function F(l,_){_.resumeScheduled||(_.resumeScheduled=!0,e.nextTick($,l,_))}function $(l,_){_.reading||(w("resume read 0"),l.read(0)),_.resumeScheduled=!1,_.awaitDrain=0,l.emit("resume"),q(l),_.flowing&&!_.reading&&l.read(0)}v.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function q(l){var _=l._readableState;for(w("flow",_.flowing);_.flowing&&l.read()!==null;);}v.prototype.wrap=function(l){var _=this,O=this._readableState,D=!1;l.on("end",function(){if(w("wrapped end"),O.decoder&&!O.ended){var E=O.decoder.end();E&&E.length&&_.push(E)}_.push(null)}),l.on("data",function(E){if(w("wrapped data"),O.decoder&&(E=O.decoder.write(E)),!(O.objectMode&&E==null)&&!(!O.objectMode&&(!E||!E.length))){var M=_.push(E);M||(D=!0,l.pause())}});for(var i in l)this[i]===void 0&&typeof l[i]=="function"&&(this[i]=function(E){return function(){return l[E].apply(l,arguments)}}(i));for(var a=0;a<C.length;a++)l.on(C[a],this.emit.bind(this,C[a]));return this._read=function(E){w("wrapped _read",E),D&&(D=!1,l.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=K;function K(l,_){if(_.length===0)return null;var O;return _.objectMode?O=_.buffer.shift():!l||l>=_.length?(_.decoder?O=_.buffer.join(""):_.buffer.length===1?O=_.buffer.head.data:O=_.buffer.concat(_.length),_.buffer.clear()):O=X(l,_.buffer,_.decoder),O}function X(l,_,O){var D;return l<_.head.data.length?(D=_.head.data.slice(0,l),_.head.data=_.head.data.slice(l)):l===_.head.data.length?D=_.shift():D=O?Z(l,_):te(l,_),D}function Z(l,_){var O=_.head,D=1,i=O.data;for(l-=i.length;O=O.next;){var a=O.data,E=l>a.length?a.length:l;if(E===a.length?i+=a:i+=a.slice(0,l),l-=E,l===0){E===a.length?(++D,O.next?_.head=O.next:_.head=_.tail=null):(_.head=O,O.data=a.slice(E));break}++D}return _.length-=D,i}function te(l,_){var O=f.allocUnsafe(l),D=_.head,i=1;for(D.data.copy(O),l-=D.data.length;D=D.next;){var a=D.data,E=l>a.length?a.length:l;if(a.copy(O,O.length-l,0,E),l-=E,l===0){E===a.length?(++i,D.next?_.head=D.next:_.head=_.tail=null):(_.head=D,D.data=a.slice(E));break}++i}return _.length-=i,O}function J(l){var _=l._readableState;if(_.length>0)throw new Error('"endReadable()" called on non-empty stream');_.endEmitted||(_.ended=!0,e.nextTick(re,_,l))}function re(l,_){!l.endEmitted&&l.length===0&&(l.endEmitted=!0,_.readable=!1,_.emit("end"))}function h(l,_){for(var O=0,D=l.length;O<D;O++)if(l[O]===_)return O;return-1}return Fn}var jf=ot,un=zt(),Wf=Object.create(Ie);Wf.inherits=oe;Wf.inherits(ot,un);function Bh(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function ot(e){if(!(this instanceof ot))return new ot(e);un.call(this,e),this._transformState={afterTransform:Bh.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Oh)}function Oh(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){Fo(e,t,r)}):Fo(this,null,null)}ot.prototype.push=function(e,t){return this._transformState.needTransform=!1,un.prototype.push.call(this,e,t)};ot.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};ot.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ot.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ot.prototype._destroy=function(e,t){var r=this;un.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function Fo(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Ih=hr,qf=jf,Hf=Object.create(Ie);Hf.inherits=oe;Hf.inherits(hr,qf);function hr(e){if(!(this instanceof hr))return new hr(e);qf.call(this,e)}hr.prototype._transform=function(e,t,r){r(null,e)};(function(e,t){t=e.exports=$f(),t.Stream=t,t.Readable=t,t.Writable=Uf(),t.Duplex=zt(),t.Transform=jf,t.PassThrough=Ih})(Qi,Qi.exports);var bt=Qi.exports,Ph=mt,Nh=oe,zf=bt;Nh(mt,zf.Readable);function mt(e,t){if(!e)throw new Error("A chunk-store must be the first argument");if(!(this instanceof mt))return new mt(e,t);if(t||(t={}),zf.Readable.call(this,t),this.chunkstore=e,this.onmiss=t.onmiss,this.destroyed=!1,t.end==null&&e.length==null)throw new Error("Must define opts.end or chunkstore.length");var r="start"in t?t.start:0,n="end"in t?t.end:e.length-1;if(n<r)throw new Error("opts.start must be less than or equal to the end");this._currentIndex=Math.floor(r/e.chunkLength),this._bytesOffset=r-this._currentIndex*e.chunkLength,this._bytesLeft=n-r+1,this._reading=!1}mt.prototype._read=function(){var e=this;if(!(e._reading||e.destroyed)){if(e._reading=!0,e._bytesLeft===0)return e.push(null);e._get(e._currentIndex,function(t,r){if(t)return e._destroy(t);e._bytesOffset!==0&&(r=r.slice(e._bytesOffset)),e._bytesLeft<r.length&&(r=r.slice(0,e._bytesLeft)),e._bytesOffset=0,e._bytesLeft-=r.length,e._currentIndex++,e._reading=!1,e.push(r)&&e._read()})}};mt.prototype._get=function(e,t){var r=this,n=0;o(null);function o(f){if(n++,n>2)throw new Error("Retry cannot be called multiple times");if(f)return t(f);r.chunkstore.get(e,function(c,p){c&&r.onmiss?r.onmiss(c,e,o):t(c,p)})}};mt.prototype._destroy=function(e){this.destroyed||(this.destroyed=!0,this.chunkstore=null,e&&this.emit("error",e),this.emit("close"))};mt.prototype.destroy=function(){this._destroy()};var Dh=At,za=function e(t,r,n){if(typeof r=="function")return e(t,null,r);n=Dh(n);var o=[];t.on("data",function(f){o.push(f)}).on("end",function(){var f=r?new Blob(o,{type:r}):new Blob(o);n(null,f)}).on("error",n)};function dn(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}dn.prototype.define=function(e,t){for(let r in e){let n=e[r].map(function(o){return o.toLowerCase()});r=r.toLowerCase();for(let o=0;o<n.length;o++){const f=n[o];if(f[0]!=="*"){if(!t&&f in this._types)throw new Error('Attempt to change mapping for "'+f+'" extension from "'+this._types[f]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+f+'" from the list of extensions for "'+r+'".');this._types[f]=r}}if(t||!this._extensions[r]){const o=n[0];this._extensions[r]=o[0]!=="*"?o:o.substr(1)}}};dn.prototype.getType=function(e){e=String(e);let t=e.replace(/^.*[/\\]/,"").toLowerCase(),r=t.replace(/^.*\./,"").toLowerCase(),n=t.length<e.length;return(r.length<t.length-1||!n)&&this._types[r]||null};dn.prototype.getExtension=function(e){return e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1,e&&this._extensions[e.toLowerCase()]||null};var Fh=dn,Uh={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]},$h={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};let jh=Fh;var Wh=new jh(Uh,$h),Ga={};const qh={".3gp":"video/3gpp",".aac":"audio/aac",".aif":"audio/x-aiff",".aiff":"audio/x-aiff",".atom":"application/atom+xml",".avi":"video/x-msvideo",".bmp":"image/bmp",".bz2":"application/x-bzip2",".conf":"text/plain",".css":"text/css",".csv":"text/plain",".diff":"text/x-diff",".doc":"application/msword",".flv":"video/x-flv",".gif":"image/gif",".gz":"application/x-gzip",".htm":"text/html",".html":"text/html",".ico":"image/vnd.microsoft.icon",".ics":"text/calendar",".iso":"application/octet-stream",".jar":"application/java-archive",".jpeg":"image/jpeg",".jpg":"image/jpeg",".js":"application/javascript",".json":"application/json",".less":"text/css",".log":"text/plain",".m3u":"audio/x-mpegurl",".m4a":"audio/x-m4a",".m4b":"audio/mp4",".m4p":"audio/mp4",".m4v":"video/x-m4v",".manifest":"text/cache-manifest",".markdown":"text/x-markdown",".mathml":"application/mathml+xml",".md":"text/x-markdown",".mid":"audio/midi",".midi":"audio/midi",".mov":"video/quicktime",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4v":"video/mp4",".mpeg":"video/mpeg",".mpg":"video/mpeg",".odp":"application/vnd.oasis.opendocument.presentation",".ods":"application/vnd.oasis.opendocument.spreadsheet",".odt":"application/vnd.oasis.opendocument.text",".oga":"audio/ogg",".ogg":"application/ogg",".pdf":"application/pdf",".png":"image/png",".pps":"application/vnd.ms-powerpoint",".ppt":"application/vnd.ms-powerpoint",".ps":"application/postscript",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".rdf":"application/rdf+xml",".rss":"application/rss+xml",".rtf":"application/rtf",".svg":"image/svg+xml",".svgz":"image/svg+xml",".swf":"application/x-shockwave-flash",".tar":"application/x-tar",".tbz":"application/x-bzip-compressed-tar",".text":"text/plain",".tif":"image/tiff",".tiff":"image/tiff",".torrent":"application/x-bittorrent",".ttf":"application/x-font-ttf",".txt":"text/plain",".wav":"audio/wav",".webm":"video/webm",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".xls":"application/vnd.ms-excel",".xml":"application/xml",".yaml":"text/yaml",".yml":"text/yaml",".zip":"application/zip"};var ra={exports:{}},Un,Uo;function Hh(){if(Uo)return Un;Uo=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,f=n*365.25;Un=function(m,w){w=w||{};var k=typeof m;if(k==="string"&&m.length>0)return c(m);if(k==="number"&&isFinite(m))return w.long?g(m):p(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function c(m){if(m=String(m),!(m.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(w){var k=parseFloat(w[1]),A=(w[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return k*f;case"weeks":case"week":case"w":return k*o;case"days":case"day":case"d":return k*n;case"hours":case"hour":case"hrs":case"hr":case"h":return k*r;case"minutes":case"minute":case"mins":case"min":case"m":return k*t;case"seconds":case"second":case"secs":case"sec":case"s":return k*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function p(m){var w=Math.abs(m);return w>=n?Math.round(m/n)+"d":w>=r?Math.round(m/r)+"h":w>=t?Math.round(m/t)+"m":w>=e?Math.round(m/e)+"s":m+"ms"}function g(m){var w=Math.abs(m);return w>=n?y(m,w,n,"day"):w>=r?y(m,w,r,"hour"):w>=t?y(m,w,t,"minute"):w>=e?y(m,w,e,"second"):m+" ms"}function y(m,w,k,A){var x=w>=k*1.5;return Math.round(m/k)+" "+A+(x?"s":"")}return Un}function zh(e){r.debug=r,r.default=r,r.coerce=g,r.disable=f,r.enable=o,r.enabled=c,r.humanize=Hh(),r.destroy=y,Object.keys(e).forEach(m=>{r[m]=e[m]}),r.names=[],r.skips=[],r.formatters={};function t(m){let w=0;for(let k=0;k<m.length;k++)w=(w<<5)-w+m.charCodeAt(k),w|=0;return r.colors[Math.abs(w)%r.colors.length]}r.selectColor=t;function r(m){let w,k=null,A,x;function C(...R){if(!C.enabled)return;const s=C,v=Number(new Date),u=v-(w||v);s.diff=u,s.prev=w,s.curr=v,w=v,R[0]=r.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let d=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(L,N)=>{if(L==="%%")return"%";d++;const P=r.formatters[N];if(typeof P=="function"){const I=R[d];L=P.call(s,I),R.splice(d,1),d--}return L}),r.formatArgs.call(s,R),(s.log||r.log).apply(s,R)}return C.namespace=m,C.useColors=r.useColors(),C.color=r.selectColor(m),C.extend=n,C.destroy=r.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>k!==null?k:(A!==r.namespaces&&(A=r.namespaces,x=r.enabled(m)),x),set:R=>{k=R}}),typeof r.init=="function"&&r.init(C),C}function n(m,w){const k=r(this.namespace+(typeof w>"u"?":":w)+m);return k.log=this.log,k}function o(m){r.save(m),r.namespaces=m,r.names=[],r.skips=[];let w;const k=(typeof m=="string"?m:"").split(/[\s,]+/),A=k.length;for(w=0;w<A;w++)k[w]&&(m=k[w].replace(/\*/g,".*?"),m[0]==="-"?r.skips.push(new RegExp("^"+m.slice(1)+"$")):r.names.push(new RegExp("^"+m+"$")))}function f(){const m=[...r.names.map(p),...r.skips.map(p).map(w=>"-"+w)].join(",");return r.enable(""),m}function c(m){if(m[m.length-1]==="*")return!0;let w,k;for(w=0,k=r.skips.length;w<k;w++)if(r.skips[w].test(m))return!1;for(w=0,k=r.names.length;w<k;w++)if(r.names[w].test(m))return!0;return!1}function p(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function g(m){return m instanceof Error?m.stack||m.message:m}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Gh=zh;(function(e,t){t.formatArgs=n,t.save=o,t.load=f,t.useColors=r,t.storage=c(),t.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;g.splice(1,0,y,"color: inherit");let m=0,w=0;g[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(m++,k==="%c"&&(w=m))}),g.splice(w,0,y)}t.log=console.debug||console.log||(()=>{});function o(g){try{g?t.storage.setItem("debug",g):t.storage.removeItem("debug")}catch{}}function f(){let g;try{g=t.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g={}.DEBUG),g}function c(){try{return localStorage}catch{}}e.exports=Gh(t);const{formatters:p}=e.exports;p.j=function(g){try{return JSON.stringify(g)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}})(ra,ra.exports);var rr=ra.exports,Vh=127,Kh=function(t){for(var r=0,n=t.length;r<n;++r)if(t.charCodeAt(r)>Vh)return!1;return!0},na={exports:{}},Gf=xe.EventEmitter,$n,$o;function Yh(){if($o)return $n;$o=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return $n=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),$n}function Xh(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ia,this,e)):process.nextTick(ia,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick(Fr,r):(r._writableState.errorEmitted=!0,process.nextTick(jo,r,f)):process.nextTick(jo,r,f):t?(process.nextTick(Fr,r),t(f)):process.nextTick(Fr,r)}),this)}function jo(e,t){ia(e,t),Fr(e)}function Fr(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function Jh(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ia(e,t){e.emit("error",t)}function Zh(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var Vf={destroy:Xh,undestroy:Jh,errorOrDestroy:Zh},Mt={};function Qh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Kf={};function Ge(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){Qh(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,Kf[e]=o}function Wo(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function ep(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function tp(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function rp(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ge("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ge("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&ep(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(tp(e," argument"))o="The ".concat(e," ").concat(n," ").concat(Wo(t,"type"));else{var f=rp(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat(Wo(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Ge("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ge("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ge("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ge("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ge("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ge("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ge("ERR_STREAM_WRITE_AFTER_END","write after end");Ge("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ge("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ge("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Mt.codes=Kf;var np=Mt.codes.ERR_INVALID_OPT_VALUE;function ip(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function ap(e,t,r,n){var o=ip(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new np(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var Yf={getHighWaterMark:ap},jn,qo;function Xf(){if(qo)return jn;qo=1,jn=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=Gf,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=Vf,y=Yf,m=y.getHighWaterMark,w=Mt.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||Gt(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||Gt();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},jn}var Wn,Ho;function Gt(){if(Ho)return Wn;Ho=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};Wn=c;var t=Zf(),r=Xf();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),Wn}var qn={},aa={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=Te,n=r.Buffer;function o(c,p){for(var g in c)p[g]=c[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=f);function f(c,p,g){return n(c,p,g)}f.prototype=Object.create(n.prototype),o(n,f),f.from=function(c,p,g){if(typeof c=="number")throw new TypeError("Argument must not be a number");return n(c,p,g)},f.alloc=function(c,p,g){if(typeof c!="number")throw new TypeError("Argument must be a number");var y=n(c);return p!==void 0?typeof g=="string"?y.fill(p,g):y.fill(p):y.fill(0),y},f.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return n(c)},f.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(c)}})(aa,aa.exports);var rt=aa.exports,zo;function Go(){if(zo)return qn;zo=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}qn.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return qn}var Vo=Mt.codes.ERR_STREAM_PREMATURE_CLOSE;function op(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function sp(){}function lp(e){return e.setHeader&&typeof e.abort=="function"}function Jf(e,t,r){if(typeof t=="function")return Jf(e,null,t);t||(t={}),r=op(r||sp);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new Vo),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new Vo),r.call(e,x)},k=function(){e.req.on("finish",p)};return lp(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var Va=Jf,Hn,Ko;function fp(){if(Ko)return Hn;Ko=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=Va,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return Hn=v,Hn}var zn,Yo;function up(){return Yo||(Yo=1,zn=function(){throw new Error("Readable.from is not available in the browser")}),zn}var Gn,Xo;function Zf(){if(Xo)return Gn;Xo=1,Gn=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=Gf,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=Yh(),m=Vf,w=Yf,k=w.getHighWaterMark,A=Mt.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||Gt(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=Go().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||Gt(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=Go().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=fp()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=up()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return Gn}var Qf=st,cn=Mt.codes,dp=cn.ERR_METHOD_NOT_IMPLEMENTED,cp=cn.ERR_MULTIPLE_CALLBACK,hp=cn.ERR_TRANSFORM_ALREADY_TRANSFORMING,pp=cn.ERR_TRANSFORM_WITH_LENGTH_0,hn=Gt();oe(st,hn);function gp(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new cp);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function st(e){if(!(this instanceof st))return new st(e);hn.call(this,e),this._transformState={afterTransform:gp.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",vp)}function vp(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Jo(e,t,r)}):Jo(this,null,null)}st.prototype.push=function(e,t){return this._transformState.needTransform=!1,hn.prototype.push.call(this,e,t)};st.prototype._transform=function(e,t,r){r(new dp("_transform()"))};st.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};st.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};st.prototype._destroy=function(e,t){hn.prototype._destroy.call(this,e,function(r){t(r)})};function Jo(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new pp;if(e._transformState.transforming)throw new hp;return e.push(null)}var _p=pr,eu=Qf;oe(pr,eu);function pr(e){if(!(this instanceof pr))return new pr(e);eu.call(this,e)}pr.prototype._transform=function(e,t,r){r(null,e)};var Vn;function yp(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var tu=Mt.codes,mp=tu.ERR_MISSING_ARGS,wp=tu.ERR_STREAM_DESTROYED;function Zo(e){if(e)throw e}function bp(e){return e.setHeader&&typeof e.abort=="function"}function Ep(e,t,r,n){n=yp(n);var o=!1;e.on("close",function(){o=!0}),Vn===void 0&&(Vn=Va),Vn(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,bp(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new wp("pipe"))}}}function Qo(e){e()}function Sp(e,t){return e.pipe(t)}function Rp(e){return!e.length||typeof e[e.length-1]!="function"?Zo:e.pop()}function xp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Rp(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new mp("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return Ep(c,g,y,function(m){o||(o=m),m&&f.forEach(Qo),!g&&(f.forEach(Qo),n(o))})});return t.reduce(Sp)}var Tp=xp;(function(e,t){t=e.exports=Zf(),t.Stream=t,t.Readable=t,t.Writable=Xf(),t.Duplex=Gt(),t.Transform=Qf,t.PassThrough=_p,t.finished=Va,t.pipeline=Tp})(na,na.exports);var Cp=na.exports,kp=Te.Buffer,Ap=function(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(kp.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")};/*! mediasource. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ru=Vt,Lp=oe,nu=Cp,Mp=Ap,oa=typeof window<"u"&&window.MediaSource,Bp=60;function Vt(e,t){var r=this;if(!(r instanceof Vt))return new Vt(e,t);if(!oa)throw new Error("web browser lacks MediaSource support");t||(t={}),r._debug=t.debug,r._bufferDuration=t.bufferDuration||Bp,r._elem=e,r._mediaSource=new oa,r._streams=[],r.detailedError=null,r._errorHandler=function(){r._elem.removeEventListener("error",r._errorHandler);var n=r._streams.slice();n.forEach(function(o){o.destroy(r._elem.error)})},r._elem.addEventListener("error",r._errorHandler),r._elem.src=window.URL.createObjectURL(r._mediaSource)}Vt.prototype.createWriteStream=function(e){var t=this;return new Et(t,e)};Vt.prototype.error=function(e){var t=this;t.detailedError||(t.detailedError=e),t._dumpDebugData();try{t._mediaSource.endOfStream("decode")}catch{}try{window.URL.revokeObjectURL(t._elem.src)}catch{}};Vt.prototype._dumpDebugData=function(){var e=this;e._debug&&(e._debug=!1,e._streams.forEach(function(t,r){Ip(t._debugBuffers,"mediasource-stream-"+r)}))};Lp(Et,nu.Writable);function Et(e,t){var r=this;if(nu.Writable.call(r),r._wrapper=e,r._elem=e._elem,r._mediaSource=e._mediaSource,r._allStreams=e._streams,r._allStreams.push(r),r._bufferDuration=e._bufferDuration,r._sourceBuffer=null,r._debugBuffers=[],r._openHandler=function(){r._onSourceOpen()},r._flowHandler=function(){r._flow()},r._errorHandler=function(n){r.destroyed||r.emit("error",n)},typeof t=="string")r._type=t,r._mediaSource.readyState==="open"?r._createSourceBuffer():r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(t._sourceBuffer===null)t.destroy(),r._type=t._type,r._mediaSource.addEventListener("sourceopen",r._openHandler);else if(t._sourceBuffer)t.destroy(),r._type=t._type,r._sourceBuffer=t._sourceBuffer,r._debugBuffers=t._debugBuffers,r._sourceBuffer.addEventListener("updateend",r._flowHandler),r._sourceBuffer.addEventListener("error",r._errorHandler);else throw new Error("The argument to MediaElementWrapper.createWriteStream must be a string or a previous stream returned from that function");r._elem.addEventListener("timeupdate",r._flowHandler),r.on("error",function(n){r._wrapper.error(n)}),r.on("finish",function(){if(!r.destroyed&&(r._finished=!0,r._allStreams.every(function(n){return n._finished}))){r._wrapper._dumpDebugData();try{r._mediaSource.endOfStream()}catch{}}})}Et.prototype._onSourceOpen=function(){var e=this;e.destroyed||(e._mediaSource.removeEventListener("sourceopen",e._openHandler),e._createSourceBuffer())};Et.prototype.destroy=function(e){var t=this;t.destroyed||(t.destroyed=!0,t._allStreams.splice(t._allStreams.indexOf(t),1),t._mediaSource.removeEventListener("sourceopen",t._openHandler),t._elem.removeEventListener("timeupdate",t._flowHandler),t._sourceBuffer&&(t._sourceBuffer.removeEventListener("updateend",t._flowHandler),t._sourceBuffer.removeEventListener("error",t._errorHandler),t._mediaSource.readyState==="open"&&t._sourceBuffer.abort()),e&&t.emit("error",e),t.emit("close"))};Et.prototype._createSourceBuffer=function(){var e=this;if(!e.destroyed)if(oa.isTypeSupported(e._type)){if(e._sourceBuffer=e._mediaSource.addSourceBuffer(e._type),e._sourceBuffer.addEventListener("updateend",e._flowHandler),e._sourceBuffer.addEventListener("error",e._errorHandler),e._cb){var t=e._cb;e._cb=null,t()}}else e.destroy(new Error("The provided type is not supported"))};Et.prototype._write=function(e,t,r){var n=this;if(!n.destroyed){if(!n._sourceBuffer){n._cb=function(f){if(f)return r(f);n._write(e,t,r)};return}if(n._sourceBuffer.updating)return r(new Error("Cannot append buffer while source buffer updating"));var o=Mp(e);n._wrapper._debug&&n._debugBuffers.push(o);try{n._sourceBuffer.appendBuffer(o)}catch(f){n.destroy(f);return}n._cb=r}};Et.prototype._flow=function(){var e=this;if(!(e.destroyed||!e._sourceBuffer||e._sourceBuffer.updating)&&!(e._mediaSource.readyState==="open"&&e._getBufferDuration()>e._bufferDuration)&&e._cb){var t=e._cb;e._cb=null,t()}};var Op=0;Et.prototype._getBufferDuration=function(){for(var e=this,t=e._sourceBuffer.buffered,r=e._elem.currentTime,n=-1,o=0;o<t.length;o++){var f=t.start(o),c=t.end(o)+Op;if(f>r)break;(n>=0||r<=c)&&(n=c)}var p=n-r;return p<0&&(p=0),p};function Ip(e,t){var r=document.createElement("a");r.href=window.URL.createObjectURL(new window.Blob(e)),r.download=t,r.click()}/*! stream-to-blob. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Pp=Np;function Np(e,t){if(t!=null&&typeof t!="string")throw new Error("Invalid mimetype, expected string.");return new Promise((r,n)=>{const o=[];e.on("data",f=>o.push(f)).once("end",()=>{const f=t!=null?new Blob(o,{type:t}):new Blob(o);r(f)}).once("error",n)})}/*! stream-to-blob-url. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Dp=Up;const Fp=Pp;async function Up(e,t){const r=await Fp(e,t);return URL.createObjectURL(r)}var $p=At,jp=function(){},Wp=function(e){return e.setHeader&&typeof e.abort=="function"},qp=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},iu=function(e,t,r){if(typeof t=="function")return iu(e,null,t);t||(t={}),r=$p(r||jp);var n=e._writableState,o=e._readableState,f=t.readable||t.readable!==!1&&e.readable,c=t.writable||t.writable!==!1&&e.writable,p=!1,g=function(){e.writable||y()},y=function(){c=!1,f||r.call(e)},m=function(){f=!1,c||r.call(e)},w=function(R){r.call(e,R?new Error("exited with error code: "+R):null)},k=function(R){r.call(e,R)},A=function(){process.nextTick(x)},x=function(){if(!p){if(f&&!(o&&o.ended&&!o.destroyed))return r.call(e,new Error("premature close"));if(c&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},C=function(){e.req.on("finish",y)};return Wp(e)?(e.on("complete",y),e.on("abort",A),e.req?C():e.on("request",C)):c&&!n&&(e.on("end",g),e.on("close",g)),qp(e)&&e.on("exit",w),e.on("end",m),e.on("finish",y),t.error!==!1&&e.on("error",k),e.on("close",A),function(){p=!0,e.removeListener("complete",y),e.removeListener("abort",A),e.removeListener("request",C),e.req&&e.req.removeListener("finish",y),e.removeListener("end",g),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("exit",w),e.removeListener("end",m),e.removeListener("error",k),e.removeListener("close",A)}},au=iu,Hp=At,zp=au,Kn=de,gr=function(){},Gp=/^v?\.0/.test(process.version),pn=function(e){return typeof e=="function"},Vp=function(e){return!Gp||!Kn?!1:(e instanceof(Kn.ReadStream||gr)||e instanceof(Kn.WriteStream||gr))&&pn(e.close)},Kp=function(e){return e.setHeader&&pn(e.abort)},Yp=function(e,t,r,n){n=Hp(n);var o=!1;e.on("close",function(){o=!0}),zp(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,Vp(e))return e.close(gr);if(Kp(e))return e.abort();if(pn(e.destroy))return e.destroy();n(c||new Error("stream was destroyed"))}}},es=function(e){e()},Xp=function(e,t){return e.pipe(t)},Jp=function(){var e=Array.prototype.slice.call(arguments),t=pn(e[e.length-1]||gr)&&e.pop()||gr;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(o,f){var c=f<e.length-1,p=f>0;return Yp(o,c,p,function(g){r||(r=g),g&&n.forEach(es),!c&&(n.forEach(es),t(r))})});return e.reduce(Xp)},ou=Jp,Zp=function(e,t,r,n,o){var f,c;if(n===void 0)n=0;else if(n=n|0,n<0||n>=e.length)throw new RangeError("invalid lower bound");if(o===void 0)o=e.length-1;else if(o=o|0,o<n||o>=e.length)throw new RangeError("invalid upper bound");for(;n<=o;)if(f=n+(o-n>>>1),c=+r(e[f],t,f,e),c<0)n=f+1;else if(c>0)o=f-1;else return f;return~n},Ka={},sa={exports:{}},su=xe.EventEmitter,Yn,ts;function Qp(){if(ts)return Yn;ts=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return Yn=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),Yn}function eg(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(la,this,e)):process.nextTick(la,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick(Ur,r):(r._writableState.errorEmitted=!0,process.nextTick(rs,r,f)):process.nextTick(rs,r,f):t?(process.nextTick(Ur,r),t(f)):process.nextTick(Ur,r)}),this)}function rs(e,t){la(e,t),Ur(e)}function Ur(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function tg(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function la(e,t){e.emit("error",t)}function rg(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var lu={destroy:eg,undestroy:tg,errorOrDestroy:rg},Bt={};function ng(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var fu={};function Ve(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){ng(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,fu[e]=o}function ns(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function ig(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function ag(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function og(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ve("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ve("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&ig(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(ag(e," argument"))o="The ".concat(e," ").concat(n," ").concat(ns(t,"type"));else{var f=og(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat(ns(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Ve("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ve("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ve("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ve("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ve("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ve("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ve("ERR_STREAM_WRITE_AFTER_END","write after end");Ve("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ve("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ve("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Bt.codes=fu;var sg=Bt.codes.ERR_INVALID_OPT_VALUE;function lg(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function fg(e,t,r,n){var o=lg(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new sg(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var uu={getHighWaterMark:fg},Xn,is;function du(){if(is)return Xn;is=1,Xn=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=su,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=lu,y=uu,m=y.getHighWaterMark,w=Bt.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||Kt(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||Kt();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},Xn}var Jn,as;function Kt(){if(as)return Jn;as=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};Jn=c;var t=hu(),r=du();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),Jn}var Zn={},os;function ss(){if(os)return Zn;os=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}Zn.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return Zn}var ls=Bt.codes.ERR_STREAM_PREMATURE_CLOSE;function ug(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function dg(){}function cg(e){return e.setHeader&&typeof e.abort=="function"}function cu(e,t,r){if(typeof t=="function")return cu(e,null,t);t||(t={}),r=ug(r||dg);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new ls),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new ls),r.call(e,x)},k=function(){e.req.on("finish",p)};return cg(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var Ya=cu,Qn,fs;function hg(){if(fs)return Qn;fs=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=Ya,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return Qn=v,Qn}var ei,us;function pg(){return us||(us=1,ei=function(){throw new Error("Readable.from is not available in the browser")}),ei}var ti,ds;function hu(){if(ds)return ti;ds=1,ti=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=su,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=Qp(),m=lu,w=uu,k=w.getHighWaterMark,A=Bt.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||Kt(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=ss().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||Kt(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=ss().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=hg()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=pg()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return ti}var pu=lt,gn=Bt.codes,gg=gn.ERR_METHOD_NOT_IMPLEMENTED,vg=gn.ERR_MULTIPLE_CALLBACK,_g=gn.ERR_TRANSFORM_ALREADY_TRANSFORMING,yg=gn.ERR_TRANSFORM_WITH_LENGTH_0,vn=Kt();oe(lt,vn);function mg(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new vg);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function lt(e){if(!(this instanceof lt))return new lt(e);vn.call(this,e),this._transformState={afterTransform:mg.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",wg)}function wg(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){cs(e,t,r)}):cs(this,null,null)}lt.prototype.push=function(e,t){return this._transformState.needTransform=!1,vn.prototype.push.call(this,e,t)};lt.prototype._transform=function(e,t,r){r(new gg("_transform()"))};lt.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};lt.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};lt.prototype._destroy=function(e,t){vn.prototype._destroy.call(this,e,function(r){t(r)})};function cs(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new yg;if(e._transformState.transforming)throw new _g;return e.push(null)}var bg=vr,gu=pu;oe(vr,gu);function vr(e){if(!(this instanceof vr))return new vr(e);gu.call(this,e)}vr.prototype._transform=function(e,t,r){r(null,e)};var ri;function Eg(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var vu=Bt.codes,Sg=vu.ERR_MISSING_ARGS,Rg=vu.ERR_STREAM_DESTROYED;function hs(e){if(e)throw e}function xg(e){return e.setHeader&&typeof e.abort=="function"}function Tg(e,t,r,n){n=Eg(n);var o=!1;e.on("close",function(){o=!0}),ri===void 0&&(ri=Ya),ri(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,xg(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new Rg("pipe"))}}}function ps(e){e()}function Cg(e,t){return e.pipe(t)}function kg(e){return!e.length||typeof e[e.length-1]!="function"?hs:e.pop()}function Ag(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=kg(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Sg("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return Tg(c,g,y,function(m){o||(o=m),m&&f.forEach(ps),!g&&(f.forEach(ps),n(o))})});return t.reduce(Cg)}var Lg=Ag;(function(e,t){t=e.exports=hu(),t.Stream=t,t.Readable=t,t.Writable=du(),t.Duplex=Kt(),t.Transform=pu,t.PassThrough=bg,t.finished=Ya,t.pipeline=Lg})(sa,sa.exports);var _u=sa.exports,Mg=Bg;function Bg(e,t){var r=null;return e.on(t,function(n){if(r){var o=r;r=null,o(n)}}),function(n){r=n}}var ni={},Xa={},Og=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),e.toString("hex")==="61006200"}catch{return!1}}();function Ig(e){return e.length===1&&e.charCodeAt(0)<256}function Br(e,t,r,n){if(r<0||n>e.length)throw new RangeError("Out of range index");return r=r>>>0,n=n===void 0?e.length:n>>>0,n>r&&e.fill(t,r,n),e}function Pg(e,t,r,n){if(r<0||n>e.length)throw new RangeError("Out of range index");if(n<=r)return e;r=r>>>0,n=n===void 0?e.length:n>>>0;for(var o=r,f=t.length;o<=n-f;)t.copy(e,o),o+=f;return o!==n&&t.copy(e,o,0,n-o),e}function Ng(e,t,r,n,o){if(Og)return e.fill(t,r,n,o);if(typeof t=="number")return Br(e,t,r,n);if(typeof t=="string"){if(typeof r=="string"?(o=r,r=0,n=e.length):typeof n=="string"&&(o=n,n=e.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(o==="latin1"&&(o="binary"),typeof o=="string"&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t==="")return Br(e,0,r,n);if(Ig(t))return Br(e,t.charCodeAt(0),r,n);t=new Buffer(t,o)}return Buffer.isBuffer(t)?Pg(e,t,r,n):Br(e,0,r,n)}var Dg=Ng;function Fg(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}var Ug=Fg,gs=Dg,$g=Ug,jg=function(t,r,n){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(t,r,n);var o=$g(t);return t===0?o:r===void 0?gs(o,0):(typeof n!="string"&&(n=void 0),gs(o,r,n))};(function(e){var t=jg,r=Math.pow(2,32);e.encodingLength=function(){return 8},e.encode=function(n,o,f){o||(o=t(8)),f||(f=0);var c=Math.floor(n/r),p=n-c*r;return o.writeUInt32BE(c,f),o.writeUInt32BE(p,f+4),o},e.decode=function(n,o){o||(o=0);var f=n.readUInt32BE(o),c=n.readUInt32BE(o+4);return f*r+c},e.encode.bytes=8,e.decode.bytes=8})(Xa);var ii={},yu={};(function(e){var t={3:"ESDescriptor",4:"DecoderConfigDescriptor",5:"DecoderSpecificInfo",6:"SLConfigDescriptor"};e.Descriptor={},e.Descriptor.decode=function(r,n,o){var f=r.readUInt8(n),c=n+1,p,g=0;do p=r.readUInt8(c++),g=g<<7|p&127;while(p&128);var y,m=t[f];return e[m]?y=e[m].decode(r,c,o):y={buffer:Buffer.from(r.slice(c,c+g))},y.tag=f,y.tagName=m,y.length=c-n+g,y.contentsLen=g,y},e.DescriptorArray={},e.DescriptorArray.decode=function(r,n,o){for(var f=n,c={};f+2<=o;){var p=e.Descriptor.decode(r,f,o);f+=p.length;var g=t[p.tag]||"Descriptor"+p.tag;c[g]=p}return c},e.ESDescriptor={},e.ESDescriptor.decode=function(r,n,o){var f=r.readUInt8(n+2),c=n+3;if(f&128&&(c+=2),f&64){var p=r.readUInt8(c);c+=p+1}return f&32&&(c+=2),e.DescriptorArray.decode(r,c,o)},e.DecoderConfigDescriptor={},e.DecoderConfigDescriptor.decode=function(r,n,o){var f=r.readUInt8(n),c=e.DescriptorArray.decode(r,n+13,o);return c.oti=f,c}})(yu);var vs;function Wg(){return vs||(vs=1,function(e){var t=_n(),r=yu,n=Xa,o=20828448e5;e.fullBoxes={};var f=["mvhd","tkhd","mdhd","vmhd","smhd","stsd","esds","stsz","stco","co64","stss","stts","ctts","stsc","dref","elst","hdlr","mehd","trex","mfhd","tfhd","tfdt","trun"];f.forEach(function(u){e.fullBoxes[u]=!0}),e.ftyp={},e.ftyp.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.ftyp.encodingLength(u));var L=u.compatibleBrands||[];d.write(u.brand,0,4,"ascii"),d.writeUInt32BE(u.brandVersion,4);for(var N=0;N<L.length;N++)d.write(L[N],8+N*4,4,"ascii");return e.ftyp.encode.bytes=8+L.length*4,d},e.ftyp.decode=function(u,d){u=u.slice(d);for(var b=u.toString("ascii",0,4),L=u.readUInt32BE(4),N=[],P=8;P<u.length;P+=4)N.push(u.toString("ascii",P,P+4));return{brand:b,brandVersion:L,compatibleBrands:N}},e.ftyp.encodingLength=function(u){return 8+(u.compatibleBrands||[]).length*4},e.mvhd={},e.mvhd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(96),p(u.ctime||new Date,d,0),p(u.mtime||new Date,d,4),d.writeUInt32BE(u.timeScale||0,8),d.writeUInt32BE(u.duration||0,12),y(u.preferredRate||0,d,16),m(u.preferredVolume||0,d,20),c(d,22,32),w(u.matrix,d,32),d.writeUInt32BE(u.previewTime||0,68),d.writeUInt32BE(u.previewDuration||0,72),d.writeUInt32BE(u.posterTime||0,76),d.writeUInt32BE(u.selectionTime||0,80),d.writeUInt32BE(u.selectionDuration||0,84),d.writeUInt32BE(u.currentTime||0,88),d.writeUInt32BE(u.nextTrackId||0,92),e.mvhd.encode.bytes=96,d},e.mvhd.decode=function(u,d){return u=u.slice(d),{ctime:C(u,0),mtime:C(u,4),timeScale:u.readUInt32BE(8),duration:u.readUInt32BE(12),preferredRate:R(u,16),preferredVolume:s(u,20),matrix:A(u.slice(32,68)),previewTime:u.readUInt32BE(68),previewDuration:u.readUInt32BE(72),posterTime:u.readUInt32BE(76),selectionTime:u.readUInt32BE(80),selectionDuration:u.readUInt32BE(84),currentTime:u.readUInt32BE(88),nextTrackId:u.readUInt32BE(92)}},e.mvhd.encodingLength=function(u){return 96},e.tkhd={},e.tkhd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(80),p(u.ctime||new Date,d,0),p(u.mtime||new Date,d,4),d.writeUInt32BE(u.trackId||0,8),c(d,12,16),d.writeUInt32BE(u.duration||0,16),c(d,20,28),d.writeUInt16BE(u.layer||0,28),d.writeUInt16BE(u.alternateGroup||0,30),d.writeUInt16BE(u.volume||0,32),w(u.matrix,d,36),d.writeUInt32BE(u.trackWidth||0,72),d.writeUInt32BE(u.trackHeight||0,76),e.tkhd.encode.bytes=80,d},e.tkhd.decode=function(u,d){return u=u.slice(d),{ctime:C(u,0),mtime:C(u,4),trackId:u.readUInt32BE(8),duration:u.readUInt32BE(16),layer:u.readUInt16BE(28),alternateGroup:u.readUInt16BE(30),volume:u.readUInt16BE(32),matrix:A(u.slice(36,72)),trackWidth:u.readUInt32BE(72),trackHeight:u.readUInt32BE(76)}},e.tkhd.encodingLength=function(u){return 80},e.mdhd={},e.mdhd.encode=function(u,d,b){return u.version===1?(d=d?d.slice(b):Buffer.alloc(32),g(u.ctime||new Date,d,0),g(u.mtime||new Date,d,8),d.writeUInt32BE(u.timeScale||0,16),d.writeUIntBE(u.duration||0,20,6),d.writeUInt16BE(u.language||0,28),d.writeUInt16BE(u.quality||0,30),e.mdhd.encode.bytes=32,d):(d=d?d.slice(b):Buffer.alloc(20),p(u.ctime||new Date,d,0),p(u.mtime||new Date,d,4),d.writeUInt32BE(u.timeScale||0,8),d.writeUInt32BE(u.duration||0,12),d.writeUInt16BE(u.language||0,16),d.writeUInt16BE(u.quality||0,18),e.mdhd.encode.bytes=20,d)},e.mdhd.decode=function(u,d,b){u=u.slice(d);var L=b-d!==20;return L?{ctime:x(u,0),mtime:x(u,8),timeScale:u.readUInt32BE(16),duration:u.readUIntBE(20,6),language:u.readUInt16BE(28),quality:u.readUInt16BE(30)}:{ctime:C(u,0),mtime:C(u,4),timeScale:u.readUInt32BE(8),duration:u.readUInt32BE(12),language:u.readUInt16BE(16),quality:u.readUInt16BE(18)}},e.mdhd.encodingLength=function(u){return u.version===1?32:20},e.vmhd={},e.vmhd.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(8),d.writeUInt16BE(u.graphicsMode||0,0);var L=u.opcolor||[0,0,0];return d.writeUInt16BE(L[0],2),d.writeUInt16BE(L[1],4),d.writeUInt16BE(L[2],6),e.vmhd.encode.bytes=8,d},e.vmhd.decode=function(u,d){return u=u.slice(d),{graphicsMode:u.readUInt16BE(0),opcolor:[u.readUInt16BE(2),u.readUInt16BE(4),u.readUInt16BE(6)]}},e.vmhd.encodingLength=function(u){return 8},e.smhd={},e.smhd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(4),d.writeUInt16BE(u.balance||0,0),c(d,2,4),e.smhd.encode.bytes=4,d},e.smhd.decode=function(u,d){return u=u.slice(d),{balance:u.readUInt16BE(0)}},e.smhd.encodingLength=function(u){return 4},e.stsd={},e.stsd.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.stsd.encodingLength(u));var L=u.entries||[];d.writeUInt32BE(L.length,0);for(var N=4,P=0;P<L.length;P++){var I=L[P];t.encode(I,d,N),N+=t.encode.bytes}return e.stsd.encode.bytes=N,d},e.stsd.decode=function(u,d,b){u=u.slice(d);for(var L=u.readUInt32BE(0),N=new Array(L),P=4,I=0;I<L;I++){var V=t.decode(u,P,b);N[I]=V,P+=V.length}return{entries:N}},e.stsd.encodingLength=function(u){var d=4;if(!u.entries)return d;for(var b=0;b<u.entries.length;b++)d+=t.encodingLength(u.entries[b]);return d},e.avc1=e.VisualSampleEntry={},e.VisualSampleEntry.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.VisualSampleEntry.encodingLength(u)),c(d,0,6),d.writeUInt16BE(u.dataReferenceIndex||0,6),c(d,8,24),d.writeUInt16BE(u.width||0,24),d.writeUInt16BE(u.height||0,26),d.writeUInt32BE(u.hResolution||4718592,28),d.writeUInt32BE(u.vResolution||4718592,32),c(d,36,40),d.writeUInt16BE(u.frameCount||1,40);var L=u.compressorName||"",N=Math.min(L.length,31);d.writeUInt8(N,42),d.write(L,43,N,"utf8"),d.writeUInt16BE(u.depth||24,74),d.writeInt16BE(-1,76);var P=78,I=u.children||[];I.forEach(function(V){t.encode(V,d,P),P+=t.encode.bytes}),e.VisualSampleEntry.encode.bytes=P},e.VisualSampleEntry.decode=function(u,d,b){u=u.slice(d);for(var L=b-d,N=Math.min(u.readUInt8(42),31),P={dataReferenceIndex:u.readUInt16BE(6),width:u.readUInt16BE(24),height:u.readUInt16BE(26),hResolution:u.readUInt32BE(28),vResolution:u.readUInt32BE(32),frameCount:u.readUInt16BE(40),compressorName:u.toString("utf8",43,43+N),depth:u.readUInt16BE(74),children:[]},I=78;L-I>=8;){var V=t.decode(u,I,L);P.children.push(V),P[V.type]=V,I+=V.length}return P},e.VisualSampleEntry.encodingLength=function(u){var d=78,b=u.children||[];return b.forEach(function(L){d+=t.encodingLength(L)}),d},e.avcC={},e.avcC.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(u.buffer.length),u.buffer.copy(d),e.avcC.encode.bytes=u.buffer.length},e.avcC.decode=function(u,d,b){return u=u.slice(d,b),{mimeCodec:u.toString("hex",1,4),buffer:Buffer.from(u)}},e.avcC.encodingLength=function(u){return u.buffer.length},e.mp4a=e.AudioSampleEntry={},e.AudioSampleEntry.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.AudioSampleEntry.encodingLength(u)),c(d,0,6),d.writeUInt16BE(u.dataReferenceIndex||0,6),c(d,8,16),d.writeUInt16BE(u.channelCount||2,16),d.writeUInt16BE(u.sampleSize||16,18),c(d,20,24),d.writeUInt32BE(u.sampleRate||0,24);var L=28,N=u.children||[];N.forEach(function(P){t.encode(P,d,L),L+=t.encode.bytes}),e.AudioSampleEntry.encode.bytes=L},e.AudioSampleEntry.decode=function(u,d,b){u=u.slice(d,b);for(var L=b-d,N={dataReferenceIndex:u.readUInt16BE(6),channelCount:u.readUInt16BE(16),sampleSize:u.readUInt16BE(18),sampleRate:u.readUInt32BE(24),children:[]},P=28;L-P>=8;){var I=t.decode(u,P,L);N.children.push(I),N[I.type]=I,P+=I.length}return N},e.AudioSampleEntry.encodingLength=function(u){var d=28,b=u.children||[];return b.forEach(function(L){d+=t.encodingLength(L)}),d},e.esds={},e.esds.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(u.buffer.length),u.buffer.copy(d,0),e.esds.encode.bytes=u.buffer.length},e.esds.decode=function(u,d,b){u=u.slice(d,b);var L=r.Descriptor.decode(u,0,u.length),N=L.tagName==="ESDescriptor"?L:{},P=N.DecoderConfigDescriptor||{},I=P.oti||0,V=P.DecoderSpecificInfo,ee=V?(V.buffer.readUInt8(0)&248)>>3:0,ie=null;return I&&(ie=I.toString(16),ee&&(ie+="."+ee)),{mimeCodec:ie,buffer:Buffer.from(u.slice(0))}},e.esds.encodingLength=function(u){return u.buffer.length},e.stsz={},e.stsz.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.stsz.encodingLength(u)),d.writeUInt32BE(0,0),d.writeUInt32BE(L.length,4);for(var N=0;N<L.length;N++)d.writeUInt32BE(L[N],N*4+8);return e.stsz.encode.bytes=8+L.length*4,d},e.stsz.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=u.readUInt32BE(4),N=new Array(L),P=0;P<L;P++)b===0?N[P]=u.readUInt32BE(P*4+8):N[P]=b;return{entries:N}},e.stsz.encodingLength=function(u){return 8+u.entries.length*4},e.stss=e.stco={},e.stco.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.stco.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++)d.writeUInt32BE(L[N],N*4+4);return e.stco.encode.bytes=4+L.length*4,d},e.stco.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++)L[N]=u.readUInt32BE(N*4+4);return{entries:L}},e.stco.encodingLength=function(u){return 4+u.entries.length*4},e.co64={},e.co64.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.co64.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++)n.encode(L[N],d,N*8+4);return e.co64.encode.bytes=4+L.length*8,d},e.co64.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++)L[N]=n.decode(u,N*8+4);return{entries:L}},e.co64.encodingLength=function(u){return 4+u.entries.length*8},e.stts={},e.stts.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.stts.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++){var P=N*8+4;d.writeUInt32BE(L[N].count||0,P),d.writeUInt32BE(L[N].duration||0,P+4)}return e.stts.encode.bytes=4+u.entries.length*8,d},e.stts.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++){var P=N*8+4;L[N]={count:u.readUInt32BE(P),duration:u.readUInt32BE(P+4)}}return{entries:L}},e.stts.encodingLength=function(u){return 4+u.entries.length*8},e.ctts={},e.ctts.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.ctts.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++){var P=N*8+4;d.writeUInt32BE(L[N].count||0,P),d.writeUInt32BE(L[N].compositionOffset||0,P+4)}return e.ctts.encode.bytes=4+L.length*8,d},e.ctts.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++){var P=N*8+4;L[N]={count:u.readUInt32BE(P),compositionOffset:u.readInt32BE(P+4)}}return{entries:L}},e.ctts.encodingLength=function(u){return 4+u.entries.length*8},e.stsc={},e.stsc.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.stsc.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++){var P=N*12+4;d.writeUInt32BE(L[N].firstChunk||0,P),d.writeUInt32BE(L[N].samplesPerChunk||0,P+4),d.writeUInt32BE(L[N].sampleDescriptionId||0,P+8)}return e.stsc.encode.bytes=4+L.length*12,d},e.stsc.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++){var P=N*12+4;L[N]={firstChunk:u.readUInt32BE(P),samplesPerChunk:u.readUInt32BE(P+4),sampleDescriptionId:u.readUInt32BE(P+8)}}return{entries:L}},e.stsc.encodingLength=function(u){return 4+u.entries.length*12},e.dref={},e.dref.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.dref.encodingLength(u));var L=u.entries||[];d.writeUInt32BE(L.length,0);for(var N=4,P=0;P<L.length;P++){var I=L[P],V=(I.buf?I.buf.length:0)+4+4;d.writeUInt32BE(V,N),N+=4,d.write(I.type,N,4,"ascii"),N+=4,I.buf&&(I.buf.copy(d,N),N+=I.buf.length)}return e.dref.encode.bytes=N,d},e.dref.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=4,P=0;P<b;P++){var I=u.readUInt32BE(N),V=u.toString("ascii",N+4,N+8),ee=u.slice(N+8,N+I);N+=I,L[P]={type:V,buf:ee}}return{entries:L}},e.dref.encodingLength=function(u){var d=4;if(!u.entries)return d;for(var b=0;b<u.entries.length;b++){var L=u.entries[b].buf;d+=(L?L.length:0)+4+4}return d},e.elst={},e.elst.encode=function(u,d,b){var L=u.entries||[];d=d?d.slice(b):Buffer.alloc(e.elst.encodingLength(u)),d.writeUInt32BE(L.length,0);for(var N=0;N<L.length;N++){var P=N*12+4;d.writeUInt32BE(L[N].trackDuration||0,P),d.writeUInt32BE(L[N].mediaTime||0,P+4),y(L[N].mediaRate||0,d,P+8)}return e.elst.encode.bytes=4+L.length*12,d},e.elst.decode=function(u,d){u=u.slice(d);for(var b=u.readUInt32BE(0),L=new Array(b),N=0;N<b;N++){var P=N*12+4;L[N]={trackDuration:u.readUInt32BE(P),mediaTime:u.readInt32BE(P+4),mediaRate:R(u,P+8)}}return{entries:L}},e.elst.encodingLength=function(u){return 4+u.entries.length*12},e.hdlr={},e.hdlr.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(e.hdlr.encodingLength(u));var L=21+(u.name||"").length;return d.fill(0,0,L),d.write(u.handlerType||"",4,4,"ascii"),k(u.name||"",d,20),e.hdlr.encode.bytes=L,d},e.hdlr.decode=function(u,d,b){return u=u.slice(d),{handlerType:u.toString("ascii",4,8),name:v(u,20,b)}},e.hdlr.encodingLength=function(u){return 21+(u.name||"").length},e.mehd={},e.mehd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(4),d.writeUInt32BE(u.fragmentDuration||0,0),e.mehd.encode.bytes=4,d},e.mehd.decode=function(u,d){return u=u.slice(d),{fragmentDuration:u.readUInt32BE(0)}},e.mehd.encodingLength=function(u){return 4},e.trex={},e.trex.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(20),d.writeUInt32BE(u.trackId||0,0),d.writeUInt32BE(u.defaultSampleDescriptionIndex||0,4),d.writeUInt32BE(u.defaultSampleDuration||0,8),d.writeUInt32BE(u.defaultSampleSize||0,12),d.writeUInt32BE(u.defaultSampleFlags||0,16),e.trex.encode.bytes=20,d},e.trex.decode=function(u,d){return u=u.slice(d),{trackId:u.readUInt32BE(0),defaultSampleDescriptionIndex:u.readUInt32BE(4),defaultSampleDuration:u.readUInt32BE(8),defaultSampleSize:u.readUInt32BE(12),defaultSampleFlags:u.readUInt32BE(16)}},e.trex.encodingLength=function(u){return 20},e.mfhd={},e.mfhd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(4),d.writeUInt32BE(u.sequenceNumber||0,0),e.mfhd.encode.bytes=4,d},e.mfhd.decode=function(u,d){return{sequenceNumber:u.readUInt32BE(0)}},e.mfhd.encodingLength=function(u){return 4},e.tfhd={},e.tfhd.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(4),d.writeUInt32BE(u.trackId,0),e.tfhd.encode.bytes=4,d},e.tfhd.decode=function(u,d){},e.tfhd.encodingLength=function(u){return 4},e.tfdt={},e.tfdt.encode=function(u,d,b){return d=d?d.slice(b):Buffer.alloc(4),d.writeUInt32BE(u.baseMediaDecodeTime||0,0),e.tfdt.encode.bytes=4,d},e.tfdt.decode=function(u,d){},e.tfdt.encodingLength=function(u){return 4},e.trun={},e.trun.encode=function(u,d,b){d=d?d.slice(b):Buffer.alloc(8+u.entries.length*16),d.writeUInt32BE(u.entries.length,0),d.writeInt32BE(u.dataOffset,4);for(var L=8,N=0;N<u.entries.length;N++){var P=u.entries[N];d.writeUInt32BE(P.sampleDuration,L),L+=4,d.writeUInt32BE(P.sampleSize,L),L+=4,d.writeUInt32BE(P.sampleFlags,L),L+=4,(u.version||0)===0?d.writeUInt32BE(P.sampleCompositionTimeOffset,L):d.writeInt32BE(P.sampleCompositionTimeOffset,L),L+=4}e.trun.encode.bytes=L},e.trun.decode=function(u,d){},e.trun.encodingLength=function(u){return 8+u.entries.length*16},e.mdat={},e.mdat.encode=function(u,d,b){u.buffer?(u.buffer.copy(d,b),e.mdat.encode.bytes=u.buffer.length):e.mdat.encode.bytes=e.mdat.encodingLength(u)},e.mdat.decode=function(u,d,b){return{buffer:Buffer.from(u.slice(d,b))}},e.mdat.encodingLength=function(u){return u.buffer?u.buffer.length:u.contentLength};function c(u,d,b){for(var L=d;L<b;L++)u[L]=0}function p(u,d,b){d.writeUInt32BE(Math.floor((u.getTime()+o)/1e3),b)}function g(u,d,b){d.writeUIntBE(Math.floor((u.getTime()+o)/1e3),b,6)}function y(u,d,b){d.writeUInt16BE(Math.floor(u)%(256*256),b),d.writeUInt16BE(Math.floor(u*256*256)%(256*256),b+2)}function m(u,d,b){d[b]=Math.floor(u)%256,d[b+1]=Math.floor(u*256)%256}function w(u,d,b){u||(u=[0,0,0,0,0,0,0,0,0]);for(var L=0;L<u.length;L++)y(u[L],d,b+L*4)}function k(u,d,b){var L=Buffer.from(u,"utf8");L.copy(d,b),d[b+L.length]=0}function A(u){for(var d=new Array(u.length/4),b=0;b<d.length;b++)d[b]=R(u,b*4);return d}function x(u,d){return new Date(u.readUIntBE(d,6)*1e3-o)}function C(u,d){return new Date(u.readUInt32BE(d)*1e3-o)}function R(u,d){return u.readUInt16BE(d)+u.readUInt16BE(d+2)/(256*256)}function s(u,d){return u[d]+u[d+1]/256}function v(u,d,b){var L;for(L=0;L<b&&u[d+L]!==0;L++);return u.toString("utf8",d,d+L)}}(ii)),ii}var _s;function _n(){return _s||(_s=1,function(e){var t=Xa,r=Wg(),n=4294967295,o=e,f=e.containers={moov:["mvhd","meta","traks","mvex"],trak:["tkhd","tref","trgr","edts","meta","mdia","udta"],edts:["elst"],mdia:["mdhd","hdlr","elng","minf"],minf:["vmhd","smhd","hmhd","sthd","nmhd","dinf","stbl"],dinf:["dref"],stbl:["stsd","stts","ctts","cslg","stsc","stsz","stz2","stco","co64","stss","stsh","padb","stdp","sdtp","sbgps","sgpds","subss","saizs","saios"],mvex:["mehd","trexs","leva"],moof:["mfhd","meta","trafs"],traf:["tfhd","tfdt","trun","sbgps","sgpds","subss","saizs","saios","meta"]};o.encode=function(c,p,g){return o.encodingLength(c),g=g||0,p=p||Buffer.alloc(c.length),o._encode(c,p,g)},o._encode=function(c,p,g){var y=c.type,m=c.length;m>n&&(m=1),p.writeUInt32BE(m,g),p.write(c.type,g+4,4,"ascii");var w=g+8;if(m===1&&(t.encode(c.length,p,w),w+=8),r.fullBoxes[y]&&(p.writeUInt32BE(c.flags||0,w),p.writeUInt8(c.version||0,w),w+=4),f[y]){var k=f[y];k.forEach(function(C){if(C.length===5){var R=c[C]||[];C=C.substr(0,4),R.forEach(function(s){o._encode(s,p,w),w+=o.encode.bytes})}else c[C]&&(o._encode(c[C],p,w),w+=o.encode.bytes)}),c.otherBoxes&&c.otherBoxes.forEach(function(C){o._encode(C,p,w),w+=o.encode.bytes})}else if(r[y]){var A=r[y].encode;A(c,p,w),w+=A.bytes}else if(c.buffer){var x=c.buffer;x.copy(p,w),w+=c.buffer.length}else throw new Error("Either `type` must be set to a known type (not'"+y+"') or `buffer` must be set");return o.encode.bytes=w-g,p},o.readHeaders=function(c,p,g){if(p=p||0,g=g||c.length,g-p<8)return 8;var y=c.readUInt32BE(p),m=c.toString("ascii",p+4,p+8),w=p+8;if(y===1){if(g-p<16)return 16;y=t.decode(c,w),w+=8}var k,A;return r.fullBoxes[m]&&(k=c.readUInt8(w),A=c.readUInt32BE(w)&16777215,w+=4),{length:y,headersLen:w-p,contentLen:y-(w-p),type:m,version:k,flags:A}},o.decode=function(c,p,g){p=p||0,g=g||c.length;var y=o.readHeaders(c,p,g);if(!y||y.length>g-p)throw new Error("Data too short");return o.decodeWithoutHeaders(y,c,p+y.headersLen,p+y.length)},o.decodeWithoutHeaders=function(c,p,g,y){g=g||0,y=y||p.length;var m=c.type,w={};if(f[m]){w.otherBoxes=[];for(var k=f[m],A=g;y-A>=8;){var x=o.decode(p,A,y);if(A+=x.length,k.indexOf(x.type)>=0)w[x.type]=x;else if(k.indexOf(x.type+"s")>=0){var C=x.type+"s",R=w[C]=w[C]||[];R.push(x)}else w.otherBoxes.push(x)}}else if(r[m]){var s=r[m].decode;w=s(p,g,y)}else w.buffer=Buffer.from(p.slice(g,y));return w.length=c.length,w.contentLen=c.contentLen,w.type=c.type,w.version=c.version,w.flags=c.flags,w},o.encodingLength=function(c){var p=c.type,g=8;if(r.fullBoxes[p]&&(g+=4),f[p]){var y=f[p];y.forEach(function(m){if(m.length===5){var w=c[m]||[];m=m.substr(0,4),w.forEach(function(A){A.type=m,g+=o.encodingLength(A)})}else if(c[m]){var k=c[m];k.type=m,g+=o.encodingLength(k)}}),c.otherBoxes&&c.otherBoxes.forEach(function(m){g+=o.encodingLength(m)})}else if(r[p])g+=r[p].encodingLength(c);else if(c.buffer)g+=c.buffer.length;else throw new Error("Either `type` must be set to a known type (not'"+p+"') or `buffer` must be set");return g>n&&(g+=8),c.length=g,g}}(ni)),ni}var mu=_u,qg=Mg,ys=_n(),Hg=Buffer.alloc(0);let zg=class extends mu.Writable{constructor(t){super(t),this.destroyed=!1,this._pending=0,this._missing=0,this._ignoreEmpty=!1,this._buf=null,this._str=null,this._cb=null,this._ondrain=null,this._writeBuffer=null,this._writeCb=null,this._ondrain=null,this._kick()}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit("error",t),this.emit("close"))}_write(t,r,n){if(!this.destroyed){for(var o=!this._str||!this._str._writableState.needDrain;t.length&&!this.destroyed;){if(!this._missing&&!this._ignoreEmpty){this._writeBuffer=t,this._writeCb=n;return}var f=t.length<this._missing?t.length:this._missing;if(this._buf?t.copy(this._buf,this._buf.length-this._missing):this._str&&(o=this._str.write(f===t.length?t:t.slice(0,f))),this._missing-=f,!this._missing){var c=this._buf,p=this._cb,g=this._str;this._buf=this._cb=this._str=this._ondrain=null,o=!0,this._ignoreEmpty=!1,g&&g.end(),p&&p(c)}t=f===t.length?Hg:t.slice(f)}if(this._pending&&!this._missing){this._writeBuffer=t,this._writeCb=n;return}o?n():this._ondrain(n)}}_buffer(t,r){this._missing=t,this._buf=Buffer.alloc(t),this._cb=r}_stream(t,r){return this._missing=t,this._str=new Gg(this),this._ondrain=qg(this._str,"drain"),this._pending++,this._str.on("end",()=>{this._pending--,this._kick()}),this._cb=r,this._str}_readBox(){const t=(r,n)=>{this._buffer(r,o=>{n?n=Buffer.concat([n,o]):n=o;var f=ys.readHeaders(n);typeof f=="number"?t(f-n.length,n):(this._pending++,this._headers=f,this.emit("box",f))})};t(8)}stream(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;return this._headers=null,this._stream(t.contentLen,()=>{this._pending--,this._kick()})}decode(t){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var r=this._headers;this._headers=null,this._buffer(r.contentLen,n=>{var o=ys.decodeWithoutHeaders(r,n);t(o),this._pending--,this._kick()})}ignore(){if(!this._headers)throw new Error("this function can only be called once after 'box' is emitted");var t=this._headers;this._headers=null,this._missing=t.contentLen,this._missing===0&&(this._ignoreEmpty=!0),this._cb=()=>{this._pending--,this._kick()}}_kick(){if(!this._pending&&(!this._buf&&!this._str&&this._readBox(),this._writeBuffer)){var t=this._writeCb,r=this._writeBuffer;this._writeBuffer=null,this._writeCb=null,this._write(r,null,t)}}},Gg=class extends mu.PassThrough{constructor(t){super(),this._parent=t,this.destroyed=!1}destroy(t){this.destroyed||(this.destroyed=!0,this._parent.destroy(t),t&&this.emit("error",t),this.emit("close"))}};var Vg=zg;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let ms;var Ot=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ce):e=>(ms||(ms=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),wu=_u,ws=_n(),Kg=Ot;function Yg(){}let Xg=class extends wu.Readable{constructor(t){super(t),this.destroyed=!1,this._finalized=!1,this._reading=!1,this._stream=null,this._drain=null,this._want=!1,this._onreadable=()=>{this._want&&(this._want=!1,this._read())},this._onend=()=>{this._stream=null}}mdat(t,r){this.mediaData(t,r)}mediaData(t,r){var n=new Jg(this);return this.box({type:"mdat",contentLength:t,encodeBufferLen:8,stream:n},r),n}box(t,r){if(r||(r=Yg),this.destroyed)return r(new Error("Encoder is destroyed"));var n;if(t.encodeBufferLen&&(n=Buffer.alloc(t.encodeBufferLen)),t.stream)t.buffer=null,n=ws.encode(t,n),this.push(n),this._stream=t.stream,this._stream.on("readable",this._onreadable),this._stream.on("end",this._onend),this._stream.on("end",r),this._forward();else{n=ws.encode(t,n);var o=this.push(n);if(o)return Kg(r);this._drain=r}}destroy(t){if(!this.destroyed){if(this.destroyed=!0,this._stream&&this._stream.destroy&&this._stream.destroy(),this._stream=null,this._drain){var r=this._drain;this._drain=null,r(t)}t&&this.emit("error",t),this.emit("close")}}finalize(){this._finalized=!0,!this._stream&&!this._drain&&this.push(null)}_forward(){if(this._stream)for(;!this.destroyed;){var t=this._stream.read();if(!t){this._want=!!this._stream;return}if(!this.push(t))return}}_read(){if(!(this._reading||this.destroyed)){if(this._reading=!0,this._stream&&this._forward(),this._drain){var t=this._drain;this._drain=null,t()}this._reading=!1,this._finalized&&this.push(null)}}};class Jg extends wu.PassThrough{constructor(t){super(),this._parent=t,this.destroyed=!1}destroy(t){this.destroyed||(this.destroyed=!0,this._parent.destroy(t),t&&this.emit("error",t),this.emit("close"))}}var Zg=Xg;const Qg=Vg,ev=Zg;Ka.decode=e=>new Qg(e);Ka.encode=e=>new ev(e);var fa={exports:{}},bu=xe.EventEmitter,ai,bs;function tv(){if(bs)return ai;bs=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return ai=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),ai}function rv(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ua,this,e)):process.nextTick(ua,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick($r,r):(r._writableState.errorEmitted=!0,process.nextTick(Es,r,f)):process.nextTick(Es,r,f):t?(process.nextTick($r,r),t(f)):process.nextTick($r,r)}),this)}function Es(e,t){ua(e,t),$r(e)}function $r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function nv(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ua(e,t){e.emit("error",t)}function iv(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var Eu={destroy:rv,undestroy:nv,errorOrDestroy:iv},It={};function av(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Su={};function Ke(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){av(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,Su[e]=o}function Ss(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function ov(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function sv(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function lv(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ke("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ke("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&ov(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(sv(e," argument"))o="The ".concat(e," ").concat(n," ").concat(Ss(t,"type"));else{var f=lv(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat(Ss(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Ke("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ke("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ke("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ke("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ke("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ke("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ke("ERR_STREAM_WRITE_AFTER_END","write after end");Ke("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ke("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ke("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");It.codes=Su;var fv=It.codes.ERR_INVALID_OPT_VALUE;function uv(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function dv(e,t,r,n){var o=uv(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new fv(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var Ru={getHighWaterMark:dv},oi,Rs;function xu(){if(Rs)return oi;Rs=1,oi=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=bu,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=Eu,y=Ru,m=y.getHighWaterMark,w=It.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||Yt(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||Yt();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},oi}var si,xs;function Yt(){if(xs)return si;xs=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};si=c;var t=Cu(),r=xu();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),si}var li={},Ts;function Cs(){if(Ts)return li;Ts=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}li.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return li}var ks=It.codes.ERR_STREAM_PREMATURE_CLOSE;function cv(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function hv(){}function pv(e){return e.setHeader&&typeof e.abort=="function"}function Tu(e,t,r){if(typeof t=="function")return Tu(e,null,t);t||(t={}),r=cv(r||hv);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new ks),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new ks),r.call(e,x)},k=function(){e.req.on("finish",p)};return pv(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var Ja=Tu,fi,As;function gv(){if(As)return fi;As=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=Ja,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return fi=v,fi}var ui,Ls;function vv(){return Ls||(Ls=1,ui=function(){throw new Error("Readable.from is not available in the browser")}),ui}var di,Ms;function Cu(){if(Ms)return di;Ms=1,di=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=bu,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=tv(),m=Eu,w=Ru,k=w.getHighWaterMark,A=It.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||Yt(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=Cs().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||Yt(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=Cs().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=gv()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=vv()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return di}var ku=ft,yn=It.codes,_v=yn.ERR_METHOD_NOT_IMPLEMENTED,yv=yn.ERR_MULTIPLE_CALLBACK,mv=yn.ERR_TRANSFORM_ALREADY_TRANSFORMING,wv=yn.ERR_TRANSFORM_WITH_LENGTH_0,mn=Yt();oe(ft,mn);function bv(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new yv);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function ft(e){if(!(this instanceof ft))return new ft(e);mn.call(this,e),this._transformState={afterTransform:bv.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Ev)}function Ev(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Bs(e,t,r)}):Bs(this,null,null)}ft.prototype.push=function(e,t){return this._transformState.needTransform=!1,mn.prototype.push.call(this,e,t)};ft.prototype._transform=function(e,t,r){r(new _v("_transform()"))};ft.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ft.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ft.prototype._destroy=function(e,t){mn.prototype._destroy.call(this,e,function(r){t(r)})};function Bs(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new wv;if(e._transformState.transforming)throw new mv;return e.push(null)}var Sv=_r,Au=ku;oe(_r,Au);function _r(e){if(!(this instanceof _r))return new _r(e);Au.call(this,e)}_r.prototype._transform=function(e,t,r){r(null,e)};var ci;function Rv(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var Lu=It.codes,xv=Lu.ERR_MISSING_ARGS,Tv=Lu.ERR_STREAM_DESTROYED;function Os(e){if(e)throw e}function Cv(e){return e.setHeader&&typeof e.abort=="function"}function kv(e,t,r,n){n=Rv(n);var o=!1;e.on("close",function(){o=!0}),ci===void 0&&(ci=Ja),ci(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,Cv(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new Tv("pipe"))}}}function Is(e){e()}function Av(e,t){return e.pipe(t)}function Lv(e){return!e.length||typeof e[e.length-1]!="function"?Os:e.pop()}function Mv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Lv(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new xv("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return kv(c,g,y,function(m){o||(o=m),m&&f.forEach(Is),!g&&(f.forEach(Is),n(o))})});return t.reduce(Av)}var Bv=Mv;(function(e,t){t=e.exports=Cu(),t.Stream=t,t.Readable=t,t.Writable=xu(),t.Duplex=Yt(),t.Transform=ku,t.PassThrough=Sv,t.finished=Ja,t.pipeline=Bv})(fa,fa.exports);var Ov=fa.exports;const{Writable:Iv,PassThrough:Pv}=Ov;let Nv=class extends Iv{constructor(t,r={}){super(r),this.destroyed=!1,this._queue=[],this._position=t||0,this._cb=null,this._buffer=null,this._out=null}_write(t,r,n){let o=!0;for(;;){if(this.destroyed)return;if(this._queue.length===0){this._buffer=t,this._cb=n;return}this._buffer=null;var f=this._queue[0];const c=Math.max(f.start-this._position,0),p=f.end-this._position;if(c>=t.length)return this._position+=t.length,n(null);let g;if(p>t.length){this._position+=t.length,c===0?g=t:g=t.slice(c),o=f.stream.write(g)&&o;break}this._position+=p,g=c===0&&p===t.length?t:t.slice(c,p),o=f.stream.write(g)&&o,f.last&&f.stream.end(),t=t.slice(p),this._queue.shift()}o?n(null):f.stream.once("drain",n.bind(null,null))}slice(t){if(this.destroyed)return null;Array.isArray(t)||(t=[t]);const r=new Pv;return t.forEach((n,o)=>{this._queue.push({start:n.start,end:n.end,stream:r,last:o===t.length-1})}),this._buffer&&this._write(this._buffer,null,this._cb),r}destroy(t){this.destroyed||(this.destroyed=!0,t&&this.emit("error",t))}};var Dv=Nv;const Fv=Zp,Uv=xe,Ps=Ka,hi=_n(),$v=Dv,jv=4096;let Wv=class extends Uv{constructor(t){super(),this._tracks=[],this._file=t,this._decoder=null,this._findMoov(0)}_findMoov(t){this._decoder&&this._decoder.destroy();let r=0;this._decoder=Ps.decode();const n=this._file.createReadStream({start:t});n.pipe(this._decoder);const o=f=>{f.type==="moov"?(this._decoder.removeListener("box",o),this._decoder.decode(c=>{n.destroy();try{this._processMoov(c)}catch(p){p.message=`Cannot parse mp4 file: ${p.message}`,this.emit("error",p)}})):f.length<jv?(r+=f.length,this._decoder.ignore()):(this._decoder.removeListener("box",o),r+=f.length,n.destroy(),this._decoder.destroy(),this._findMoov(t+r))};this._decoder.on("box",o)}_processMoov(t){const r=t.traks;this._tracks=[],this._hasVideo=!1,this._hasAudio=!1;for(let c=0;c<r.length;c++){const p=r[c],g=p.mdia.minf.stbl,y=g.stsd.entries[0],m=p.mdia.hdlr.handlerType;let w,k;if(m==="vide"&&y.type==="avc1"){if(this._hasVideo)continue;this._hasVideo=!0,w="avc1",y.avcC&&(w+=`.${y.avcC.mimeCodec}`),k=`video/mp4; codecs="${w}"`}else if(m==="soun"&&y.type==="mp4a"){if(this._hasAudio)continue;this._hasAudio=!0,w="mp4a",y.esds&&y.esds.mimeCodec&&(w+=`.${y.esds.mimeCodec}`),k=`audio/mp4; codecs="${w}"`}else continue;const A=[];let x=0,C=0,R=0,s=0,v=0,u=0;const d=new Ns(g.stts.entries);let b=null;g.ctts&&(b=new Ns(g.ctts.entries));let L=0;for(;;){var n=g.stsc.entries[v];const I=g.stsz.entries[x],V=d.value.duration,ee=b?b.value.compositionOffset:0;let ie=!0;g.stss&&(ie=g.stss.entries[L]===x+1);const ne=g.stco||g.co64;if(A.push({size:I,duration:V,dts:u,presentationOffset:ee,sync:ie,offset:s+ne.entries[R]}),x++,x>=g.stsz.entries.length)break;if(C++,s+=I,C>=n.samplesPerChunk){C=0,s=0,R++;const ae=g.stsc.entries[v+1];ae&&R+1>=ae.firstChunk&&v++}u+=V,d.inc(),b&&b.inc(),ie&&L++}p.mdia.mdhd.duration=0,p.tkhd.duration=0;const N=n.sampleDescriptionId,P={type:"moov",mvhd:t.mvhd,traks:[{tkhd:p.tkhd,mdia:{mdhd:p.mdia.mdhd,hdlr:p.mdia.hdlr,elng:p.mdia.elng,minf:{vmhd:p.mdia.minf.vmhd,smhd:p.mdia.minf.smhd,dinf:p.mdia.minf.dinf,stbl:{stsd:g.stsd,stts:Ut(),ctts:Ut(),stsc:Ut(),stsz:Ut(),stco:Ut(),stss:Ut()}}}}],mvex:{mehd:{fragmentDuration:t.mvhd.duration},trexs:[{trackId:p.tkhd.trackId,defaultSampleDescriptionIndex:N,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlags:0}]}};this._tracks.push({fragmentSequence:1,trackId:p.tkhd.trackId,timeScale:p.mdia.mdhd.timeScale,samples:A,currSample:null,currTime:null,moov:P,mime:k})}if(this._tracks.length===0){this.emit("error",new Error("no playable tracks"));return}t.mvhd.duration=0,this._ftyp={type:"ftyp",brand:"iso5",brandVersion:0,compatibleBrands:["iso5"]};const o=hi.encode(this._ftyp),f=this._tracks.map(c=>{const p=hi.encode(c.moov);return{mime:c.mime,init:Buffer.concat([o,p])}});this.emit("ready",f)}seek(t){if(!this._tracks)throw new Error("Not ready yet; wait for 'ready' event");this._fileStream&&(this._fileStream.destroy(),this._fileStream=null);let r=-1;if(this._tracks.map((n,o)=>{n.outStream&&n.outStream.destroy(),n.inStream&&(n.inStream.destroy(),n.inStream=null);const f=n.outStream=Ps.encode(),c=this._generateFragment(o,t);if(!c)return f.finalize();(r===-1||c.ranges[0].start<r)&&(r=c.ranges[0].start);const p=g=>{f.destroyed||f.box(g.moof,y=>{if(y)return this.emit("error",y);if(f.destroyed)return;n.inStream.slice(g.ranges).pipe(f.mediaData(g.length,w=>{if(w)return this.emit("error",w);if(f.destroyed)return;const k=this._generateFragment(o);if(!k)return f.finalize();p(k)}))})};p(c)}),r>=0){const n=this._fileStream=this._file.createReadStream({start:r});this._tracks.forEach(o=>{o.inStream=new $v(r,{highWaterMark:1e7}),n.pipe(o.inStream)})}return this._tracks.map(n=>n.outStream)}_findSampleBefore(t,r){const n=this._tracks[t],o=Math.floor(n.timeScale*r);let f=Fv(n.samples,o,(c,p)=>c.dts+c.presentationOffset-p);for(f===-1?f=0:f<0&&(f=-f-2);!n.samples[f].sync;)f--;return f}_generateFragment(t,r){const n=this._tracks[t];let o;if(r!==void 0?o=this._findSampleBefore(t,r):o=n.currSample,o>=n.samples.length)return null;const f=n.samples[o].dts;let c=0;const p=[];for(var g=o;g<n.samples.length;g++){const y=n.samples[g];if(y.sync&&y.dts-f>=n.timeScale*qv)break;c+=y.size;const m=p.length-1;m<0||p[m].end!==y.offset?p.push({start:y.offset,end:y.offset+y.size}):p[m].end+=y.size}return n.currSample=g,{moof:this._generateMoof(t,o,g),ranges:p,length:c}}_generateMoof(t,r,n){const o=this._tracks[t],f=[];let c=0;for(let g=r;g<n;g++){const y=o.samples[g];y.presentationOffset<0&&(c=1),f.push({sampleDuration:y.duration,sampleSize:y.size,sampleFlags:y.sync?33554432:16842752,sampleCompositionTimeOffset:y.presentationOffset})}const p={type:"moof",mfhd:{sequenceNumber:o.fragmentSequence++},trafs:[{tfhd:{flags:131072,trackId:o.trackId},tfdt:{baseMediaDecodeTime:o.samples[r].dts},trun:{flags:3841,dataOffset:8,entries:f,version:c}}]};return p.trafs[0].trun.dataOffset+=hi.encodingLength(p),p}};class Ns{constructor(t,r){this._entries=t,this._countName=r||"count",this._index=0,this._offset=0,this.value=this._entries[0]}inc(){this._offset++,this._offset>=this._entries[this._index][this._countName]&&(this._index++,this._offset=0),this.value=this._entries[this._index]}}function Ut(){return{version:0,flags:0,entries:[]}}const qv=1;var Hv=Wv;const zv=ru,Gv=ou,Vv=Hv;function Kr(e,t,r={}){if(!(this instanceof Kr))return console.warn("Don't invoke VideoStream without the 'new' keyword."),new Kr(e,t,r);this.detailedError=null,this._elem=t,this._elemWrapper=new zv(t),this._waitingFired=!1,this._trackMeta=null,this._file=e,this._tracks=null,this._elem.preload!=="none"&&this._createMuxer(),this._onError=()=>{this.detailedError=this._elemWrapper.detailedError,this.destroy()},this._onWaiting=()=>{this._waitingFired=!0,this._muxer?this._tracks&&this._pump():this._createMuxer()},t.autoplay&&(t.preload="auto"),t.addEventListener("waiting",this._onWaiting),t.addEventListener("error",this._onError)}Kr.prototype={_createMuxer(){this._muxer=new Vv(this._file),this._muxer.on("ready",e=>{this._tracks=e.map(t=>{const r=this._elemWrapper.createWriteStream(t.mime);r.on("error",o=>{this._elemWrapper.error(o)});const n={muxed:null,mediaSource:r,initFlushed:!1,onInitFlushed:null};return r.write(t.init,o=>{n.initFlushed=!0,n.onInitFlushed&&n.onInitFlushed(o)}),n}),(this._waitingFired||this._elem.preload==="auto")&&this._pump()}),this._muxer.on("error",e=>{this._elemWrapper.error(e)})},_pump(){const e=this._muxer.seek(this._elem.currentTime,!this._tracks);this._tracks.forEach((t,r)=>{const n=()=>{t.muxed&&(t.muxed.destroy(),t.mediaSource=this._elemWrapper.createWriteStream(t.mediaSource),t.mediaSource.on("error",o=>{this._elemWrapper.error(o)})),t.muxed=e[r],Gv(t.muxed,t.mediaSource)};t.initFlushed?n():t.onInitFlushed=o=>{if(o){this._elemWrapper.error(o);return}n()}})},destroy(){this.destroyed||(this.destroyed=!0,this._elem.removeEventListener("waiting",this._onWaiting),this._elem.removeEventListener("error",this._onError),this._tracks&&this._tracks.forEach(e=>{e.muxed&&e.muxed.destroy()}),this._elem.src="")}};var Kv=Kr;/*! render-media. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e){e.render=s,e.append=v,e.mime=qh;var t=rr("render-media"),r=Kh,n=ru,o=de,f=Dp,c=Kv,p=[".m4a",".m4b",".m4p",".m4v",".mp4"],g=[".m4v",".mkv",".mp4",".webm"],y=[".m4a",".m4b",".m4p",".mp3"],m=[].concat(g,y),w=[".mov",".ogv"],k=[".aac",".oga",".ogg",".wav",".flac"],A=[".bmp",".gif",".jpeg",".jpg",".png",".svg"],x=[".css",".html",".js",".md",".pdf",".srt",".txt"],C=200*1e3*1e3,R=typeof window<"u"&&window.MediaSource;function s(I,V,ee,ie){typeof ee=="function"&&(ie=ee,ee={}),ee||(ee={}),ie||(ie=function(){}),b(I),N(ee),typeof V=="string"&&(V=document.querySelector(V)),u(I,function(ne){if(V.nodeName!==ne.toUpperCase()){var ae=o.extname(I.name).toLowerCase();throw new Error('Cannot render "'+ae+'" inside a "'+V.nodeName.toLowerCase()+'" element, expected "'+ne+'"')}return(ne==="video"||ne==="audio")&&P(V,ee),V},ee,ie)}function v(I,V,ee,ie){if(typeof ee=="function"&&(ie=ee,ee={}),ee||(ee={}),ie||(ie=function(){}),b(I),N(ee),typeof V=="string"&&(V=document.querySelector(V)),V&&(V.nodeName==="VIDEO"||V.nodeName==="AUDIO"))throw new Error("Invalid video/audio node argument. Argument must be root element that video/audio tag will be appended to.");u(I,ne,ee,he);function ne(F){return F==="video"||F==="audio"?ae(F):Q(F)}function ae(F){var $=Q(F);return P($,ee),V.appendChild($),$}function Q(F){var $=document.createElement(F);return V.appendChild($),$}function he(F,$){F&&$&&$.remove(),ie(F,$)}}function u(I,V,ee,ie){var ne=o.extname(I.name).toLowerCase(),ae=0,Q;m.indexOf(ne)>=0?he():w.indexOf(ne)>=0?$("video"):k.indexOf(ne)>=0?$("audio"):A.indexOf(ne)>=0?X():x.indexOf(ne)>=0?Z():te();function he(){var re=g.indexOf(ne)>=0?"video":"audio";R?p.indexOf(ne)>=0?h():l():_();function h(){t("Use `videostream` package for "+I.name),i(),Q.addEventListener("error",O),Q.addEventListener("loadstart",q),Q.addEventListener("canplay",K),new c(I,Q)}function l(){t("Use MediaSource API for "+I.name),i(),Q.addEventListener("error",D),Q.addEventListener("loadstart",q),Q.addEventListener("canplay",K);var a=new n(Q),E=a.createWriteStream(L(I.name));I.createReadStream().pipe(E),ae&&(Q.currentTime=ae)}function _(){t("Use Blob URL for "+I.name),i(),Q.addEventListener("error",J),Q.addEventListener("loadstart",q),Q.addEventListener("canplay",K),d(I,function(a,E){if(a)return J(a);Q.src=E,ae&&(Q.currentTime=ae)})}function O(a){t("videostream error: fallback to MediaSource API: %o",a.message||a),Q.removeEventListener("error",O),Q.removeEventListener("canplay",K),l()}function D(a){t("MediaSource API error: fallback to Blob URL: %o",a.message||a),F()&&(Q.removeEventListener("error",D),Q.removeEventListener("canplay",K),_())}function i(){Q||(Q=V(re),Q.addEventListener("progress",function(){ae=Q.currentTime}))}}function F(){return typeof I.length=="number"&&I.length>ee.maxBlobLength?(t("File length too large for Blob URL approach: %d (max: %d)",I.length,ee.maxBlobLength),J(new Error("File length too large for Blob URL approach: "+I.length+" (max: "+ee.maxBlobLength+")")),!1):!0}function $(re){F()&&(Q=V(re),d(I,function(h,l){if(h)return J(h);Q.addEventListener("error",J),Q.addEventListener("loadstart",q),Q.addEventListener("canplay",K),Q.src=l}))}function q(){Q.removeEventListener("loadstart",q),ee.autoplay&&Q.play()}function K(){Q.removeEventListener("canplay",K),ie(null,Q)}function X(){Q=V("img"),d(I,function(re,h){if(re)return J(re);Q.src=h,Q.alt=I.name,ie(null,Q)})}function Z(){d(I,function(re,h){if(re)return J(re);ne!==".pdf"?(Q=V("iframe"),Q.sandbox="allow-forms allow-scripts",Q.src=h):(Q=V("object"),Q.setAttribute("typemustmatch",!0),Q.setAttribute("type","application/pdf"),Q.setAttribute("data",h)),ie(null,Q)})}function te(){t('Unknown file extension "%s" - will attempt to render into iframe',ne);var re="";I.createReadStream({start:0,end:1e3}).setEncoding("utf8").on("data",function(l){re+=l}).on("end",h).on("error",ie);function h(){r(re)?(t('File extension "%s" appears ascii, so will render.',ne),Z()):(t('File extension "%s" appears non-ascii, will not render.',ne),ie(new Error('Unsupported file type "'+ne+'": Cannot append to DOM')))}}function J(re){re.message='Error rendering file "'+I.name+'": '+re.message,t(re.message),ie(re)}}function d(I,V){var ee=o.extname(I.name).toLowerCase();f(I.createReadStream(),e.mime[ee]).then(ie=>V(null,ie),ie=>V(ie))}function b(I){if(I==null)throw new Error("file cannot be null or undefined");if(typeof I.name!="string")throw new Error("missing or invalid file.name property");if(typeof I.createReadStream!="function")throw new Error("missing or invalid file.createReadStream property")}function L(I){var V=o.extname(I).toLowerCase();return{".m4a":'audio/mp4; codecs="mp4a.40.5"',".m4b":'audio/mp4; codecs="mp4a.40.5"',".m4p":'audio/mp4; codecs="mp4a.40.5"',".m4v":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".mkv":'video/webm; codecs="avc1.640029, mp4a.40.5"',".mp3":"audio/mpeg",".mp4":'video/mp4; codecs="avc1.640029, mp4a.40.5"',".webm":'video/webm; codecs="vorbis, vp8"'}[V]}function N(I){I.autoplay==null&&(I.autoplay=!1),I.muted==null&&(I.muted=!1),I.controls==null&&(I.controls=!0),I.maxBlobLength==null&&(I.maxBlobLength=C)}function P(I,V){I.autoplay=!!V.autoplay,I.muted=!!V.muted,I.controls=!!V.controls}})(Ga);/*! stream-with-known-length-to-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Yv=At,Mu=function(t,r,n){n=Yv(n);var o=Buffer.alloc(r),f=0;t.on("data",function(c){c.copy(o,f),f+=c.length}).on("end",function(){n(null,o)}).on("error",n)},Xv=za,Bu=function e(t,r,n){if(typeof r=="function")return e(t,null,r);Xv(t,r,function(o,f){if(o)return n(o);var c=URL.createObjectURL(f);n(null,c)})},Ou={exports:{}};(function(e){e.exports=t,e.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function t(r){if(!e.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,o={};function f(g){o.data=m,o.end=m,o.end=w,o.close=w,o.error=w;for(var y in o)r.on(y,o[y]);r.pause();function m(k){n||(g.enqueue(k),r.pause())}function w(k){if(!n){n=!0;for(var A in o)r.removeListener(A,o[A]);k?g.error(k):g.close()}}}function c(){n||r.resume()}function p(){n=!0;for(var g in o)r.removeListener(g,o[g]);r.push(null),r.pause(),r.destroy?r.destroy():r.close&&r.close()}return new ReadableStream({start:f,pull:c,cancel:p})}})(Ou);var Jv=Ou.exports,Zv=qe,Qv=za,e_=Wh,Sr=$a,Iu=Ga,t_=Mu,r_=Bu,n_=Jv;qe.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function qe(e,t){this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.mime=e_.getType(t.path),this._torrent=e}qe.prototype.getStream=function(e){e=e||{};var t=e.start!=null?e.start:0,r=e.end!=null?e.end:this.length-1;if(r>this.length-1&&(r=this.length-1),t<0||t>r)throw new Error("Range out of bounds");return t+=this.offset,r+=this.offset,this._torrent.getStream({start:t,end:r})};qe.prototype.createReadStream=qe.prototype.getStream;qe.prototype.getWebStream=function(e){if(!qe.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var t=this.createReadStream(e),r=n_(t);return r.length=t.length,r};qe.prototype.getBlob=function(e,t){var r=this;if(typeof e=="function")return r.getBlob(null,e);t=Sr(t);var n=r.getStream(e);return Qv(n,r.mime,t),t.promise};qe.prototype.renderTo=function(e,t,r){return r=Sr(r),Iu.render(this,e,t,r),r.promise};qe.prototype.appendTo=function(e,t,r){return r=Sr(r),Iu.append(this,e,t,r),r.promise};qe.prototype.getBuffer=function(e){return e=Sr(e),t_(this.getStream(),this.length,e),e.promise};qe.prototype.getBlobURL=function(e){return e=Sr(e),r_(this.getStream(),this.mime,e),e.promise};var i_=gt,Pu=xe.EventEmitter,a_=oe,o_=de,s_=Ph,Ds=an,l_=Zv;a_(gt,Pu);function gt(e,t,r){Pu.call(this),this.closed=!1,this.ready=!1,this.infoHash=e,this._customWebSeeds=t,this._torrentDB=r,this._missingChunks={}}gt.prototype.updateMeta=function(e){var t=this;if(t.closed)throw new Error("torrent is closed");if(t.infoHash!==e.infoHash)throw new Error("Meta does not match infoHash");t.ready||(t.name=e.name,t.created=e.created,t.createdBy=e.createdBy,t.announce=e.announce,t.urlList=t._customWebSeeds.concat(e.urlList),t.length=e.length,t.pieceLength=e.pieceLength,t.lastPieceLength=e.lastPieceLength,t.pieces=e.pieces,t.info=e.info,t.magnetURI=Ds.toMagnetURI(e),e.files&&e.pieceLength&&(t.files=e.files.map(function(r){return new l_(t,r)}),t._chunkStore=t._torrentDB.createChunkStore(t.pieceLength),t._chunkStore._store.on("set",t._onChunkPut.bind(t)),t.torrentMetaBuffer=Ds.toTorrentFile(e),t.ready=!0,t.emit("ready")))};gt.prototype.getFile=function(e){if(this.closed)throw new Error("Torrent is closed");if(!this.ready)throw new Error("Torrent is not ready yet");return e=o_.normalize(e),e.startsWith("/")&&(e=e.substr(1)),this.files.find(function(t){return t.path===e})||void 0};gt.prototype.close=function(){this.closed||(this.closed=!0,this.files=null,this._torrentDB.close(),this._torrentDB=null,this._chunkStore.close(),this._chunkStore=null,this._missingChunks=null)};gt.prototype.getStream=function(e){var t=this;if(t.closed)throw new Error("torrent is closed");if(!t.ready)throw new Error("Torrent is not ready yet");e=e||{};var r=e.start!=null?e.start:0,n=e.end!=null?e.end:t.length-1;if(r<0||n>t.length-1||r>n)throw new Error("Range out of bounds");t._torrentDB.addPriority(r,n);var o=new s_(t._chunkStore,{start:r,end:n,onmiss:t._onChunkMiss.bind(t)});return o.length=n-r+1,o.on("close",f),o;function f(){t._torrentDB.removePriority(r,n)}};gt.prototype.destroy=function(){this._closed||(this._torrentDB.destroy(),this.close())};gt.prototype._onChunkPut=function(e){if(!this._closed&&this._missingChunks[e.key]!=null){var t=this._missingChunks[e.key];delete this._missingChunks[e.key],t.forEach(function(r){r(null)})}};gt.prototype._onChunkMiss=function(e,t,r){this.closed||(e.name==="MissingChunkError"?(this._torrentDB.critical(t*this.pieceLength,(t+1)*this.pieceLength-1),this._missingChunks[t]=this._missingChunks[t]||[],this._missingChunks[t].push(r)):r(e))};var Nu={exports:{}},f_=function(){for(var t=0;t<arguments.length;t++)if(typeof arguments[t]<"u")return arguments[t]},u_=oe,Du=bt.Transform,d_=f_,Fu=Xt;u_(Xt,Du);function Xt(e,t){if(!(this instanceof Xt))return new Xt(e,t);Du.call(this),t||(t={}),typeof e=="object"&&(t=e,e=t.size),this.size=e||512,t.nopad?this._zeroPadding=!1:this._zeroPadding=d_(t.zeroPadding,!0),this._buffered=[],this._bufferedBytes=0}Xt.prototype._transform=function(e,t,r){for(this._bufferedBytes+=e.length,this._buffered.push(e);this._bufferedBytes>=this.size;){var n=Buffer.concat(this._buffered);this._bufferedBytes-=this.size,this.push(n.slice(0,this.size)),this._buffered=[n.slice(this.size,n.length)]}r()};Xt.prototype._flush=function(){if(this._bufferedBytes&&this._zeroPadding){var e=new Buffer(this.size-this._bufferedBytes);e.fill(0),this._buffered.push(e),this.push(Buffer.concat(this._buffered)),this._buffered=null}else this._bufferedBytes&&(this.push(Buffer.concat(this._buffered)),this._buffered=null);this.push(null)};var c_=h_;function h_(e,t){for(e/=1024,t=20;13<t&&e<2<<t;t--);return 2<<t+(e>=((2<<t)+(2<<t+1))/2)}var p_=Za;Za.strict=Uu;Za.loose=$u;var g_=Object.prototype.toString,v_={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Za(e){return Uu(e)||$u(e)}function Uu(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function $u(e){return v_[g_.call(e)]}var __=p_.strict,y_=function(t){if(__(t)){var r=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(r=r.slice(t.byteOffset,t.byteOffset+t.byteLength)),r}else return Buffer.from(t)},ju=bt.Readable,m_=oe,w_=y_;function xt(e,t){var r=this;if(!(this instanceof xt))return new xt(e,t);t=t||{},ju.call(this,t),this._offset=0,this._ready=!1,this._file=e,this._size=e.size,this._chunkSize=t.chunkSize||Math.max(this._size/1e3,200*1024),this.reader=new FileReader,this._generateHeaderBlocks(e,t,function(n,o){if(n)return r.emit("error",n);Array.isArray(o)&&o.forEach(function(f){r.push(f)}),r._ready=!0,r.emit("_ready")})}m_(xt,ju);var b_=xt;xt.prototype._generateHeaderBlocks=function(e,t,r){r(null,[])};xt.prototype._read=function(){if(!this._ready){this.once("_ready",this._read.bind(this));return}var e=this,t=this.reader,r=this._offset,n=this._offset+this._chunkSize;if(n>this._size&&(n=this._size),r===this._size){this.destroy(),this.push(null);return}t.onload=function(){e._offset=n,e.push(w_(t.result))},t.onerror=function(){e.emit("error",t.error)},t.readAsArrayBuffer(this._file.slice(r,n))};xt.prototype.destroy=function(){if(this._file=null,this.reader){this.reader.onload=null,this.reader.onerror=null;try{this.reader.abort()}catch{}}this.reader=null};var E_=function(t,r){if(r=typeof r=="number"?r:1/0,!r)return Array.isArray(t)?t.map(function(o){return o}):t;return n(t,1);function n(o,f){return o.reduce(function(c,p){return Array.isArray(p)&&f<r?c.concat(n(p,f+1)):c.concat(p)},[])}},Qa={exports:{}},da=de;Qa.exports=function(t,r){if(!r)return Wu(t);da.stat(t,function(n,o){return n?r(n):r(null,o.isFile())})};Qa.exports.sync=Wu;function Wu(e){return da.existsSync(e)&&da.statSync(e).isFile()}var S_=Qa.exports,qu={};(function(e){e.regex=e.re=/^npm-debug\.log$|^\..*\.swp$|^\.DS_Store$|^\.AppleDouble$|^\.LSOverride$|^Icon\r$|^\._.*|^\.Spotlight-V100(?:$|\/)|\.Trashes|^__MACOSX$|~$|^Thumbs\.db$|^ehthumbs\.db$|^Desktop\.ini$|^@eaDir$/,e.is=t=>e.re.test(t),e.not=t=>!e.is(t)})(qu);var Hu=He,R_=oe,eo=bt;R_(He,eo.Readable);function He(e,t){var r=this;if(!(r instanceof He))return new He(e,t);eo.Readable.call(r,t),r.destroyed=!1,r._drained=!1,r._forwarding=!1,r._current=null,r._toStreams2=t&&t.objectMode?x_:T_,typeof e=="function"?r._queue=e:(r._queue=e.map(r._toStreams2),r._queue.forEach(function(n){typeof n!="function"&&r._attachErrorListener(n)})),r._next()}He.obj=function(e){return new He(e,{objectMode:!0,highWaterMark:16})};He.prototype._read=function(){this._drained=!0,this._forward()};He.prototype._forward=function(){if(!(this._forwarding||!this._drained||!this._current)){this._forwarding=!0;for(var e;(e=this._current.read())!==null;)this._drained=this.push(e);this._forwarding=!1}};He.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,this._current&&this._current.destroy&&this._current.destroy(),typeof this._queue!="function"&&this._queue.forEach(function(t){t.destroy&&t.destroy()}),e&&this.emit("error",e),this.emit("close"))};He.prototype._next=function(){var e=this;if(e._current=null,typeof e._queue=="function")e._queue(function(r,n){if(r)return e.destroy(r);n=e._toStreams2(n),e._attachErrorListener(n),e._gotNextStream(n)});else{var t=e._queue.shift();typeof t=="function"&&(t=e._toStreams2(t()),e._attachErrorListener(t)),e._gotNextStream(t)}};He.prototype._gotNextStream=function(e){var t=this;if(!e){t.push(null),t.destroy();return}t._current=e,t._forward(),e.on("readable",r),e.once("end",o),e.once("close",n);function r(){t._forward()}function n(){e._readableState.ended||t.destroy()}function o(){t._current=null,e.removeListener("readable",r),e.removeListener("end",o),e.removeListener("close",n),t._next()}};He.prototype._attachErrorListener=function(e){var t=this;if(!e)return;e.once("error",r);function r(n){e.removeListener("error",r),t.destroy(n)}};function x_(e){return zu(e,{objectMode:!0,highWaterMark:16})}function T_(e){return zu(e)}function zu(e,t){if(!e||typeof e=="function"||e._readableState)return e;var r=new eo.Readable(t).wrap(e);return e.destroy&&(r.destroy=e.destroy.bind(e)),r}/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Rr=k_;const C_=Ot;function k_(e,t){let r,n,o,f=!0;Array.isArray(e)?(r=[],n=e.length):(o=Object.keys(e),r={},n=o.length);function c(g){function y(){t&&t(g,r),t=null}f?C_(y):y()}function p(g,y,m){r[g]=m,(--n===0||y)&&c(y)}n?o?o.forEach(function(g){e[g](function(y,m){p(g,y,m)})}):e.forEach(function(g,y){g(function(m,w){p(y,m,w)})}):c(null),f=!1}var ca={exports:{}},Gu=xe.EventEmitter,pi,Fs;function A_(){if(Fs)return pi;Fs=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return pi=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),pi}function L_(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ha,this,e)):process.nextTick(ha,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick(jr,r):(r._writableState.errorEmitted=!0,process.nextTick(Us,r,f)):process.nextTick(Us,r,f):t?(process.nextTick(jr,r),t(f)):process.nextTick(jr,r)}),this)}function Us(e,t){ha(e,t),jr(e)}function jr(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function M_(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ha(e,t){e.emit("error",t)}function B_(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var Vu={destroy:L_,undestroy:M_,errorOrDestroy:B_},Pt={};function O_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Ku={};function Ye(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){O_(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,Ku[e]=o}function $s(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function I_(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function P_(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function N_(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Ye("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Ye("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&I_(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(P_(e," argument"))o="The ".concat(e," ").concat(n," ").concat($s(t,"type"));else{var f=N_(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat($s(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ye("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Ye("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ye("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ye("ERR_STREAM_WRITE_AFTER_END","write after end");Ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ye("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Pt.codes=Ku;var D_=Pt.codes.ERR_INVALID_OPT_VALUE;function F_(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function U_(e,t,r,n){var o=F_(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new D_(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var Yu={getHighWaterMark:U_},gi,js;function Xu(){if(js)return gi;js=1,gi=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=Gu,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=Vu,y=Yu,m=y.getHighWaterMark,w=Pt.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||Jt(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||Jt();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},gi}var vi,Ws;function Jt(){if(Ws)return vi;Ws=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};vi=c;var t=Zu(),r=Xu();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),vi}var _i={},qs;function Hs(){if(qs)return _i;qs=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}_i.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return _i}var zs=Pt.codes.ERR_STREAM_PREMATURE_CLOSE;function $_(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function j_(){}function W_(e){return e.setHeader&&typeof e.abort=="function"}function Ju(e,t,r){if(typeof t=="function")return Ju(e,null,t);t||(t={}),r=$_(r||j_);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new zs),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new zs),r.call(e,x)},k=function(){e.req.on("finish",p)};return W_(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var to=Ju,yi,Gs;function q_(){if(Gs)return yi;Gs=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=to,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return yi=v,yi}var mi,Vs;function H_(){return Vs||(Vs=1,mi=function(){throw new Error("Readable.from is not available in the browser")}),mi}var wi,Ks;function Zu(){if(Ks)return wi;Ks=1,wi=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=Gu,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=A_(),m=Vu,w=Yu,k=w.getHighWaterMark,A=Pt.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||Jt(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=Hs().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||Jt(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=Hs().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=q_()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=H_()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return wi}var Qu=ut,wn=Pt.codes,z_=wn.ERR_METHOD_NOT_IMPLEMENTED,G_=wn.ERR_MULTIPLE_CALLBACK,V_=wn.ERR_TRANSFORM_ALREADY_TRANSFORMING,K_=wn.ERR_TRANSFORM_WITH_LENGTH_0,bn=Jt();oe(ut,bn);function Y_(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new G_);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function ut(e){if(!(this instanceof ut))return new ut(e);bn.call(this,e),this._transformState={afterTransform:Y_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",X_)}function X_(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Ys(e,t,r)}):Ys(this,null,null)}ut.prototype.push=function(e,t){return this._transformState.needTransform=!1,bn.prototype.push.call(this,e,t)};ut.prototype._transform=function(e,t,r){r(new z_("_transform()"))};ut.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ut.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ut.prototype._destroy=function(e,t){bn.prototype._destroy.call(this,e,function(r){t(r)})};function Ys(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new K_;if(e._transformState.transforming)throw new V_;return e.push(null)}var J_=yr,ed=Qu;oe(yr,ed);function yr(e){if(!(this instanceof yr))return new yr(e);ed.call(this,e)}yr.prototype._transform=function(e,t,r){r(null,e)};var bi;function Z_(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var td=Pt.codes,Q_=td.ERR_MISSING_ARGS,ey=td.ERR_STREAM_DESTROYED;function Xs(e){if(e)throw e}function ty(e){return e.setHeader&&typeof e.abort=="function"}function ry(e,t,r,n){n=Z_(n);var o=!1;e.on("close",function(){o=!0}),bi===void 0&&(bi=to),bi(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,ty(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new ey("pipe"))}}}function Js(e){e()}function ny(e,t){return e.pipe(t)}function iy(e){return!e.length||typeof e[e.length-1]!="function"?Xs:e.pop()}function ay(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=iy(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Q_("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return ry(c,g,y,function(m){o||(o=m),m&&f.forEach(Js),!g&&(f.forEach(Js),n(o))})});return t.reduce(ny)}var oy=ay;(function(e,t){t=e.exports=Zu(),t.Stream=t,t.Readable=t,t.Writable=Xu(),t.Duplex=Jt(),t.Transform=Qu,t.PassThrough=J_,t.finished=to,t.pipeline=oy})(ca,ca.exports);var sy=ca.exports;(function(e){const t=en,r=Fu,n=c_,o=de,f=b_,c=E_,p=de,g=S_,y=qu,m=Hu,w=At,k=Rr,A=nn,x=sy,C=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.fastcast.nz"]];function R(F,$,q){typeof $=="function"&&([$,q]=[q,$]),$=$?Object.assign({},$):{},v(F,$,(K,X,Z)=>{if(K)return q(K);$.singleFileTorrent=Z,P(X,$,q)})}function s(F,$,q){typeof $=="function"&&([$,q]=[q,$]),$=$?Object.assign({},$):{},v(F,$,q)}function v(F,$,q){if(ee(F)&&(F=Array.from(F)),Array.isArray(F)||(F=[F]),F.length===0)throw new Error("invalid input type");F.forEach(J=>{if(J==null)throw new Error(`invalid input type: ${J}`)}),F=F.map(J=>V(J)&&typeof J.path=="string"&&typeof p.stat=="function"?J.path:J),F.length===1&&typeof F[0]!="string"&&!F[0].name&&(F[0].name=$.name);let K=null;F.forEach((J,re)=>{if(typeof J=="string")return;let h=J.fullPath||J.name;h||(h=`Unknown File ${re+1}`,J.unknownName=!0),J.path=h.split("/"),J.path[0]||J.path.shift(),J.path.length<2?K=null:re===0&&F.length>1?K=J.path[0]:J.path[0]!==K&&(K=null)}),F=F.filter(J=>{if(typeof J=="string")return!0;const re=J.path[J.path.length-1];return L(re)&&y.not(re)}),K&&F.forEach(J=>{const re=(Buffer.isBuffer(J)||ie(J))&&!J.path;typeof J=="string"||re||J.path.shift()}),!$.name&&K&&($.name=K),$.name||F.some(J=>{if(typeof J=="string")return $.name=o.basename(J),!0;if(!J.unknownName)return $.name=J.path[J.path.length-1],!0}),$.name||($.name=`Unnamed Torrent ${Date.now()}`);const X=F.reduce((J,re)=>J+ +(typeof re=="string"),0);let Z=F.length===1;if(F.length===1&&typeof F[0]=="string"){if(typeof p.stat!="function")throw new Error("filesystem paths do not work in the browser");g(F[0],(J,re)=>{if(J)return q(J);Z=re,te()})}else process.nextTick(()=>{te()});function te(){k(F.map(J=>re=>{const h={};if(V(J))h.getStream=ne(J),h.length=J.size;else if(Buffer.isBuffer(J))h.getStream=ae(J),h.length=J.length;else if(ie(J))h.getStream=he(J,h),h.length=0;else if(typeof J=="string"){if(typeof p.stat!="function")throw new Error("filesystem paths do not work in the browser");const l=X>1||Z;u(J,l,re);return}else throw new Error("invalid input type");h.path=J.path,re(null,h)}),(J,re)=>{if(J)return q(J);re=c(re),q(null,re,Z)})}}function u(F,$,q){b(F,d,(K,X)=>{if(K)return q(K);Array.isArray(X)?X=c(X):X=[X],F=o.normalize(F),$&&(F=F.slice(0,F.lastIndexOf(o.sep)+1)),F[F.length-1]!==o.sep&&(F+=o.sep),X.forEach(Z=>{Z.getStream=Q(Z.path),Z.path=Z.path.replace(F,"").split(o.sep)}),q(null,X)})}function d(F,$){$=w($),p.stat(F,(q,K)=>{if(q)return $(q);const X={length:K.size,path:F};$(null,X)})}function b(F,$,q){p.stat(F,(K,X)=>{if(K)return q(K);X.isDirectory()?p.readdir(F,(Z,te)=>{if(Z)return q(Z);k(te.filter(L).filter(y.not).map(J=>re=>{b(o.join(F,J),$,re)}),q)}):X.isFile()&&$(F,q)})}function L(F){return F[0]!=="."}function N(F,$,q){q=w(q);const K=[];let X=0;const Z=F.map(E=>E.getStream);let te=0,J=0,re=!1;const h=new m(Z),l=new r($,{zeroPadding:!1});h.on("error",D),h.pipe(l).on("data",_).on("end",O).on("error",D);function _(E){X+=E.length;const M=J;A(E,z=>{K[M]=z,te-=1,a()}),te+=1,J+=1}function O(){re=!0,a()}function D(E){i(),q(E)}function i(){h.removeListener("error",D),l.removeListener("data",_),l.removeListener("end",O),l.removeListener("error",D)}function a(){re&&te===0&&(i(),q(null,Buffer.from(K.join(""),"hex"),X))}}function P(F,$,q){let K=$.announceList;K||(typeof $.announce=="string"?K=[[$.announce]]:Array.isArray($.announce)&&(K=$.announce.map(te=>[te]))),K||(K=[]),ce.WEBTORRENT_ANNOUNCE&&(typeof ce.WEBTORRENT_ANNOUNCE=="string"?K.push([[ce.WEBTORRENT_ANNOUNCE]]):Array.isArray(ce.WEBTORRENT_ANNOUNCE)&&(K=K.concat(ce.WEBTORRENT_ANNOUNCE.map(te=>[te])))),$.announce===void 0&&$.announceList===void 0&&(K=K.concat(e.exports.announceList)),typeof $.urlList=="string"&&($.urlList=[$.urlList]);const X={info:{name:$.name},"creation date":Math.ceil((Number($.creationDate)||Date.now())/1e3),encoding:"UTF-8"};K.length!==0&&(X.announce=K[0][0],X["announce-list"]=K),$.comment!==void 0&&(X.comment=$.comment),$.createdBy!==void 0&&(X["created by"]=$.createdBy),$.private!==void 0&&(X.info.private=Number($.private)),$.sslCert!==void 0&&(X.info["ssl-cert"]=$.sslCert),$.urlList!==void 0&&(X["url-list"]=$.urlList);const Z=$.pieceLength||n(F.reduce(I,0));X.info["piece length"]=Z,N(F,Z,(te,J,re)=>{if(te)return q(te);X.info.pieces=J,F.forEach(h=>{delete h.getStream}),$.singleFileTorrent?X.info.length=re:X.info.files=F,q(null,t.encode(X))})}function I(F,$){return F+$.length}function V(F){return typeof Blob<"u"&&F instanceof Blob}function ee(F){return typeof FileList<"u"&&F instanceof FileList}function ie(F){return typeof F=="object"&&F!=null&&typeof F.pipe=="function"}function ne(F){return()=>new f(F)}function ae(F){return()=>{const $=new x.PassThrough;return $.end(F),$}}function Q(F){return()=>p.createReadStream(F)}function he(F,$){return()=>{const q=new x.Transform;return q._transform=function(K,X,Z){$.length+=K.length,this.push(K),Z()},F.pipe(q),q}}e.exports=R,e.exports.parseInput=s,e.exports.announceList=C})(Nu);var ly=Nu.exports,pa={exports:{}},Ei,Zs;function fy(){if(Zs)return Ei;Zs=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,f=n*365.25;Ei=function(m,w){w=w||{};var k=typeof m;if(k==="string"&&m.length>0)return c(m);if(k==="number"&&isFinite(m))return w.long?g(m):p(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function c(m){if(m=String(m),!(m.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(w){var k=parseFloat(w[1]),A=(w[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return k*f;case"weeks":case"week":case"w":return k*o;case"days":case"day":case"d":return k*n;case"hours":case"hour":case"hrs":case"hr":case"h":return k*r;case"minutes":case"minute":case"mins":case"min":case"m":return k*t;case"seconds":case"second":case"secs":case"sec":case"s":return k*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function p(m){var w=Math.abs(m);return w>=n?Math.round(m/n)+"d":w>=r?Math.round(m/r)+"h":w>=t?Math.round(m/t)+"m":w>=e?Math.round(m/e)+"s":m+"ms"}function g(m){var w=Math.abs(m);return w>=n?y(m,w,n,"day"):w>=r?y(m,w,r,"hour"):w>=t?y(m,w,t,"minute"):w>=e?y(m,w,e,"second"):m+" ms"}function y(m,w,k,A){var x=w>=k*1.5;return Math.round(m/k)+" "+A+(x?"s":"")}return Ei}function uy(e){r.debug=r,r.default=r,r.coerce=g,r.disable=c,r.enable=f,r.enabled=p,r.humanize=fy(),Object.keys(e).forEach(function(y){r[y]=e[y]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function t(y){for(var m=0,w=0;w<y.length;w++)m=(m<<5)-m+y.charCodeAt(w),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=t;function r(y){var m;function w(){if(w.enabled){for(var k=arguments.length,A=new Array(k),x=0;x<k;x++)A[x]=arguments[x];var C=w,R=Number(new Date),s=R-(m||R);C.diff=s,C.prev=m,C.curr=R,m=R,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");var v=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,function(d,b){if(d==="%%")return d;v++;var L=r.formatters[b];if(typeof L=="function"){var N=A[v];d=L.call(C,N),A.splice(v,1),v--}return d}),r.formatArgs.call(C,A);var u=C.log||r.log;u.apply(C,A)}}return w.namespace=y,w.enabled=r.enabled(y),w.useColors=r.useColors(),w.color=t(y),w.destroy=n,w.extend=o,typeof r.init=="function"&&r.init(w),r.instances.push(w),w}function n(){var y=r.instances.indexOf(this);return y!==-1?(r.instances.splice(y,1),!0):!1}function o(y,m){return r(this.namespace+(typeof m>"u"?":":m)+y)}function f(y){r.save(y),r.names=[],r.skips=[];var m,w=(typeof y=="string"?y:"").split(/[\s,]+/),k=w.length;for(m=0;m<k;m++)w[m]&&(y=w[m].replace(/\*/g,".*?"),y[0]==="-"?r.skips.push(new RegExp("^"+y.substr(1)+"$")):r.names.push(new RegExp("^"+y+"$")));for(m=0;m<r.instances.length;m++){var A=r.instances[m];A.enabled=r.enabled(A.namespace)}}function c(){r.enable("")}function p(y){if(y[y.length-1]==="*")return!0;var m,w;for(m=0,w=r.skips.length;m<w;m++)if(r.skips[m].test(y))return!1;for(m=0,w=r.names.length;m<w;m++)if(r.names[m].test(y))return!0;return!1}function g(y){return y instanceof Error?y.stack||y.message:y}return r.enable(r.load()),r}var dy=uy;(function(e,t){function r(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(k){return typeof k}:r=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},r(m)}t.log=f,t.formatArgs=o,t.save=c,t.load=p,t.useColors=n,t.storage=g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var w="color: "+this.color;m.splice(1,0,w,"color: inherit");var k=0,A=0;m[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(k++,x==="%c"&&(A=k))}),m.splice(A,0,w)}}function f(){var m;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(m=console).log.apply(m,arguments)}function c(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function p(){var m;try{m=t.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m={}.DEBUG),m}function g(){try{return localStorage}catch{}}e.exports=dy(t);var y=e.exports.formatters;y.j=function(m){try{return JSON.stringify(m)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}})(pa,pa.exports);var xr=pa.exports,En=hy,cy=Object.prototype.hasOwnProperty;function hy(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)cy.call(r,n)&&(e[n]=r[n])}return e}var py=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null},ga={exports:{}},Si=65536,gy=4294967295;function vy(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var _y=rt.Buffer,Yr=ce.crypto||ce.msCrypto;Yr&&Yr.getRandomValues?ga.exports=yy:ga.exports=vy;function yy(e,t){if(e>gy)throw new RangeError("requested too many random bytes");var r=_y.allocUnsafe(e);if(e>0)if(e>Si)for(var n=0;n<e;n+=Si)Yr.getRandomValues(r.slice(n,n+Si));else Yr.getRandomValues(r);return typeof t=="function"?process.nextTick(function(){t(null,r)}):r}var Tr=ga.exports,va={exports:{}},rd=xe.EventEmitter,Ri,Qs;function my(){if(Qs)return Ri;Qs=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return Ri=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),Ri}function wy(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(_a,this,e)):process.nextTick(_a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick(Wr,r):(r._writableState.errorEmitted=!0,process.nextTick(el,r,f)):process.nextTick(el,r,f):t?(process.nextTick(Wr,r),t(f)):process.nextTick(Wr,r)}),this)}function el(e,t){_a(e,t),Wr(e)}function Wr(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function by(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function _a(e,t){e.emit("error",t)}function Ey(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var nd={destroy:wy,undestroy:by,errorOrDestroy:Ey},Nt={};function Sy(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var id={};function Xe(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){Sy(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,id[e]=o}function tl(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Ry(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function xy(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Ty(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Xe("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Xe("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&Ry(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(xy(e," argument"))o="The ".concat(e," ").concat(n," ").concat(tl(t,"type"));else{var f=Ty(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat(tl(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Xe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Xe("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Xe("ERR_STREAM_PREMATURE_CLOSE","Premature close");Xe("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Xe("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Xe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Xe("ERR_STREAM_WRITE_AFTER_END","write after end");Xe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Xe("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Xe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Nt.codes=id;var Cy=Nt.codes.ERR_INVALID_OPT_VALUE;function ky(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Ay(e,t,r,n){var o=ky(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new Cy(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var ad={getHighWaterMark:Ay},xi,rl;function od(){if(rl)return xi;rl=1,xi=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=rd,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=nd,y=ad,m=y.getHighWaterMark,w=Nt.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||Zt(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||Zt();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},xi}var Ti,nl;function Zt(){if(nl)return Ti;nl=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};Ti=c;var t=ld(),r=od();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),Ti}var Ci={},il;function al(){if(il)return Ci;il=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}Ci.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return Ci}var ol=Nt.codes.ERR_STREAM_PREMATURE_CLOSE;function Ly(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function My(){}function By(e){return e.setHeader&&typeof e.abort=="function"}function sd(e,t,r){if(typeof t=="function")return sd(e,null,t);t||(t={}),r=Ly(r||My);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new ol),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new ol),r.call(e,x)},k=function(){e.req.on("finish",p)};return By(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var ro=sd,ki,sl;function Oy(){if(sl)return ki;sl=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=ro,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return ki=v,ki}var Ai,ll;function Iy(){return ll||(ll=1,Ai=function(){throw new Error("Readable.from is not available in the browser")}),Ai}var Li,fl;function ld(){if(fl)return Li;fl=1,Li=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=rd,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=my(),m=nd,w=ad,k=w.getHighWaterMark,A=Nt.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||Zt(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=al().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||Zt(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=al().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=Oy()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=Iy()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return Li}var fd=dt,Sn=Nt.codes,Py=Sn.ERR_METHOD_NOT_IMPLEMENTED,Ny=Sn.ERR_MULTIPLE_CALLBACK,Dy=Sn.ERR_TRANSFORM_ALREADY_TRANSFORMING,Fy=Sn.ERR_TRANSFORM_WITH_LENGTH_0,Rn=Zt();oe(dt,Rn);function Uy(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Ny);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function dt(e){if(!(this instanceof dt))return new dt(e);Rn.call(this,e),this._transformState={afterTransform:Uy.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",$y)}function $y(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){ul(e,t,r)}):ul(this,null,null)}dt.prototype.push=function(e,t){return this._transformState.needTransform=!1,Rn.prototype.push.call(this,e,t)};dt.prototype._transform=function(e,t,r){r(new Py("_transform()"))};dt.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};dt.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};dt.prototype._destroy=function(e,t){Rn.prototype._destroy.call(this,e,function(r){t(r)})};function ul(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Fy;if(e._transformState.transforming)throw new Dy;return e.push(null)}var jy=mr,ud=fd;oe(mr,ud);function mr(e){if(!(this instanceof mr))return new mr(e);ud.call(this,e)}mr.prototype._transform=function(e,t,r){r(null,e)};var Mi;function Wy(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var dd=Nt.codes,qy=dd.ERR_MISSING_ARGS,Hy=dd.ERR_STREAM_DESTROYED;function dl(e){if(e)throw e}function zy(e){return e.setHeader&&typeof e.abort=="function"}function Gy(e,t,r,n){n=Wy(n);var o=!1;e.on("close",function(){o=!0}),Mi===void 0&&(Mi=ro),Mi(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,zy(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new Hy("pipe"))}}}function cl(e){e()}function Vy(e,t){return e.pipe(t)}function Ky(e){return!e.length||typeof e[e.length-1]!="function"?dl:e.pop()}function Yy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Ky(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new qy("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return Gy(c,g,y,function(m){o||(o=m),m&&f.forEach(cl),!g&&(f.forEach(cl),n(o))})});return t.reduce(Vy)}var Xy=Yy;(function(e,t){t=e.exports=ld(),t.Stream=t,t.Readable=t,t.Writable=od(),t.Duplex=Zt(),t.Transform=fd,t.PassThrough=jy,t.finished=ro,t.pipeline=Xy})(va,va.exports);var Jy=va.exports;function hl(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Zy(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return hl(e,r)}catch{r.message=e.message,r.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),hl(new o,r)}}var Qy=Zy;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const em=rr("simple-peer"),cd=py,pl=Tr,tm=Jy,Bi=Ot,_e=Qy,{Buffer:rm}=Te,Oi=64*1024,nm=5*1e3,im=5*1e3;function gl(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function am(e){console.warn(e)}let xn=class ya extends tm.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=pl(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||pl(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||ya.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},ya.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(r=>r),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||nm,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&typeof t.wrtc=="object"?t.wrtc:cd(),!this._wrtc)throw _e(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){this.destroy(_e(r,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(r=>{this.destroy(_e(r,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(_e(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.destroy(_e(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const r=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(r).catch(n=>{!r.address||r.address.endsWith(".local")?am("Ignoring unsupported ICE candidate."):this.destroy(_e(n,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,r){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,r),this._needsNegotiation()}catch(n){this.destroy(_e(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:r}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(r=>{this.addTrack(r,t)})}}addTrack(t,r){if(this.destroying)return;if(this.destroyed)throw _e(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let o=n.get(r);if(!o)o=this._pc.addTrack(t,r),n.set(r,o),this._senderMap.set(t,n),this._needsNegotiation();else throw o.removed?_e(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):_e(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(t,r,n){if(this.destroying)return;if(this.destroyed)throw _e(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const o=this._senderMap.get(t),f=o?o.get(n):null;if(!f)throw _e(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,o),f.replaceTrack!=null?f.replaceTrack(r):this.destroy(_e(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,r){if(this.destroying)return;if(this.destroyed)throw _e(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),o=n?n.get(r):null;if(!o)throw _e(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{o.removed=!0,this._pc.removeTrack(o)}catch(f){f.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(o):this.destroy(_e(f,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(r=>{this.removeTrack(r,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Bi(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw _e(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,r){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),Bi(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),r()}))}_setupData(t){if(!t.channel)return this.destroy(_e(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Oi),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{const o=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(_e(o,"ERR_DATA_CHANNEL"))};let r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},im)}_read(){}_write(t,r,n){if(this.destroyed)return n(_e(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(o){return this.destroy(_e(o,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Oi?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=gl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const r=()=>{if(this.destroyed)return;const f=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:f.type,sdp:f.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},o=f=>{this.destroy(_e(f,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(o)}).catch(t=>{this.destroy(_e(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{!t.mid&&t.sender.track&&!t.requested&&(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=gl(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const r=()=>{if(this.destroyed)return;const f=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:f.type,sdp:f.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},o=f=>{this.destroy(_e(f,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(o)}).catch(t=>{this.destroy(_e(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(_e(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,r),this.emit("iceStateChange",t,r),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.destroy(_e(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.destroy(_e(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const r=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(o=>{Object.assign(n,o)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const o=[];n.forEach(f=>{o.push(r(f))}),t(null,o)},n=>t(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const o=[];n.result().forEach(f=>{const c={};f.names().forEach(p=>{c[p]=f.stat(p)}),c.id=f.id,c.type=f.type,c.timestamp=f.timestamp,o.push(r(c))}),t(null,o)},n=>t(n)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats((r,n)=>{if(this.destroyed)return;r&&(n=[]);const o={},f={},c={};let p=!1;n.forEach(y=>{(y.type==="remotecandidate"||y.type==="remote-candidate")&&(o[y.id]=y),(y.type==="localcandidate"||y.type==="local-candidate")&&(f[y.id]=y),(y.type==="candidatepair"||y.type==="candidate-pair")&&(c[y.id]=y)});const g=y=>{p=!0;let m=f[y.localCandidateId];m&&(m.ip||m.address)?(this.localAddress=m.ip||m.address,this.localPort=Number(m.port)):m&&m.ipAddress?(this.localAddress=m.ipAddress,this.localPort=Number(m.portNumber)):typeof y.googLocalAddress=="string"&&(m=y.googLocalAddress.split(":"),this.localAddress=m[0],this.localPort=Number(m[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let w=o[y.remoteCandidateId];w&&(w.ip||w.address)?(this.remoteAddress=w.ip||w.address,this.remotePort=Number(w.port)):w&&w.ipAddress?(this.remoteAddress=w.ipAddress,this.remotePort=Number(w.portNumber)):typeof y.googRemoteAddress=="string"&&(w=y.googRemoteAddress.split(":"),this.remoteAddress=w[0],this.remotePort=Number(w[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(y=>{y.type==="transport"&&y.selectedCandidatePairId&&g(c[y.selectedCandidatePairId]),(y.type==="googCandidatePair"&&y.googActiveConnection==="true"||(y.type==="candidatepair"||y.type==="candidate-pair")&&y.selected)&&g(y)}),!p&&(!Object.keys(c).length||Object.keys(f).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(m){return this.destroy(_e(m,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const y=this._cb;this._cb=null,y(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Oi||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let r=t.data;r instanceof ArrayBuffer&&(r=rm.from(r)),this.push(r)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(r=>{this._debug("on track"),this.emit("track",t.track,r),this._remoteTracks.push({track:t.track,stream:r}),!this._remoteStreams.some(n=>n.id===r.id)&&(this._remoteStreams.push(r),Bi(()=>{this._debug("on stream"),this.emit("stream",r)}))})}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],em.apply(null,t)}};xn.WEBRTC_SUPPORT=!!cd();xn.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};xn.channelConfig={};var no=xn,ur=1,ma=65535,Or=4,Ir,om=function(){ur=ur+1&ma},io=function(e){Ir||(Ir=setInterval(om,1e3/Or|0),Ir.unref&&Ir.unref());var t=Or*(e||5),r=[0],n=1,o=ur-1&ma;return function(f){var c=ur-o&ma;for(c>t&&(c=t),o=ur;c--;)n===t&&(n=0),r[n]=r[n===0?t-1:n-1],n++;f&&(r[n-1]+=f);var p=r[n-1],g=r.length<t?0:r[n===t?0:n];return r.length<Or?p:(p-g)*Or/r.length}};/*! zero-fill. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var sm=function e(t,r,n){return r===void 0?function(o,f){return e(t,o,f)}:(n===void 0&&(n="0"),t-=r.toString().length,t>0?new Array(t+(/\./.test(r)?2:1)).join(n)+r:r+"")};const lm=/^\[?([^\]]+)]?:(\d+)$/;let ar=new Map;var fm=function(t){if(ar.size===1e5&&ar.clear(),!ar.has(t)){const r=lm.exec(t);if(!r)throw new Error(`invalid addr: ${t}`);ar.set(t,[r[1],Number(r[2])])}return ar.get(t)},hd={exports:{}};(function(e){var t=typeof Buffer<"u"?Buffer:Uint8Array;function r(o,f){if(!(this instanceof r))return new r(o,f);arguments.length===0&&(o=0),this.grow=f&&(isFinite(f.grow)&&n(f.grow)||f.grow)||0,(typeof o=="number"||o===void 0)&&(o=new t(n(o)),o.fill&&!o._isBuffer&&o.fill(0)),this.buffer=o}function n(o){var f=o>>3;return o%8!==0&&f++,f}r.prototype.get=function(o){var f=o>>3;return f<this.buffer.length&&!!(this.buffer[f]&128>>o%8)},r.prototype.set=function(o,f){var c=o>>3;f||arguments.length===1?(this.buffer.length<c+1&&this._grow(Math.max(c+1,Math.min(2*this.buffer.length,this.grow))),this.buffer[c]|=128>>o%8):c<this.buffer.length&&(this.buffer[c]&=~(128>>o%8))},r.prototype._grow=function(o){if(this.buffer.length<o&&o<=this.grow){var f=new t(o);if(f.fill&&f.fill(0),this.buffer.copy)this.buffer.copy(f,0);else for(var c=0;c<this.buffer.length;c++)f[c]=this.buffer[c];this.buffer=f}},e.exports=r})(hd);var ao=hd.exports,um=Qt,dm=Fu,cm=oe,pd=bt;cm(Qt,pd.Writable);function Qt(e,t,r){var n=this;if(!(n instanceof Qt))return new Qt(e,t,r);if(pd.Writable.call(n,r),r||(r={}),!e||!e.put||!e.get)throw new Error("First argument must be an abstract-chunk-store compliant store");if(t=Number(t),!t)throw new Error("Second argument must be a chunk length");n._blockstream=new dm(t,{zeroPadding:!1}),n._blockstream.on("data",f).on("error",function(c){n.destroy(c)});var o=0;function f(c){n.destroyed||(e.put(o,c),o+=1)}n.on("finish",function(){this._blockstream.end()})}Qt.prototype._write=function(e,t,r){this._blockstream.write(e,t,r)};Qt.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))};var wa={exports:{}},Ii,vl;function hm(){if(vl)return Ii;vl=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,f=n*365.25;Ii=function(m,w){w=w||{};var k=typeof m;if(k==="string"&&m.length>0)return c(m);if(k==="number"&&isFinite(m))return w.long?g(m):p(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function c(m){if(m=String(m),!(m.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(w){var k=parseFloat(w[1]),A=(w[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return k*f;case"weeks":case"week":case"w":return k*o;case"days":case"day":case"d":return k*n;case"hours":case"hour":case"hrs":case"hr":case"h":return k*r;case"minutes":case"minute":case"mins":case"min":case"m":return k*t;case"seconds":case"second":case"secs":case"sec":case"s":return k*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function p(m){var w=Math.abs(m);return w>=n?Math.round(m/n)+"d":w>=r?Math.round(m/r)+"h":w>=t?Math.round(m/t)+"m":w>=e?Math.round(m/e)+"s":m+"ms"}function g(m){var w=Math.abs(m);return w>=n?y(m,w,n,"day"):w>=r?y(m,w,r,"hour"):w>=t?y(m,w,t,"minute"):w>=e?y(m,w,e,"second"):m+" ms"}function y(m,w,k,A){var x=w>=k*1.5;return Math.round(m/k)+" "+A+(x?"s":"")}return Ii}function pm(e){r.debug=r,r.default=r,r.coerce=g,r.disable=c,r.enable=f,r.enabled=p,r.humanize=hm(),Object.keys(e).forEach(function(y){r[y]=e[y]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function t(y){for(var m=0,w=0;w<y.length;w++)m=(m<<5)-m+y.charCodeAt(w),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=t;function r(y){var m;function w(){if(w.enabled){for(var k=arguments.length,A=new Array(k),x=0;x<k;x++)A[x]=arguments[x];var C=w,R=Number(new Date),s=R-(m||R);C.diff=s,C.prev=m,C.curr=R,m=R,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");var v=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,function(d,b){if(d==="%%")return d;v++;var L=r.formatters[b];if(typeof L=="function"){var N=A[v];d=L.call(C,N),A.splice(v,1),v--}return d}),r.formatArgs.call(C,A);var u=C.log||r.log;u.apply(C,A)}}return w.namespace=y,w.enabled=r.enabled(y),w.useColors=r.useColors(),w.color=t(y),w.destroy=n,w.extend=o,typeof r.init=="function"&&r.init(w),r.instances.push(w),w}function n(){var y=r.instances.indexOf(this);return y!==-1?(r.instances.splice(y,1),!0):!1}function o(y,m){return r(this.namespace+(typeof m>"u"?":":m)+y)}function f(y){r.save(y),r.names=[],r.skips=[];var m,w=(typeof y=="string"?y:"").split(/[\s,]+/),k=w.length;for(m=0;m<k;m++)w[m]&&(y=w[m].replace(/\*/g,".*?"),y[0]==="-"?r.skips.push(new RegExp("^"+y.substr(1)+"$")):r.names.push(new RegExp("^"+y+"$")));for(m=0;m<r.instances.length;m++){var A=r.instances[m];A.enabled=r.enabled(A.namespace)}}function c(){r.enable("")}function p(y){if(y[y.length-1]==="*")return!0;var m,w;for(m=0,w=r.skips.length;m<w;m++)if(r.skips[m].test(y))return!1;for(m=0,w=r.names.length;m<w;m++)if(r.names[m].test(y))return!0;return!1}function g(y){return y instanceof Error?y.stack||y.message:y}return r.enable(r.load()),r}var gm=pm;(function(e,t){function r(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(k){return typeof k}:r=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},r(m)}t.log=f,t.formatArgs=o,t.save=c,t.load=p,t.useColors=n,t.storage=g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var w="color: "+this.color;m.splice(1,0,w,"color: inherit");var k=0,A=0;m[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(k++,x==="%c"&&(A=k))}),m.splice(A,0,w)}}function f(){var m;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(m=console).log.apply(m,arguments)}function c(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function p(){var m;try{m=t.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m={}.DEBUG),m}function g(){try{return localStorage}catch{}}e.exports=gm(t);var y=e.exports.formatters;y.j=function(m){try{return JSON.stringify(m)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}})(wa,wa.exports);var vm=wa.exports,oo={};(function(e){e.DEFAULT_ANNOUNCE_PEERS=50,e.MAX_ANNOUNCE_PEERS=82,e.binaryToHex=r=>(typeof r!="string"&&(r=String(r)),Buffer.from(r,"binary").toString("hex")),e.hexToBinary=r=>(typeof r!="string"&&(r=String(r)),Buffer.from(r,"hex").toString("binary")),e.parseUrl=r=>{const n=new URL(r.replace(/^udp:/,"http:"));return r.match(/^udp:/)&&Object.defineProperties(n,{href:{value:n.href.replace(/^http/,"udp")},protocol:{value:n.protocol.replace(/^http/,"udp")},origin:{value:n.origin.replace(/^http/,"udp")}}),n},Object.assign(e,de)})(oo);var gd={exports:{}};(function(e){var t=function(){function r(k,A){return A!=null&&k instanceof A}var n;try{n=Map}catch{n=function(){}}var o;try{o=Set}catch{o=function(){}}var f;try{f=Promise}catch{f=function(){}}function c(k,A,x,C,R){typeof A=="object"&&(x=A.depth,C=A.prototype,R=A.includeNonEnumerable,A=A.circular);var s=[],v=[],u=typeof Buffer<"u";typeof A>"u"&&(A=!0),typeof x>"u"&&(x=1/0);function d(b,L){if(b===null)return null;if(L===0)return b;var N,P;if(typeof b!="object")return b;if(r(b,n))N=new n;else if(r(b,o))N=new o;else if(r(b,f))N=new f(function(F,$){b.then(function(q){F(d(q,L-1))},function(q){$(d(q,L-1))})});else if(c.__isArray(b))N=[];else if(c.__isRegExp(b))N=new RegExp(b.source,w(b)),b.lastIndex&&(N.lastIndex=b.lastIndex);else if(c.__isDate(b))N=new Date(b.getTime());else{if(u&&Buffer.isBuffer(b))return Buffer.allocUnsafe?N=Buffer.allocUnsafe(b.length):N=new Buffer(b.length),b.copy(N),N;r(b,Error)?N=Object.create(b):typeof C>"u"?(P=Object.getPrototypeOf(b),N=Object.create(P)):(N=Object.create(C),P=C)}if(A){var I=s.indexOf(b);if(I!=-1)return v[I];s.push(b),v.push(N)}r(b,n)&&b.forEach(function(F,$){var q=d($,L-1),K=d(F,L-1);N.set(q,K)}),r(b,o)&&b.forEach(function(F){var $=d(F,L-1);N.add($)});for(var V in b){var ee;P&&(ee=Object.getOwnPropertyDescriptor(P,V)),!(ee&&ee.set==null)&&(N[V]=d(b[V],L-1))}if(Object.getOwnPropertySymbols)for(var ie=Object.getOwnPropertySymbols(b),V=0;V<ie.length;V++){var ne=ie[V],ae=Object.getOwnPropertyDescriptor(b,ne);ae&&!ae.enumerable&&!R||(N[ne]=d(b[ne],L-1),ae.enumerable||Object.defineProperty(N,ne,{enumerable:!1}))}if(R)for(var Q=Object.getOwnPropertyNames(b),V=0;V<Q.length;V++){var he=Q[V],ae=Object.getOwnPropertyDescriptor(b,he);ae&&ae.enumerable||(N[he]=d(b[he],L-1),Object.defineProperty(N,he,{enumerable:!1}))}return N}return d(k,x)}c.clonePrototype=function(A){if(A===null)return null;var x=function(){};return x.prototype=A,new x};function p(k){return Object.prototype.toString.call(k)}c.__objToStr=p;function g(k){return typeof k=="object"&&p(k)==="[object Date]"}c.__isDate=g;function y(k){return typeof k=="object"&&p(k)==="[object Array]"}c.__isArray=y;function m(k){return typeof k=="object"&&p(k)==="[object RegExp]"}c.__isRegExp=m;function w(k){var A="";return k.global&&(A+="g"),k.ignoreCase&&(A+="i"),k.multiline&&(A+="m"),A}return c.__getRegExpFlags=w,c}();e.exports&&(e.exports=t)})(gd);var _m=gd.exports,ba={exports:{}},vd=xe.EventEmitter,Pi,_l;function ym(){if(_l)return Pi;_l=1;function e(x,C){var R=Object.keys(x);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(x);C&&(s=s.filter(function(v){return Object.getOwnPropertyDescriptor(x,v).enumerable})),R.push.apply(R,s)}return R}function t(x){for(var C=1;C<arguments.length;C++){var R=arguments[C]!=null?arguments[C]:{};C%2?e(Object(R),!0).forEach(function(s){r(x,s,R[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(R)):e(Object(R)).forEach(function(s){Object.defineProperty(x,s,Object.getOwnPropertyDescriptor(R,s))})}return x}function r(x,C,R){return C=c(C),C in x?Object.defineProperty(x,C,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[C]=R,x}function n(x,C){if(!(x instanceof C))throw new TypeError("Cannot call a class as a function")}function o(x,C){for(var R=0;R<C.length;R++){var s=C[R];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(x,c(s.key),s)}}function f(x,C,R){return C&&o(x.prototype,C),R&&o(x,R),Object.defineProperty(x,"prototype",{writable:!1}),x}function c(x){var C=p(x,"string");return typeof C=="symbol"?C:String(C)}function p(x,C){if(typeof x!="object"||x===null)return x;var R=x[Symbol.toPrimitive];if(R!==void 0){var s=R.call(x,C||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(x)}var g=Te,y=g.Buffer,m=de,w=m.inspect,k=w&&w.custom||"inspect";function A(x,C,R){y.prototype.copy.call(x,C,R)}return Pi=function(){function x(){n(this,x),this.head=null,this.tail=null,this.length=0}return f(x,[{key:"push",value:function(R){var s={data:R,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(R){var s={data:R,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var R=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,R}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(R){if(this.length===0)return"";for(var s=this.head,v=""+s.data;s=s.next;)v+=R+s.data;return v}},{key:"concat",value:function(R){if(this.length===0)return y.alloc(0);for(var s=y.allocUnsafe(R>>>0),v=this.head,u=0;v;)A(v.data,s,u),u+=v.data.length,v=v.next;return s}},{key:"consume",value:function(R,s){var v;return R<this.head.data.length?(v=this.head.data.slice(0,R),this.head.data=this.head.data.slice(R)):R===this.head.data.length?v=this.shift():v=s?this._getString(R):this._getBuffer(R),v}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(R){var s=this.head,v=1,u=s.data;for(R-=u.length;s=s.next;){var d=s.data,b=R>d.length?d.length:R;if(b===d.length?u+=d:u+=d.slice(0,R),R-=b,R===0){b===d.length?(++v,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(b));break}++v}return this.length-=v,u}},{key:"_getBuffer",value:function(R){var s=y.allocUnsafe(R),v=this.head,u=1;for(v.data.copy(s),R-=v.data.length;v=v.next;){var d=v.data,b=R>d.length?d.length:R;if(d.copy(s,s.length-R,0,b),R-=b,R===0){b===d.length?(++u,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=d.slice(b));break}++u}return this.length-=u,s}},{key:k,value:function(R,s){return w(this,t(t({},s),{},{depth:0,customInspect:!1}))}}]),x}(),Pi}function mm(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ea,this,e)):process.nextTick(Ea,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!t&&f?r._writableState?r._writableState.errorEmitted?process.nextTick(qr,r):(r._writableState.errorEmitted=!0,process.nextTick(yl,r,f)):process.nextTick(yl,r,f):t?(process.nextTick(qr,r),t(f)):process.nextTick(qr,r)}),this)}function yl(e,t){Ea(e,t),qr(e)}function qr(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function wm(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ea(e,t){e.emit("error",t)}function bm(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var _d={destroy:mm,undestroy:wm,errorOrDestroy:bm},Dt={};function Em(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var yd={};function Je(e,t,r){r||(r=Error);function n(f,c,p){return typeof t=="string"?t:t(f,c,p)}var o=function(f){Em(c,f);function c(p,g,y){return f.call(this,n(p,g,y))||this}return c}(r);o.prototype.name=r.name,o.prototype.code=e,yd[e]=o}function ml(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Sm(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function Rm(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function xm(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}Je("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);Je("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&Sm(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var o;if(Rm(e," argument"))o="The ".concat(e," ").concat(n," ").concat(ml(t,"type"));else{var f=xm(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(f," ").concat(n," ").concat(ml(t,"type"))}return o+=". Received type ".concat(typeof r),o},TypeError);Je("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Je("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});Je("ERR_STREAM_PREMATURE_CLOSE","Premature close");Je("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});Je("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Je("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Je("ERR_STREAM_WRITE_AFTER_END","write after end");Je("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Je("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);Je("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Dt.codes=yd;var Tm=Dt.codes.ERR_INVALID_OPT_VALUE;function Cm(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function km(e,t,r,n){var o=Cm(t,n,r);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var f=n?r:"highWaterMark";throw new Tm(f,o)}return Math.floor(o)}return e.objectMode?16:16*1024}var md={getHighWaterMark:km},Ni,wl;function wd(){if(wl)return Ni;wl=1,Ni=P;function e(h){var l=this;this.next=null,this.entry=null,this.finish=function(){re(l,h)}}var t;P.WritableState=L;var r={deprecate:Lt},n=vd,o=Te.Buffer,f=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(h){return o.from(h)}function p(h){return o.isBuffer(h)||h instanceof f}var g=_d,y=md,m=y.getHighWaterMark,w=Dt.codes,k=w.ERR_INVALID_ARG_TYPE,A=w.ERR_METHOD_NOT_IMPLEMENTED,x=w.ERR_MULTIPLE_CALLBACK,C=w.ERR_STREAM_CANNOT_PIPE,R=w.ERR_STREAM_DESTROYED,s=w.ERR_STREAM_NULL_VALUES,v=w.ERR_STREAM_WRITE_AFTER_END,u=w.ERR_UNKNOWN_ENCODING,d=g.errorOrDestroy;oe(P,n);function b(){}function L(h,l,_){t=t||er(),h=h||{},typeof _!="boolean"&&(_=l instanceof t),this.objectMode=!!h.objectMode,_&&(this.objectMode=this.objectMode||!!h.writableObjectMode),this.highWaterMark=m(this,h,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var O=h.decodeStrings===!1;this.decodeStrings=!O,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){he(l,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}L.prototype.getBuffer=function(){for(var l=this.bufferedRequest,_=[];l;)_.push(l),l=l.next;return _},function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(l){return N.call(this,l)?!0:this!==P?!1:l&&l._writableState instanceof L}})):N=function(l){return l instanceof this};function P(h){t=t||er();var l=this instanceof t;if(!l&&!N.call(P,this))return new P(h);this._writableState=new L(h,this,l),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),n.call(this)}P.prototype.pipe=function(){d(this,new C)};function I(h,l){var _=new v;d(h,_),process.nextTick(l,_)}function V(h,l,_,O){var D;return _===null?D=new s:typeof _!="string"&&!l.objectMode&&(D=new k("chunk",["string","Buffer"],_)),D?(d(h,D),process.nextTick(O,D),!1):!0}P.prototype.write=function(h,l,_){var O=this._writableState,D=!1,i=!O.objectMode&&p(h);return i&&!o.isBuffer(h)&&(h=c(h)),typeof l=="function"&&(_=l,l=null),i?l="buffer":l||(l=O.defaultEncoding),typeof _!="function"&&(_=b),O.ending?I(this,_):(i||V(this,O,h,_))&&(O.pendingcb++,D=ie(this,O,i,h,l,_)),D},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&q(this,h))},P.prototype.setDefaultEncoding=function(l){if(typeof l=="string"&&(l=l.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((l+"").toLowerCase())>-1))throw new u(l);return this._writableState.defaultEncoding=l,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(h,l,_){return!h.objectMode&&h.decodeStrings!==!1&&typeof l=="string"&&(l=o.from(l,_)),l}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(h,l,_,O,D,i){if(!_){var a=ee(l,O,D);O!==a&&(_=!0,D="buffer",O=a)}var E=l.objectMode?1:O.length;l.length+=E;var M=l.length<l.highWaterMark;if(M||(l.needDrain=!0),l.writing||l.corked){var z=l.lastBufferedRequest;l.lastBufferedRequest={chunk:O,encoding:D,isBuf:_,callback:i,next:null},z?z.next=l.lastBufferedRequest:l.bufferedRequest=l.lastBufferedRequest,l.bufferedRequestCount+=1}else ne(h,l,!1,E,O,D,i);return M}function ne(h,l,_,O,D,i,a){l.writelen=O,l.writecb=a,l.writing=!0,l.sync=!0,l.destroyed?l.onwrite(new R("write")):_?h._writev(D,l.onwrite):h._write(D,i,l.onwrite),l.sync=!1}function ae(h,l,_,O,D){--l.pendingcb,_?(process.nextTick(D,O),process.nextTick(te,h,l),h._writableState.errorEmitted=!0,d(h,O)):(D(O),h._writableState.errorEmitted=!0,d(h,O),te(h,l))}function Q(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function he(h,l){var _=h._writableState,O=_.sync,D=_.writecb;if(typeof D!="function")throw new x;if(Q(_),l)ae(h,_,O,l,D);else{var i=K(_)||h.destroyed;!i&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&q(h,_),O?process.nextTick(F,h,_,i,D):F(h,_,i,D)}}function F(h,l,_,O){_||$(h,l),l.pendingcb--,O(),te(h,l)}function $(h,l){l.length===0&&l.needDrain&&(l.needDrain=!1,h.emit("drain"))}function q(h,l){l.bufferProcessing=!0;var _=l.bufferedRequest;if(h._writev&&_&&_.next){var O=l.bufferedRequestCount,D=new Array(O),i=l.corkedRequestsFree;i.entry=_;for(var a=0,E=!0;_;)D[a]=_,_.isBuf||(E=!1),_=_.next,a+=1;D.allBuffers=E,ne(h,l,!0,l.length,D,"",i.finish),l.pendingcb++,l.lastBufferedRequest=null,i.next?(l.corkedRequestsFree=i.next,i.next=null):l.corkedRequestsFree=new e(l),l.bufferedRequestCount=0}else{for(;_;){var M=_.chunk,z=_.encoding,j=_.callback,H=l.objectMode?1:M.length;if(ne(h,l,!1,H,M,z,j),_=_.next,l.bufferedRequestCount--,l.writing)break}_===null&&(l.lastBufferedRequest=null)}l.bufferedRequest=_,l.bufferProcessing=!1}P.prototype._write=function(h,l,_){_(new A("_write()"))},P.prototype._writev=null,P.prototype.end=function(h,l,_){var O=this._writableState;return typeof h=="function"?(_=h,h=null,l=null):typeof l=="function"&&(_=l,l=null),h!=null&&this.write(h,l),O.corked&&(O.corked=1,this.uncork()),O.ending||J(this,O,_),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function K(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function X(h,l){h._final(function(_){l.pendingcb--,_&&d(h,_),l.prefinished=!0,h.emit("prefinish"),te(h,l)})}function Z(h,l){!l.prefinished&&!l.finalCalled&&(typeof h._final=="function"&&!l.destroyed?(l.pendingcb++,l.finalCalled=!0,process.nextTick(X,h,l)):(l.prefinished=!0,h.emit("prefinish")))}function te(h,l){var _=K(l);if(_&&(Z(h,l),l.pendingcb===0&&(l.finished=!0,h.emit("finish"),l.autoDestroy))){var O=h._readableState;(!O||O.autoDestroy&&O.endEmitted)&&h.destroy()}return _}function J(h,l,_){l.ending=!0,te(h,l),_&&(l.finished?process.nextTick(_):h.once("finish",_)),l.ended=!0,h.writable=!1}function re(h,l,_){var O=h.entry;for(h.entry=null;O;){var D=O.callback;l.pendingcb--,D(_),O=O.next}l.corkedRequestsFree.next=h}return Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(l){this._writableState&&(this._writableState.destroyed=l)}}),P.prototype.destroy=g.destroy,P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(h,l){l(h)},Ni}var Di,bl;function er(){if(bl)return Di;bl=1;var e=Object.keys||function(y){var m=[];for(var w in y)m.push(w);return m};Di=c;var t=Ed(),r=wd();oe(c,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var f=n[o];c.prototype[f]||(c.prototype[f]=r.prototype[f])}function c(y){if(!(this instanceof c))return new c(y);t.call(this,y),r.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||process.nextTick(g,this)}function g(y){y.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),Di}var Fi={},El;function Sl(){if(El)return Fi;El=1;var e=rt.Buffer,t=e.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(s){if(!s)return"utf8";for(var v;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(v)return;s=(""+s).toLowerCase(),v=!0}}function n(s){var v=r(s);if(typeof v!="string"&&(e.isEncoding===t||!t(s)))throw new Error("Unknown encoding: "+s);return v||s}Fi.StringDecoder=o;function o(s){this.encoding=n(s);var v;switch(this.encoding){case"utf16le":this.text=w,this.end=k,v=4;break;case"utf8":this.fillLast=g,v=4;break;case"base64":this.text=A,this.end=x,v=3;break;default:this.write=C,this.end=R;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(v)}o.prototype.write=function(s){if(s.length===0)return"";var v,u;if(this.lastNeed){if(v=this.fillLast(s),v===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?v?v+this.text(s,u):this.text(s,u):v||""},o.prototype.end=m,o.prototype.text=y,o.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function f(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function c(s,v,u){var d=v.length-1;if(d<u)return 0;var b=f(v[d]);return b>=0?(b>0&&(s.lastNeed=b-1),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(s.lastNeed=b-2),b):--d<u||b===-2?0:(b=f(v[d]),b>=0?(b>0&&(b===2?b=0:s.lastNeed=b-3),b):0))}function p(s,v,u){if((v[0]&192)!==128)return s.lastNeed=0,"";if(s.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return s.lastNeed=1,"";if(s.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return s.lastNeed=2,""}}function g(s){var v=this.lastTotal-this.lastNeed,u=p(this,s);if(u!==void 0)return u;if(this.lastNeed<=s.length)return s.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,v,0,s.length),this.lastNeed-=s.length}function y(s,v){var u=c(this,s,v);if(!this.lastNeed)return s.toString("utf8",v);this.lastTotal=u;var d=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",v,d)}function m(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+"":v}function w(s,v){if((s.length-v)%2===0){var u=s.toString("utf16le",v);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",v,s.length-1)}function k(s){var v=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,u)}return v}function A(s,v){var u=(s.length-v)%3;return u===0?s.toString("base64",v):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",v,s.length-u))}function x(s){var v=s&&s.length?this.write(s):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function C(s){return s.toString(this.encoding)}function R(s){return s&&s.length?this.write(s):""}return Fi}var Rl=Dt.codes.ERR_STREAM_PREMATURE_CLOSE;function Am(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}function Lm(){}function Mm(e){return e.setHeader&&typeof e.abort=="function"}function bd(e,t,r){if(typeof t=="function")return bd(e,null,t);t||(t={}),r=Am(r||Lm);var n=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,f=function(){e.writable||p()},c=e._writableState&&e._writableState.finished,p=function(){o=!1,c=!0,n||r.call(e)},g=e._readableState&&e._readableState.endEmitted,y=function(){n=!1,g=!0,o||r.call(e)},m=function(x){r.call(e,x)},w=function(){var x;if(n&&!g)return(!e._readableState||!e._readableState.ended)&&(x=new Rl),r.call(e,x);if(o&&!c)return(!e._writableState||!e._writableState.ended)&&(x=new Rl),r.call(e,x)},k=function(){e.req.on("finish",p)};return Mm(e)?(e.on("complete",p),e.on("abort",w),e.req?k():e.on("request",k)):o&&!e._writableState&&(e.on("end",f),e.on("close",f)),e.on("end",y),e.on("finish",p),t.error!==!1&&e.on("error",m),e.on("close",w),function(){e.removeListener("complete",p),e.removeListener("abort",w),e.removeListener("request",k),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("end",y),e.removeListener("error",m),e.removeListener("close",w)}}var so=bd,Ui,xl;function Bm(){if(xl)return Ui;xl=1;var e;function t(u,d,b){return d=r(d),d in u?Object.defineProperty(u,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[d]=b,u}function r(u){var d=n(u,"string");return typeof d=="symbol"?d:String(d)}function n(u,d){if(typeof u!="object"||u===null)return u;var b=u[Symbol.toPrimitive];if(b!==void 0){var L=b.call(u,d||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(u)}var o=so,f=Symbol("lastResolve"),c=Symbol("lastReject"),p=Symbol("error"),g=Symbol("ended"),y=Symbol("lastPromise"),m=Symbol("handlePromise"),w=Symbol("stream");function k(u,d){return{value:u,done:d}}function A(u){var d=u[f];if(d!==null){var b=u[w].read();b!==null&&(u[y]=null,u[f]=null,u[c]=null,d(k(b,!1)))}}function x(u){process.nextTick(A,u)}function C(u,d){return function(b,L){u.then(function(){if(d[g]){b(k(void 0,!0));return}d[m](b,L)},L)}}var R=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((e={get stream(){return this[w]},next:function(){var d=this,b=this[p];if(b!==null)return Promise.reject(b);if(this[g])return Promise.resolve(k(void 0,!0));if(this[w].destroyed)return new Promise(function(I,V){process.nextTick(function(){d[p]?V(d[p]):I(k(void 0,!0))})});var L=this[y],N;if(L)N=new Promise(C(L,this));else{var P=this[w].read();if(P!==null)return Promise.resolve(k(P,!1));N=new Promise(this[m])}return this[y]=N,N}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var d=this;return new Promise(function(b,L){d[w].destroy(null,function(N){if(N){L(N);return}b(k(void 0,!0))})})}),e),R),v=function(d){var b,L=Object.create(s,(b={},t(b,w,{value:d,writable:!0}),t(b,f,{value:null,writable:!0}),t(b,c,{value:null,writable:!0}),t(b,p,{value:null,writable:!0}),t(b,g,{value:d._readableState.endEmitted,writable:!0}),t(b,m,{value:function(P,I){var V=L[w].read();V?(L[y]=null,L[f]=null,L[c]=null,P(k(V,!1))):(L[f]=P,L[c]=I)},writable:!0}),b));return L[y]=null,o(d,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=L[c];P!==null&&(L[y]=null,L[f]=null,L[c]=null,P(N)),L[p]=N;return}var I=L[f];I!==null&&(L[y]=null,L[f]=null,L[c]=null,I(k(void 0,!0))),L[g]=!0}),d.on("readable",x.bind(null,L)),L};return Ui=v,Ui}var $i,Tl;function Om(){return Tl||(Tl=1,$i=function(){throw new Error("Readable.from is not available in the browser")}),$i}var ji,Cl;function Ed(){if(Cl)return ji;Cl=1,ji=I;var e;I.ReadableState=P,xe.EventEmitter;var t=function(a,E){return a.listeners(E).length},r=vd,n=Te.Buffer,o=(typeof ce<"u"?ce:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(i){return n.from(i)}function c(i){return n.isBuffer(i)||i instanceof o}var p=de,g;p&&p.debuglog?g=p.debuglog("stream"):g=function(){};var y=ym(),m=_d,w=md,k=w.getHighWaterMark,A=Dt.codes,x=A.ERR_INVALID_ARG_TYPE,C=A.ERR_STREAM_PUSH_AFTER_EOF,R=A.ERR_METHOD_NOT_IMPLEMENTED,s=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,v,u,d;oe(I,r);var b=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function N(i,a,E){if(typeof i.prependListener=="function")return i.prependListener(a,E);!i._events||!i._events[a]?i.on(a,E):Array.isArray(i._events[a])?i._events[a].unshift(E):i._events[a]=[E,i._events[a]]}function P(i,a,E){e=e||er(),i=i||{},typeof E!="boolean"&&(E=a instanceof e),this.objectMode=!!i.objectMode,E&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=k(this,i,"readableHighWaterMark",E),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(v||(v=Sl().StringDecoder),this.decoder=new v(i.encoding),this.encoding=i.encoding)}function I(i){if(e=e||er(),!(this instanceof I))return new I(i);var a=this instanceof e;this._readableState=new P(i,this,a),this.readable=!0,i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),I.prototype.destroy=m.destroy,I.prototype._undestroy=m.undestroy,I.prototype._destroy=function(i,a){a(i)},I.prototype.push=function(i,a){var E=this._readableState,M;return E.objectMode?M=!0:typeof i=="string"&&(a=a||E.defaultEncoding,a!==E.encoding&&(i=n.from(i,a),a=""),M=!0),V(this,i,a,!1,M)},I.prototype.unshift=function(i){return V(this,i,null,!0,!1)};function V(i,a,E,M,z){g("readableAddChunk",a);var j=i._readableState;if(a===null)j.reading=!1,he(i,j);else{var H;if(z||(H=ie(j,a)),H)b(i,H);else if(j.objectMode||a&&a.length>0)if(typeof a!="string"&&!j.objectMode&&Object.getPrototypeOf(a)!==n.prototype&&(a=f(a)),M)j.endEmitted?b(i,new s):ee(i,j,a,!0);else if(j.ended)b(i,new C);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!E?(a=j.decoder.write(a),j.objectMode||a.length!==0?ee(i,j,a,!1):q(i,j)):ee(i,j,a,!1)}else M||(j.reading=!1,q(i,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function ee(i,a,E,M){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,i.emit("data",E)):(a.length+=a.objectMode?1:E.length,M?a.buffer.unshift(E):a.buffer.push(E),a.needReadable&&F(i)),q(i,a)}function ie(i,a){var E;return!c(a)&&typeof a!="string"&&a!==void 0&&!i.objectMode&&(E=new x("chunk",["string","Buffer","Uint8Array"],a)),E}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(i){v||(v=Sl().StringDecoder);var a=new v(i);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var E=this._readableState.buffer.head,M="";E!==null;)M+=a.write(E.data),E=E.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var ne=1073741824;function ae(i){return i>=ne?i=ne:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function Q(i,a){return i<=0||a.length===0&&a.ended?0:a.objectMode?1:i!==i?a.flowing&&a.length?a.buffer.head.data.length:a.length:(i>a.highWaterMark&&(a.highWaterMark=ae(i)),i<=a.length?i:a.ended?a.length:(a.needReadable=!0,0))}I.prototype.read=function(i){g("read",i),i=parseInt(i,10);var a=this._readableState,E=i;if(i!==0&&(a.emittedReadable=!1),i===0&&a.needReadable&&((a.highWaterMark!==0?a.length>=a.highWaterMark:a.length>0)||a.ended))return g("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?_(this):F(this),null;if(i=Q(i,a),i===0&&a.ended)return a.length===0&&_(this),null;var M=a.needReadable;g("need readable",M),(a.length===0||a.length-i<a.highWaterMark)&&(M=!0,g("length less than watermark",M)),a.ended||a.reading?(M=!1,g("reading or ended",M)):M&&(g("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(i=Q(E,a)));var z;return i>0?z=l(i,a):z=null,z===null?(a.needReadable=a.length<=a.highWaterMark,i=0):(a.length-=i,a.awaitDrain=0),a.length===0&&(a.ended||(a.needReadable=!0),E!==i&&a.ended&&_(this)),z!==null&&this.emit("data",z),z};function he(i,a){if(g("onEofChunk"),!a.ended){if(a.decoder){var E=a.decoder.end();E&&E.length&&(a.buffer.push(E),a.length+=a.objectMode?1:E.length)}a.ended=!0,a.sync?F(i):(a.needReadable=!1,a.emittedReadable||(a.emittedReadable=!0,$(i)))}}function F(i){var a=i._readableState;g("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(g("emitReadable",a.flowing),a.emittedReadable=!0,process.nextTick($,i))}function $(i){var a=i._readableState;g("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(i.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,h(i)}function q(i,a){a.readingMore||(a.readingMore=!0,process.nextTick(K,i,a))}function K(i,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var E=a.length;if(g("maybeReadMore read 0"),i.read(0),E===a.length)break}a.readingMore=!1}I.prototype._read=function(i){b(this,new R("_read()"))},I.prototype.pipe=function(i,a){var E=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=i;break;case 1:M.pipes=[M.pipes,i];break;default:M.pipes.push(i);break}M.pipesCount+=1,g("pipe count=%d opts=%j",M.pipesCount,a);var z=(!a||a.end!==!1)&&i!==process.stdout&&i!==process.stderr,j=z?ue:ve;M.endEmitted?process.nextTick(j):E.once("end",j),i.on("unpipe",H);function H(B,S){g("onunpipe"),B===E&&S&&S.hasUnpiped===!1&&(S.hasUnpiped=!0,Oe())}function ue(){g("onend"),i.end()}var ye=X(E);i.on("drain",ye);var Ce=!1;function Oe(){g("cleanup"),i.removeListener("close",be),i.removeListener("finish",pe),i.removeListener("drain",ye),i.removeListener("error",me),i.removeListener("unpipe",H),E.removeListener("end",ue),E.removeListener("end",ve),E.removeListener("data",we),Ce=!0,M.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ye()}E.on("data",we);function we(B){g("ondata");var S=i.write(B);g("dest.write",S),S===!1&&((M.pipesCount===1&&M.pipes===i||M.pipesCount>1&&D(M.pipes,i)!==-1)&&!Ce&&(g("false write response, pause",M.awaitDrain),M.awaitDrain++),E.pause())}function me(B){g("onerror",B),ve(),i.removeListener("error",me),t(i,"error")===0&&b(i,B)}N(i,"error",me);function be(){i.removeListener("finish",pe),ve()}i.once("close",be);function pe(){g("onfinish"),i.removeListener("close",be),ve()}i.once("finish",pe);function ve(){g("unpipe"),E.unpipe(i)}return i.emit("pipe",E),M.flowing||(g("pipe resume"),E.resume()),i};function X(i){return function(){var E=i._readableState;g("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,E.awaitDrain===0&&t(i,"data")&&(E.flowing=!0,h(i))}}I.prototype.unpipe=function(i){var a=this._readableState,E={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return i&&i!==a.pipes?this:(i||(i=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,i&&i.emit("unpipe",this,E),this);if(!i){var M=a.pipes,z=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var j=0;j<z;j++)M[j].emit("unpipe",this,{hasUnpiped:!1});return this}var H=D(a.pipes,i);return H===-1?this:(a.pipes.splice(H,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),i.emit("unpipe",this,E),this)},I.prototype.on=function(i,a){var E=r.prototype.on.call(this,i,a),M=this._readableState;return i==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):i==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,g("on readable",M.length,M.reading),M.length?F(this):M.reading||process.nextTick(te,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(i,a){var E=r.prototype.removeListener.call(this,i,a);return i==="readable"&&process.nextTick(Z,this),E},I.prototype.removeAllListeners=function(i){var a=r.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&process.nextTick(Z,this),a};function Z(i){var a=i._readableState;a.readableListening=i.listenerCount("readable")>0,a.resumeScheduled&&!a.paused?a.flowing=!0:i.listenerCount("data")>0&&i.resume()}function te(i){g("readable nexttick read 0"),i.read(0)}I.prototype.resume=function(){var i=this._readableState;return i.flowing||(g("resume"),i.flowing=!i.readableListening,J(this,i)),i.paused=!1,this};function J(i,a){a.resumeScheduled||(a.resumeScheduled=!0,process.nextTick(re,i,a))}function re(i,a){g("resume",a.reading),a.reading||i.read(0),a.resumeScheduled=!1,i.emit("resume"),h(i),a.flowing&&!a.reading&&i.read(0)}I.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function h(i){var a=i._readableState;for(g("flow",a.flowing);a.flowing&&i.read()!==null;);}I.prototype.wrap=function(i){var a=this,E=this._readableState,M=!1;i.on("end",function(){if(g("wrapped end"),E.decoder&&!E.ended){var H=E.decoder.end();H&&H.length&&a.push(H)}a.push(null)}),i.on("data",function(H){if(g("wrapped data"),E.decoder&&(H=E.decoder.write(H)),!(E.objectMode&&H==null)&&!(!E.objectMode&&(!H||!H.length))){var ue=a.push(H);ue||(M=!0,i.pause())}});for(var z in i)this[z]===void 0&&typeof i[z]=="function"&&(this[z]=function(ue){return function(){return i[ue].apply(i,arguments)}}(z));for(var j=0;j<L.length;j++)i.on(L[j],this.emit.bind(this,L[j]));return this._read=function(H){g("wrapped _read",H),M&&(M=!1,i.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return u===void 0&&(u=Bm()),u(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),I._fromList=l,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function l(i,a){if(a.length===0)return null;var E;return a.objectMode?E=a.buffer.shift():!i||i>=a.length?(a.decoder?E=a.buffer.join(""):a.buffer.length===1?E=a.buffer.first():E=a.buffer.concat(a.length),a.buffer.clear()):E=a.buffer.consume(i,a.decoder),E}function _(i){var a=i._readableState;g("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,process.nextTick(O,a,i))}function O(i,a){if(g("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&i.length===0&&(i.endEmitted=!0,a.readable=!1,a.emit("end"),i.autoDestroy)){var E=a._writableState;(!E||E.autoDestroy&&E.finished)&&a.destroy()}}typeof Symbol=="function"&&(I.from=function(i,a){return d===void 0&&(d=Om()),d(I,i,a)});function D(i,a){for(var E=0,M=i.length;E<M;E++)if(i[E]===a)return E;return-1}return ji}var Sd=ct,Tn=Dt.codes,Im=Tn.ERR_METHOD_NOT_IMPLEMENTED,Pm=Tn.ERR_MULTIPLE_CALLBACK,Nm=Tn.ERR_TRANSFORM_ALREADY_TRANSFORMING,Dm=Tn.ERR_TRANSFORM_WITH_LENGTH_0,Cn=er();oe(ct,Cn);function Fm(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Pm);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function ct(e){if(!(this instanceof ct))return new ct(e);Cn.call(this,e),this._transformState={afterTransform:Fm.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Um)}function Um(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){kl(e,t,r)}):kl(this,null,null)}ct.prototype.push=function(e,t){return this._transformState.needTransform=!1,Cn.prototype.push.call(this,e,t)};ct.prototype._transform=function(e,t,r){r(new Im("_transform()"))};ct.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};ct.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ct.prototype._destroy=function(e,t){Cn.prototype._destroy.call(this,e,function(r){t(r)})};function kl(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Dm;if(e._transformState.transforming)throw new Nm;return e.push(null)}var $m=wr,Rd=Sd;oe(wr,Rd);function wr(e){if(!(this instanceof wr))return new wr(e);Rd.call(this,e)}wr.prototype._transform=function(e,t,r){r(null,e)};var Wi;function jm(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var xd=Dt.codes,Wm=xd.ERR_MISSING_ARGS,qm=xd.ERR_STREAM_DESTROYED;function Al(e){if(e)throw e}function Hm(e){return e.setHeader&&typeof e.abort=="function"}function zm(e,t,r,n){n=jm(n);var o=!1;e.on("close",function(){o=!0}),Wi===void 0&&(Wi=so),Wi(e,{readable:t,writable:r},function(c){if(c)return n(c);o=!0,n()});var f=!1;return function(c){if(!o&&!f){if(f=!0,Hm(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(c||new qm("pipe"))}}}function Ll(e){e()}function Gm(e,t){return e.pipe(t)}function Vm(e){return!e.length||typeof e[e.length-1]!="function"?Al:e.pop()}function Km(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Vm(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Wm("streams");var o,f=t.map(function(c,p){var g=p<t.length-1,y=p>0;return zm(c,g,y,function(m){o||(o=m),m&&f.forEach(Ll),!g&&(f.forEach(Ll),n(o))})});return t.reduce(Gm)}var Ym=Km;(function(e,t){t=e.exports=Ed(),t.Stream=t,t.Readable=t,t.Writable=wd(),t.Duplex=er(),t.Transform=Sd,t.PassThrough=$m,t.finished=so,t.pipeline=Ym})(ba,ba.exports);var Xm=ba.exports;/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const Jm=rr("simple-websocket"),Zm=Tr,Qm=Xm,Ml=Ot,dr=de,lr=typeof dr!="function"?WebSocket:dr,Bl=64*1024;let Td=class extends Qm.Duplex{constructor(t={}){if(typeof t=="string"&&(t={url:t}),t=Object.assign({allowHalfOpen:!1},t),super(t),t.url==null&&t.socket==null)throw new Error("Missing required `url` or `socket` option");if(t.url!=null&&t.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=Zm(4).toString("hex").slice(0,7),this._debug("new websocket: %o",t),this.connected=!1,this.destroyed=!1,this._chunk=null,this._cb=null,this._interval=null,t.socket)this.url=t.socket.url,this._ws=t.socket,this.connected=t.socket.readyState===lr.OPEN;else{this.url=t.url;try{typeof dr=="function"?this._ws=new lr(t.url,null,{...t,encoding:void 0}):this._ws=new lr(t.url)}catch(r){Ml(()=>this.destroy(r));return}}this._ws.binaryType="arraybuffer",t.socket&&this.connected?Ml(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=r=>this._handleMessage(r),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=r=>this._handleError(r),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(t){this._ws.send(t)}destroy(t){this._destroy(t,()=>{})}_destroy(t,r){if(!this.destroyed){if(this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.connected=!1,this.destroyed=!0,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){const n=this._ws,o=()=>{n.onclose=null};if(n.readyState===lr.CLOSED)o();else try{n.onclose=o,n.close()}catch{o()}n.onopen=null,n.onmessage=null,n.onerror=()=>{}}this._ws=null,t&&this.emit("error",t),this.emit("close"),r()}}_read(){}_write(t,r,n){if(this.destroyed)return n(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(t)}catch(o){return this.destroy(o)}typeof dr!="function"&&this._ws.bufferedAmount>Bl?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_handleOpen(){if(!(this.connected||this.destroyed)){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(r){return this.destroy(r)}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}typeof dr!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(t){if(this.destroyed)return;let r=t.data;r instanceof ArrayBuffer&&(r=Buffer.from(r)),this.push(r)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(t){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?t():this.once("connect",t)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>Bl)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],Jm.apply(null,t)}};Td.WEBSOCKET_SUPPORT=!!lr;var ew=Td;const tw=xe;let rw=class extends tw{constructor(t,r){super(),this.client=t,this.announceUrl=r,this.interval=null,this.destroyed=!1}setInterval(t){t==null&&(t=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),t&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},t),this.interval.unref&&this.interval.unref())}};var nw=rw;const iw=_m,Ze=rr("bittorrent-tracker:websocket-tracker"),aw=no,ow=Tr,sw=ew,lw=de,vt=oo,fw=nw,it={},uw=10*1e3,dw=60*60*1e3,cw=5*60*1e3,hw=50*1e3;let lo=class extends fw{constructor(t,r){super(t,r),Ze("new websocket tracker %s",r),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.announce(t)});return}const r=Object.assign({},t,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(r.trackerid=this._trackerId),t.event==="stopped"||t.event==="completed")this._send(r);else{const n=Math.min(t.numwant,5);this._generateOffers(n,o=>{r.numwant=n,r.offers=o,this._send(r)})}}scrape(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected){this.socket.once("connect",()=>{this.scrape(t)});return}const n={action:"scrape",info_hash:Array.isArray(t.infoHash)&&t.infoHash.length>0?t.infoHash.map(o=>o.toString("binary")):t.infoHash&&t.infoHash.toString("binary")||this.client._infoHashBinary};this._send(n)}destroy(t=Ol){if(this.destroyed)return t(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const f in this.peers){const c=this.peers[f];clearTimeout(c.trackerTimeout),c.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,it[this.announceUrl]&&(it[this.announceUrl].consumers-=1),it[this.announceUrl].consumers>0)return t();let r=it[this.announceUrl];delete it[this.announceUrl],r.on("error",Ol),r.once("close",t);let n;if(!this.expectingResponse)return o();n=setTimeout(o,vt.DESTROY_TIMEOUT),r.once("data",o);function o(){n&&(clearTimeout(n),n=null),r.removeListener("data",o),r.destroy(),r=null}}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=t=>{this._onSocketError(t)},this._onSocketDataBound=t=>{this._onSocketData(t)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=it[this.announceUrl],this.socket)it[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{const t=new URL(this.announceUrl);let r;this.client._proxyOpts&&(r=t.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!r&&this.client._proxyOpts.socksProxy&&(r=new lw.Agent(iw(this.client._proxyOpts.socksProxy),t.protocol==="wss:"))),this.socket=it[this.announceUrl]=new sw({url:this.announceUrl,agent:r}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(t){if(!this.destroyed){this.expectingResponse=!1;try{t=JSON.parse(t)}catch{this.client.emit("warning",new Error("Invalid tracker response"));return}t.action==="announce"?this._onAnnounceResponse(t):t.action==="scrape"?this._onScrapeResponse(t):this._onSocketError(new Error(`invalid action in WS response: ${t.action}`))}}_onAnnounceResponse(t){if(t.info_hash!==this.client._infoHashBinary){Ze("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,vt.binaryToHex(t.info_hash),this.client.infoHash);return}if(t.peer_id&&t.peer_id===this.client._peerIdBinary)return;Ze("received %s from %s for %s",JSON.stringify(t),this.announceUrl,this.client.infoHash);const r=t["failure reason"];if(r)return this.client.emit("warning",new Error(r));const n=t["warning message"];n&&this.client.emit("warning",new Error(n));const o=t.interval||t["min interval"];o&&this.setInterval(o*1e3);const f=t["tracker id"];if(f&&(this._trackerId=f),t.complete!=null){const p=Object.assign({},t,{announce:this.announceUrl,infoHash:vt.binaryToHex(t.info_hash)});this.client.emit("update",p)}let c;if(t.offer&&t.peer_id&&(Ze("creating peer (from remote offer)"),c=this._createPeer(),c.id=vt.binaryToHex(t.peer_id),c.once("signal",p=>{const g={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:t.peer_id,answer:p,offer_id:t.offer_id};this._trackerId&&(g.trackerid=this._trackerId),this._send(g)}),this.client.emit("peer",c),c.signal(t.offer)),t.answer&&t.peer_id){const p=vt.binaryToHex(t.offer_id);c=this.peers[p],c?(c.id=vt.binaryToHex(t.peer_id),this.client.emit("peer",c),c.signal(t.answer),clearTimeout(c.trackerTimeout),c.trackerTimeout=null,delete this.peers[p]):Ze(`got unexpected answer: ${JSON.stringify(t.answer)}`)}}_onScrapeResponse(t){t=t.files||{};const r=Object.keys(t);if(r.length===0){this.client.emit("warning",new Error("invalid scrape response"));return}r.forEach(n=>{const o=Object.assign(t[n],{announce:this.announceUrl,infoHash:vt.binaryToHex(n)});this.client.emit("scrape",o)})}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(t){this.destroyed||(this.destroy(),this.client.emit("warning",t),this._startReconnectTimer())}_startReconnectTimer(){const t=Math.floor(Math.random()*cw)+Math.min(Math.pow(2,this.retries)*uw,dw);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},t),this.reconnectTimer.unref&&this.reconnectTimer.unref(),Ze("reconnecting socket in %s ms",t)}_send(t){if(this.destroyed)return;this.expectingResponse=!0;const r=JSON.stringify(t);Ze("send %s",r),this.socket.send(r)}_generateOffers(t,r){const n=this,o=[];Ze("generating %s offers",t);for(let p=0;p<t;++p)f();c();function f(){const p=ow(20).toString("hex");Ze("creating peer (from _generateOffers)");const g=n.peers[p]=n._createPeer({initiator:!0});g.once("signal",y=>{o.push({offer:y,offer_id:vt.hexToBinary(p)}),c()}),g.trackerTimeout=setTimeout(()=>{Ze("tracker timeout: destroying peer"),g.trackerTimeout=null,delete n.peers[p],g.destroy()},hw),g.trackerTimeout.unref&&g.trackerTimeout.unref()}function c(){o.length===t&&(Ze("generated %s offers",t),r(o))}}_createPeer(t){const r=this;t=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},t);const n=new aw(t);return n.once("error",o),n.once("connect",f),n;function o(c){r.client.emit("warning",new Error(`Connection error: ${c.message}`)),n.destroy()}function f(){n.removeListener("error",o),n.removeListener("connect",f)}}};lo.prototype.DEFAULT_ANNOUNCE_INTERVAL=30*1e3;lo._socketPool=it;function Ol(){}var pw=lo;const _t=rr("bittorrent-tracker:client"),gw=xe,vw=At,_w=Rr,yw=no,mw=Ot,Il=oo,Pl=de,Nl=de,ww=pw;class Sa extends gw{constructor(t={}){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");if(!t.announce)throw new Error("Option `announce` is required");if(!process.browser&&!t.port)throw new Error("Option `port` is required");this.peerId=typeof t.peerId=="string"?t.peerId:t.peerId.toString("hex"),this._peerIdBuffer=Buffer.from(this.peerId,"hex"),this._peerIdBinary=this._peerIdBuffer.toString("binary"),this.infoHash=typeof t.infoHash=="string"?t.infoHash.toLowerCase():t.infoHash.toString("hex"),this._infoHashBuffer=Buffer.from(this.infoHash,"hex"),this._infoHashBinary=this._infoHashBuffer.toString("binary"),_t("new client %s",this.infoHash),this.destroyed=!1,this._port=t.port,this._getAnnounceOpts=t.getAnnounceOpts,this._rtcConfig=t.rtcConfig,this._userAgent=t.userAgent,this._proxyOpts=t.proxyOpts,this._wrtc=typeof t.wrtc=="function"?t.wrtc():t.wrtc;let r=typeof t.announce=="string"?[t.announce]:t.announce==null?[]:t.announce;r=r.map(f=>(f=f.toString(),f[f.length-1]==="/"&&(f=f.substring(0,f.length-1)),f)),r=Array.from(new Set(r));const n=this._wrtc!==!1&&(!!this._wrtc||yw.WEBRTC_SUPPORT),o=f=>{mw(()=>{this.emit("warning",f)})};this._trackers=r.map(f=>{let c;try{c=Il.parseUrl(f)}catch{return o(new Error(`Invalid tracker URL: ${f}`)),null}const p=c.port;if(p<0||p>65535)return o(new Error(`Invalid tracker port: ${f}`)),null;const g=c.protocol;return(g==="http:"||g==="https:")&&typeof Pl=="function"?new Pl(this,f):g==="udp:"&&typeof Nl=="function"?new Nl(this,f):(g==="ws:"||g==="wss:")&&n?g==="ws:"&&typeof window<"u"&&window.location.protocol==="https:"?(o(new Error(`Unsupported tracker protocol: ${f}`)),null):new ww(this,f):(o(new Error(`Unsupported tracker protocol: ${f}`)),null)}).filter(Boolean)}start(t){t=this._defaultAnnounceOpts(t),t.event="started",_t("send `start` %o",t),this._announce(t),this._trackers.forEach(r=>{r.setInterval()})}stop(t){t=this._defaultAnnounceOpts(t),t.event="stopped",_t("send `stop` %o",t),this._announce(t)}complete(t){t||(t={}),t=this._defaultAnnounceOpts(t),t.event="completed",_t("send `complete` %o",t),this._announce(t)}update(t){t=this._defaultAnnounceOpts(t),t.event&&delete t.event,_t("send `update` %o",t),this._announce(t)}_announce(t){this._trackers.forEach(r=>{r.announce(t)})}scrape(t){_t("send `scrape`"),t||(t={}),this._trackers.forEach(r=>{r.scrape(t)})}setInterval(t){_t("setInterval %d",t),this._trackers.forEach(r=>{r.setInterval(t)})}destroy(t){if(this.destroyed)return;this.destroyed=!0,_t("destroy");const r=this._trackers.map(n=>o=>{n.destroy(o)});_w(r,t),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=Il.DEFAULT_ANNOUNCE_PEERS),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),this._getAnnounceOpts&&(t=Object.assign({},t,this._getAnnounceOpts())),t}}Sa.scrape=(e,t)=>{if(t=vw(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");const r=Object.assign({},e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:Buffer.from("01234567890123456789"),port:6881}),n=new Sa(r);n.once("error",t),n.once("warning",t);let o=Array.isArray(e.infoHash)?e.infoHash.length:1;const f={};return n.on("scrape",c=>{if(o-=1,f[c.infoHash]=c,o===0){n.destroy();const p=Object.keys(f);p.length===1?t(null,f[p[0]]):t(null,f)}}),e.infoHash=Array.isArray(e.infoHash)?e.infoHash.map(c=>Buffer.from(c,"hex")):Buffer.from(e.infoHash,"hex"),n.scrape({infoHash:e.infoHash}),n};var bw=Sa,Ew=ht,Dl=vm("torrent-discovery"),Fl=de,Cd=xe.EventEmitter,kd=En,Sw=oe,Rw=Rr,xw=bw;Sw(ht,Cd);function ht(e){var t=this;if(!(t instanceof ht))return new ht(e);if(Cd.call(t),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!process.browser&&!e.port)throw new Error("Option `port` is required");t.peerId=typeof e.peerId=="string"?e.peerId:e.peerId.toString("hex"),t.infoHash=typeof e.infoHash=="string"?e.infoHash.toLowerCase():e.infoHash.toString("hex"),t._port=e.port,t._userAgent=e.userAgent,t.destroyed=!1,t._announce=e.announce||[],t._intervalMs=e.intervalMs||15*60*1e3,t._trackerOpts=null,t._dhtAnnouncing=!1,t._dhtTimeout=!1,t._internalDHT=!1,t._onWarning=function(n){t.emit("warning",n)},t._onError=function(n){t.emit("error",n)},t._onDHTPeer=function(n,o){o.toString("hex")===t.infoHash&&t.emit("peer",n.host+":"+n.port,"dht")},t._onTrackerPeer=function(n){t.emit("peer",n,"tracker")},t._onTrackerAnnounce=function(){t.emit("trackerAnnounce")},e.tracker===!1?t.tracker=null:(e.tracker&&typeof e.tracker=="object"&&(t._trackerOpts=kd(e.tracker)),t.tracker=t._createTracker()),e.dht===!1||typeof Fl!="function"?t.dht=null:e.dht&&typeof e.dht.addNode=="function"?t.dht=e.dht:e.dht&&typeof e.dht=="object"?t.dht=r(e.dhtPort,e.dht):t.dht=r(e.dhtPort),t.dht&&(t.dht.on("peer",t._onDHTPeer),t._dhtAnnounce());function r(n,o){var f=new Fl(o);return f.on("warning",t._onWarning),f.on("error",t._onError),f.listen(n),t._internalDHT=!0,f}}ht.prototype.updatePort=function(e){var t=this;e!==t._port&&(t._port=e,t.dht&&t._dhtAnnounce(),t.tracker&&(t.tracker.stop(),t.tracker.destroy(function(){t.tracker=t._createTracker()})))};ht.prototype.complete=function(e){this.tracker&&this.tracker.complete(e)};ht.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,clearTimeout(t._dhtTimeout);var r=[];t.tracker&&(t.tracker.stop(),t.tracker.removeListener("warning",t._onWarning),t.tracker.removeListener("error",t._onError),t.tracker.removeListener("peer",t._onTrackerPeer),t.tracker.removeListener("update",t._onTrackerAnnounce),r.push(function(n){t.tracker.destroy(n)})),t.dht&&t.dht.removeListener("peer",t._onDHTPeer),t._internalDHT&&(t.dht.removeListener("warning",t._onWarning),t.dht.removeListener("error",t._onError),r.push(function(n){t.dht.destroy(n)})),Rw(r,e),t.dht=null,t.tracker=null,t._announce=null}};ht.prototype._createTracker=function(){var e=kd(this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),t=new xw(e);return t.on("warning",this._onWarning),t.on("error",this._onError),t.on("peer",this._onTrackerPeer),t.on("update",this._onTrackerAnnounce),t.setInterval(this._intervalMs),t.start(),t};ht.prototype._dhtAnnounce=function(){var e=this;if(e._dhtAnnouncing)return;Dl("dht announce"),e._dhtAnnouncing=!0,clearTimeout(e._dhtTimeout),e.dht.announce(e.infoHash,e._port,function(r){e._dhtAnnouncing=!1,Dl("dht announce complete"),r&&e.emit("warning",r),e.emit("dhtAnnounce"),e.destroyed||(e._dhtTimeout=setTimeout(function(){e._dhtAnnounce()},t()),e._dhtTimeout.unref&&e._dhtTimeout.unref())});function t(){return e._intervalMs+Math.floor(Math.random()*e._intervalMs/5)}};var Tw=kw,Cw=Object.prototype.hasOwnProperty;function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Cw.call(r,n)&&(e[n]=r[n])}return e}var Aw=Tt;const at=Ot;function Tt(e,t){if(!(this instanceof Tt))return new Tt(e,t);if(t||(t={}),this.chunkLength=Number(e),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(t.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}Tt.prototype.put=function(e,t,r=()=>{}){if(this.closed)return at(()=>r(new Error("Storage is closed")));const n=e===this.lastChunkIndex;if(n&&t.length!==this.lastChunkLength)return at(()=>r(new Error("Last chunk length must be "+this.lastChunkLength)));if(!n&&t.length!==this.chunkLength)return at(()=>r(new Error("Chunk length must be "+this.chunkLength)));this.chunks[e]=t,at(()=>r(null))};Tt.prototype.get=function(e,t,r=()=>{}){if(typeof t=="function")return this.get(e,null,t);if(this.closed)return at(()=>r(new Error("Storage is closed")));let n=this.chunks[e];if(!n){const c=new Error("Chunk not found");return c.notFound=!0,at(()=>r(c))}t||(t={});const o=t.offset||0,f=t.length||n.length-o;(o!==0||f!==n.length)&&(n=n.slice(o,f+o)),at(()=>r(null,n))};Tt.prototype.close=Tt.prototype.destroy=function(e=()=>{}){if(this.closed)return at(()=>e(new Error("Storage is closed")));this.closed=!0,this.chunks=null,at(()=>e(null))};var Lw=Ct;function Ct(e){if(!(this instanceof Ct))return new Ct(e);if(this.store=e,this.chunkLength=e.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}Ct.prototype.put=function(e,t,r){var n=this;n.mem[e]=t,n.store.put(e,t,function(o){n.mem[e]=null,r&&r(o)})};Ct.prototype.get=function(e,t,r){if(typeof t=="function")return this.get(e,null,t);var n=t&&t.offset||0,o=t&&t.length&&n+t.length,f=this.mem[e];if(f)return Mw(r,null,t?f.slice(n,o):f);this.store.get(e,t,r)};Ct.prototype.close=function(e){this.store.close(e)};Ct.prototype.destroy=function(e){this.store.destroy(e)};function Mw(e,t,r){process.nextTick(function(){e&&e(t,r)})}/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Bw=Iw;const Ow=Ot;function Iw(e,t,r){if(typeof t!="number")throw new Error("second argument must be a Number");let n,o,f,c,p,g=!0,y;Array.isArray(e)?(n=[],f=o=e.length):(c=Object.keys(e),n={},f=o=c.length);function m(k){function A(){r&&r(k,n),r=null}g?Ow(A):A()}function w(k,A,x){if(n[k]=x,A&&(p=!0),--f===0||A)m(A);else if(!p&&y<o){let C;c?(C=c[y],y+=1,e[C](function(R,s){w(C,R,s)})):(C=y,y+=1,e[C](function(R,s){w(C,R,s)}))}}y=t,f?c?c.some(function(k,A){return e[k](function(x,C){w(k,x,C)}),A===t-1}):e.some(function(k,A){return k(function(x,C){w(A,x,C)}),A===t-1}):m(null),g=!1}var Pw=De,tt=16384;function De(e){if(!(this instanceof De))return new De(e);this.length=e,this.missing=e,this.sources=null,this._chunks=Math.ceil(e/tt),this._remainder=e%tt||tt,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}De.BLOCK_LENGTH=tt;De.prototype.chunkLength=function(e){return e===this._chunks-1?this._remainder:tt};De.prototype.chunkLengthRemaining=function(e){return this.length-e*tt};De.prototype.chunkOffset=function(e){return e*tt};De.prototype.reserve=function(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1};De.prototype.reserveRemaining=function(){if(!this.init())return-1;if(this._reservations<this._chunks){var e=this._reservations;return this._reservations=this._chunks,e}return-1};De.prototype.cancel=function(e){this.init()&&this._cancellations.push(e)};De.prototype.cancelRemaining=function(e){this.init()&&(this._reservations=e)};De.prototype.get=function(e){return this.init()?this._buffer[e]:null};De.prototype.set=function(e,t,r){if(!this.init())return!1;for(var n=t.length,o=Math.ceil(n/tt),f=0;f<o;f++)if(!this._buffer[e+f]){var c=f*tt,p=t.slice(c,c+tt);this._buffered++,this._buffer[e+f]=p,this.missing-=p.length,this.sources.indexOf(r)===-1&&this.sources.push(r)}return this._buffered===this._chunks};De.prototype.flush=function(){if(!this._buffer||this._chunks!==this._buffered)return null;var e=Buffer.concat(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,e};De.prototype.init=function(){return this._flushed?!1:(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)};var Nw=function(e){var t=0;return function(){if(t===e.length)return null;var r=e.length-t,n=Math.random()*r|0,o=e[t+n],f=e[t];return e[t]=o,e[t+n]=f,t++,o}},Dw=Nw,fo={};Object.defineProperty(fo,"__esModule",{value:!0});function Ul(e){var t=e>>3;return e%8!==0&&t++,t}var Fw=function(){function e(t,r){t===void 0&&(t=0);var n=r==null?void 0:r.grow;this.grow=n&&isFinite(n)&&Ul(n)||n||0,this.buffer=typeof t=="number"?new Uint8Array(Ul(t)):t}return e.prototype.get=function(t){var r=t>>3;return r<this.buffer.length&&!!(this.buffer[r]&128>>t%8)},e.prototype.set=function(t,r){r===void 0&&(r=!0);var n=t>>3;if(r){if(this.buffer.length<n+1){var o=Math.max(n+1,Math.min(2*this.buffer.length,this.grow));if(o<=this.grow){var f=new Uint8Array(o);f.set(this.buffer),this.buffer=f}}this.buffer[n]|=128>>t%8}else n<this.buffer.length&&(this.buffer[n]&=~(128>>t%8))},e.prototype.forEach=function(t,r,n){r===void 0&&(r=0),n===void 0&&(n=this.buffer.length*8);for(var o=r,f=o>>3,c=128>>o%8,p=this.buffer[f];o<n;o++)t(!!(p&c),o),c=c===1?(p=this.buffer[++f],128):c>>1},e}();fo.default=Fw;var uo={exports:{}};const Uw=Ua;let Xr,Hr,zr;function $w(){Xr=Uw.createWorker(),Hr=1,zr={},Xr.onmessage=function(t){const r=t.data.id,n=zr[r];delete zr[r],t.data.error!=null?n(new Error("Rusha worker error: "+t.data.error)):n(null,t.data.hash)}}function jw(e,t){Xr||$w(),zr[Hr]=t,Xr.postMessage({id:Hr,data:e}),Hr+=1}var Ww=jw;const qw=Ua,Hw=Ww,zw=new qw,$l=typeof window<"u"?window:self,jl=$l.crypto||$l.msCrypto||{};let cr=jl.subtle||jl.webkitSubtle;function Gr(e){return zw.digest(e)}try{cr.digest({name:"sha-1"},new Uint8Array).catch(function(){cr=!1})}catch{cr=!1}function Gw(e,t){if(!cr){typeof window<"u"?Hw(e,function(n,o){if(n){t(Gr(e));return}t(o)}):queueMicrotask(()=>t(Gr(e)));return}typeof e=="string"&&(e=Vw(e)),cr.digest({name:"sha-1"},e).then(function(n){t(Kw(new Uint8Array(n)))},function(){t(Gr(e))})}function Vw(e){const t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function Kw(e){const t=e.length,r=[];for(let n=0;n<t;n++){const o=e[n];r.push((o>>>4).toString(16)),r.push((o&15).toString(16))}return r.join("")}uo.exports=Gw;uo.exports.sync=Gr;var Yw=uo.exports;/*! ut_metadata. MIT License. WebTorrent LLC <https://webtorrent.io/opensource> */const{EventEmitter:Xw}=xe,$t=en,Wl=fo.default,Jw=rr("ut_metadata"),Zw=Yw,Qw=1e7,ql=1e3,or=16384;var e0=e=>{class t extends Xw{constructor(n){super(),this._wire=n,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new Wl(0,{grow:ql}),Buffer.isBuffer(e)&&this.setMetadata(e)}onHandshake(n,o,f){this._infoHash=n}onExtendedHandshake(n){if(!n.m||!n.m.ut_metadata)return this.emit("warning",new Error("Peer does not support ut_metadata"));if(!n.metadata_size)return this.emit("warning",new Error("Peer does not have metadata"));if(typeof n.metadata_size!="number"||Qw<n.metadata_size||n.metadata_size<=0)return this.emit("warning",new Error("Peer gave invalid metadata size"));this._metadataSize=n.metadata_size,this._numPieces=Math.ceil(this._metadataSize/or),this._remainingRejects=this._numPieces*2,this._requestPieces()}onMessage(n){let o,f;try{const c=n.toString(),p=c.indexOf("ee")+2;o=$t.decode(c.substring(0,p)),f=n.slice(p)}catch{return}switch(o.msg_type){case 0:this._onRequest(o.piece);break;case 1:this._onData(o.piece,f,o.total_size);break;case 2:this._onReject(o.piece);break}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}setMetadata(n){if(this._metadataComplete)return!0;Jw("set metadata");try{const o=$t.decode(n).info;o&&(n=$t.encode(o))}catch{}return this._infoHash&&this._infoHash!==Zw.sync(n)?!1:(this.cancel(),this.metadata=n,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",$t.encode({info:$t.decode(this.metadata)})),!0)}_send(n,o){let f=$t.encode(n);Buffer.isBuffer(o)&&(f=Buffer.concat([f,o])),this._wire.extended("ut_metadata",f)}_request(n){this._send({msg_type:0,piece:n})}_data(n,o,f){const c={msg_type:1,piece:n};typeof f=="number"&&(c.total_size=f),this._send(c,o)}_reject(n){this._send({msg_type:2,piece:n})}_onRequest(n){if(!this._metadataComplete){this._reject(n);return}const o=n*or;let f=o+or;f>this._metadataSize&&(f=this._metadataSize);const c=this.metadata.slice(o,f);this._data(n,c,this._metadataSize)}_onData(n,o,f){o.length>or||!this._fetching||(o.copy(this.metadata,n*or),this._bitfield.set(n),this._checkDone())}_onReject(n){this._remainingRejects>0&&this._fetching?(this._request(n),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=Buffer.alloc(this._metadataSize);for(let n=0;n<this._numPieces;n++)this._request(n)}}_checkDone(){let n=!0;for(let f=0;f<this._numPieces;f++)if(!this._bitfield.get(f)){n=!1;break}if(!n)return;this.setMetadata(this.metadata)||this._failedMetadata()}_failedMetadata(){this._bitfield=new Wl(0,{grow:ql}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return t.prototype.name="ut_metadata",t},t0=nr,Hl=xr("webtorrent:file-stream"),r0=oe,Ad=bt;r0(nr,Ad.Readable);function nr(e,t){Ad.Readable.call(this,t),this.destroyed=!1,this._torrent=e._torrent;var r=t&&t.start||0,n=t&&t.end&&t.end<e.length?t.end:e.length-1,o=e._torrent.pieceLength;this._startPiece=(r+e.offset)/o|0,this._endPiece=(n+e.offset)/o|0,this._piece=this._startPiece,this._offset=r+e.offset-this._startPiece*o,this._missing=n-r+1,this._reading=!1,this._notifying=!1,this._criticalLength=Math.min(1024*1024/o|0,2)}nr.prototype._read=function(){this._reading||(this._reading=!0,this._notify())};nr.prototype._notify=function(){var e=this;if(!(!e._reading||e._missing===0)){if(!e._torrent.bitfield.get(e._piece))return e._torrent.critical(e._piece,e._piece+e._criticalLength);if(!e._notifying){if(e._notifying=!0,e._torrent.destroyed)return e._destroy(new Error("Torrent removed"));var t=e._piece;e._torrent.store.get(t,function(r,n){if(e._notifying=!1,!e.destroyed){if(r)return e._destroy(r);Hl("read %s (length %s) (err %s)",t,n.length,r&&r.message),e._offset&&(n=n.slice(e._offset),e._offset=0),e._missing<n.length&&(n=n.slice(0,e._missing)),e._missing-=n.length,Hl("pushing buffer of length %s",n.length),e._reading=!1,e.push(n),e._missing===0&&e.push(null)}}),e._piece+=1}}};nr.prototype.destroy=function(e){this._destroy(null,e)};nr.prototype._destroy=function(e,t){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent.deselect(this._startPiece,this._endPiece,!0),e&&this.emit("error",e),this.emit("close"),t&&t())};var n0=$e,i0=au,Ld=xe.EventEmitter,a0=t0,o0=oe,s0=de,co=Ga,l0=bt,f0=za,u0=Bu,d0=Mu;o0($e,Ld);function $e(e,t){Ld.call(this),this._torrent=e,this._destroyed=!1,this.name=t.name,this.path=t.path,this.length=t.length,this.offset=t.offset,this.done=!1;var r=t.offset,n=r+t.length-1;this._startPiece=r/this._torrent.pieceLength|0,this._endPiece=n/this._torrent.pieceLength|0,this.length===0&&(this.done=!0,this.emit("done"))}Object.defineProperty($e.prototype,"downloaded",{get:function(){if(!this._torrent.bitfield)return 0;for(var e=0,t=this._startPiece;t<=this._endPiece;++t)if(this._torrent.bitfield.get(t))e+=t===this._endPiece?this._torrent.lastPieceLength:this._torrent.pieceLength;else{var r=this._torrent.pieces[t];e+=r.length-r.missing}return e}});Object.defineProperty($e.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}});$e.prototype.select=function(e){this.length!==0&&this._torrent.select(this._startPiece,this._endPiece,e)};$e.prototype.deselect=function(){this.length!==0&&this._torrent.deselect(this._startPiece,this._endPiece,!1)};$e.prototype.createReadStream=function(e){var t=this;if(this.length===0){var r=new l0.PassThrough;return process.nextTick(function(){r.end()}),r}var n=new a0(t,e);return t._torrent.select(n._startPiece,n._endPiece,!0,function(){n._notify()}),i0(n,function(){t._destroyed||t._torrent.destroyed||t._torrent.deselect(n._startPiece,n._endPiece,!0)}),n};$e.prototype.getBuffer=function(e){d0(this.createReadStream(),this.length,e)};$e.prototype.getBlob=function(e){if(typeof window>"u")throw new Error("browser-only method");f0(this.createReadStream(),this._getMimeType(),e)};$e.prototype.getBlobURL=function(e){if(typeof window>"u")throw new Error("browser-only method");u0(this.createReadStream(),this._getMimeType(),e)};$e.prototype.appendTo=function(e,t,r){if(typeof window>"u")throw new Error("browser-only method");co.append(this,e,t,r)};$e.prototype.renderTo=function(e,t,r){if(typeof window>"u")throw new Error("browser-only method");co.render(this,e,t,r)};$e.prototype._getMimeType=function(){return co.mime[s0.extname(this.name).toLowerCase()]};$e.prototype._destroy=function(){this._destroyed=!0,this._torrent=null};var Cr={},Md=c0;function c0(e,t){if(!(t>=e.length||t<0)){var r=e.pop();if(t<e.length){var n=e[t];return e[t]=r,n}return r}}var Ra={exports:{}},qi,zl;function h0(){if(zl)return qi;zl=1;var e=1e3,t=e*60,r=t*60,n=r*24,o=n*7,f=n*365.25;qi=function(m,w){w=w||{};var k=typeof m;if(k==="string"&&m.length>0)return c(m);if(k==="number"&&isFinite(m))return w.long?g(m):p(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function c(m){if(m=String(m),!(m.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(w){var k=parseFloat(w[1]),A=(w[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return k*f;case"weeks":case"week":case"w":return k*o;case"days":case"day":case"d":return k*n;case"hours":case"hour":case"hrs":case"hr":case"h":return k*r;case"minutes":case"minute":case"mins":case"min":case"m":return k*t;case"seconds":case"second":case"secs":case"sec":case"s":return k*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function p(m){var w=Math.abs(m);return w>=n?Math.round(m/n)+"d":w>=r?Math.round(m/r)+"h":w>=t?Math.round(m/t)+"m":w>=e?Math.round(m/e)+"s":m+"ms"}function g(m){var w=Math.abs(m);return w>=n?y(m,w,n,"day"):w>=r?y(m,w,r,"hour"):w>=t?y(m,w,t,"minute"):w>=e?y(m,w,e,"second"):m+" ms"}function y(m,w,k,A){var x=w>=k*1.5;return Math.round(m/k)+" "+A+(x?"s":"")}return qi}function p0(e){r.debug=r,r.default=r,r.coerce=g,r.disable=c,r.enable=f,r.enabled=p,r.humanize=h0(),Object.keys(e).forEach(function(y){r[y]=e[y]}),r.instances=[],r.names=[],r.skips=[],r.formatters={};function t(y){for(var m=0,w=0;w<y.length;w++)m=(m<<5)-m+y.charCodeAt(w),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=t;function r(y){var m;function w(){if(w.enabled){for(var k=arguments.length,A=new Array(k),x=0;x<k;x++)A[x]=arguments[x];var C=w,R=Number(new Date),s=R-(m||R);C.diff=s,C.prev=m,C.curr=R,m=R,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");var v=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,function(d,b){if(d==="%%")return d;v++;var L=r.formatters[b];if(typeof L=="function"){var N=A[v];d=L.call(C,N),A.splice(v,1),v--}return d}),r.formatArgs.call(C,A);var u=C.log||r.log;u.apply(C,A)}}return w.namespace=y,w.enabled=r.enabled(y),w.useColors=r.useColors(),w.color=t(y),w.destroy=n,w.extend=o,typeof r.init=="function"&&r.init(w),r.instances.push(w),w}function n(){var y=r.instances.indexOf(this);return y!==-1?(r.instances.splice(y,1),!0):!1}function o(y,m){return r(this.namespace+(typeof m>"u"?":":m)+y)}function f(y){r.save(y),r.names=[],r.skips=[];var m,w=(typeof y=="string"?y:"").split(/[\s,]+/),k=w.length;for(m=0;m<k;m++)w[m]&&(y=w[m].replace(/\*/g,".*?"),y[0]==="-"?r.skips.push(new RegExp("^"+y.substr(1)+"$")):r.names.push(new RegExp("^"+y+"$")));for(m=0;m<r.instances.length;m++){var A=r.instances[m];A.enabled=r.enabled(A.namespace)}}function c(){r.enable("")}function p(y){if(y[y.length-1]==="*")return!0;var m,w;for(m=0,w=r.skips.length;m<w;m++)if(r.skips[m].test(y))return!1;for(m=0,w=r.names.length;m<w;m++)if(r.names[m].test(y))return!0;return!1}function g(y){return y instanceof Error?y.stack||y.message:y}return r.enable(r.load()),r}var g0=p0;(function(e,t){function r(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(k){return typeof k}:r=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},r(m)}t.log=f,t.formatArgs=o,t.save=c,t.load=p,t.useColors=n,t.storage=g(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!!this.useColors){var w="color: "+this.color;m.splice(1,0,w,"color: inherit");var k=0,A=0;m[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(k++,x==="%c"&&(A=k))}),m.splice(A,0,w)}}function f(){var m;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(m=console).log.apply(m,arguments)}function c(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function p(){var m;try{m=t.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m={}.DEBUG),m}function g(){try{return localStorage}catch{}}e.exports=g0(t);var y=e.exports.formatters;y.j=function(m){try{return JSON.stringify(m)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}})(Ra,Ra.exports);var v0=Ra.exports,Bd=fe,_0=Md,ho=en,Od=ao,Pe=rt.Buffer,y0=v0("bittorrent-protocol"),m0=En,w0=oe,b0=Tr,Gl=io,po=bt,E0=4e5,S0=55e3,R0=Pe.from("BitTorrent protocol"),x0=Pe.from([0,0,0,0]),T0=Pe.from([0,0,0,1,0]),C0=Pe.from([0,0,0,1,1]),k0=Pe.from([0,0,0,1,2]),A0=Pe.from([0,0,0,1,3]),L0=[0,0,0,0,0,0,0,0],M0=[0,0,0,3,9,0,0];function Id(e,t,r,n){this.piece=e,this.offset=t,this.length=r,this.callback=n}w0(fe,po.Duplex);function fe(){if(!(this instanceof fe))return new fe;po.Duplex.call(this),this._debugId=b0(4).toString("hex"),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=null,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new Od(0,{grow:E0}),this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=Gl(),this.downloadSpeed=Gl(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this.destroyed=!1,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this.on("finish",this._onFinish),this._parseHandshake()}fe.prototype.setKeepAlive=function(e){var t=this;t._debug("setKeepAlive %s",e),clearInterval(t._keepAliveInterval),e!==!1&&(t._keepAliveInterval=setInterval(function(){t.keepAlive()},S0))};fe.prototype.setTimeout=function(e,t){this._debug("setTimeout ms=%d unref=%s",e,t),this._clearTimeout(),this._timeoutMs=e,this._timeoutUnref=!!t,this._updateTimeout()};fe.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this._debug("destroy"),this.emit("close"),this.end())};fe.prototype.end=function(){this._debug("end"),this._onUninterested(),this._onChoke(),po.Duplex.prototype.end.apply(this,arguments)};fe.prototype.use=function(e){var t=e.prototype.name;if(!t)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",t);var r=this._nextExt,n=new e(this);function o(){}typeof n.onHandshake!="function"&&(n.onHandshake=o),typeof n.onExtendedHandshake!="function"&&(n.onExtendedHandshake=o),typeof n.onMessage!="function"&&(n.onMessage=o),this.extendedMapping[r]=t,this._ext[t]=n,this[t]=n,this._nextExt+=1};fe.prototype.keepAlive=function(){this._debug("keep-alive"),this._push(x0)};fe.prototype.handshake=function(e,t,r){var n,o;if(typeof e=="string"?(e=e.toLowerCase(),n=Pe.from(e,"hex")):(n=e,e=n.toString("hex")),typeof t=="string"?o=Pe.from(t,"hex"):(o=t,t=o.toString("hex")),n.length!==20||o.length!==20)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",e,t,r);var f=Pe.from(L0);f[5]|=16,r&&r.dht&&(f[7]|=1),this._push(Pe.concat([R0,f,n,o])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()};fe.prototype._sendExtendedHandshake=function(){var e=m0(this.extendedHandshake);e.m={};for(var t in this.extendedMapping){var r=this.extendedMapping[t];e.m[r]=Number(t)}this.extended(0,ho.encode(e)),this._extendedHandshakeSent=!0};fe.prototype.choke=function(){if(!this.amChoking){for(this.amChoking=!0,this._debug("choke");this.peerRequests.length;)this.peerRequests.pop();this._push(T0)}};fe.prototype.unchoke=function(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(C0))};fe.prototype.interested=function(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(k0))};fe.prototype.uninterested=function(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(A0))};fe.prototype.have=function(e){this._debug("have %d",e),this._message(4,[e],null)};fe.prototype.bitfield=function(e){this._debug("bitfield"),Pe.isBuffer(e)||(e=e.buffer),this._message(5,[],e)};fe.prototype.request=function(e,t,r,n){if(n||(n=function(){}),this._finished)return n(new Error("wire is closed"));if(this.peerChoking)return n(new Error("peer is choking"));this._debug("request index=%d offset=%d length=%d",e,t,r),this.requests.push(new Id(e,t,r,n)),this._updateTimeout(),this._message(6,[e,t,r],null)};fe.prototype.piece=function(e,t,r){this._debug("piece index=%d offset=%d",e,t),this.uploaded+=r.length,this.uploadSpeed(r.length),this.emit("upload",r.length),this._message(7,[e,t],r)};fe.prototype.cancel=function(e,t,r){this._debug("cancel index=%d offset=%d length=%d",e,t,r),this._callback(kn(this.requests,e,t,r),new Error("request was cancelled"),null),this._message(8,[e,t,r],null)};fe.prototype.port=function(e){this._debug("port %d",e);var t=Pe.from(M0);t.writeUInt16BE(e,5),this._push(t)};fe.prototype.extended=function(e,t){if(this._debug("extended ext=%s",e),typeof e=="string"&&this.peerExtendedMapping[e]&&(e=this.peerExtendedMapping[e]),typeof e=="number"){var r=Pe.from([e]),n=Pe.isBuffer(t)?t:ho.encode(t);this._message(20,[],Pe.concat([r,n]))}else throw new Error("Unrecognized extension: "+e)};fe.prototype._read=function(){};fe.prototype._message=function(e,t,r){var n=r?r.length:0,o=Pe.allocUnsafe(5+4*t.length);o.writeUInt32BE(o.length+n-4,0),o[4]=e;for(var f=0;f<t.length;f++)o.writeUInt32BE(t[f],5+4*f);this._push(o),r&&this._push(r)};fe.prototype._push=function(e){if(!this._finished)return this.push(e)};fe.prototype._onKeepAlive=function(){this._debug("got keep-alive"),this.emit("keep-alive")};fe.prototype._onHandshake=function(e,t,r){var n=e.toString("hex"),o=t.toString("hex");this._debug("got handshake i=%s p=%s exts=%o",n,o,r),this.peerId=o,this.peerIdBuffer=t,this.peerExtensions=r,this.emit("handshake",n,o,r);var f;for(f in this._ext)this._ext[f].onHandshake(n,o,r);r.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()};fe.prototype._onChoke=function(){for(this.peerChoking=!0,this._debug("got choke"),this.emit("choke");this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)};fe.prototype._onUnchoke=function(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")};fe.prototype._onInterested=function(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")};fe.prototype._onUninterested=function(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")};fe.prototype._onHave=function(e){this.peerPieces.get(e)||(this._debug("got have %d",e),this.peerPieces.set(e,!0),this.emit("have",e))};fe.prototype._onBitField=function(e){this.peerPieces=new Od(e),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)};fe.prototype._onRequest=function(e,t,r){var n=this;if(!n.amChoking){n._debug("got request index=%d offset=%d length=%d",e,t,r);var o=function(c,p){if(f===kn(n.peerRequests,e,t,r)){if(c)return n._debug("error satisfying request index=%d offset=%d length=%d (%s)",e,t,r,c.message);n.piece(e,t,p)}},f=new Id(e,t,r,o);n.peerRequests.push(f),n.emit("request",e,t,r,o)}};fe.prototype._onPiece=function(e,t,r){this._debug("got piece index=%d offset=%d",e,t),this._callback(kn(this.requests,e,t,r.length),null,r),this.downloaded+=r.length,this.downloadSpeed(r.length),this.emit("download",r.length),this.emit("piece",e,t,r)};fe.prototype._onCancel=function(e,t,r){this._debug("got cancel index=%d offset=%d length=%d",e,t,r),kn(this.peerRequests,e,t,r),this.emit("cancel",e,t,r)};fe.prototype._onPort=function(e){this._debug("got port %d",e),this.emit("port",e)};fe.prototype._onExtended=function(e,t){if(e===0){var r;try{r=ho.decode(t)}catch(o){this._debug("ignoring invalid extended handshake: %s",o.message||o)}if(!r)return;this.peerExtendedHandshake=r;var n;if(typeof r.m=="object")for(n in r.m)this.peerExtendedMapping[n]=Number(r.m[n].toString());for(n in this._ext)this.peerExtendedMapping[n]&&this._ext[n].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[e]&&(e=this.extendedMapping[e],this._ext[e]&&this._ext[e].onMessage(t)),this._debug("got extended message ext=%s",e),this.emit("extended",e,t)};fe.prototype._onTimeout=function(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")};fe.prototype._write=function(e,t,r){for(this._bufferSize+=e.length,this._buffer.push(e);this._bufferSize>=this._parserSize;){var n=this._buffer.length===1?this._buffer[0]:Pe.concat(this._buffer);this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[n.slice(this._parserSize)]:[],this._parser(n.slice(0,this._parserSize))}r(null)};fe.prototype._callback=function(e,t,r){e&&(this._clearTimeout(),!this.peerChoking&&!this._finished&&this._updateTimeout(),e.callback(t,r))};fe.prototype._clearTimeout=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)};fe.prototype._updateTimeout=function(){var e=this;!e._timeoutMs||!e.requests.length||e._timeout||(e._timeout=setTimeout(function(){e._onTimeout()},e._timeoutMs),e._timeoutUnref&&e._timeout.unref&&e._timeout.unref())};fe.prototype._parse=function(e,t){this._parserSize=e,this._parser=t};fe.prototype._onMessageLength=function(e){var t=e.readUInt32BE(0);t>0?this._parse(t,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))};fe.prototype._onMessage=function(e){switch(this._parse(4,this._onMessageLength),e[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(e.readUInt32BE(1));case 5:return this._onBitField(e.slice(1));case 6:return this._onRequest(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 7:return this._onPiece(e.readUInt32BE(1),e.readUInt32BE(5),e.slice(9));case 8:return this._onCancel(e.readUInt32BE(1),e.readUInt32BE(5),e.readUInt32BE(9));case 9:return this._onPort(e.readUInt16BE(1));case 20:return this._onExtended(e.readUInt8(1),e.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",e)}};fe.prototype._parseHandshake=function(){var e=this;e._parse(1,function(t){var r=t.readUInt8(0);e._parse(r+48,function(n){var o=n.slice(0,r);if(o.toString()!=="BitTorrent protocol"){e._debug("Error: wire not speaking BitTorrent protocol (%s)",o.toString()),e.end();return}n=n.slice(r),e._onHandshake(n.slice(8,28),n.slice(28,48),{dht:!!(n[7]&1),extended:!!(n[5]&16)}),e._parse(4,e._onMessageLength)})})};fe.prototype._onFinish=function(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,function(){});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)};fe.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],y0.apply(null,e)};function kn(e,t,r,n){for(var o=0;o<e.length;o++){var f=e[o];if(f.piece===t&&f.offset===r&&f.length===n)return _0(e,o),f}return null}const B0="webtorrent",O0="Streaming torrent client",I0="0.99.4",P0={name:"WebTorrent, LLC",email:"feross@webtorrent.io",url:"https://webtorrent.io"},N0={"./lib/server.js":!1,"./lib/tcp-pool.js":!1,"bittorrent-dht/client":!1,"fs-chunk-store":"memory-chunk-store","load-ip-set":!1,net:!1,os:!1,ut_pex:!1},D0={transform:["package-json-versionify"]},F0={url:"https://github.com/webtorrent/webtorrent/issues"},U0={"addr-to-ip-port":"^1.4.2",bitfield:"^2.0.0","bittorrent-dht":"^8.0.0","bittorrent-protocol":"^2.1.5","chunk-store-stream":"^2.0.2","create-torrent":"^3.24.5",debug:"^3.1.0","end-of-stream":"^1.1.0","fs-chunk-store":"^1.6.2","immediate-chunk-store":"^1.0.8",inherits:"^2.0.1","load-ip-set":"^1.2.7","memory-chunk-store":"^1.2.0",mime:"^2.2.0",multistream:"^2.0.5","package-json-versionify":"^1.0.2","parse-torrent":"^6.0.0",pump:"^3.0.0","random-iterate":"^1.0.1",randombytes:"^2.0.3","range-parser":"^1.2.0","readable-stream":"^2.1.4","render-media":"^3.0.0","run-parallel":"^1.1.6","run-parallel-limit":"^1.0.3","safe-buffer":"^5.0.1","simple-concat":"^1.0.0","simple-get":"^3.0.1","simple-peer":"^9.0.0","simple-sha1":"^2.0.8",speedometer:"^1.0.0","stream-to-blob":"^1.0.0","stream-to-blob-url":"^2.1.0","stream-with-known-length-to-buffer":"^1.0.0","torrent-discovery":"^8.3.1","torrent-piece":"^1.1.0",uniq:"^1.0.1","unordered-array-remove":"^1.0.2",ut_metadata:"^3.0.8",ut_pex:"^1.1.1",xtend:"^4.0.1","zero-fill":"^2.2.3"},$0={airtap:"0.0.4","babel-minify":"^0.3.0","bittorrent-tracker":"^9.4.0",brfs:"^1.4.3",browserify:"^16.0.0","cross-spawn":"^6.0.3",electron:"^2.0.0",finalhandler:"^1.0.0","network-address":"^1.1.0","run-series":"^1.1.4","serve-static":"^1.11.1",standard:"*",tape:"^4.6.0","webtorrent-fixtures":"^1.5.0"},j0={node:">=4"},W0="https://webtorrent.io",q0=["bittorrent","bittorrent client","download","mad science","p2p","peer-to-peer","peers","streaming","swarm","torrent","web torrent","webrtc","webrtc data","webtorrent"],H0="MIT",z0="index.js",G0={type:"git",url:"git://github.com/webtorrent/webtorrent.git"},V0={build:"browserify -s WebTorrent -e ./ | minify > webtorrent.min.js","build-debug":"browserify -s WebTorrent -e ./ > webtorrent.debug.js",size:"npm run build && cat webtorrent.min.js | gzip | wc -c",test:"standard && npm run test-node && npm run test-browser","test-browser":"airtap -- test/*.js test/browser/*.js","test-browser-local":"airtap --local -- test/*.js test/browser/*.js","test-node":"tape test/*.js test/node/*.js","update-authors":"./scripts/update-authors.sh"},go={name:B0,description:O0,version:I0,author:P0,browser:N0,browserify:D0,bugs:F0,dependencies:U0,devDependencies:$0,engines:j0,homepage:W0,keywords:q0,license:H0,main:z0,repository:G0,scripts:V0};var K0=kr,Y0=ao,X0=rt.Buffer,yt=xr("webtorrent:webconn"),Hi=Pa,J0=oe,Z0=nn,vo=Bd,Q0=go.version;J0(kr,vo);function kr(e,t){vo.call(this),this.url=e,this.webPeerId=Z0.sync(e),this._torrent=t,this._init()}kr.prototype._init=function(){var e=this;e.setKeepAlive(!0),e.once("handshake",function(t,r){if(!e.destroyed){e.handshake(t,e.webPeerId);for(var n=e._torrent.pieces.length,o=new Y0(n),f=0;f<=n;f++)o.set(f,!0);e.bitfield(o)}}),e.once("interested",function(){yt("interested"),e.unchoke()}),e.on("uninterested",function(){yt("uninterested")}),e.on("choke",function(){yt("choke")}),e.on("unchoke",function(){yt("unchoke")}),e.on("bitfield",function(){yt("bitfield")}),e.on("request",function(t,r,n,o){yt("request pieceIndex=%d offset=%d length=%d",t,r,n),e.httpRequest(t,r,n,o)})};kr.prototype.httpRequest=function(e,t,r,n){var o=this,f=e*o._torrent.pieceLength,c=f+t,p=c+r-1,g=o._torrent.files,y;if(g.length<=1)y=[{url:o.url,start:c,end:p}];else{var m=g.filter(function(x){return x.offset<=p&&x.offset+x.length>c});if(m.length<1)return n(new Error("Could not find file corresponnding to web seed range request"));y=m.map(function(x){var C=x.offset+x.length-1,R=o.url+(o.url[o.url.length-1]==="/"?"":"/")+x.path;return{url:R,fileOffsetInRange:Math.max(x.offset-c,0),start:Math.max(c-x.offset,0),end:Math.min(C,p-x.offset)}})}var w=0,k=!1,A;y.length>1&&(A=X0.alloc(r)),y.forEach(function(x){var C=x.url,R=x.start,s=x.end;yt("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",C,e,t,r,R,s);var v={url:C,method:"GET",headers:{"user-agent":"WebTorrent/"+Q0+" (https://webtorrent.io)",range:"bytes="+R+"-"+s}};function u(d,b){if(d.statusCode<200||d.statusCode>=300)return k=!0,n(new Error("Unexpected HTTP status code "+d.statusCode));yt("Got data of length %d",b.length),y.length===1?n(null,b):(b.copy(A,x.fileOffsetInRange),++w===y.length&&n(null,A))}Hi.concat(v,function(d,b,L){if(!k){if(d)return typeof window>"u"||C.startsWith(window.location.origin+"/")?(k=!0,n(d)):Hi.head(C,function(N,P){if(!k){if(N)return k=!0,n(N);if(P.statusCode<200||P.statusCode>=300)return k=!0,n(new Error("Unexpected HTTP status code "+P.statusCode));if(P.url===C)return k=!0,n(d);v.url=P.url,Hi.concat(v,function(I,V,ee){if(!k){if(I)return k=!0,n(I);u(V,ee)}})}});u(b,L)}})})};kr.prototype.destroy=function(){vo.prototype.destroy.call(this),this._torrent=null};var eb=Md,An=xr("webtorrent:peer"),tb=Bd,rb=K0,nb=5e3,ib=25e3,ab=25e3;Cr.createWebRTCPeer=function(e,t){var r=new nt(e.id,"webrtc");return r.conn=e,r.swarm=t,r.conn.connected?r.onConnect():(r.conn.once("connect",function(){r.onConnect()}),r.conn.once("error",function(n){r.destroy(n)}),r.startConnectTimeout()),r};Cr.createTCPIncomingPeer=function(e){var t=e.remoteAddress+":"+e.remotePort,r=new nt(t,"tcpIncoming");return r.conn=e,r.addr=t,r.onConnect(),r};Cr.createTCPOutgoingPeer=function(e,t){var r=new nt(e,"tcpOutgoing");return r.addr=e,r.swarm=t,r};Cr.createWebSeedPeer=function(e,t){var r=new nt(e,"webSeed");return r.swarm=t,r.conn=new rb(e,t),r.onConnect(),r};function nt(e,t){var r=this;r.id=e,r.type=t,An("new Peer %s",e),r.addr=null,r.conn=null,r.swarm=null,r.wire=null,r.connected=!1,r.destroyed=!1,r.timeout=null,r.retries=0,r.sentHandshake=!1}nt.prototype.onConnect=function(){var e=this;if(!e.destroyed){e.connected=!0,An("Peer %s connected",e.id),clearTimeout(e.connectTimeout);var t=e.conn;t.once("end",function(){e.destroy()}),t.once("close",function(){e.destroy()}),t.once("finish",function(){e.destroy()}),t.once("error",function(n){e.destroy(n)});var r=e.wire=new tb;r.type=e.type,r.once("end",function(){e.destroy()}),r.once("close",function(){e.destroy()}),r.once("finish",function(){e.destroy()}),r.once("error",function(n){e.destroy(n)}),r.once("handshake",function(n,o){e.onHandshake(n,o)}),e.startHandshakeTimeout(),t.pipe(r).pipe(t),e.swarm&&!e.sentHandshake&&e.handshake()}};nt.prototype.onHandshake=function(e,t){var r=this;if(r.swarm&&!r.destroyed){if(r.swarm.destroyed)return r.destroy(new Error("swarm already destroyed"));if(e!==r.swarm.infoHash)return r.destroy(new Error("unexpected handshake info hash for this swarm"));if(t===r.swarm.peerId)return r.destroy(new Error("refusing to connect to ourselves"));An("Peer %s got handshake %s",r.id,e),clearTimeout(r.handshakeTimeout),r.retries=0;var n=r.addr;!n&&r.conn.remoteAddress&&r.conn.remotePort&&(n=r.conn.remoteAddress+":"+r.conn.remotePort),r.swarm._onWire(r.wire,n),!(!r.swarm||r.swarm.destroyed)&&(r.sentHandshake||r.handshake())}};nt.prototype.handshake=function(){var e=this,t={dht:e.swarm.private?!1:!!e.swarm.client.dht};e.wire.handshake(e.swarm.infoHash,e.swarm.client.peerId,t),e.sentHandshake=!0};nt.prototype.startConnectTimeout=function(){var e=this;clearTimeout(e.connectTimeout),e.connectTimeout=setTimeout(function(){e.destroy(new Error("connect timeout"))},e.type==="webrtc"?ib:nb),e.connectTimeout.unref&&e.connectTimeout.unref()};nt.prototype.startHandshakeTimeout=function(){var e=this;clearTimeout(e.handshakeTimeout),e.handshakeTimeout=setTimeout(function(){e.destroy(new Error("handshake timeout"))},ab),e.handshakeTimeout.unref&&e.handshakeTimeout.unref()};nt.prototype.destroy=function(e){var t=this;if(!t.destroyed){t.destroyed=!0,t.connected=!1,An("destroy %s (error: %s)",t.id,e&&(e.message||e)),clearTimeout(t.connectTimeout),clearTimeout(t.handshakeTimeout);var r=t.swarm,n=t.conn,o=t.wire;t.swarm=null,t.conn=null,t.wire=null,r&&o&&eb(r.wires,r.wires.indexOf(o)),n&&(n.on("error",ob),n.destroy()),o&&o.destroy(),r&&r.removePeer(t.id)}};function ob(){}var sb=ir;function ir(e){var t=this;t._torrent=e,t._numPieces=e.pieces.length,t._pieces=[],t._onWire=function(r){t.recalculate(),t._initWire(r)},t._onWireHave=function(r){t._pieces[r]+=1},t._onWireBitfield=function(){t.recalculate()},t._torrent.wires.forEach(function(r){t._initWire(r)}),t._torrent.on("wire",t._onWire),t.recalculate()}ir.prototype.getRarestPiece=function(e){e||(e=lb);for(var t=[],r=1/0,n=0;n<this._numPieces;++n)if(e(n)){var o=this._pieces[n];o===r?t.push(n):o<r&&(t=[n],r=o)}return t.length>0?t[Math.random()*t.length|0]:-1};ir.prototype.destroy=function(){var e=this;e._torrent.removeListener("wire",e._onWire),e._torrent.wires.forEach(function(t){e._cleanupWireEvents(t)}),e._torrent=null,e._pieces=null,e._onWire=null,e._onWireHave=null,e._onWireBitfield=null};ir.prototype._initWire=function(e){var t=this;e._onClose=function(){t._cleanupWireEvents(e);for(var r=0;r<this._numPieces;++r)t._pieces[r]-=e.peerPieces.get(r)},e.on("have",t._onWireHave),e.on("bitfield",t._onWireBitfield),e.once("close",e._onClose)};ir.prototype.recalculate=function(){var e;for(e=0;e<this._numPieces;++e)this._pieces[e]=0;var t=this._torrent.wires.length;for(e=0;e<t;++e)for(var r=this._torrent.wires[e],n=0;n<this._numPieces;++n)this._pieces[n]+=r.peerPieces.get(n)};ir.prototype._cleanupWireEvents=function(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null};function lb(){return!0}var fb=se,Ln=fm,ub=ao,db=um,cb=xr("webtorrent:torrent"),hb=Ew,Pd=xe.EventEmitter,pb=En,xa=Tw,Nd=de,Dd=Aw,gb=Pa,vb=Lw,_b=oe,yb=Hu,Vl=de,Kl=de,Fd=Rr,Ud=Bw,tr=an,br=de,kt=Pw,mb=ou,wb=Dw,$d=nn,Yl=io,Xl=Af,bb=e0,Jl=de,jd=n0,Ta=Cr,Eb=sb,Zl=de,Sb=128*1024,Rb=3e4,zi=5e3,Ca=3*kt.BLOCK_LENGTH,xb=.5,ka=1,Tb=1e4,Cb=2,Wd=2,Gi=[1e3,5e3,15e3],kb=go.version,qd="WebTorrent/"+kb+" (https://webtorrent.io)",Aa;try{Aa=br.join(Nd.statSync("/tmp")&&"/tmp","webtorrent")}catch{Aa=br.join(typeof Kl.tmpdir=="function"?Kl.tmpdir():"/","webtorrent")}_b(se,Pd);function se(e,t,r){Pd.call(this),this._debugId="unknown infohash",this.client=t,this.announce=r.announce,this.urlList=r.urlList,this.path=r.path,this._store=r.store||Dd,this._getAnnounceOpts=r.getAnnounceOpts,this.strategy=r.strategy||"sequential",this.maxWebConns=r.maxWebConns||4,this._rechokeNumSlots=r.uploads===!1||r.uploads===0?0:+r.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this.ready=!1,this.destroyed=!1,this.paused=!1,this.done=!1,this.metadata=null,this.store=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=[],this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=Yl(),this._uploadSpeed=Yl(),this._servers=[],this._xsRequests=[],this._fileModtimes=r.fileModtimes,e!==null&&this._onTorrentId(e),this._debug("new torrent")}Object.defineProperty(se.prototype,"timeRemaining",{get:function(){return this.done?0:this.downloadSpeed===0?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}});Object.defineProperty(se.prototype,"downloaded",{get:function(){if(!this.bitfield)return 0;for(var e=0,t=0,r=this.pieces.length;t<r;++t)if(this.bitfield.get(t))e+=t===r-1?this.lastPieceLength:this.pieceLength;else{var n=this.pieces[t];e+=n.length-n.missing}return e}});Object.defineProperty(se.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}});Object.defineProperty(se.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}});Object.defineProperty(se.prototype,"progress",{get:function(){return this.length?this.downloaded/this.length:0}});Object.defineProperty(se.prototype,"ratio",{get:function(){return this.uploaded/(this.received||1)}});Object.defineProperty(se.prototype,"numPeers",{get:function(){return this.wires.length}});Object.defineProperty(se.prototype,"torrentFileBlobURL",{get:function(){if(typeof window>"u")throw new Error("browser-only property");return this.torrentFile?URL.createObjectURL(new Blob([this.torrentFile],{type:"application/x-bittorrent"})):null}});Object.defineProperty(se.prototype,"_numQueued",{get:function(){return this._queue.length+(this._peersLength-this._numConns)}});Object.defineProperty(se.prototype,"_numConns",{get:function(){var e=this,t=0;for(var r in e._peers)e._peers[r].connected&&(t+=1);return t}});Object.defineProperty(se.prototype,"swarm",{get:function(){return console.warn("WebTorrent: `torrent.swarm` is deprecated. Use `torrent` directly instead."),this}});se.prototype._onTorrentId=function(e){var t=this;if(!t.destroyed){var r;try{r=tr(e)}catch{}r?(t.infoHash=r.infoHash,t._debugId=r.infoHash.toString("hex").substring(0,7),process.nextTick(function(){t.destroyed||t._onParsedTorrent(r)})):tr.remote(e,function(n,o){if(!t.destroyed){if(n)return t._destroy(n);t._onParsedTorrent(o)}})}};se.prototype._onParsedTorrent=function(e){var t=this;if(!t.destroyed){if(t._processParsedTorrent(e),!t.infoHash)return t._destroy(new Error("Malformed torrent data: No info hash"));t.path||(t.path=br.join(Aa,t.infoHash)),t._rechokeIntervalId=setInterval(function(){t._rechoke()},Tb),t._rechokeIntervalId.unref&&t._rechokeIntervalId.unref(),t.emit("_infoHash",t.infoHash),!t.destroyed&&(t.emit("infoHash",t.infoHash),!t.destroyed&&(t.client.listening?t._onListening():t.client.once("listening",function(){t._onListening()})))}};se.prototype._processParsedTorrent=function(e){this._debugId=e.infoHash.toString("hex").substring(0,7),this.announce&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&ce.WEBTORRENT_ANNOUNCE&&!this.private&&(e.announce=e.announce.concat(ce.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),Xl(e.announce),Xl(e.urlList),xa(this,e),this.magnetURI=tr.toMagnetURI(e),this.torrentFile=tr.toTorrentFile(e)};se.prototype._onListening=function(){var e=this;if(e.discovery||e.destroyed)return;var t=e.client.tracker;t&&(t=pb(e.client.tracker,{getAnnounceOpts:function(){var p={uploaded:e.uploaded,downloaded:e.downloaded,left:Math.max(e.length-e.downloaded,0)};return e.client.tracker.getAnnounceOpts&&xa(p,e.client.tracker.getAnnounceOpts()),e._getAnnounceOpts&&xa(p,e._getAnnounceOpts()),p}})),e.discovery=new hb({infoHash:e.infoHash,announce:e.announce,peerId:e.client.peerId,dht:!e.private&&e.client.dht,tracker:t,port:e.client.torrentPort,userAgent:qd}),e.discovery.on("error",r),e.discovery.on("peer",n),e.discovery.on("trackerAnnounce",o),e.discovery.on("dhtAnnounce",f),e.discovery.on("warning",c);function r(p){e._destroy(p)}function n(p){typeof p=="string"&&e.done||e.addPeer(p)}function o(){e.emit("trackerAnnounce"),e.numPeers===0&&e.emit("noPeers","tracker")}function f(){e.emit("dhtAnnounce"),e.numPeers===0&&e.emit("noPeers","dht")}function c(p){e.emit("warning",p)}e.info?e._onMetadata(e):e.xs&&e._getMetadataFromServer()};se.prototype._getMetadataFromServer=function(){var e=this,t=Array.isArray(e.xs)?e.xs:[e.xs],r=t.map(function(o){return function(f){n(o,f)}});Fd(r);function n(o,f){if(o.indexOf("http://")!==0&&o.indexOf("https://")!==0)return e.emit("warning",new Error("skipping non-http xs param: "+o)),f(null);var c={url:o,method:"GET",headers:{"user-agent":qd}},p;try{p=gb.concat(c,g)}catch{return e.emit("warning",new Error("skipping invalid url xs param: "+o)),f(null)}e._xsRequests.push(p);function g(y,m,w){if(e.destroyed||e.metadata)return f(null);if(y)return e.emit("warning",new Error("http error from xs param: "+o)),f(null);if(m.statusCode!==200)return e.emit("warning",new Error("non-200 status code "+m.statusCode+" from xs param: "+o)),f(null);var k;try{k=tr(w)}catch{}if(!k)return e.emit("warning",new Error("got invalid torrent file from xs param: "+o)),f(null);if(k.infoHash!==e.infoHash)return e.emit("warning",new Error("got torrent file with incorrect info hash from xs param: "+o)),f(null);e._onMetadata(k),f(null)}}};se.prototype._onMetadata=function(e){var t=this;if(!(t.metadata||t.destroyed)){t._debug("got metadata"),t._xsRequests.forEach(function(n){n.abort()}),t._xsRequests=[];var r;if(e&&e.infoHash)r=e;else try{r=tr(e)}catch(n){return t._destroy(n)}t._processParsedTorrent(r),t.metadata=t.torrentFile,t.client.enableWebSeeds&&t.urlList.forEach(function(n){t.addWebSeed(n)}),t.pieces.length!==0&&t.select(0,t.pieces.length-1,!1),t._rarityMap=new Eb(t),t.store=new vb(new t._store(t.pieceLength,{torrent:{infoHash:t.infoHash},files:t.files.map(function(n){return{path:br.join(t.path,n.path),length:n.length,offset:n.offset}}),length:t.length})),t.files=t.files.map(function(n){return new jd(t,n)}),t._hashes=t.pieces,t.pieces=t.pieces.map(function(n,o){var f=o===t.pieces.length-1?t.lastPieceLength:t.pieceLength;return new kt(f)}),t._reservations=t.pieces.map(function(){return[]}),t.bitfield=new ub(t.pieces.length),t.wires.forEach(function(n){n.ut_metadata&&n.ut_metadata.setMetadata(t.metadata),t._onWireWithMetadata(n)}),t._debug("verifying existing torrent data"),t._fileModtimes&&t._store===Dd?t.getFileModtimes(function(n,o){if(n)return t._destroy(n);var f=t.files.map(function(p,g){return o[g]===t._fileModtimes[g]}).every(function(p){return p});if(f){for(var c=0;c<t.pieces.length;c++)t._markVerified(c);t._onStore()}else t._verifyPieces()}):t._verifyPieces(),t.emit("metadata")}};se.prototype.getFileModtimes=function(e){var t=this,r=[];Ud(t.files.map(function(n,o){return function(f){Nd.stat(br.join(t.path,n.path),function(c,p){if(c&&c.code!=="ENOENT")return f(c);r[o]=p&&p.mtime.getTime(),f(null)})}}),Wd,function(n){t._debug("done getting file modtimes"),e(n,r)})};se.prototype._verifyPieces=function(){var e=this;Ud(e.pieces.map(function(t,r){return function(n){if(e.destroyed)return n(new Error("torrent is destroyed"));e.store.get(r,function(o,f){if(e.destroyed)return n(new Error("torrent is destroyed"));if(o)return process.nextTick(n,null);$d(f,function(c){if(e.destroyed)return n(new Error("torrent is destroyed"));if(c===e._hashes[r]){if(!e.pieces[r])return;e._debug("piece verified %s",r),e._markVerified(r)}else e._debug("piece invalid %s",r);n(null)})})}}),Wd,function(t){if(t)return e._destroy(t);e._debug("done verifying"),e._onStore()})};se.prototype._markVerified=function(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0)};se.prototype._onStore=function(){var e=this;e.destroyed||(e._debug("on store"),e.ready=!0,e.emit("ready"),e._checkDone(),e._updateSelections())};se.prototype.destroy=function(e){var t=this;t._destroy(null,e)};se.prototype._destroy=function(e,t){var r=this;if(!r.destroyed){r.destroyed=!0,r._debug("destroy"),r.client._remove(r),clearInterval(r._rechokeIntervalId),r._xsRequests.forEach(function(f){f.abort()}),r._rarityMap&&r._rarityMap.destroy();for(var n in r._peers)r.removePeer(n);r.files.forEach(function(f){f instanceof jd&&f._destroy()});var o=r._servers.map(function(f){return function(c){f.destroy(c)}});r.discovery&&o.push(function(f){r.discovery.destroy(f)}),r.store&&o.push(function(f){r.store.close(f)}),Fd(o,t),e&&(r.listenerCount("error")===0?r.client.emit("error",e):r.emit("error",e)),r.emit("close"),r.client=null,r.files=[],r.discovery=null,r.store=null,r._rarityMap=null,r._peers=null,r._servers=null,r._xsRequests=null}};se.prototype.addPeer=function(e){var t=this;if(t.destroyed)throw new Error("torrent is destroyed");if(!t.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");if(t.client.blocked){var r;if(typeof e=="string"){var n;try{n=Ln(e)}catch{return t._debug("ignoring peer: invalid %s",e),t.emit("invalidPeer",e),!1}r=n[0]}else typeof e.remoteAddress=="string"&&(r=e.remoteAddress);if(r&&t.client.blocked.contains(r))return t._debug("ignoring peer: blocked %s",e),typeof e!="string"&&e.destroy(),t.emit("blockedPeer",e),!1}var o=!!t._addPeer(e);return o?t.emit("peer",e):t.emit("invalidPeer",e),o};se.prototype._addPeer=function(e){var t=this;if(t.destroyed)return typeof e!="string"&&e.destroy(),null;if(typeof e=="string"&&!t._validAddr(e))return t._debug("ignoring peer: invalid %s",e),null;var r=e&&e.id||e;if(t._peers[r])return t._debug("ignoring peer: duplicate (%s)",r),typeof e!="string"&&e.destroy(),null;if(t.paused)return t._debug("ignoring peer: torrent is paused"),typeof e!="string"&&e.destroy(),null;t._debug("add peer %s",r);var n;return typeof e=="string"?n=Ta.createTCPOutgoingPeer(e,t):n=Ta.createWebRTCPeer(e,t),t._peers[n.id]=n,t._peersLength+=1,typeof e=="string"&&(t._queue.push(n),t._drain()),n};se.prototype.addWebSeed=function(e){if(this.destroyed)throw new Error("torrent is destroyed");if(!/^https?:\/\/.+/.test(e)){this.emit("warning",new Error("ignoring invalid web seed: "+e)),this.emit("invalidPeer",e);return}if(this._peers[e]){this.emit("warning",new Error("ignoring duplicate web seed: "+e)),this.emit("invalidPeer",e);return}this._debug("add web seed %s",e);var t=Ta.createWebSeedPeer(e,this);this._peers[t.id]=t,this._peersLength+=1,this.emit("peer",e)};se.prototype._addIncomingPeer=function(e){var t=this;if(t.destroyed)return e.destroy(new Error("torrent is destroyed"));if(t.paused)return e.destroy(new Error("torrent is paused"));this._debug("add incoming peer %s",e.id),t._peers[e.id]=e,t._peersLength+=1};se.prototype.removePeer=function(e){var t=this,r=e&&e.id||e;e=t._peers[r],e&&(this._debug("removePeer %s",r),delete t._peers[r],t._peersLength-=1,e.destroy(),t._drain())};se.prototype.select=function(e,t,r,n){var o=this;if(o.destroyed)throw new Error("torrent is destroyed");if(e<0||t<e||o.pieces.length<=t)throw new Error("invalid selection ",e,":",t);r=Number(r)||0,o._debug("select %s-%s (priority %s)",e,t,r),o._selections.push({from:e,to:t,offset:0,priority:r,notify:n||Hd}),o._selections.sort(function(f,c){return c.priority-f.priority}),o._updateSelections()};se.prototype.deselect=function(e,t,r){var n=this;if(n.destroyed)throw new Error("torrent is destroyed");r=Number(r)||0,n._debug("deselect %s-%s (priority %s)",e,t,r);for(var o=0;o<n._selections.length;++o){var f=n._selections[o];if(f.from===e&&f.to===t&&f.priority===r){n._selections.splice(o,1);break}}n._updateSelections()};se.prototype.critical=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");r._debug("critical %s-%s",e,t);for(var n=e;n<=t;++n)r._critical[n]=!0;r._updateSelections()};se.prototype._onWire=function(e,t){var r=this;if(r._debug("got wire %s (%s)",e._debugId,t||"Unknown"),e.on("download",function(o){r.destroyed||(r.received+=o,r._downloadSpeed(o),r.client._downloadSpeed(o),r.emit("download",o),r.client.emit("download",o))}),e.on("upload",function(o){r.destroyed||(r.uploaded+=o,r._uploadSpeed(o),r.client._uploadSpeed(o),r.emit("upload",o),r.client.emit("upload",o))}),r.wires.push(e),t){var n=Ln(t);e.remoteAddress=n[0],e.remotePort=n[1]}r.client.dht&&r.client.dht.listening&&e.on("port",function(o){if(!(r.destroyed||r.client.dht.destroyed)){if(!e.remoteAddress)return r._debug("ignoring PORT from peer with no address");if(o===0||o>65536)return r._debug("ignoring invalid PORT from peer");r._debug("port: %s (from %s)",o,t),r.client.dht.addNode({host:e.remoteAddress,port:o})}}),e.on("timeout",function(){r._debug("wire timeout (%s)",t),e.destroy()}),e.setTimeout(Rb,!0),e.setKeepAlive(!0),e.use(bb(r.metadata)),e.ut_metadata.on("warning",function(o){r._debug("ut_metadata warning: %s",o.message)}),r.metadata||(e.ut_metadata.on("metadata",function(o){r._debug("got metadata via ut_metadata"),r._onMetadata(o)}),e.ut_metadata.fetch()),typeof Jl=="function"&&!r.private&&(e.use(Jl()),e.ut_pex.on("peer",function(o){r.done||(r._debug("ut_pex: got peer: %s (from %s)",o,t),r.addPeer(o))}),e.ut_pex.on("dropped",function(o){var f=r._peers[o];f&&!f.connected&&(r._debug("ut_pex: dropped peer: %s (from %s)",o,t),r.removePeer(o))}),e.once("close",function(){e.ut_pex.reset()})),r.emit("wire",e,t),r.metadata&&process.nextTick(function(){r._onWireWithMetadata(e)})};se.prototype._onWireWithMetadata=function(e){var t=this,r=null;function n(){t.destroyed||e.destroyed||(t._numQueued>2*(t._numConns-t.numPeers)&&e.amInterested?e.destroy():(r=setTimeout(n,zi),r.unref&&r.unref()))}var o;function f(){if(e.peerPieces.buffer.length===t.bitfield.buffer.length){for(o=0;o<t.pieces.length;++o)if(!e.peerPieces.get(o))return;e.isSeeder=!0,e.choke()}}e.on("bitfield",function(){f(),t._update()}),e.on("have",function(){f(),t._update()}),e.once("interested",function(){e.unchoke()}),e.once("close",function(){clearTimeout(r)}),e.on("choke",function(){clearTimeout(r),r=setTimeout(n,zi),r.unref&&r.unref()}),e.on("unchoke",function(){clearTimeout(r),t._update()}),e.on("request",function(c,p,g,y){if(g>Sb)return e.destroy();t.pieces[c]||t.store.get(c,{offset:p,length:g},y)}),e.bitfield(t.bitfield),e.interested(),e.peerExtensions.dht&&t.client.dht&&t.client.dht.listening&&e.port(t.client.dht.address().port),e.type!=="webSeed"&&(r=setTimeout(n,zi),r.unref&&r.unref()),e.isSeeder=!1,f()};se.prototype._updateSelections=function(){var e=this;!e.ready||e.destroyed||(process.nextTick(function(){e._gcSelections()}),e._updateInterest(),e._update())};se.prototype._gcSelections=function(){for(var e=this,t=0;t<e._selections.length;++t){for(var r=e._selections[t],n=r.offset;e.bitfield.get(r.from+r.offset)&&r.from+r.offset<r.to;)r.offset+=1;n!==r.offset&&r.notify(),r.to===r.from+r.offset&&e.bitfield.get(r.from+r.offset)&&(e._selections.splice(t,1),t-=1,r.notify(),e._updateInterest())}e._selections.length||e.emit("idle")};se.prototype._updateInterest=function(){var e=this,t=e._amInterested;e._amInterested=!!e._selections.length,e.wires.forEach(function(r){e._amInterested?r.interested():r.uninterested()}),t!==e._amInterested&&(e._amInterested?e.emit("interested"):e.emit("uninterested"))};se.prototype._update=function(){var e=this;if(!e.destroyed)for(var t=wb(e.wires),r;r=t();)e._updateWire(r)};se.prototype._updateWire=function(e){var t=this;if(e.peerChoking)return;if(!e.downloaded)return f();var r=La(e,xb);if(e.requests.length>=r)return;var n=La(e,ka);g(!1)||g(!0);function o(y,m,w,k){return function(A){return A>=y&&A<=m&&!(A in w)&&e.peerPieces.get(A)&&(!k||k(A))}}function f(){if(!e.requests.length)for(var y=t._selections.length;y--;){var m=t._selections[y],w;if(t.strategy==="rarest")for(var k=m.from+m.offset,A=m.to,x=A-k+1,C={},R=0,s=o(k,A,C);R<x&&(w=t._rarityMap.getRarestPiece(s),!(w<0));){if(t._request(e,w,!1))return;C[w]=!0,R+=1}else for(w=m.to;w>=m.from+m.offset;--w)if(e.peerPieces.get(w)&&t._request(e,w,!1))return}}function c(){var y=e.downloadSpeed()||1;if(y>Ca)return function(){return!0};var m=Math.max(1,e.requests.length)*kt.BLOCK_LENGTH/y,w=10,k=0;return function(A){if(!w||t.bitfield.get(A))return!0;for(var x=t.pieces[A].missing;k<t.wires.length;k++){var C=t.wires[k],R=C.downloadSpeed();if(!(R<Ca)&&!(R<=y)&&C.peerPieces.get(A)&&!((x-=R*m)>0))return w--,!1}return!0}}function p(y){for(var m=y,w=y;w<t._selections.length&&t._selections[w].priority;w++)m=w;var k=t._selections[y];t._selections[y]=t._selections[m],t._selections[m]=k}function g(y){if(e.requests.length>=n)return!0;for(var m=c(),w=0;w<t._selections.length;w++){var k=t._selections[w],A;if(t.strategy==="rarest")for(var x=k.from+k.offset,C=k.to,R=C-x+1,s={},v=0,u=o(x,C,s,m);v<R&&(A=t._rarityMap.getRarestPiece(u),!(A<0));){for(;t._request(e,A,t._critical[A]||y););if(e.requests.length<n){s[A]=!0,v++;continue}return k.priority&&p(w),!0}else for(A=k.from+k.offset;A<=k.to;A++)if(!(!e.peerPieces.get(A)||!m(A))){for(;t._request(e,A,t._critical[A]||y););if(!(e.requests.length<n))return k.priority&&p(w),!0}}return!1}};se.prototype._rechoke=function(){var e=this;if(!e.ready)return;e._rechokeOptimisticTime>0?e._rechokeOptimisticTime-=1:e._rechokeOptimisticWire=null;var t=[];e.wires.forEach(function(p){!p.isSeeder&&p!==e._rechokeOptimisticWire&&t.push({wire:p,downloadSpeed:p.downloadSpeed(),uploadSpeed:p.uploadSpeed(),salt:Math.random(),isChoked:!0})}),t.sort(c);for(var r=0,n=0;n<t.length&&r<e._rechokeNumSlots;++n)t[n].isChoked=!1,t[n].wire.peerInterested&&(r+=1);if(!e._rechokeOptimisticWire&&n<t.length&&e._rechokeNumSlots){var o=t.slice(n).filter(function(p){return p.wire.peerInterested}),f=o[Lb(o.length)];f&&(f.isChoked=!1,e._rechokeOptimisticWire=f.wire,e._rechokeOptimisticTime=Cb)}t.forEach(function(p){p.wire.amChoking!==p.isChoked&&(p.isChoked?p.wire.choke():p.wire.unchoke())});function c(p,g){return p.downloadSpeed!==g.downloadSpeed?g.downloadSpeed-p.downloadSpeed:p.uploadSpeed!==g.uploadSpeed?g.uploadSpeed-p.uploadSpeed:p.wire.amChoking!==g.wire.amChoking?p.wire.amChoking?1:-1:p.salt-g.salt}};se.prototype._hotswap=function(e,t){var r=this,n=e.downloadSpeed();if(n<kt.BLOCK_LENGTH||!r._reservations[t])return!1;var o=r._reservations[t];if(!o)return!1;var f=1/0,c,p;for(p=0;p<o.length;p++){var g=o[p];if(!(!g||g===e)){var y=g.downloadSpeed();y>=Ca||2*y>n||y>f||(c=g,f=y)}}if(!c)return!1;for(p=0;p<o.length;p++)o[p]===c&&(o[p]=null);for(p=0;p<c.requests.length;p++){var m=c.requests[p];m.piece===t&&r.pieces[t].cancel(m.offset/kt.BLOCK_LENGTH|0)}return r.emit("hotswap",c,e,t),!0};se.prototype._request=function(e,t,r){var n=this,o=e.requests.length,f=e.type==="webSeed";if(n.bitfield.get(t))return!1;var c=f?Math.min(Ab(e,ka,n.pieceLength),n.maxWebConns):La(e,ka);if(o>=c)return!1;var p=n.pieces[t],g=f?p.reserveRemaining():p.reserve();if(g===-1&&r&&n._hotswap(e,t)&&(g=f?p.reserveRemaining():p.reserve()),g===-1)return!1;var y=n._reservations[t];y||(y=n._reservations[t]=[]);var m=y.indexOf(null);m===-1&&(m=y.length),y[m]=e;var w=p.chunkOffset(g),k=f?p.chunkLengthRemaining(g):p.chunkLength(g);e.request(t,w,k,function x(C,R){if(!n.destroyed){if(!n.ready)return n.once("ready",function(){x(C,R)});if(y[m]===e&&(y[m]=null),p!==n.pieces[t])return A();if(C){n._debug("error getting piece %s (offset: %s length: %s) from %s: %s",t,w,k,e.remoteAddress+":"+e.remotePort,C.message),f?p.cancelRemaining(g):p.cancel(g),A();return}if(n._debug("got piece %s (offset: %s length: %s) from %s",t,w,k,e.remoteAddress+":"+e.remotePort),!p.set(g,R,e))return A();var s=p.flush();$d(s,function(v){if(!n.destroyed){if(v===n._hashes[t]){if(!n.pieces[t])return;n._debug("piece verified %s",t),n.pieces[t]=null,n._reservations[t]=null,n.bitfield.set(t,!0),n.store.put(t,s),n.wires.forEach(function(u){u.have(t)}),n._checkDone()&&!n.destroyed&&n.discovery.complete()}else n.pieces[t]=new kt(p.length),n.emit("warning",new Error("Piece "+t+" failed verification"));A()}})}});function A(){process.nextTick(function(){n._update()})}return!0};se.prototype._checkDone=function(){var e=this;if(!e.destroyed){e.files.forEach(function(f){if(!f.done){for(var c=f._startPiece;c<=f._endPiece;++c)if(!e.bitfield.get(c))return;f.done=!0,f.emit("done"),e._debug("file done: "+f.name)}});for(var t=!0,r=0;r<e._selections.length;r++){for(var n=e._selections[r],o=n.from;o<=n.to;o++)if(!e.bitfield.get(o)){t=!1;break}if(!t)break}return!e.done&&t&&(e.done=!0,e._debug("torrent done: "+e.infoHash),e.emit("done")),e._gcSelections(),t}};se.prototype.load=function(e,t){var r=this;if(r.destroyed)throw new Error("torrent is destroyed");if(!r.ready)return r.once("ready",function(){r.load(e,t)});Array.isArray(e)||(e=[e]),t||(t=Hd);var n=new yb(e),o=new db(r.store,r.pieceLength);mb(n,o,function(f){if(f)return t(f);r.pieces.forEach(function(c,p){r.pieces[p]=null,r._reservations[p]=null,r.bitfield.set(p,!0)}),r._checkDone(),t(null)})};se.prototype.createServer=function(e){if(typeof Zl!="function")throw new Error("node.js-only method");if(this.destroyed)throw new Error("torrent is destroyed");var t=new Zl(this,e);return this._servers.push(t),t};se.prototype.pause=function(){this.destroyed||(this._debug("pause"),this.paused=!0)};se.prototype.resume=function(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())};se.prototype._debug=function(){if(!this.destroyed){var e=[].slice.call(arguments);e[0]="["+this.client._debugId+"] ["+this._debugId+"] "+e[0],cb.apply(null,e)}};se.prototype._drain=function(){var e=this;if(this._debug("_drain numConns %s maxConns %s",e._numConns,e.client.maxConns),!(typeof Vl.connect!="function"||e.destroyed||e.paused||e._numConns>=e.client.maxConns)){this._debug("drain (%s queued, %s/%s peers)",e._numQueued,e.numPeers,e.client.maxConns);var t=e._queue.shift();if(t){this._debug("tcp connect attempt to %s",t.addr);var r=Ln(t.addr),n={host:r[0],port:r[1]},o=t.conn=Vl.connect(n);o.once("connect",function(){t.onConnect()}),o.once("error",function(f){t.destroy(f)}),t.startConnectTimeout(),o.on("close",function(){if(!e.destroyed){if(t.retries>=Gi.length){e._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,Gi.length);return}var f=Gi[t.retries];e._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,f,t.retries+1);var c=setTimeout(function(){var g=e._addPeer(t.addr);g&&(g.retries=t.retries+1)},f);c.unref&&c.unref()}})}}};se.prototype._validAddr=function(e){var t;try{t=Ln(e)}catch{return!1}var r=t[0],n=t[1];return n>0&&n<65535&&!(r==="127.0.0.1"&&n===this.client.torrentPort)};function La(e,t){return 2+Math.ceil(t*e.downloadSpeed()/kt.BLOCK_LENGTH)}function Ab(e,t,r){return 1+Math.ceil(t*e.downloadSpeed()/r)}function Lb(e){return Math.random()*e|0}function Hd(){}var Mb=Be,sr=rt.Buffer,Bb=wf,Ql=ly,Ob=xr("webtorrent"),ef=de,zd=xe.EventEmitter,_o=En,Ib=oe,tf=de,Ma=Rr,Pb=an,Nb=de,Db=no,rf=Tr,nf=io,Fb=sm,af=de,Gd=fb,yo=go.version,Vd=yo.match(/([0-9]+)/g).slice(0,2).map(function(e){return Fb(2,e)}).join(""),Ub="-WW"+Vd+"-";Ib(Be,zd);function Be(e){var t=this;if(!(t instanceof Be))return new Be(e);zd.call(t),e||(e={}),typeof e.peerId=="string"?t.peerId=e.peerId:sr.isBuffer(e.peerId)?t.peerId=e.peerId.toString("hex"):t.peerId=sr.from(Ub+rf(9).toString("base64")).toString("hex"),t.peerIdBuffer=sr.from(t.peerId,"hex"),typeof e.nodeId=="string"?t.nodeId=e.nodeId:sr.isBuffer(e.nodeId)?t.nodeId=e.nodeId.toString("hex"):t.nodeId=rf(20).toString("hex"),t.nodeIdBuffer=sr.from(t.nodeId,"hex"),t._debugId=t.peerId.toString("hex").substring(0,7),t.destroyed=!1,t.listening=!1,t.torrentPort=e.torrentPort||0,t.dhtPort=e.dhtPort||0,t.tracker=e.tracker!==void 0?e.tracker:{},t.torrents=[],t.maxConns=Number(e.maxConns)||55,t._debug("new webtorrent (peerId %s, nodeId %s, port %s)",t.peerId,t.nodeId,t.torrentPort),t.tracker&&(typeof t.tracker!="object"&&(t.tracker={}),e.rtcConfig&&(console.warn("WebTorrent: opts.rtcConfig is deprecated. Use opts.tracker.rtcConfig instead"),t.tracker.rtcConfig=e.rtcConfig),e.wrtc&&(console.warn("WebTorrent: opts.wrtc is deprecated. Use opts.tracker.wrtc instead"),t.tracker.wrtc=e.wrtc),ce.WRTC&&!t.tracker.wrtc&&(t.tracker.wrtc=ce.WRTC)),typeof af=="function"?t._tcpPool=new af(t):process.nextTick(function(){t._onListening()}),t._downloadSpeed=nf(),t._uploadSpeed=nf(),e.dht!==!1&&typeof ef=="function"?(t.dht=new ef(_o({nodeId:t.nodeId},e.dht)),t.dht.once("error",function(n){t._destroy(n)}),t.dht.once("listening",function(){var n=t.dht.address();n&&(t.dhtPort=n.port)}),t.dht.setMaxListeners(0),t.dht.listen(t.dhtPort)):t.dht=!1,t.enableWebSeeds=e.webSeeds!==!1,typeof tf=="function"&&e.blocklist!=null?tf(e.blocklist,{headers:{"user-agent":"WebTorrent/"+yo+" (https://webtorrent.io)"}},function(n,o){if(n)return t.error("Failed to load blocklist: "+n.message);t.blocked=o,r()}):process.nextTick(r);function r(){t.destroyed||(t.ready=!0,t.emit("ready"))}}Be.WEBRTC_SUPPORT=Db.WEBRTC_SUPPORT;Be.VERSION=yo;Object.defineProperty(Be.prototype,"downloadSpeed",{get:function(){return this._downloadSpeed()}});Object.defineProperty(Be.prototype,"uploadSpeed",{get:function(){return this._uploadSpeed()}});Object.defineProperty(Be.prototype,"progress",{get:function(){var e=this.torrents.filter(function(n){return n.progress!==1}),t=e.reduce(function(n,o){return n+o.downloaded},0),r=e.reduce(function(n,o){return n+(o.length||0)},0)||1;return t/r}});Object.defineProperty(Be.prototype,"ratio",{get:function(){var e=this.torrents.reduce(function(r,n){return r+n.uploaded},0),t=this.torrents.reduce(function(r,n){return r+n.received},0)||1;return e/t}});Be.prototype.get=function(e){var t=this,r,n,o=t.torrents.length;if(e instanceof Gd){for(r=0;r<o;r++)if(n=t.torrents[r],n===e)return n}else{var f;try{f=Pb(e)}catch{}if(!f)return null;if(!f.infoHash)throw new Error("Invalid torrent identifier");for(r=0;r<o;r++)if(n=t.torrents[r],n.infoHash===f.infoHash)return n}return null};Be.prototype.download=function(e,t,r){return console.warn("WebTorrent: client.download() is deprecated. Use client.add() instead"),this.add(e,t,r)};Be.prototype.add=function(e,t,r){var n=this;if(n.destroyed)throw new Error("client is destroyed");if(typeof t=="function")return n.add(e,null,t);n._debug("add"),t=t?_o(t):{};var o=new Gd(e,n,t);n.torrents.push(o),o.once("_infoHash",f),o.once("ready",c),o.once("close",p);function f(){if(!n.destroyed)for(var g=0,y=n.torrents.length;g<y;g++){var m=n.torrents[g];if(m.infoHash===o.infoHash&&m!==o){o._destroy(new Error("Cannot add duplicate torrent "+o.infoHash));return}}}function c(){n.destroyed||(typeof r=="function"&&r(o),n.emit("torrent",o))}function p(){o.removeListener("_infoHash",f),o.removeListener("ready",c),o.removeListener("close",p)}return o};Be.prototype.seed=function(e,t,r){var n=this;if(n.destroyed)throw new Error("client is destroyed");if(typeof t=="function")return n.seed(e,null,t);n._debug("seed"),t=t?_o(t):{},typeof e=="string"&&(t.path=Nb.dirname(e)),t.createdBy||(t.createdBy="WebTorrent/"+Vd);var o=n.add(null,t,c),f;jb(e)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),Ma(e.map(function(g){return function(y){$b(g)?Bb(g,y):y(null,g)}}),function(g,y){if(!n.destroyed){if(g)return o._destroy(g);Ql.parseInput(y,t,function(m,w){if(!n.destroyed){if(m)return o._destroy(m);f=w.map(function(k){return k.getStream}),Ql(y,t,function(k,A){if(!n.destroyed){if(k)return o._destroy(k);var x=n.get(A);x?o._destroy(new Error("Cannot add duplicate torrent "+x.infoHash)):o._onTorrentId(A)}})}})}});function c(g){var y=[function(m){g.load(f,m)}];n.dht&&y.push(function(m){g.once("dhtAnnounce",m)}),Ma(y,function(m){if(!n.destroyed){if(m)return g._destroy(m);p(g)}})}function p(g){n._debug("on seed"),typeof r=="function"&&r(g),g.emit("seed"),n.emit("seed",g)}return o};Be.prototype.remove=function(e,t){this._debug("remove");var r=this.get(e);if(!r)throw new Error("No torrent with id "+e);this._remove(e,t)};Be.prototype._remove=function(e,t){var r=this.get(e);r&&(this.torrents.splice(this.torrents.indexOf(r),1),r.destroy(t))};Be.prototype.address=function(){return this.listening?this._tcpPool?this._tcpPool.server.address():{address:"0.0.0.0",family:"IPv4",port:0}:null};Be.prototype.destroy=function(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)};Be.prototype._destroy=function(e,t){var r=this;r._debug("client destroy"),r.destroyed=!0;var n=r.torrents.map(function(o){return function(f){o.destroy(f)}});r._tcpPool&&n.push(function(o){r._tcpPool.destroy(o)}),r.dht&&n.push(function(o){r.dht.destroy(o)}),Ma(n,t),e&&r.emit("error",e),r.torrents=[],r._tcpPool=null,r.dht=null};Be.prototype._onListening=function(){if(this._debug("listening"),this.listening=!0,this._tcpPool){var e=this._tcpPool.server.address();e&&(this.torrentPort=e.port)}this.emit("listening")};Be.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._debugId+"] "+e[0],Ob.apply(null,e)};function $b(e){return typeof e=="object"&&e!=null&&typeof e.pipe=="function"}function jb(e){return typeof FileList<"u"&&e instanceof FileList}var Wb=St,qb=Mb;function St(){if(typeof window>"u")throw new Error("must be called in a wep page");this.destroyed=!1,this.started=!1,this._seeds={},this._webtorrent=null}St.prototype.add=function(e){if(this.destroyed)throw new Error("Seeder has been destroyed");if(!(e.closed||e.infoHash in this._seeds)){var t=this._prioritize.bind(this,e);this._seeds[e.infoHash]={torrent:e,listener:t},this.started&&(e._torrentDB.on("priority",t),this._seed(e))}};St.prototype.remove=function(e){if(this.destroyed)throw new Error("Seeder has been destroyed");if(this._seeds[e]){var t=this._seeds[e];delete this._seeds[e],this._webtorrent&&this._webtorrent.remove(t.torrent.infoHash),t!=null&&!t.torrent.closed&&t.torrent._torrentDB.removeListener("priority",this._seeds[e].listener)}};St.prototype.start=function(){if(this.destroyed)throw new Error("Seeder is destroyed");if(!this.started){this.started=!0,this._webtorrent=this._webtorrent||new qb;for(var e in this._seeds){var t=this._seeds[e].torrent;t.closed?delete this._seeds[e]:(t._torrentDB.on("priority",this._seeds[e].listener),this._seed(t))}}};St.prototype.stop=function(){if(!(this.destroyed||!this.started)){this.started=!1,this._webtorrent&&this._webtorrent.destroy(),this._webtorrent=null;for(var e in this._seeds){var t=this._seeds[e].torrent;t.closed?delete this._seeds[e]:t._torrentDB.removeListener("priority",this._seeds[e].listener)}}};St.prototype._seed=function(e){var t=this;if(!(t.destroyed||t._webtorrent.get(e.infoHash))){var r={store:Hb(e)},n=e.torrentMetaBuffer?e.torrentMetaBuffer:e.magnetURI;t._webtorrent.add(n,r,function(o){if(!(e.closed||t.destroyed)){e._torrentDB.updateMeta(o.torrentFile);for(var f in e.urlList){var c=e.urlList[f];o.urlList.indexOf(c)===-1&&o.addWebSeed(c)}e._torrentDB.getPriorities(function(p,g){if(!(e.closed||t.destroyed)){if(p)return console.log(p);g.forEach(function(y){t._prioritize(e,y)})}}),o.on("done",function(){e.closed||t.destroyed||e._torrentDB.removeAllPriorities()})}})}};St.prototype._prioritize=function(e,t){if(!(e.closed||this.destroyed||this._webtorrent==null)){var r=Math.floor(t.start/e.pieceLength),n=Math.floor(t.end/e.pieceLength),o=this._webtorrent.get(e.infoHash);o!=null&&o.ready&&o.progress!==1&&(t.type==="critical"?o.critical(r,n):t.type==="select"?o.select(r,n,t.priority):t.type==="deselect"&&o.deselect(r,n,t.priority))}};St.prototype.destroy=function(){this.destroyed||(this.stop(),this.destroyed=!0,this._seeds=null)};function Hb(e){return function(t,r){return e._torrentDB.createChunkStore(t,r)}}var Kd=pt,Yd=xe.EventEmitter,zb=oe,Vr=an,Xd=$a,Gb=Xc,Vb=eh,Kb=i_,Yb=Wb;zb(pt,Yd);function pt(e){if(!(this instanceof pt))return new pt(e);Yd.call(this);var t=this;e=e||{},t.destroyed=!1,t.torrents=[],t.ready=!1,t._namespace=e.namespace||"aethertorrent",t._torrentStore=new Vb(t._namespace),t._tabElect=null,t._seeder=null,typeof window<"u"&&(t._seeder=new Yb,t._tabElect=new Gb(t._namespace+"-tabelect"),t._tabElect.on("elected",t._seeder.start.bind(t._seeder)),t._tabElect.on("deposed",t._seeder.stop.bind(t._seeder))),t._torrentStore.on("add",function(r){t._onAdd(r)}),t._torrentStore.getAll(function(r,n){if(r)return t.emit("error",r);n.forEach(function(o){t._onAdd(o)}),t.ready=!0,t.emit("ready")})}pt.prototype.get=function(e){if(this.destroyed)throw new Error("Instance is destroyed");for(var t=0;t<this.torrents.length;t++)if(this.torrents[t].infoHash===e)return this.torrents[t]};pt.prototype.add=function(e,t,r){var n=this;if(n.destroyed)throw new Error("Instance is destroyed");if(typeof t=="function")return n.add(e,null,t);if(t=t||{},r=Xd(r),!n.ready)return n.once("ready",function(){n.destroyed||n.add(e,t,r)}),r.promise;var o=(typeof t.webseeds=="string"?[t.webseeds]:t.webseeds)||[];return o=o.map(function(f){return new URL(f,location.origin).toString()}),typeof e=="string"&&e.startsWith("/")&&(e=new URL(e,location.origin).toString()),e instanceof ArrayBuffer&&(e=Buffer.from(e)),Vr.remote(e,function(f,c){if(f)return r(f);if(!n.destroyed){if(n.get(c.infoHash))return r(null,n.get(c.infoHash));var p={magnetURI:Vr.toMagnetURI(c),infoHash:c.infoHash,webseeds:o};c.info&&(p.torrentMetaBuffer=Vr.toTorrentFile(c)),n._torrentStore.add(c.infoHash,p,function(g){if(g)return r(g);n._onAdd(p,r)})}}),r.promise};pt.prototype._onAdd=function(e,t){var r=this;if(r.destroyed)return;var n=r.get(e.infoHash);if(!n){var o=r._torrentStore.connectTorrentDB(e.infoHash);n=new Kb(e.infoHash,e.webseeds,o),n.once("ready",f),r.torrents.push(n)}n.updateMeta(Vr(e.torrentMetaBuffer?Buffer.from(e.torrentMetaBuffer):e.magnetURI)),r._seeder&&r._seeder.add(n);function f(){r.destroyed||(r.emit("torrent",n),t&&t(null,n))}};pt.prototype.remove=function(e,t){var r=this;if(r.destroyed)throw new Error("Instance already destroyed");if(t=Xd(t),!r.ready)return r.once("ready",function(){r.destroyed||r.remove(e,t)}),t.promise;var n=r.torrents.findIndex(function(f){return f.infoHash===e}),o=r.torrents[n];return o&&(r.torrents.splice(n,1),o.destroy()),r._seeder&&r._seeder.remove(e),r._torrentStore.remove(e,t),t.promise};pt.prototype.destroy=function(){var e=this;if(!e.destroyed){e.destroyed=!0;for(var t in e.torrents)e.torrents[t].close();e.seeder!=null&&e.seeder.destroy(),e._torrentStore.close(),e._tabElect.destroy(),e._tabElect=null,e.torrents=null,e._torrentStore=null,e._seeder=null}};const Xb=Jd(Kd),sE=Zd({__proto__:null,default:Xb},[Kd]);export{sE as i};
