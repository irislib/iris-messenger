var FC=Object.defineProperty;var UC=(e,t,n)=>t in e?FC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>(UC(e,typeof t!="symbol"?t+"":t,n),n),Lp=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var bi=(e,t,n)=>(Lp(e,t,"read from private field"),n?n.call(e):t.get(e)),Nn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xa=(e,t,n,r)=>(Lp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var qn=(e,t,n)=>(Lp(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var cu,vt,jw,ta,Xv,zw,_g,Hw,nh={},qw=[],jC=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,td=Array.isArray;function Ps(e,t){for(var n in t)e[n]=t[n];return e}function Kw(e){var t=e.parentNode;t&&t.removeChild(e)}function ft(e,t,n){var r,i,s,a={};for(s in t)s=="key"?r=t[s]:s=="ref"?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?cu.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return Oc(e,a,r,i,null)}function Oc(e,t,n,r,i){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++jw};return i==null&&vt.vnode!=null&&vt.vnode(s),s}function _a(){return{current:null}}function ut(e){return e.children}function Er(e,t){this.props=e,this.context=t}function zc(e,t){if(t==null)return e.__?zc(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?zc(e):null}function Ww(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Ww(e)}}function xg(e){(!e.__d&&(e.__d=!0)&&ta.push(e)&&!rh.__r++||Xv!==vt.debounceRendering)&&((Xv=vt.debounceRendering)||zw)(rh)}function rh(){var e,t,n,r,i,s,a,c;for(ta.sort(_g);e=ta.shift();)e.__d&&(t=ta.length,r=void 0,i=void 0,a=(s=(n=e).__v).__e,(c=n.__P)&&(r=[],(i=Ps({},s)).__v=s.__v+1,Uy(c,s,i,n.__n,c.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??zc(s),s.__h),Jw(r,s),s.__e!=a&&Ww(s)),ta.length>t&&ta.sort(_g));rh.__r=0}function Vw(e,t,n,r,i,s,a,c,f,b){var m,w,_,A,I,C,R,$=r&&r.__k||qw,L=$.length;for(n.__k=[],m=0;m<t.length;m++)if((A=n.__k[m]=(A=t[m])==null||typeof A=="boolean"||typeof A=="function"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?Oc(null,A,null,null,A):td(A)?Oc(ut,{children:A},null,null,null):A.__b>0?Oc(A.type,A.props,A.key,A.ref?A.ref:null,A.__v):A)!=null){if(A.__=n,A.__b=n.__b+1,(_=$[m])===null||_&&A.key==_.key&&A.type===_.type)$[m]=void 0;else for(w=0;w<L;w++){if((_=$[w])&&A.key==_.key&&A.type===_.type){$[w]=void 0;break}_=null}Uy(e,A,_=_||nh,i,s,a,c,f,b),I=A.__e,(w=A.ref)&&_.ref!=w&&(R||(R=[]),_.ref&&R.push(_.ref,null,A),R.push(w,A.__c||I,A)),I!=null?(C==null&&(C=I),typeof A.type=="function"&&A.__k===_.__k?A.__d=f=Gw(A,f,e):f=Yw(e,A,_,$,I,f),typeof n.type=="function"&&(n.__d=f)):f&&_.__e==f&&f.parentNode!=e&&(f=zc(_))}for(n.__e=C,m=L;m--;)$[m]!=null&&(typeof n.type=="function"&&$[m].__e!=null&&$[m].__e==n.__d&&(n.__d=Zw(r).nextSibling),Qw($[m],$[m]));if(R)for(m=0;m<R.length;m++)Xw(R[m],R[++m],R[++m])}function Gw(e,t,n){for(var r,i=e.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=e,t=typeof r.type=="function"?Gw(r,t,n):Yw(n,r,r,i,r.__e,t));return t}function Li(e,t){return t=t||[],e==null||typeof e=="boolean"||(td(e)?e.some(function(n){Li(n,t)}):t.push(e)),t}function Yw(e,t,n,r,i,s){var a,c,f;if(t.__d!==void 0)a=t.__d,t.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(i),a=null;else{for(c=s,f=0;(c=c.nextSibling)&&f<r.length;f+=1)if(c==i)break e;e.insertBefore(i,s),a=s}return a!==void 0?a:i.nextSibling}function Zw(e){var t,n,r;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(r=Zw(n)))return r}return null}function zC(e,t,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in t||ih(e,s,null,n[s],r);for(s in t)i&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===t[s]||ih(e,s,t[s],n[s],r)}function Qv(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||jC.test(t)?n:n+"px"}function ih(e,t,n,r,i){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Qv(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Qv(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r||e.addEventListener(t,s?t1:e1,s):e.removeEventListener(t,s?t1:e1,s);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function e1(e){return this.l[e.type+!1](vt.event?vt.event(e):e)}function t1(e){return this.l[e.type+!0](vt.event?vt.event(e):e)}function Uy(e,t,n,r,i,s,a,c,f){var b,m,w,_,A,I,C,R,$,L,P,N,M,U,p,Z=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(f=n.__h,c=t.__e=n.__e,t.__h=null,s=[c]),(b=vt.__b)&&b(t);try{e:if(typeof Z=="function"){if(R=t.props,$=(b=Z.contextType)&&r[b.__c],L=b?$?$.props.value:b.__:r,n.__c?C=(m=t.__c=n.__c).__=m.__E:("prototype"in Z&&Z.prototype.render?t.__c=m=new Z(R,L):(t.__c=m=new Er(R,L),m.constructor=Z,m.render=qC),$&&$.sub(m),m.props=R,m.state||(m.state={}),m.context=L,m.__n=r,w=m.__d=!0,m.__h=[],m._sb=[]),m.__s==null&&(m.__s=m.state),Z.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Ps({},m.__s)),Ps(m.__s,Z.getDerivedStateFromProps(R,m.__s))),_=m.props,A=m.state,m.__v=t,w)Z.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(Z.getDerivedStateFromProps==null&&R!==_&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(R,L),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(R,m.__s,L)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(m.props=R,m.state=m.__s,m.__d=!1),m.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(J){J&&(J.__=t)}),P=0;P<m._sb.length;P++)m.__h.push(m._sb[P]);m._sb=[],m.__h.length&&a.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(R,m.__s,L),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(_,A,I)})}if(m.context=L,m.props=R,m.__P=e,N=vt.__r,M=0,"prototype"in Z&&Z.prototype.render){for(m.state=m.__s,m.__d=!1,N&&N(t),b=m.render(m.props,m.state,m.context),U=0;U<m._sb.length;U++)m.__h.push(m._sb[U]);m._sb=[]}else do m.__d=!1,N&&N(t),b=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++M<25);m.state=m.__s,m.getChildContext!=null&&(r=Ps(Ps({},r),m.getChildContext())),w||m.getSnapshotBeforeUpdate==null||(I=m.getSnapshotBeforeUpdate(_,A)),Vw(e,td(p=b!=null&&b.type===ut&&b.key==null?b.props.children:b)?p:[p],t,n,r,i,s,a,c,f),m.base=t.__e,t.__h=null,m.__h.length&&a.push(m),C&&(m.__E=m.__=null),m.__e=!1}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=HC(n.__e,t,n,r,i,s,a,f);(b=vt.diffed)&&b(t)}catch(J){t.__v=null,(f||s!=null)&&(t.__e=c,t.__h=!!f,s[s.indexOf(c)]=null),vt.__e(J,t,n)}}function Jw(e,t){vt.__c&&vt.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(r){r.call(n)})}catch(r){vt.__e(r,n.__v)}})}function HC(e,t,n,r,i,s,a,c){var f,b,m,w=n.props,_=t.props,A=t.type,I=0;if(A==="svg"&&(i=!0),s!=null){for(;I<s.length;I++)if((f=s[I])&&"setAttribute"in f==!!A&&(A?f.localName===A:f.nodeType===3)){e=f,s[I]=null;break}}if(e==null){if(A===null)return document.createTextNode(_);e=i?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,_.is&&_),s=null,c=!1}if(A===null)w===_||c&&e.data===_||(e.data=_);else{if(s=s&&cu.call(e.childNodes),b=(w=n.props||nh).dangerouslySetInnerHTML,m=_.dangerouslySetInnerHTML,!c){if(s!=null)for(w={},I=0;I<e.attributes.length;I++)w[e.attributes[I].name]=e.attributes[I].value;(m||b)&&(m&&(b&&m.__html==b.__html||m.__html===e.innerHTML)||(e.innerHTML=m&&m.__html||""))}if(zC(e,_,w,i,c),m)t.__k=[];else if(Vw(e,td(I=t.props.children)?I:[I],t,n,r,i&&A!=="foreignObject",s,a,s?s[0]:n.__k&&zc(n,0),c),s!=null)for(I=s.length;I--;)s[I]!=null&&Kw(s[I]);c||("value"in _&&(I=_.value)!==void 0&&(I!==e.value||A==="progress"&&!I||A==="option"&&I!==w.value)&&ih(e,"value",I,w.value,!1),"checked"in _&&(I=_.checked)!==void 0&&I!==e.checked&&ih(e,"checked",I,w.checked,!1))}return e}function Xw(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){vt.__e(r,n)}}function Qw(e,t,n){var r,i;if(vt.unmount&&vt.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Xw(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){vt.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Qw(r[i],t,n||typeof e.type!="function");n||e.__e==null||Kw(e.__e),e.__=e.__e=e.__d=void 0}function qC(e,t,n){return this.constructor(e,n)}function yl(e,t,n){var r,i,s;vt.__&&vt.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,s=[],Uy(t,e=(!r&&n||t).__k=ft(ut,null,[e]),i||nh,nh,t.ownerSVGElement!==void 0,!r&&n?[n]:i?null:t.firstChild?cu.call(t.childNodes):null,s,!r&&n?n:i?i.__e:t.firstChild,r),Jw(s,e)}function e_(e,t){yl(e,t,e_)}function t_(e,t,n){var r,i,s,a,c=Ps({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?r=t[s]:s=="ref"?i=t[s]:c[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(c.children=arguments.length>3?cu.call(arguments,2):n),Oc(e.type,c,r||e.key,i||e.ref,null)}function jy(e,t){var n={__c:t="__cC"+Hw++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(c){c.__e=!0,xg(c)})},this.sub=function(a){i.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),c&&c.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}cu=qw.slice,vt={__e:function(e,t,n,r){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(c){e=c}throw e}},jw=0,Er.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ps({},this.state),typeof e=="function"&&(e=e(Ps({},n),this.props)),e&&Ps(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),xg(this))},Er.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xg(this))},Er.prototype.render=ut,ta=[],zw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_g=function(e,t){return e.__v.__b-t.__v.__b},rh.__r=0,Hw=0;var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function So(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(t,i);return new s}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var n_={exports:{}},KC="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WC=KC,VC=WC;function r_(){}function i_(){}i_.resetWarningCache=r_;var GC=function(){function e(r,i,s,a,c,f){if(f!==VC){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i_,resetWarningCache:r_};return n.PropTypes=n,n};n_.exports=GC();var YC=n_.exports;const wn=jr(YC);var Ls,pn,Fp,n1,ml=0,s_=[],Bf=[],r1=vt.__b,i1=vt.__r,s1=vt.diffed,o1=vt.__c,a1=vt.unmount;function xa(e,t){vt.__h&&vt.__h(pn,e,ml||t),ml=0;var n=pn.__H||(pn.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Bf}),n.__[e]}function It(e){return ml=1,zy(u_,e)}function zy(e,t,n){var r=xa(Ls++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):u_(void 0,t),function(c){var f=r.__N?r.__N[0]:r.__[0],b=r.t(f,c);f!==b&&(r.__N=[b,r.__[1]],r.__c.setState({}))}],r.__c=pn,!pn.u)){var i=function(c,f,b){if(!r.__c.__H)return!0;var m=r.__c.__H.__.filter(function(_){return _.__c});if(m.every(function(_){return!_.__N}))return!s||s.call(this,c,f,b);var w=!1;return m.forEach(function(_){if(_.__N){var A=_.__[0];_.__=_.__N,_.__N=void 0,A!==_.__[0]&&(w=!0)}}),!(!w&&r.__c.props===c)&&(!s||s.call(this,c,f,b))};pn.u=!0;var s=pn.shouldComponentUpdate,a=pn.componentWillUpdate;pn.componentWillUpdate=function(c,f,b){if(this.__e){var m=s;s=void 0,i(c,f,b),s=m}a&&a.call(this,c,f,b)},pn.shouldComponentUpdate=i}return r.__N||r.__}function on(e,t){var n=xa(Ls++,3);!vt.__s&&Hy(n.__H,t)&&(n.__=e,n.i=t,pn.__H.__h.push(n))}function uu(e,t){var n=xa(Ls++,4);!vt.__s&&Hy(n.__H,t)&&(n.__=e,n.i=t,pn.__h.push(n))}function sh(e){return ml=5,vl(function(){return{current:e}},[])}function o_(e,t,n){ml=6,uu(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function vl(e,t){var n=xa(Ls++,7);return Hy(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function a_(e,t){return ml=8,vl(function(){return e},t)}function Al(e){var t=pn.context[e.__c],n=xa(Ls++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(pn)),t.props.value):e.__}function l_(e,t){vt.useDebugValue&&vt.useDebugValue(t?t(e):e)}function ZC(e){var t=xa(Ls++,10),n=It();return t.__=e,pn.componentDidCatch||(pn.componentDidCatch=function(r,i){t.__&&t.__(r,i),n[1](r)}),[n[0],function(){n[1](void 0)}]}function c_(){var e=xa(Ls++,11);if(!e.__){for(var t=pn.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function JC(){for(var e;e=s_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Lf),e.__H.__h.forEach(kg),e.__H.__h=[]}catch(t){e.__H.__h=[],vt.__e(t,e.__v)}}vt.__b=function(e){pn=null,r1&&r1(e)},vt.__r=function(e){i1&&i1(e),Ls=0;var t=(pn=e.__c).__H;t&&(Fp===pn?(t.__h=[],pn.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Bf,n.__N=n.i=void 0})):(t.__h.forEach(Lf),t.__h.forEach(kg),t.__h=[],Ls=0)),Fp=pn},vt.diffed=function(e){s1&&s1(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(s_.push(t)!==1&&n1===vt.requestAnimationFrame||((n1=vt.requestAnimationFrame)||XC)(JC)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Bf&&(n.__=n.__V),n.i=void 0,n.__V=Bf})),Fp=pn=null},vt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Lf),n.__h=n.__h.filter(function(r){return!r.__||kg(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],vt.__e(r,n.__v)}}),o1&&o1(e,t)},vt.unmount=function(e){a1&&a1(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Lf(r)}catch(i){t=i}}),n.__H=void 0,t&&vt.__e(t,n.__v))};var l1=typeof requestAnimationFrame=="function";function XC(e){var t,n=function(){clearTimeout(r),l1&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);l1&&(t=requestAnimationFrame(n))}function Lf(e){var t=pn,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),pn=t}function kg(e){var t=pn;e.__c=e.__(),pn=t}function Hy(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function u_(e,t){return typeof t=="function"?t(e):t}function f_(e,t){for(var n in t)e[n]=t[n];return e}function Sg(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Up(e,t){return e===t&&(e!==0||1/e==1/t)||e!=e&&t!=t}function Hc(e){this.props=e}function fu(e,t){function n(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),t?!t(this.props,i)||!a:Sg(this.props,i)}function r(i){return this.shouldComponentUpdate=n,ft(e,i)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Hc.prototype=new Er).isPureReactComponent=!0,Hc.prototype.shouldComponentUpdate=function(e,t){return Sg(this.props,e)||Sg(this.state,t)};var c1=vt.__b;vt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),c1&&c1(e)};var QC=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Qn(e){function t(n){var r=f_({},n);return delete r.ref,e(r,n.ref||null)}return t.$$typeof=QC,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var u1=function(e,t){return e==null?null:Li(Li(e).map(t))},h_={map:u1,forEach:u1,count:function(e){return e?Li(e).length:0},only:function(e){var t=Li(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Li},eT=vt.__e;vt.__e=function(e,t,n,r){if(e.then){for(var i,s=t;s=s.__;)if((i=s.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}eT(e,t,n,r)};var f1=vt.unmount;function d_(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=f_({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return d_(r,t,n)})),e}function p_(e,t,n){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return p_(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=n)),e}function Nc(){this.__u=0,this.t=null,this.__b=null}function g_(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function y_(e){var t,n,r;function i(s){if(t||(t=e()).then(function(a){n=a.default||a},function(a){r=a}),r)throw r;if(!n)throw t;return ft(n,s)}return i.displayName="Lazy",i.__f=!0,i}function ol(){this.u=null,this.o=null}vt.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),f1&&f1(e)},(Nc.prototype=new Er).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=g_(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(c):c())};n.__R=a;var c=function(){if(!--r.__u){if(r.state.__a){var b=r.state.__a;r.__v.__k[0]=p_(b,b.__c.__P,b.__c.__O)}var m;for(r.setState({__a:r.__b=null});m=r.t.pop();)m.forceUpdate()}},f=t.__h===!0;r.__u++||f||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},Nc.prototype.componentWillUnmount=function(){this.t=[]},Nc.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=d_(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&ft(ut,null,e.fallback);return i&&(i.__h=null),[ft(ut,null,t.__a?null:e.children),i]};var h1=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function tT(e){return this.getChildContext=function(){return e.context},e.children}function nT(e){var t=this,n=e.i;t.componentWillUnmount=function(){yl(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),yl(ft(tT,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function m_(e,t){var n=ft(nT,{__v:e,i:t});return n.containerInfo=t,n}(ol.prototype=new Er).__a=function(e){var t=this,n=g_(t.__v),r=t.o.get(e);return r[0]++,function(i){var s=function(){t.props.revealOrder?(r.push(i),h1(t,e,r)):i()};n?n(s):s()}},ol.prototype.render=function(e){this.u=null,this.o=new Map;var t=Li(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ol.prototype.componentDidUpdate=ol.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){h1(e,n,t)})};var v_=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rT=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,iT=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,sT=/[A-Z0-9]/g,oT=typeof document<"u",aT=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function b_(e,t,n){return t.__k==null&&(t.textContent=""),yl(e,t),typeof n=="function"&&n(),e?e.__c:null}function w_(e,t,n){return e_(e,t),typeof n=="function"&&n(),e?e.__c:null}Er.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Er.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var d1=vt.event;function lT(){}function cT(){return this.cancelBubble}function uT(){return this.defaultPrevented}vt.event=function(e){return d1&&(e=d1(e)),e.persist=lT,e.isPropagationStopped=cT,e.isDefaultPrevented=uT,e.nativeEvent=e};var qy,fT={enumerable:!1,configurable:!0,get:function(){return this.class}},p1=vt.vnode;vt.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={};for(var s in n){var a=n[s];if(!(s==="value"&&"defaultValue"in n&&a==null||oT&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var c=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":c==="ondoubleclick"?s="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||aT(n.type)?c==="onfocus"?s="onfocusin":c==="onblur"?s="onfocusout":iT.test(s)?s=c:r.indexOf("-")===-1&&rT.test(s)?s=s.replace(sT,"-$&").toLowerCase():a===null&&(a=void 0):c=s="oninput",c==="oninput"&&i[s=c]&&(s="oninputCapture"),i[s]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Li(n.children).forEach(function(f){f.props.selected=i.value.indexOf(f.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Li(n.children).forEach(function(f){f.props.selected=i.multiple?i.defaultValue.indexOf(f.props.value)!=-1:i.defaultValue==f.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",fT)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=v_,p1&&p1(e)};var g1=vt.__r;vt.__r=function(e){g1&&g1(e),qy=e.__c};var y1=vt.diffed;vt.diffed=function(e){y1&&y1(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),qy=null};var __={ReactCurrentDispatcher:{current:{readContext:function(e){return qy.__n[e.__c].props.value}}}},hT="17.0.2";function x_(e){return ft.bind(null,e)}function Ky(e){return!!e&&e.$$typeof===v_}function k_(e){return Ky(e)?t_.apply(null,arguments):e}function S_(e){return!!e.__k&&(yl(null,e),!0)}function E_(e){return e&&(e.base||e.nodeType===1&&e)||null}var A_=function(e,t){return e(t)},C_=function(e,t){return e(t)},T_=ut;function Wy(e){e()}function I_(e){return e}function $_(){return[!1,Wy]}var P_=uu;function O_(e,t){var n=t(),r=It({h:{__:n,v:t}}),i=r[0].h,s=r[1];return uu(function(){i.__=n,i.v=t,Up(i.__,t())||s({h:i})},[e,n,t]),on(function(){return Up(i.__,i.v())||s({h:i}),e(function(){Up(i.__,i.v())||s({h:i})})},[e]),n}var ss={useState:It,useId:c_,useReducer:zy,useEffect:on,useLayoutEffect:uu,useInsertionEffect:P_,useTransition:$_,useDeferredValue:I_,useSyncExternalStore:O_,startTransition:Wy,useRef:sh,useImperativeHandle:o_,useMemo:vl,useCallback:a_,useContext:Al,useDebugValue:l_,version:"17.0.2",Children:h_,render:b_,hydrate:w_,unmountComponentAtNode:S_,createPortal:m_,createElement:ft,createContext:jy,createFactory:x_,cloneElement:k_,createRef:_a,Fragment:ut,isValidElement:Ky,findDOMNode:E_,Component:Er,PureComponent:Hc,memo:fu,forwardRef:Qn,flushSync:C_,unstable_batchedUpdates:A_,StrictMode:T_,Suspense:Nc,SuspenseList:ol,lazy:y_,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:__};const dT=Object.freeze(Object.defineProperty({__proto__:null,Children:h_,Component:Er,Fragment:ut,PureComponent:Hc,StrictMode:T_,Suspense:Nc,SuspenseList:ol,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:__,cloneElement:k_,createContext:jy,createElement:ft,createFactory:x_,createPortal:m_,createRef:_a,default:ss,findDOMNode:E_,flushSync:C_,forwardRef:Qn,hydrate:w_,isValidElement:Ky,lazy:y_,memo:fu,render:b_,startTransition:Wy,unmountComponentAtNode:S_,unstable_batchedUpdates:A_,useCallback:a_,useContext:Al,useDebugValue:l_,useDeferredValue:I_,useEffect:on,useErrorBoundary:ZC,useId:c_,useImperativeHandle:o_,useInsertionEffect:P_,useLayoutEffect:uu,useMemo:vl,useReducer:zy,useRef:sh,useState:It,useSyncExternalStore:O_,useTransition:$_,version:hT},Symbol.toStringTag,{value:"Module"})),pT=So(dT);function gT(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var N_=pT,yT=gT(N_);function m1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var vT=!!(typeof window<"u"&&window.document&&window.document.createElement);function bT(e,t,n){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var a=[],c;function f(){c=e(a.map(function(m){return m.props})),b.canUseDOM?t(c):n&&(c=n(c))}var b=function(m){mT(w,m);function w(){return m.apply(this,arguments)||this}w.peek=function(){return c},w.rewind=function(){if(w.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var I=c;return c=void 0,a=[],I};var _=w.prototype;return _.UNSAFE_componentWillMount=function(){a.push(this),f()},_.componentDidUpdate=function(){f()},_.componentWillUnmount=function(){var I=a.indexOf(this);a.splice(I,1),f()},_.render=function(){return yT.createElement(s,this.props)},w}(N_.PureComponent);return m1(b,"displayName","SideEffect("+r(s)+")"),m1(b,"canUseDOM",vT),b}}var wT=bT;const _T=jr(wT);var xT=typeof Element<"u",kT=typeof Map=="function",ST=typeof Set=="function",ET=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ff(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ff(e[r],t[r]))return!1;return!0}var s;if(kT&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!Ff(r.value[1],t.get(r.value[0])))return!1;return!0}if(ST&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(ET&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(xT&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Ff(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var AT=function(t,n){try{return Ff(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const CT=jr(AT);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var v1=Object.getOwnPropertySymbols,TT=Object.prototype.hasOwnProperty,IT=Object.prototype.propertyIsEnumerable;function $T(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function PT(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var OT=PT()?Object.assign:function(e,t){for(var n,r=$T(e),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var a in n)TT.call(n,a)&&(r[a]=n[a]);if(v1){i=v1(n);for(var c=0;c<i.length;c++)IT.call(n,i[c])&&(r[i[c]]=n[i[c]])}}return r};const NT=jr(OT);var ua={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Bt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Bt).map(function(e){return Bt[e]});var _n={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},oh={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},qc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},RT=Object.keys(oh).reduce(function(e,t){return e[oh[t]]=t,e},{}),MT=[Bt.NOSCRIPT,Bt.SCRIPT,Bt.STYLE],Bi="data-react-helmet",DT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BT=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},LT=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FT=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b1=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},UT=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Eg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},jT=function(t){var n=cl(t,Bt.TITLE),r=cl(t,qc.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=cl(t,qc.DEFAULT_TITLE);return n||i||void 0},zT=function(t){return cl(t,qc.ON_CHANGE_CLIENT_STATE)||function(){}},jp=function(t,n){return n.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,i){return Br({},r,i)},{})},HT=function(t,n){return n.filter(function(r){return typeof r[Bt.BASE]<"u"}).map(function(r){return r[Bt.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var s=Object.keys(i),a=0;a<s.length;a++){var c=s[a],f=c.toLowerCase();if(t.indexOf(f)!==-1&&i[f])return r.concat(i)}return r},[])},vc=function(t,n,r){var i={};return r.filter(function(s){return Array.isArray(s[t])?!0:(typeof s[t]<"u"&&VT("Helmet: "+t+' should be of type "Array". Instead found type "'+DT(s[t])+'"'),!1)}).map(function(s){return s[t]}).reverse().reduce(function(s,a){var c={};a.filter(function(_){for(var A=void 0,I=Object.keys(_),C=0;C<I.length;C++){var R=I[C],$=R.toLowerCase();n.indexOf($)!==-1&&!(A===_n.REL&&_[A].toLowerCase()==="canonical")&&!($===_n.REL&&_[$].toLowerCase()==="stylesheet")&&(A=$),n.indexOf(R)!==-1&&(R===_n.INNER_HTML||R===_n.CSS_TEXT||R===_n.ITEM_PROP)&&(A=R)}if(!A||!_[A])return!1;var L=_[A].toLowerCase();return i[A]||(i[A]={}),c[A]||(c[A]={}),i[A][L]?!1:(c[A][L]=!0,!0)}).reverse().forEach(function(_){return s.push(_)});for(var f=Object.keys(c),b=0;b<f.length;b++){var m=f[b],w=NT({},i[m],c[m]);i[m]=w}return s},[]).reverse()},cl=function(t,n){for(var r=t.length-1;r>=0;r--){var i=t[r];if(i.hasOwnProperty(n))return i[n]}return null},qT=function(t){return{baseTag:HT([_n.HREF,_n.TARGET],t),bodyAttributes:jp(ua.BODY,t),defer:cl(t,qc.DEFER),encode:cl(t,qc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:jp(ua.HTML,t),linkTags:vc(Bt.LINK,[_n.REL,_n.HREF],t),metaTags:vc(Bt.META,[_n.NAME,_n.CHARSET,_n.HTTPEQUIV,_n.PROPERTY,_n.ITEM_PROP],t),noscriptTags:vc(Bt.NOSCRIPT,[_n.INNER_HTML],t),onChangeClientState:zT(t),scriptTags:vc(Bt.SCRIPT,[_n.SRC,_n.INNER_HTML],t),styleTags:vc(Bt.STYLE,[_n.CSS_TEXT],t),title:jT(t),titleAttributes:jp(ua.TITLE,t)}},Ag=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Ag(t)},0)}}(),w1=function(t){return clearTimeout(t)},KT=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Ag:global.requestAnimationFrame||Ag,WT=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||w1:global.cancelAnimationFrame||w1,VT=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},bc=null,GT=function(t){bc&&WT(bc),t.defer?bc=KT(function(){_1(t,function(){bc=null})}):(_1(t),bc=null)},_1=function(t,n){var r=t.baseTag,i=t.bodyAttributes,s=t.htmlAttributes,a=t.linkTags,c=t.metaTags,f=t.noscriptTags,b=t.onChangeClientState,m=t.scriptTags,w=t.styleTags,_=t.title,A=t.titleAttributes;Cg(Bt.BODY,i),Cg(Bt.HTML,s),YT(_,A);var I={baseTag:Qa(Bt.BASE,r),linkTags:Qa(Bt.LINK,a),metaTags:Qa(Bt.META,c),noscriptTags:Qa(Bt.NOSCRIPT,f),scriptTags:Qa(Bt.SCRIPT,m),styleTags:Qa(Bt.STYLE,w)},C={},R={};Object.keys(I).forEach(function($){var L=I[$],P=L.newTags,N=L.oldTags;P.length&&(C[$]=P),N.length&&(R[$]=I[$].oldTags)}),n&&n(),b(t,C,R)},R_=function(t){return Array.isArray(t)?t.join(""):t},YT=function(t,n){typeof t<"u"&&document.title!==t&&(document.title=R_(t)),Cg(Bt.TITLE,n)},Cg=function(t,n){var r=document.getElementsByTagName(t)[0];if(r){for(var i=r.getAttribute(Bi),s=i?i.split(","):[],a=[].concat(s),c=Object.keys(n),f=0;f<c.length;f++){var b=c[f],m=n[b]||"";r.getAttribute(b)!==m&&r.setAttribute(b,m),s.indexOf(b)===-1&&s.push(b);var w=a.indexOf(b);w!==-1&&a.splice(w,1)}for(var _=a.length-1;_>=0;_--)r.removeAttribute(a[_]);s.length===a.length?r.removeAttribute(Bi):r.getAttribute(Bi)!==c.join(",")&&r.setAttribute(Bi,c.join(","))}},Qa=function(t,n){var r=document.head||document.querySelector(Bt.HEAD),i=r.querySelectorAll(t+"["+Bi+"]"),s=Array.prototype.slice.call(i),a=[],c=void 0;return n&&n.length&&n.forEach(function(f){var b=document.createElement(t);for(var m in f)if(f.hasOwnProperty(m))if(m===_n.INNER_HTML)b.innerHTML=f.innerHTML;else if(m===_n.CSS_TEXT)b.styleSheet?b.styleSheet.cssText=f.cssText:b.appendChild(document.createTextNode(f.cssText));else{var w=typeof f[m]>"u"?"":f[m];b.setAttribute(m,w)}b.setAttribute(Bi,"true"),s.some(function(_,A){return c=A,b.isEqualNode(_)})?s.splice(c,1):a.push(b)}),s.forEach(function(f){return f.parentNode.removeChild(f)}),a.forEach(function(f){return r.appendChild(f)}),{oldTags:s,newTags:a}},M_=function(t){return Object.keys(t).reduce(function(n,r){var i=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return n?n+" "+i:i},"")},ZT=function(t,n,r,i){var s=M_(r),a=R_(n);return s?"<"+t+" "+Bi+'="true" '+s+">"+Eg(a,i)+"</"+t+">":"<"+t+" "+Bi+'="true">'+Eg(a,i)+"</"+t+">"},JT=function(t,n,r){return n.reduce(function(i,s){var a=Object.keys(s).filter(function(b){return!(b===_n.INNER_HTML||b===_n.CSS_TEXT)}).reduce(function(b,m){var w=typeof s[m]>"u"?m:m+'="'+Eg(s[m],r)+'"';return b?b+" "+w:w},""),c=s.innerHTML||s.cssText||"",f=MT.indexOf(t)===-1;return i+"<"+t+" "+Bi+'="true" '+a+(f?"/>":">"+c+"</"+t+">")},"")},D_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[oh[i]||i]=t[i],r},n)},XT=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,i){return r[RT[i]||i]=t[i],r},n)},QT=function(t,n,r){var i,s=(i={key:n},i[Bi]=!0,i),a=D_(r,s);return[ss.createElement(Bt.TITLE,a,n)]},eI=function(t,n){return n.map(function(r,i){var s,a=(s={key:i},s[Bi]=!0,s);return Object.keys(r).forEach(function(c){var f=oh[c]||c;if(f===_n.INNER_HTML||f===_n.CSS_TEXT){var b=r.innerHTML||r.cssText;a.dangerouslySetInnerHTML={__html:b}}else a[f]=r[c]}),ss.createElement(t,a)})},As=function(t,n,r){switch(t){case Bt.TITLE:return{toComponent:function(){return QT(t,n.title,n.titleAttributes)},toString:function(){return ZT(t,n.title,n.titleAttributes,r)}};case ua.BODY:case ua.HTML:return{toComponent:function(){return D_(n)},toString:function(){return M_(n)}};default:return{toComponent:function(){return eI(t,n)},toString:function(){return JT(t,n,r)}}}},B_=function(t){var n=t.baseTag,r=t.bodyAttributes,i=t.encode,s=t.htmlAttributes,a=t.linkTags,c=t.metaTags,f=t.noscriptTags,b=t.scriptTags,m=t.styleTags,w=t.title,_=w===void 0?"":w,A=t.titleAttributes;return{base:As(Bt.BASE,n,i),bodyAttributes:As(ua.BODY,r,i),htmlAttributes:As(ua.HTML,s,i),link:As(Bt.LINK,a,i),meta:As(Bt.META,c,i),noscript:As(Bt.NOSCRIPT,f,i),script:As(Bt.SCRIPT,b,i),style:As(Bt.STYLE,m,i),title:As(Bt.TITLE,{title:_,titleAttributes:A},i)}},tI=function(t){var n,r;return r=n=function(i){FT(s,i);function s(){return BT(this,s),UT(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(c){return!CT(this.props,c)},s.prototype.mapNestedChildrenToProps=function(c,f){if(!f)return null;switch(c.type){case Bt.SCRIPT:case Bt.NOSCRIPT:return{innerHTML:f};case Bt.STYLE:return{cssText:f}}throw new Error("<"+c.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(c){var f,b=c.child,m=c.arrayTypeChildren,w=c.newChildProps,_=c.nestedChildren;return Br({},m,(f={},f[b.type]=[].concat(m[b.type]||[],[Br({},w,this.mapNestedChildrenToProps(b,_))]),f))},s.prototype.mapObjectTypeChildren=function(c){var f,b,m=c.child,w=c.newProps,_=c.newChildProps,A=c.nestedChildren;switch(m.type){case Bt.TITLE:return Br({},w,(f={},f[m.type]=A,f.titleAttributes=Br({},_),f));case Bt.BODY:return Br({},w,{bodyAttributes:Br({},_)});case Bt.HTML:return Br({},w,{htmlAttributes:Br({},_)})}return Br({},w,(b={},b[m.type]=Br({},_),b))},s.prototype.mapArrayTypeChildrenToProps=function(c,f){var b=Br({},f);return Object.keys(c).forEach(function(m){var w;b=Br({},b,(w={},w[m]=c[m],w))}),b},s.prototype.warnOnInvalidChildren=function(c,f){return!0},s.prototype.mapChildrenToProps=function(c,f){var b=this,m={};return ss.Children.forEach(c,function(w){if(!(!w||!w.props)){var _=w.props,A=_.children,I=b1(_,["children"]),C=XT(I);switch(b.warnOnInvalidChildren(w,A),w.type){case Bt.LINK:case Bt.META:case Bt.NOSCRIPT:case Bt.SCRIPT:case Bt.STYLE:m=b.flattenArrayTypeChildren({child:w,arrayTypeChildren:m,newChildProps:C,nestedChildren:A});break;default:f=b.mapObjectTypeChildren({child:w,newProps:f,newChildProps:C,nestedChildren:A});break}}}),f=this.mapArrayTypeChildrenToProps(m,f),f},s.prototype.render=function(){var c=this.props,f=c.children,b=b1(c,["children"]),m=Br({},b);return f&&(m=this.mapChildrenToProps(f,m)),ss.createElement(t,m)},LT(s,null,[{key:"canUseDOM",set:function(c){t.canUseDOM=c}}]),s}(ss.Component),n.propTypes={base:wn.object,bodyAttributes:wn.object,children:wn.oneOfType([wn.arrayOf(wn.node),wn.node]),defaultTitle:wn.string,defer:wn.bool,encodeSpecialCharacters:wn.bool,htmlAttributes:wn.object,link:wn.arrayOf(wn.object),meta:wn.arrayOf(wn.object),noscript:wn.arrayOf(wn.object),onChangeClientState:wn.func,script:wn.arrayOf(wn.object),style:wn.arrayOf(wn.object),title:wn.string,titleAttributes:wn.object,titleTemplate:wn.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=t.peek,n.rewind=function(){var i=t.rewind();return i||(i=B_({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},nI=function(){return null},rI=_T(qT,GT,B_)(nI),va=tI(rI);va.renderStatic=va.rewind;var iI={};function Ec(e,t){for(var n in t)e[n]=t[n];return e}function Tg(e,t,n){var r,i=/(?:\?([^#]*))?(#.*)?$/,s=e.match(i),a={};if(s&&s[1])for(var c=s[1].split("&"),f=0;f<c.length;f++){var b=c[f].split("=");a[decodeURIComponent(b[0])]=decodeURIComponent(b.slice(1).join("="))}e=Ig(e.replace(i,"")),t=Ig(t||"");for(var m=Math.max(e.length,t.length),w=0;w<m;w++)if(t[w]&&t[w].charAt(0)===":"){var _=t[w].replace(/(^:|[+*?]+$)/g,""),A=(t[w].match(/[+*?]+$/)||iI)[0]||"",I=~A.indexOf("+"),C=~A.indexOf("*"),R=e[w]||"";if(!R&&!C&&(A.indexOf("?")<0||I)){r=!1;break}if(a[_]=decodeURIComponent(R),I||C){a[_]=e.slice(w).map(decodeURIComponent).join("/");break}}else if(t[w]!==e[w]){r=!1;break}return(n.default===!0||r!==!1)&&a}function sI(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function oI(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:Ig(n.props.path).map(aI).join("")}(e),e.props}function Ig(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function aI(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var lI={},fa=[],Rc=[],Jr=null,Vy={url:Gy()},L_=jy(Vy);function cI(){var e=Al(L_);if(e===Vy){var t=It()[1];on(function(){return Rc.push(t),function(){return Rc.splice(Rc.indexOf(t),1)}},[])}return[e,Lt]}function Gy(){var e;return""+((e=Jr&&Jr.location?Jr.location:Jr&&Jr.getCurrentLocation?Jr.getCurrentLocation():typeof location<"u"?location:lI).pathname||"")+(e.search||"")}function Lt(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var r=fa.length;r--;)if(fa[r].canRoute(n))return!0;return!1}(e)&&function(n,r){r===void 0&&(r="push"),Jr&&Jr[r]?Jr[r](n):typeof history<"u"&&history[r+"State"]&&history[r+"State"](null,null,n)}(e,t?"replace":"push"),F_(e)}function F_(e){for(var t=!1,n=0;n<fa.length;n++)fa[n].routeTo(e)&&(t=!0);return t}function uI(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return Lt(t)}}function fI(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function U_(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(uI(t))return fI(e)}while(t=t.parentNode)}}var x1=!1;function j_(e){e.history&&(Jr=e.history),this.state={url:e.url||Gy()}}Ec(j_.prototype=new Er,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Li(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;x1||(x1=!0,Jr||addEventListener("popstate",function(){F_(Gy())}),addEventListener("click",U_)),fa.push(this),Jr&&(this.u=Jr.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),fa.splice(fa.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(oI).sort(sI);for(var n=0;n<e.length;n++){var r=e[n],i=Tg(t,r.props.path,r.props);if(i)return[r,i]}},render:function(e,t){var n,r,i=e.onChange,s=t.url,a=this.c,c=this.g(Li(e.children),s);if(c&&(r=t_(c[0],Ec(Ec({url:s,matches:n=c[1]},n),{key:void 0,ref:void 0}))),s!==(a&&a.url)){Ec(Vy,a=this.c={url:s,previous:a&&a.url,current:r,path:r?r.props.path:null,matches:n}),a.router=this,a.active=r?[r]:[];for(var f=Rc.length;f--;)Rc[f]({});typeof i=="function"&&i(a)}return ft(L_.Provider,{value:a},r)}});var hI=function(e){return ft("a",Ec({onClick:U_},e))};function dI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}))}const pI=Qn(dI),gI=pI;function yI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))}const mI=Qn(yI),z_=mI;function vI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}const bI=Qn(vI),wI=bI;function _I({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))}const xI=Qn(_I),H_=xI;function kI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const SI=Qn(kI),q_=SI;function EI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"}))}const AI=Qn(EI),CI=AI;function TI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}const II=Qn(TI),hu=II;function $I({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}))}const PI=Qn($I),OI=PI;function NI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{d:"M18.75 12.75h1.5a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5zM12 6a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 6zM12 18a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 18zM3.75 6.75h1.5a.75.75 0 100-1.5h-1.5a.75.75 0 000 1.5zM5.25 18.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5zM3 12a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 013 12zM9 3.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM9 15.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}))}const RI=Qn(NI),MI=RI;function DI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{fillRule:"evenodd",d:"M11.828 2.25c-.916 0-1.699.663-1.85 1.567l-.091.549a.798.798 0 01-.517.608 7.45 7.45 0 00-.478.198.798.798 0 01-.796-.064l-.453-.324a1.875 1.875 0 00-2.416.2l-.243.243a1.875 1.875 0 00-.2 2.416l.324.453a.798.798 0 01.064.796 7.448 7.448 0 00-.198.478.798.798 0 01-.608.517l-.55.092a1.875 1.875 0 00-1.566 1.849v.344c0 .916.663 1.699 1.567 1.85l.549.091c.281.047.508.25.608.517.06.162.127.321.198.478a.798.798 0 01-.064.796l-.324.453a1.875 1.875 0 00.2 2.416l.243.243c.648.648 1.67.733 2.416.2l.453-.324a.798.798 0 01.796-.064c.157.071.316.137.478.198.267.1.47.327.517.608l.092.55c.15.903.932 1.566 1.849 1.566h.344c.916 0 1.699-.663 1.85-1.567l.091-.549a.798.798 0 01.517-.608 7.52 7.52 0 00.478-.198.798.798 0 01.796.064l.453.324a1.875 1.875 0 002.416-.2l.243-.243c.648-.648.733-1.67.2-2.416l-.324-.453a.798.798 0 01-.064-.796c.071-.157.137-.316.198-.478.1-.267.327-.47.608-.517l.55-.091a1.875 1.875 0 001.566-1.85v-.344c0-.916-.663-1.699-1.567-1.85l-.549-.091a.798.798 0 01-.608-.517 7.507 7.507 0 00-.198-.478.798.798 0 01.064-.796l.324-.453a1.875 1.875 0 00-.2-2.416l-.243-.243a1.875 1.875 0 00-2.416-.2l-.453.324a.798.798 0 01-.796.064 7.462 7.462 0 00-.478-.198.798.798 0 01-.517-.608l-.091-.55a1.875 1.875 0 00-1.85-1.566h-.344zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z",clipRule:"evenodd"}))}const BI=Qn(DI),LI=BI;function FI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"}))}const UI=Qn(FI),Yy=UI;function jI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),ft("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"}))}const zI=Qn(jI),K_=zI;function HI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const qI=Qn(HI),KI=qI;function WI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"}))}const VI=Qn(WI),W_=VI;function GI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z",clipRule:"evenodd"}))}const YI=Qn(GI),ZI=YI;function JI({title:e,titleId:t,...n},r){return ft("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?ft("title",{id:t},e):null,ft("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const XI=Qn(JI),V_=XI;class fn extends Hc{constructor(){super(...arguments);xe(this,"unmounted");xe(this,"unsubscribes",{})}sub(n,r){return(s,a,c,f)=>{if(this.unmounted){c==null||c();return}this.unsubscribes[r??a]=c,n(s,a,c,f)}}inject(n,r){return this.sub((i,s)=>{const a={};a[n??s]=i,this.setState(a)},r)}unsubscribe(){Object.keys(this.unsubscribes).forEach(n=>{const r=this.unsubscribes[n];r==null||r(),delete this.unsubscribes[n]})}componentWillUnmount(){this.unmounted=!0,this.unsubscribe()}}function Ac(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var G_={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(b,m){if(!i[b]){if(!r[b]){var w=typeof Ac=="function"&&Ac;if(!m&&w)return w(b,!0);if(c)return c(b,!0);var _=new Error("Cannot find module '"+b+"'");throw _.code="MODULE_NOT_FOUND",_}var A=i[b]={exports:{}};r[b][0].call(A.exports,function(I){var C=r[b][1][I];return a(C||I)},A,A.exports,n,r,i,s)}return i[b].exports}for(var c=typeof Ac=="function"&&Ac,f=0;f<s.length;f++)a(s[f]);return a}({1:[function(n,r,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,c;if(a){var f=0,b=new a(I),m=s.document.createTextNode("");b.observe(m,{characterData:!0}),c=function(){m.data=f=++f%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var w=new s.MessageChannel;w.port1.onmessage=I,c=function(){w.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?c=function(){var R=s.document.createElement("script");R.onreadystatechange=function(){I(),R.onreadystatechange=null,R.parentNode.removeChild(R),R=null},s.document.documentElement.appendChild(R)}:c=function(){setTimeout(I,0)};var _,A=[];function I(){_=!0;for(var R,$,L=A.length;L;){for($=A,A=[],R=-1;++R<L;)$[R]();L=A.length}_=!1}r.exports=C;function C(R){A.push(R)===1&&!_&&c()}}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function a(){}var c={},f=["REJECTED"],b=["FULFILLED"],m=["PENDING"];r.exports=w;function w(M){if(typeof M!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,M!==a&&C(this,M)}w.prototype.catch=function(M){return this.then(null,M)},w.prototype.then=function(M,U){if(typeof M!="function"&&this.state===b||typeof U!="function"&&this.state===f)return this;var p=new this.constructor(a);if(this.state!==m){var Z=this.state===b?M:U;A(p,Z,this.outcome)}else this.queue.push(new _(p,M,U));return p};function _(M,U,p){this.promise=M,typeof U=="function"&&(this.onFulfilled=U,this.callFulfilled=this.otherCallFulfilled),typeof p=="function"&&(this.onRejected=p,this.callRejected=this.otherCallRejected)}_.prototype.callFulfilled=function(M){c.resolve(this.promise,M)},_.prototype.otherCallFulfilled=function(M){A(this.promise,this.onFulfilled,M)},_.prototype.callRejected=function(M){c.reject(this.promise,M)},_.prototype.otherCallRejected=function(M){A(this.promise,this.onRejected,M)};function A(M,U,p){s(function(){var Z;try{Z=U(p)}catch(J){return c.reject(M,J)}Z===M?c.reject(M,new TypeError("Cannot resolve promise with itself")):c.resolve(M,Z)})}c.resolve=function(M,U){var p=R(I,U);if(p.status==="error")return c.reject(M,p.value);var Z=p.value;if(Z)C(M,Z);else{M.state=b,M.outcome=U;for(var J=-1,ce=M.queue.length;++J<ce;)M.queue[J].callFulfilled(U)}return M},c.reject=function(M,U){M.state=f,M.outcome=U;for(var p=-1,Z=M.queue.length;++p<Z;)M.queue[p].callRejected(U);return M};function I(M){var U=M&&M.then;if(M&&(typeof M=="object"||typeof M=="function")&&typeof U=="function")return function(){U.apply(M,arguments)}}function C(M,U){var p=!1;function Z(ke){p||(p=!0,c.reject(M,ke))}function J(ke){p||(p=!0,c.resolve(M,ke))}function ce(){U(J,Z)}var me=R(ce);me.status==="error"&&Z(me.value)}function R(M,U){var p={};try{p.value=M(U),p.status="success"}catch(Z){p.status="error",p.value=Z}return p}w.resolve=$;function $(M){return M instanceof this?M:c.resolve(new this(a),M)}w.reject=L;function L(M){var U=new this(a);return c.reject(U,M)}w.all=P;function P(M){var U=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var p=M.length,Z=!1;if(!p)return this.resolve([]);for(var J=new Array(p),ce=0,me=-1,ke=new this(a);++me<p;)we(M[me],me);return ke;function we(Q,G){U.resolve(Q).then(Ae,function(Te){Z||(Z=!0,c.reject(ke,Te))});function Ae(Te){J[G]=Te,++ce===p&&!Z&&(Z=!0,c.resolve(ke,J))}}}w.race=N;function N(M){var U=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var p=M.length,Z=!1;if(!p)return this.resolve([]);for(var J=-1,ce=new this(a);++J<p;)me(M[J]);return ce;function me(ke){U.resolve(ke).then(function(we){Z||(Z=!0,c.resolve(ce,we))},function(we){Z||(Z=!0,c.reject(ce,we))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function a(q,ne){if(!(q instanceof ne))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var f=c();function b(){try{if(!f||!f.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ne=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||ne)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function m(q,ne){q=q||[],ne=ne||{};try{return new Blob(q,ne)}catch(ue){if(ue.name!=="TypeError")throw ue;for(var V=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,he=new V,ve=0;ve<q.length;ve+=1)he.append(q[ve]);return he.getBlob(ne.type)}}typeof Promise>"u"&&n(3);var w=Promise;function _(q,ne){ne&&q.then(function(V){ne(null,V)},function(V){ne(V)})}function A(q,ne,V){typeof ne=="function"&&q.then(ne),typeof V=="function"&&q.catch(V)}function I(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function C(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var R="local-forage-detect-blob-support",$=void 0,L={},P=Object.prototype.toString,N="readonly",M="readwrite";function U(q){for(var ne=q.length,V=new ArrayBuffer(ne),he=new Uint8Array(V),ve=0;ve<ne;ve++)he[ve]=q.charCodeAt(ve);return V}function p(q){return new w(function(ne){var V=q.transaction(R,M),he=m([""]);V.objectStore(R).put(he,"key"),V.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),ne(!1)},V.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),ue=navigator.userAgent.match(/Edge\//);ne(ue||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function Z(q){return typeof $=="boolean"?w.resolve($):p(q).then(function(ne){return $=ne,$})}function J(q){var ne=L[q.name],V={};V.promise=new w(function(he,ve){V.resolve=he,V.reject=ve}),ne.deferredOperations.push(V),ne.dbReady?ne.dbReady=ne.dbReady.then(function(){return V.promise}):ne.dbReady=V.promise}function ce(q){var ne=L[q.name],V=ne.deferredOperations.pop();if(V)return V.resolve(),V.promise}function me(q,ne){var V=L[q.name],he=V.deferredOperations.pop();if(he)return he.reject(ne),he.promise}function ke(q,ne){return new w(function(V,he){if(L[q.name]=L[q.name]||Fe(),q.db)if(ne)J(q),q.db.close();else return V(q.db);var ve=[q.name];ne&&ve.push(q.version);var ue=f.open.apply(f,ve);ne&&(ue.onupgradeneeded=function(Re){var We=ue.result;try{We.createObjectStore(q.storeName),Re.oldVersion<=1&&We.createObjectStore(R)}catch(Ye){if(Ye.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+Re.oldVersion+" to version "+Re.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw Ye}}),ue.onerror=function(Re){Re.preventDefault(),he(ue.error)},ue.onsuccess=function(){var Re=ue.result;Re.onversionchange=function(We){We.target.close()},V(Re),ce(q)}})}function we(q){return ke(q,!1)}function Q(q){return ke(q,!0)}function G(q,ne){if(!q.db)return!0;var V=!q.db.objectStoreNames.contains(q.storeName),he=q.version<q.db.version,ve=q.version>q.db.version;if(he&&(q.version!==ne&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),ve||V){if(V){var ue=q.db.version+1;ue>q.version&&(q.version=ue)}return!0}return!1}function Ae(q){return new w(function(ne,V){var he=new FileReader;he.onerror=V,he.onloadend=function(ve){var ue=btoa(ve.target.result||"");ne({__local_forage_encoded_blob:!0,data:ue,type:q.type})},he.readAsBinaryString(q)})}function Te(q){var ne=U(atob(q.data));return m([ne],{type:q.type})}function qe(q){return q&&q.__local_forage_encoded_blob}function ze(q){var ne=this,V=ne._initReady().then(function(){var he=L[ne._dbInfo.name];if(he&&he.dbReady)return he.dbReady});return A(V,q,q),V}function Qe(q){J(q);for(var ne=L[q.name],V=ne.forages,he=0;he<V.length;he++){var ve=V[he];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return q.db=null,we(q).then(function(ue){return q.db=ue,G(q)?Q(q):ue}).then(function(ue){q.db=ne.db=ue;for(var Re=0;Re<V.length;Re++)V[Re]._dbInfo.db=ue}).catch(function(ue){throw me(q,ue),ue})}function nt(q,ne,V,he){he===void 0&&(he=1);try{var ve=q.db.transaction(q.storeName,ne);V(null,ve)}catch(ue){if(he>0&&(!q.db||ue.name==="InvalidStateError"||ue.name==="NotFoundError"))return w.resolve().then(function(){if(!q.db||ue.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),Q(q)}).then(function(){return Qe(q).then(function(){nt(q,ne,V,he-1)})}).catch(V);V(ue)}}function Fe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function He(q){var ne=this,V={db:null};if(q)for(var he in q)V[he]=q[he];var ve=L[V.name];ve||(ve=Fe(),L[V.name]=ve),ve.forages.push(ne),ne._initReady||(ne._initReady=ne.ready,ne.ready=ze);var ue=[];function Re(){return w.resolve()}for(var We=0;We<ve.forages.length;We++){var Ye=ve.forages[We];Ye!==ne&&ue.push(Ye._initReady().catch(Re))}var Ze=ve.forages.slice(0);return w.all(ue).then(function(){return V.db=ve.db,we(V)}).then(function(Xe){return V.db=Xe,G(V,ne._defaultConfig.version)?Q(V):Xe}).then(function(Xe){V.db=ve.db=Xe,ne._dbInfo=V;for(var ht=0;ht<Ze.length;ht++){var xt=Ze[ht];xt!==ne&&(xt._dbInfo.db=V.db,xt._dbInfo.version=V.version)}})}function $e(q,ne){var V=this;q=I(q);var he=new w(function(ve,ue){V.ready().then(function(){nt(V._dbInfo,N,function(Re,We){if(Re)return ue(Re);try{var Ye=We.objectStore(V._dbInfo.storeName),Ze=Ye.get(q);Ze.onsuccess=function(){var Xe=Ze.result;Xe===void 0&&(Xe=null),qe(Xe)&&(Xe=Te(Xe)),ve(Xe)},Ze.onerror=function(){ue(Ze.error)}}catch(Xe){ue(Xe)}})}).catch(ue)});return _(he,ne),he}function Me(q,ne){var V=this,he=new w(function(ve,ue){V.ready().then(function(){nt(V._dbInfo,N,function(Re,We){if(Re)return ue(Re);try{var Ye=We.objectStore(V._dbInfo.storeName),Ze=Ye.openCursor(),Xe=1;Ze.onsuccess=function(){var ht=Ze.result;if(ht){var xt=ht.value;qe(xt)&&(xt=Te(xt));var Jt=q(xt,ht.key,Xe++);Jt!==void 0?ve(Jt):ht.continue()}else ve()},Ze.onerror=function(){ue(Ze.error)}}catch(ht){ue(ht)}})}).catch(ue)});return _(he,ne),he}function fe(q,ne,V){var he=this;q=I(q);var ve=new w(function(ue,Re){var We;he.ready().then(function(){return We=he._dbInfo,P.call(ne)==="[object Blob]"?Z(We.db).then(function(Ye){return Ye?ne:Ae(ne)}):ne}).then(function(Ye){nt(he._dbInfo,M,function(Ze,Xe){if(Ze)return Re(Ze);try{var ht=Xe.objectStore(he._dbInfo.storeName);Ye===null&&(Ye=void 0);var xt=ht.put(Ye,q);Xe.oncomplete=function(){Ye===void 0&&(Ye=null),ue(Ye)},Xe.onabort=Xe.onerror=function(){var Jt=xt.error?xt.error:xt.transaction.error;Re(Jt)}}catch(Jt){Re(Jt)}})}).catch(Re)});return _(ve,V),ve}function pt(q,ne){var V=this;q=I(q);var he=new w(function(ve,ue){V.ready().then(function(){nt(V._dbInfo,M,function(Re,We){if(Re)return ue(Re);try{var Ye=We.objectStore(V._dbInfo.storeName),Ze=Ye.delete(q);We.oncomplete=function(){ve()},We.onerror=function(){ue(Ze.error)},We.onabort=function(){var Xe=Ze.error?Ze.error:Ze.transaction.error;ue(Xe)}}catch(Xe){ue(Xe)}})}).catch(ue)});return _(he,ne),he}function h(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){nt(ne._dbInfo,M,function(ue,Re){if(ue)return ve(ue);try{var We=Re.objectStore(ne._dbInfo.storeName),Ye=We.clear();Re.oncomplete=function(){he()},Re.onabort=Re.onerror=function(){var Ze=Ye.error?Ye.error:Ye.transaction.error;ve(Ze)}}catch(Ze){ve(Ze)}})}).catch(ve)});return _(V,q),V}function v(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){nt(ne._dbInfo,N,function(ue,Re){if(ue)return ve(ue);try{var We=Re.objectStore(ne._dbInfo.storeName),Ye=We.count();Ye.onsuccess=function(){he(Ye.result)},Ye.onerror=function(){ve(Ye.error)}}catch(Ze){ve(Ze)}})}).catch(ve)});return _(V,q),V}function k(q,ne){var V=this,he=new w(function(ve,ue){if(q<0){ve(null);return}V.ready().then(function(){nt(V._dbInfo,N,function(Re,We){if(Re)return ue(Re);try{var Ye=We.objectStore(V._dbInfo.storeName),Ze=!1,Xe=Ye.openKeyCursor();Xe.onsuccess=function(){var ht=Xe.result;if(!ht){ve(null);return}q===0||Ze?ve(ht.key):(Ze=!0,ht.advance(q))},Xe.onerror=function(){ue(Xe.error)}}catch(ht){ue(ht)}})}).catch(ue)});return _(he,ne),he}function T(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){nt(ne._dbInfo,N,function(ue,Re){if(ue)return ve(ue);try{var We=Re.objectStore(ne._dbInfo.storeName),Ye=We.openKeyCursor(),Ze=[];Ye.onsuccess=function(){var Xe=Ye.result;if(!Xe){he(Ze);return}Ze.push(Xe.key),Xe.continue()},Ye.onerror=function(){ve(Ye.error)}}catch(Xe){ve(Xe)}})}).catch(ve)});return _(V,q),V}function O(q,ne){ne=C.apply(this,arguments);var V=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||V.name,q.storeName=q.storeName||V.storeName);var he=this,ve;if(!q.name)ve=w.reject("Invalid arguments");else{var ue=q.name===V.name&&he._dbInfo.db,Re=ue?w.resolve(he._dbInfo.db):we(q).then(function(We){var Ye=L[q.name],Ze=Ye.forages;Ye.db=We;for(var Xe=0;Xe<Ze.length;Xe++)Ze[Xe]._dbInfo.db=We;return We});q.storeName?ve=Re.then(function(We){if(We.objectStoreNames.contains(q.storeName)){var Ye=We.version+1;J(q);var Ze=L[q.name],Xe=Ze.forages;We.close();for(var ht=0;ht<Xe.length;ht++){var xt=Xe[ht];xt._dbInfo.db=null,xt._dbInfo.version=Ye}var Jt=new w(function(qt,yn){var tn=f.open(q.name,Ye);tn.onerror=function(Sn){var sr=tn.result;sr.close(),yn(Sn)},tn.onupgradeneeded=function(){var Sn=tn.result;Sn.deleteObjectStore(q.storeName)},tn.onsuccess=function(){var Sn=tn.result;Sn.close(),qt(Sn)}});return Jt.then(function(qt){Ze.db=qt;for(var yn=0;yn<Xe.length;yn++){var tn=Xe[yn];tn._dbInfo.db=qt,ce(tn._dbInfo)}}).catch(function(qt){throw(me(q,qt)||w.resolve()).catch(function(){}),qt})}}):ve=Re.then(function(We){J(q);var Ye=L[q.name],Ze=Ye.forages;We.close();for(var Xe=0;Xe<Ze.length;Xe++){var ht=Ze[Xe];ht._dbInfo.db=null}var xt=new w(function(Jt,qt){var yn=f.deleteDatabase(q.name);yn.onerror=function(){var tn=yn.result;tn&&tn.close(),qt(yn.error)},yn.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},yn.onsuccess=function(){var tn=yn.result;tn&&tn.close(),Jt(tn)}});return xt.then(function(Jt){Ye.db=Jt;for(var qt=0;qt<Ze.length;qt++){var yn=Ze[qt];ce(yn._dbInfo)}}).catch(function(Jt){throw(me(q,Jt)||w.resolve()).catch(function(){}),Jt})})}return _(ve,ne),ve}var z={_driver:"asyncStorage",_initStorage:He,_support:b(),iterate:Me,getItem:$e,setItem:fe,removeItem:pt,clear:h,length:v,key:k,keys:T,dropInstance:O};function te(){return typeof openDatabase=="function"}var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,je="__lfsc__:",tt=je.length,Je="arbf",et="blob",yt="si08",St="ui08",ot="uic8",Ke="si16",gt="si32",gn="ur16",mn="ui32",gr="fl32",Pn="fl64",Ir=tt+Je.length,si=Object.prototype.toString;function rr(q){var ne=q.length*.75,V=q.length,he,ve=0,ue,Re,We,Ye;q[q.length-1]==="="&&(ne--,q[q.length-2]==="="&&ne--);var Ze=new ArrayBuffer(ne),Xe=new Uint8Array(Ze);for(he=0;he<V;he+=4)ue=ie.indexOf(q[he]),Re=ie.indexOf(q[he+1]),We=ie.indexOf(q[he+2]),Ye=ie.indexOf(q[he+3]),Xe[ve++]=ue<<2|Re>>4,Xe[ve++]=(Re&15)<<4|We>>2,Xe[ve++]=(We&3)<<6|Ye&63;return Ze}function yr(q){var ne=new Uint8Array(q),V="",he;for(he=0;he<ne.length;he+=3)V+=ie[ne[he]>>2],V+=ie[(ne[he]&3)<<4|ne[he+1]>>4],V+=ie[(ne[he+1]&15)<<2|ne[he+2]>>6],V+=ie[ne[he+2]&63];return ne.length%3===2?V=V.substring(0,V.length-1)+"=":ne.length%3===1&&(V=V.substring(0,V.length-2)+"=="),V}function oi(q,ne){var V="";if(q&&(V=si.call(q)),q&&(V==="[object ArrayBuffer]"||q.buffer&&si.call(q.buffer)==="[object ArrayBuffer]")){var he,ve=je;q instanceof ArrayBuffer?(he=q,ve+=Je):(he=q.buffer,V==="[object Int8Array]"?ve+=yt:V==="[object Uint8Array]"?ve+=St:V==="[object Uint8ClampedArray]"?ve+=ot:V==="[object Int16Array]"?ve+=Ke:V==="[object Uint16Array]"?ve+=gn:V==="[object Int32Array]"?ve+=gt:V==="[object Uint32Array]"?ve+=mn:V==="[object Float32Array]"?ve+=gr:V==="[object Float64Array]"?ve+=Pn:ne(new Error("Failed to get type for BinaryArray"))),ne(ve+yr(he))}else if(V==="[object Blob]"){var ue=new FileReader;ue.onload=function(){var Re=pe+q.type+"~"+yr(this.result);ne(je+et+Re)},ue.readAsArrayBuffer(q)}else try{ne(JSON.stringify(q))}catch(Re){console.error("Couldn't convert value into a JSON string: ",q),ne(null,Re)}}function $o(q){if(q.substring(0,tt)!==je)return JSON.parse(q);var ne=q.substring(Ir),V=q.substring(tt,Ir),he;if(V===et&&_e.test(ne)){var ve=ne.match(_e);he=ve[1],ne=ne.substring(ve[0].length)}var ue=rr(ne);switch(V){case Je:return ue;case et:return m([ue],{type:he});case yt:return new Int8Array(ue);case St:return new Uint8Array(ue);case ot:return new Uint8ClampedArray(ue);case Ke:return new Int16Array(ue);case gn:return new Uint16Array(ue);case gt:return new Int32Array(ue);case mn:return new Uint32Array(ue);case gr:return new Float32Array(ue);case Pn:return new Float64Array(ue);default:throw new Error("Unkown type: "+V)}}var ai={serialize:oi,deserialize:$o,stringToBuffer:rr,bufferToString:yr};function Po(q,ne,V,he){q.executeSql("CREATE TABLE IF NOT EXISTS "+ne.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],V,he)}function Ea(q){var ne=this,V={db:null};if(q)for(var he in q)V[he]=typeof q[he]!="string"?q[he].toString():q[he];var ve=new w(function(ue,Re){try{V.db=openDatabase(V.name,String(V.version),V.description,V.size)}catch(We){return Re(We)}V.db.transaction(function(We){Po(We,V,function(){ne._dbInfo=V,ue()},function(Ye,Ze){Re(Ze)})},Re)});return V.serializer=ai,ve}function li(q,ne,V,he,ve,ue){q.executeSql(V,he,ve,function(Re,We){We.code===We.SYNTAX_ERR?Re.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ne.storeName],function(Ye,Ze){Ze.rows.length?ue(Ye,We):Po(Ye,ne,function(){Ye.executeSql(V,he,ve,ue)},ue)},ue):ue(Re,We)},ue)}function Si(q,ne){var V=this;q=I(q);var he=new w(function(ve,ue){V.ready().then(function(){var Re=V._dbInfo;Re.db.transaction(function(We){li(We,Re,"SELECT * FROM "+Re.storeName+" WHERE key = ? LIMIT 1",[q],function(Ye,Ze){var Xe=Ze.rows.length?Ze.rows.item(0).value:null;Xe&&(Xe=Re.serializer.deserialize(Xe)),ve(Xe)},function(Ye,Ze){ue(Ze)})})}).catch(ue)});return _(he,ne),he}function Hi(q,ne){var V=this,he=new w(function(ve,ue){V.ready().then(function(){var Re=V._dbInfo;Re.db.transaction(function(We){li(We,Re,"SELECT * FROM "+Re.storeName,[],function(Ye,Ze){for(var Xe=Ze.rows,ht=Xe.length,xt=0;xt<ht;xt++){var Jt=Xe.item(xt),qt=Jt.value;if(qt&&(qt=Re.serializer.deserialize(qt)),qt=q(qt,Jt.key,xt+1),qt!==void 0){ve(qt);return}}ve()},function(Ye,Ze){ue(Ze)})})}).catch(ue)});return _(he,ne),he}function Oo(q,ne,V,he){var ve=this;q=I(q);var ue=new w(function(Re,We){ve.ready().then(function(){ne===void 0&&(ne=null);var Ye=ne,Ze=ve._dbInfo;Ze.serializer.serialize(ne,function(Xe,ht){ht?We(ht):Ze.db.transaction(function(xt){li(xt,Ze,"INSERT OR REPLACE INTO "+Ze.storeName+" (key, value) VALUES (?, ?)",[q,Xe],function(){Re(Ye)},function(Jt,qt){We(qt)})},function(xt){if(xt.code===xt.QUOTA_ERR){if(he>0){Re(Oo.apply(ve,[q,Ye,V,he-1]));return}We(xt)}})})}).catch(We)});return _(ue,V),ue}function Aa(q,ne,V){return Oo.apply(this,[q,ne,V,1])}function ir(q,ne){var V=this;q=I(q);var he=new w(function(ve,ue){V.ready().then(function(){var Re=V._dbInfo;Re.db.transaction(function(We){li(We,Re,"DELETE FROM "+Re.storeName+" WHERE key = ?",[q],function(){ve()},function(Ye,Ze){ue(Ze)})})}).catch(ue)});return _(he,ne),he}function Gn(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){var ue=ne._dbInfo;ue.db.transaction(function(Re){li(Re,ue,"DELETE FROM "+ue.storeName,[],function(){he()},function(We,Ye){ve(Ye)})})}).catch(ve)});return _(V,q),V}function qs(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){var ue=ne._dbInfo;ue.db.transaction(function(Re){li(Re,ue,"SELECT COUNT(key) as c FROM "+ue.storeName,[],function(We,Ye){var Ze=Ye.rows.item(0).c;he(Ze)},function(We,Ye){ve(Ye)})})}).catch(ve)});return _(V,q),V}function jl(q,ne){var V=this,he=new w(function(ve,ue){V.ready().then(function(){var Re=V._dbInfo;Re.db.transaction(function(We){li(We,Re,"SELECT key FROM "+Re.storeName+" WHERE id = ? LIMIT 1",[q+1],function(Ye,Ze){var Xe=Ze.rows.length?Ze.rows.item(0).key:null;ve(Xe)},function(Ye,Ze){ue(Ze)})})}).catch(ue)});return _(he,ne),he}function Ca(q){var ne=this,V=new w(function(he,ve){ne.ready().then(function(){var ue=ne._dbInfo;ue.db.transaction(function(Re){li(Re,ue,"SELECT key FROM "+ue.storeName,[],function(We,Ye){for(var Ze=[],Xe=0;Xe<Ye.rows.length;Xe++)Ze.push(Ye.rows.item(Xe).key);he(Ze)},function(We,Ye){ve(Ye)})})}).catch(ve)});return _(V,q),V}function Ta(q){return new w(function(ne,V){q.transaction(function(he){he.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,ue){for(var Re=[],We=0;We<ue.rows.length;We++)Re.push(ue.rows.item(We).name);ne({db:q,storeNames:Re})},function(ve,ue){V(ue)})},function(he){V(he)})})}function ci(q,ne){ne=C.apply(this,arguments);var V=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||V.name,q.storeName=q.storeName||V.storeName);var he=this,ve;return q.name?ve=new w(function(ue){var Re;q.name===V.name?Re=he._dbInfo.db:Re=openDatabase(q.name,"","",0),q.storeName?ue({db:Re,storeNames:[q.storeName]}):ue(Ta(Re))}).then(function(ue){return new w(function(Re,We){ue.db.transaction(function(Ye){function Ze(Jt){return new w(function(qt,yn){Ye.executeSql("DROP TABLE IF EXISTS "+Jt,[],function(){qt()},function(tn,Sn){yn(Sn)})})}for(var Xe=[],ht=0,xt=ue.storeNames.length;ht<xt;ht++)Xe.push(Ze(ue.storeNames[ht]));w.all(Xe).then(function(){Re()}).catch(function(Jt){We(Jt)})},function(Ye){We(Ye)})})}):ve=w.reject("Invalid arguments"),_(ve,ne),ve}var qi={_driver:"webSQLStorage",_initStorage:Ea,_support:te(),iterate:Hi,getItem:Si,setItem:Aa,removeItem:ir,clear:Gn,length:qs,key:jl,keys:Ca,dropInstance:ci};function fs(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function hs(q,ne){var V=q.name+"/";return q.storeName!==ne.storeName&&(V+=q.storeName+"/"),V}function zl(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function Hl(){return!zl()||localStorage.length>0}function ql(q){var ne=this,V={};if(q)for(var he in q)V[he]=q[he];return V.keyPrefix=hs(q,ne._defaultConfig),Hl()?(ne._dbInfo=V,V.serializer=ai,w.resolve()):w.reject()}function Ia(q){var ne=this,V=ne.ready().then(function(){for(var he=ne._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var ue=localStorage.key(ve);ue.indexOf(he)===0&&localStorage.removeItem(ue)}});return _(V,q),V}function Kl(q,ne){var V=this;q=I(q);var he=V.ready().then(function(){var ve=V._dbInfo,ue=localStorage.getItem(ve.keyPrefix+q);return ue&&(ue=ve.serializer.deserialize(ue)),ue});return _(he,ne),he}function Wl(q,ne){var V=this,he=V.ready().then(function(){for(var ve=V._dbInfo,ue=ve.keyPrefix,Re=ue.length,We=localStorage.length,Ye=1,Ze=0;Ze<We;Ze++){var Xe=localStorage.key(Ze);if(Xe.indexOf(ue)===0){var ht=localStorage.getItem(Xe);if(ht&&(ht=ve.serializer.deserialize(ht)),ht=q(ht,Xe.substring(Re),Ye++),ht!==void 0)return ht}}});return _(he,ne),he}function $a(q,ne){var V=this,he=V.ready().then(function(){var ve=V._dbInfo,ue;try{ue=localStorage.key(q)}catch{ue=null}return ue&&(ue=ue.substring(ve.keyPrefix.length)),ue});return _(he,ne),he}function Pa(q){var ne=this,V=ne.ready().then(function(){for(var he=ne._dbInfo,ve=localStorage.length,ue=[],Re=0;Re<ve;Re++){var We=localStorage.key(Re);We.indexOf(he.keyPrefix)===0&&ue.push(We.substring(he.keyPrefix.length))}return ue});return _(V,q),V}function Ki(q){var ne=this,V=ne.keys().then(function(he){return he.length});return _(V,q),V}function Oa(q,ne){var V=this;q=I(q);var he=V.ready().then(function(){var ve=V._dbInfo;localStorage.removeItem(ve.keyPrefix+q)});return _(he,ne),he}function No(q,ne,V){var he=this;q=I(q);var ve=he.ready().then(function(){ne===void 0&&(ne=null);var ue=ne;return new w(function(Re,We){var Ye=he._dbInfo;Ye.serializer.serialize(ne,function(Ze,Xe){if(Xe)We(Xe);else try{localStorage.setItem(Ye.keyPrefix+q,Ze),Re(ue)}catch(ht){(ht.name==="QuotaExceededError"||ht.name==="NS_ERROR_DOM_QUOTA_REACHED")&&We(ht),We(ht)}})})});return _(ve,V),ve}function Ro(q,ne){if(ne=C.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var V=this.config();q.name=q.name||V.name,q.storeName=q.storeName||V.storeName}var he=this,ve;return q.name?ve=new w(function(ue){q.storeName?ue(hs(q,he._defaultConfig)):ue(q.name+"/")}).then(function(ue){for(var Re=localStorage.length-1;Re>=0;Re--){var We=localStorage.key(Re);We.indexOf(ue)===0&&localStorage.removeItem(We)}}):ve=w.reject("Invalid arguments"),_(ve,ne),ve}var Ks={_driver:"localStorageWrapper",_initStorage:ql,_support:fs(),iterate:Wl,getItem:Kl,setItem:No,removeItem:Oa,clear:Ia,length:Ki,key:$a,keys:Pa,dropInstance:Ro},Na=function(ne,V){return ne===V||typeof ne=="number"&&typeof V=="number"&&isNaN(ne)&&isNaN(V)},Ws=function(ne,V){for(var he=ne.length,ve=0;ve<he;){if(Na(ne[ve],V))return!0;ve++}return!1},Wi=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},zr={},Mo={},Ei={INDEXEDDB:z,WEBSQL:qi,LOCALSTORAGE:Ks},Ra=[Ei.INDEXEDDB._driver,Ei.WEBSQL._driver,Ei.LOCALSTORAGE._driver],ds=["dropInstance"],Vi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ds),Ma={description:"",driver:Ra.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Vl(q,ne){q[ne]=function(){var V=arguments;return q.ready().then(function(){return q[ne].apply(q,V)})}}function Vs(){for(var q=1;q<arguments.length;q++){var ne=arguments[q];if(ne)for(var V in ne)ne.hasOwnProperty(V)&&(Wi(ne[V])?arguments[0][V]=ne[V].slice():arguments[0][V]=ne[V])}return arguments[0]}var Da=function(){function q(ne){a(this,q);for(var V in Ei)if(Ei.hasOwnProperty(V)){var he=Ei[V],ve=he._driver;this[V]=ve,zr[ve]||this.defineDriver(he)}this._defaultConfig=Vs({},Ma),this._config=Vs({},this._defaultConfig,ne),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(V){if((typeof V>"u"?"undefined":s(V))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var he in V){if(he==="storeName"&&(V[he]=V[he].replace(/\W/g,"_")),he==="version"&&typeof V[he]!="number")return new Error("Database version must be a number.");this._config[he]=V[he]}return"driver"in V&&V.driver?this.setDriver(this._config.driver):!0}else return typeof V=="string"?this._config[V]:this._config},q.prototype.defineDriver=function(V,he,ve){var ue=new w(function(Re,We){try{var Ye=V._driver,Ze=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!V._driver){We(Ze);return}for(var Xe=Vi.concat("_initStorage"),ht=0,xt=Xe.length;ht<xt;ht++){var Jt=Xe[ht],qt=!Ws(ds,Jt);if((qt||V[Jt])&&typeof V[Jt]!="function"){We(Ze);return}}var yn=function(){for(var sr=function(Gs){return function(){var Fa=new Error("Method "+Gs+" is not implemented by the current driver"),Bo=w.reject(Fa);return _(Bo,arguments[arguments.length-1]),Bo}},ps=0,Ba=ds.length;ps<Ba;ps++){var ui=ds[ps];V[ui]||(V[ui]=sr(ui))}};yn();var tn=function(sr){zr[Ye]&&console.info("Redefining LocalForage driver: "+Ye),zr[Ye]=V,Mo[Ye]=sr,Re()};"_support"in V?V._support&&typeof V._support=="function"?V._support().then(tn,We):tn(!!V._support):tn(!0)}catch(Sn){We(Sn)}});return A(ue,he,ve),ue},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(V,he,ve){var ue=zr[V]?w.resolve(zr[V]):w.reject(new Error("Driver not found."));return A(ue,he,ve),ue},q.prototype.getSerializer=function(V){var he=w.resolve(ai);return A(he,V),he},q.prototype.ready=function(V){var he=this,ve=he._driverSet.then(function(){return he._ready===null&&(he._ready=he._initDriver()),he._ready});return A(ve,V,V),ve},q.prototype.setDriver=function(V,he,ve){var ue=this;Wi(V)||(V=[V]);var Re=this._getSupportedDrivers(V);function We(){ue._config.driver=ue.driver()}function Ye(ht){return ue._extend(ht),We(),ue._ready=ue._initStorage(ue._config),ue._ready}function Ze(ht){return function(){var xt=0;function Jt(){for(;xt<ht.length;){var qt=ht[xt];return xt++,ue._dbInfo=null,ue._ready=null,ue.getDriver(qt).then(Ye).catch(Jt)}We();var yn=new Error("No available storage method found.");return ue._driverSet=w.reject(yn),ue._driverSet}return Jt()}}var Xe=this._driverSet!==null?this._driverSet.catch(function(){return w.resolve()}):w.resolve();return this._driverSet=Xe.then(function(){var ht=Re[0];return ue._dbInfo=null,ue._ready=null,ue.getDriver(ht).then(function(xt){ue._driver=xt._driver,We(),ue._wrapLibraryMethodsWithReady(),ue._initDriver=Ze(Re)})}).catch(function(){We();var ht=new Error("No available storage method found.");return ue._driverSet=w.reject(ht),ue._driverSet}),A(this._driverSet,he,ve),this._driverSet},q.prototype.supports=function(V){return!!Mo[V]},q.prototype._extend=function(V){Vs(this,V)},q.prototype._getSupportedDrivers=function(V){for(var he=[],ve=0,ue=V.length;ve<ue;ve++){var Re=V[ve];this.supports(Re)&&he.push(Re)}return he},q.prototype._wrapLibraryMethodsWithReady=function(){for(var V=0,he=Vi.length;V<he;V++)Vl(this,Vi[V])},q.prototype.createInstance=function(V){return new q(V)},q}(),Do=new Da;r.exports=Do},{3:3}]},{},[4])(4)})})(G_);var QI=G_.exports;const In=jr(QI);var ah={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ah.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",b=500,m="__lodash_placeholder__",w=1,_=2,A=4,I=1,C=2,R=1,$=2,L=4,P=8,N=16,M=32,U=64,p=128,Z=256,J=512,ce=30,me="...",ke=800,we=16,Q=1,G=2,Ae=3,Te=1/0,qe=9007199254740991,ze=17976931348623157e292,Qe=0/0,nt=4294967295,Fe=nt-1,He=nt>>>1,$e=[["ary",p],["bind",R],["bindKey",$],["curry",P],["curryRight",N],["flip",J],["partial",M],["partialRight",U],["rearg",Z]],Me="[object Arguments]",fe="[object Array]",pt="[object AsyncFunction]",h="[object Boolean]",v="[object Date]",k="[object DOMException]",T="[object Error]",O="[object Function]",z="[object GeneratorFunction]",te="[object Map]",ie="[object Number]",pe="[object Null]",_e="[object Object]",je="[object Promise]",tt="[object Proxy]",Je="[object RegExp]",et="[object Set]",yt="[object String]",St="[object Symbol]",ot="[object Undefined]",Ke="[object WeakMap]",gt="[object WeakSet]",gn="[object ArrayBuffer]",mn="[object DataView]",gr="[object Float32Array]",Pn="[object Float64Array]",Ir="[object Int8Array]",si="[object Int16Array]",rr="[object Int32Array]",yr="[object Uint8Array]",oi="[object Uint8ClampedArray]",$o="[object Uint16Array]",ai="[object Uint32Array]",Po=/\b__p \+= '';/g,Ea=/\b(__p \+=) '' \+/g,li=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Si=/&(?:amp|lt|gt|quot|#39);/g,Hi=/[&<>"']/g,Oo=RegExp(Si.source),Aa=RegExp(Hi.source),ir=/<%-([\s\S]+?)%>/g,Gn=/<%([\s\S]+?)%>/g,qs=/<%=([\s\S]+?)%>/g,jl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ca=/^\w*$/,Ta=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ci=/[\\^$.*+?()[\]{}|]/g,qi=RegExp(ci.source),fs=/^\s+/,hs=/\s/,zl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hl=/\{\n\/\* \[wrapped with (.+)\] \*/,ql=/,? & /,Ia=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Kl=/[()=,{}\[\]\/\s]/,Wl=/\\(\\)?/g,$a=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pa=/\w*$/,Ki=/^[-+]0x[0-9a-f]+$/i,Oa=/^0b[01]+$/i,No=/^\[object .+?Constructor\]$/,Ro=/^0o[0-7]+$/i,Ks=/^(?:0|[1-9]\d*)$/,Na=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ws=/($^)/,Wi=/['\n\r\u2028\u2029\\]/g,zr="\\ud800-\\udfff",Mo="\\u0300-\\u036f",Ei="\\ufe20-\\ufe2f",Ra="\\u20d0-\\u20ff",ds=Mo+Ei+Ra,Vi="\\u2700-\\u27bf",Ma="a-z\\xdf-\\xf6\\xf8-\\xff",Vl="\\xac\\xb1\\xd7\\xf7",Vs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Da="\\u2000-\\u206f",Do=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",q="A-Z\\xc0-\\xd6\\xd8-\\xde",ne="\\ufe0e\\ufe0f",V=Vl+Vs+Da+Do,he="[']",ve="["+zr+"]",ue="["+V+"]",Re="["+ds+"]",We="\\d+",Ye="["+Vi+"]",Ze="["+Ma+"]",Xe="[^"+zr+V+We+Vi+Ma+q+"]",ht="\\ud83c[\\udffb-\\udfff]",xt="(?:"+Re+"|"+ht+")",Jt="[^"+zr+"]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="["+q+"]",Sn="\\u200d",sr="(?:"+Ze+"|"+Xe+")",ps="(?:"+tn+"|"+Xe+")",Ba="(?:"+he+"(?:d|ll|m|re|s|t|ve))?",ui="(?:"+he+"(?:D|LL|M|RE|S|T|VE))?",La=xt+"?",Gs="["+ne+"]?",Fa="(?:"+Sn+"(?:"+[Jt,qt,yn].join("|")+")"+Gs+La+")*",Bo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gl=Gs+La+Fa,Od="(?:"+[Ye,qt,yn].join("|")+")"+Gl,Nd="(?:"+[Jt+Re+"?",Re,qt,yn,ve].join("|")+")",Yl=RegExp(he,"g"),Rd=RegExp(Re,"g"),Zl=RegExp(ht+"(?="+ht+")|"+Nd+Gl,"g"),Md=RegExp([tn+"?"+Ze+"+"+Ba+"(?="+[ue,tn,"$"].join("|")+")",ps+"+"+ui+"(?="+[ue,tn+sr,"$"].join("|")+")",tn+"?"+sr+"+"+Ba,tn+"+"+ui,Pd,Bo,We,Od].join("|"),"g"),Dd=RegExp("["+Sn+zr+ds+ne+"]"),Bd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ld=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fd=-1,ln={};ln[gr]=ln[Pn]=ln[Ir]=ln[si]=ln[rr]=ln[yr]=ln[oi]=ln[$o]=ln[ai]=!0,ln[Me]=ln[fe]=ln[gn]=ln[h]=ln[mn]=ln[v]=ln[T]=ln[O]=ln[te]=ln[ie]=ln[_e]=ln[Je]=ln[et]=ln[yt]=ln[Ke]=!1;var nn={};nn[Me]=nn[fe]=nn[gn]=nn[mn]=nn[h]=nn[v]=nn[gr]=nn[Pn]=nn[Ir]=nn[si]=nn[rr]=nn[te]=nn[ie]=nn[_e]=nn[Je]=nn[et]=nn[yt]=nn[St]=nn[yr]=nn[oi]=nn[$o]=nn[ai]=!0,nn[T]=nn[O]=nn[Ke]=!1;var Eu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Jl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Au={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xl=parseFloat,Ud=parseInt,Tu=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,jd=typeof self=="object"&&self&&self.Object===Object&&self,En=Tu||jd||Function("return this")(),Ua=t&&!t.nodeType&&t,Ai=Ua&&!0&&e&&!e.nodeType&&e,Iu=Ai&&Ai.exports===Ua,Ql=Iu&&Tu.process,$r=function(){try{var W=Ai&&Ai.require&&Ai.require("util").types;return W||Ql&&Ql.binding&&Ql.binding("util")}catch{}}(),u=$r&&$r.isArrayBuffer,y=$r&&$r.isDate,x=$r&&$r.isMap,E=$r&&$r.isRegExp,D=$r&&$r.isSet,B=$r&&$r.isTypedArray;function j(W,oe,se){switch(se.length){case 0:return W.call(oe);case 1:return W.call(oe,se[0]);case 2:return W.call(oe,se[0],se[1]);case 3:return W.call(oe,se[0],se[1],se[2])}return W.apply(oe,se)}function re(W,oe,se,Ne){for(var Be=-1,lt=W==null?0:W.length;++Be<lt;){var ct=W[Be];oe(Ne,ct,se(ct),W)}return Ne}function X(W,oe){for(var se=-1,Ne=W==null?0:W.length;++se<Ne&&oe(W[se],se,W)!==!1;);return W}function ge(W,oe){for(var se=W==null?0:W.length;se--&&oe(W[se],se,W)!==!1;);return W}function Ie(W,oe){for(var se=-1,Ne=W==null?0:W.length;++se<Ne;)if(!oe(W[se],se,W))return!1;return!0}function Oe(W,oe){for(var se=-1,Ne=W==null?0:W.length,Be=0,lt=[];++se<Ne;){var ct=W[se];oe(ct,se,W)&&(lt[Be++]=ct)}return lt}function Ee(W,oe){var se=W==null?0:W.length;return!!se&&sn(W,oe,0)>-1}function Ge(W,oe,se){for(var Ne=-1,Be=W==null?0:W.length;++Ne<Be;)if(se(oe,W[Ne]))return!0;return!1}function at(W,oe){for(var se=-1,Ne=W==null?0:W.length,Be=Array(Ne);++se<Ne;)Be[se]=oe(W[se],se,W);return Be}function Mt(W,oe){for(var se=-1,Ne=oe.length,Be=W.length;++se<Ne;)W[Be+se]=oe[se];return W}function Rt(W,oe,se,Ne){var Be=-1,lt=W==null?0:W.length;for(Ne&&lt&&(se=W[++Be]);++Be<lt;)se=oe(se,W[Be],Be,W);return se}function Un(W,oe,se,Ne){var Be=W==null?0:W.length;for(Ne&&Be&&(se=W[--Be]);Be--;)se=oe(se,W[Be],Be,W);return se}function An(W,oe){for(var se=-1,Ne=W==null?0:W.length;++se<Ne;)if(oe(W[se],se,W))return!0;return!1}var fi=gs("length");function hi(W){return W.split("")}function Vt(W){return W.match(Ia)||[]}function Gi(W,oe,se){var Ne;return se(W,function(Be,lt,ct){if(oe(Be,lt,ct))return Ne=lt,!1}),Ne}function Gt(W,oe,se,Ne){for(var Be=W.length,lt=se+(Ne?1:-1);Ne?lt--:++lt<Be;)if(oe(W[lt],lt,W))return lt;return-1}function sn(W,oe,se){return oe===oe?qd(W,oe,se):Gt(W,ja,se)}function Lo(W,oe,se,Ne){for(var Be=se-1,lt=W.length;++Be<lt;)if(Ne(W[Be],oe))return Be;return-1}function ja(W){return W!==W}function Hr(W,oe){var se=W==null?0:W.length;return se?or(W,oe)/se:Qe}function gs(W){return function(oe){return oe==null?n:oe[W]}}function Pr(W){return function(oe){return W==null?n:W[oe]}}function Ci(W,oe,se,Ne,Be){return Be(W,function(lt,ct,st){se=Ne?(Ne=!1,lt):oe(se,lt,ct,st)}),se}function Yi(W,oe){var se=W.length;for(W.sort(oe);se--;)W[se]=W[se].value;return W}function or(W,oe){for(var se,Ne=-1,Be=W.length;++Ne<Be;){var lt=oe(W[Ne]);lt!==n&&(se=se===n?lt:se+lt)}return se}function Fo(W,oe){for(var se=-1,Ne=Array(W);++se<W;)Ne[se]=oe(se);return Ne}function Ti(W,oe){return at(oe,function(se){return[se,W[se]]})}function di(W){return W&&W.slice(0,Pu(W)+1).replace(fs,"")}function mr(W){return function(oe){return W(oe)}}function ec(W,oe){return at(oe,function(se){return W[se]})}function Uo(W,oe){return W.has(oe)}function en(W,oe){for(var se=-1,Ne=W.length;++se<Ne&&sn(oe,W[se],0)>-1;);return se}function jo(W,oe){for(var se=W.length;se--&&sn(oe,W[se],0)>-1;);return se}function qr(W,oe){for(var se=W.length,Ne=0;se--;)W[se]===oe&&++Ne;return Ne}var Ys=Pr(Eu),zd=Pr(Jl);function Hd(W){return"\\"+Cu[W]}function $u(W,oe){return W==null?n:W[oe]}function Or(W){return Dd.test(W)}function tc(W){return Bd.test(W)}function Zi(W){for(var oe,se=[];!(oe=W.next()).done;)se.push(oe.value);return se}function za(W){var oe=-1,se=Array(W.size);return W.forEach(function(Ne,Be){se[++oe]=[Be,Ne]}),se}function zo(W,oe){return function(se){return W(oe(se))}}function Kr(W,oe){for(var se=-1,Ne=W.length,Be=0,lt=[];++se<Ne;){var ct=W[se];(ct===oe||ct===m)&&(W[se]=m,lt[Be++]=se)}return lt}function ys(W){var oe=-1,se=Array(W.size);return W.forEach(function(Ne){se[++oe]=Ne}),se}function nc(W){var oe=-1,se=Array(W.size);return W.forEach(function(Ne){se[++oe]=[Ne,Ne]}),se}function qd(W,oe,se){for(var Ne=se-1,Be=W.length;++Ne<Be;)if(W[Ne]===oe)return Ne;return-1}function Ha(W,oe,se){for(var Ne=se+1;Ne--;)if(W[Ne]===oe)return Ne;return Ne}function Ji(W){return Or(W)?Ou(W):fi(W)}function vr(W){return Or(W)?Y(W):hi(W)}function Pu(W){for(var oe=W.length;oe--&&hs.test(W.charAt(oe)););return oe}var rc=Pr(Au);function Ou(W){for(var oe=Zl.lastIndex=0;Zl.test(W);)++oe;return oe}function Y(W){return W.match(Zl)||[]}function le(W){return W.match(Md)||[]}var Se=function W(oe){oe=oe==null?En:Ce.defaults(En.Object(),oe,Ce.pick(En,Ld));var se=oe.Array,Ne=oe.Date,Be=oe.Error,lt=oe.Function,ct=oe.Math,st=oe.Object,Ut=oe.RegExp,wt=oe.String,Kt=oe.TypeError,jn=se.prototype,Yn=lt.prototype,zn=st.prototype,br=oe["__core-js_shared__"],Ii=Yn.toString,Ot=zn.hasOwnProperty,Rk=0,c0=function(){var o=/[^.]+$/.exec(br&&br.keys&&br.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Nu=zn.toString,Mk=Ii.call(st),Dk=En._,Bk=Ut("^"+Ii.call(Ot).replace(ci,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ru=Iu?oe.Buffer:n,Zs=oe.Symbol,Mu=oe.Uint8Array,u0=Ru?Ru.allocUnsafe:n,Du=zo(st.getPrototypeOf,st),f0=st.create,h0=zn.propertyIsEnumerable,Bu=jn.splice,d0=Zs?Zs.isConcatSpreadable:n,ic=Zs?Zs.iterator:n,Ho=Zs?Zs.toStringTag:n,Lu=function(){try{var o=Go(st,"defineProperty");return o({},"",{}),o}catch{}}(),Lk=oe.clearTimeout!==En.clearTimeout&&oe.clearTimeout,Fk=Ne&&Ne.now!==En.Date.now&&Ne.now,Uk=oe.setTimeout!==En.setTimeout&&oe.setTimeout,Fu=ct.ceil,Uu=ct.floor,Kd=st.getOwnPropertySymbols,jk=Ru?Ru.isBuffer:n,p0=oe.isFinite,zk=jn.join,Hk=zo(st.keys,st),Hn=ct.max,ar=ct.min,qk=Ne.now,Kk=oe.parseInt,g0=ct.random,Wk=jn.reverse,Wd=Go(oe,"DataView"),sc=Go(oe,"Map"),Vd=Go(oe,"Promise"),qa=Go(oe,"Set"),oc=Go(oe,"WeakMap"),ac=Go(st,"create"),ju=oc&&new oc,Ka={},Vk=Yo(Wd),Gk=Yo(sc),Yk=Yo(Vd),Zk=Yo(qa),Jk=Yo(oc),zu=Zs?Zs.prototype:n,lc=zu?zu.valueOf:n,y0=zu?zu.toString:n;function H(o){if(On(o)&&!Dt(o)&&!(o instanceof Xt)){if(o instanceof pi)return o;if(Ot.call(o,"__wrapped__"))return mv(o)}return new pi(o)}var Wa=function(){function o(){}return function(l){if(!Cn(l))return{};if(f0)return f0(l);o.prototype=l;var g=new o;return o.prototype=n,g}}();function Hu(){}function pi(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}H.templateSettings={escape:ir,evaluate:Gn,interpolate:qs,variable:"",imports:{_:H}},H.prototype=Hu.prototype,H.prototype.constructor=H,pi.prototype=Wa(Hu.prototype),pi.prototype.constructor=pi;function Xt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function Xk(){var o=new Xt(this.__wrapped__);return o.__actions__=Nr(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=Nr(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=Nr(this.__views__),o}function Qk(){if(this.__filtered__){var o=new Xt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function e3(){var o=this.__wrapped__.value(),l=this.__dir__,g=Dt(o),S=l<0,F=g?o.length:0,K=hS(0,F,this.__views__),ee=K.start,ae=K.end,be=ae-ee,Le=S?ae:ee-1,Ue=this.__iteratees__,Ve=Ue.length,it=0,mt=ar(be,this.__takeCount__);if(!g||!S&&F==be&&mt==be)return U0(o,this.__actions__);var Et=[];e:for(;be--&&it<mt;){Le+=l;for(var zt=-1,At=o[Le];++zt<Ve;){var Yt=Ue[zt],Qt=Yt.iteratee,Gr=Yt.type,xr=Qt(At);if(Gr==G)At=xr;else if(!xr){if(Gr==Q)continue e;break e}}Et[it++]=At}return Et}Xt.prototype=Wa(Hu.prototype),Xt.prototype.constructor=Xt;function qo(o){var l=-1,g=o==null?0:o.length;for(this.clear();++l<g;){var S=o[l];this.set(S[0],S[1])}}function t3(){this.__data__=ac?ac(null):{},this.size=0}function n3(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function r3(o){var l=this.__data__;if(ac){var g=l[o];return g===f?n:g}return Ot.call(l,o)?l[o]:n}function i3(o){var l=this.__data__;return ac?l[o]!==n:Ot.call(l,o)}function s3(o,l){var g=this.__data__;return this.size+=this.has(o)?0:1,g[o]=ac&&l===n?f:l,this}qo.prototype.clear=t3,qo.prototype.delete=n3,qo.prototype.get=r3,qo.prototype.has=i3,qo.prototype.set=s3;function ms(o){var l=-1,g=o==null?0:o.length;for(this.clear();++l<g;){var S=o[l];this.set(S[0],S[1])}}function o3(){this.__data__=[],this.size=0}function a3(o){var l=this.__data__,g=qu(l,o);if(g<0)return!1;var S=l.length-1;return g==S?l.pop():Bu.call(l,g,1),--this.size,!0}function l3(o){var l=this.__data__,g=qu(l,o);return g<0?n:l[g][1]}function c3(o){return qu(this.__data__,o)>-1}function u3(o,l){var g=this.__data__,S=qu(g,o);return S<0?(++this.size,g.push([o,l])):g[S][1]=l,this}ms.prototype.clear=o3,ms.prototype.delete=a3,ms.prototype.get=l3,ms.prototype.has=c3,ms.prototype.set=u3;function vs(o){var l=-1,g=o==null?0:o.length;for(this.clear();++l<g;){var S=o[l];this.set(S[0],S[1])}}function f3(){this.size=0,this.__data__={hash:new qo,map:new(sc||ms),string:new qo}}function h3(o){var l=nf(this,o).delete(o);return this.size-=l?1:0,l}function d3(o){return nf(this,o).get(o)}function p3(o){return nf(this,o).has(o)}function g3(o,l){var g=nf(this,o),S=g.size;return g.set(o,l),this.size+=g.size==S?0:1,this}vs.prototype.clear=f3,vs.prototype.delete=h3,vs.prototype.get=d3,vs.prototype.has=p3,vs.prototype.set=g3;function Ko(o){var l=-1,g=o==null?0:o.length;for(this.__data__=new vs;++l<g;)this.add(o[l])}function y3(o){return this.__data__.set(o,f),this}function m3(o){return this.__data__.has(o)}Ko.prototype.add=Ko.prototype.push=y3,Ko.prototype.has=m3;function $i(o){var l=this.__data__=new ms(o);this.size=l.size}function v3(){this.__data__=new ms,this.size=0}function b3(o){var l=this.__data__,g=l.delete(o);return this.size=l.size,g}function w3(o){return this.__data__.get(o)}function _3(o){return this.__data__.has(o)}function x3(o,l){var g=this.__data__;if(g instanceof ms){var S=g.__data__;if(!sc||S.length<i-1)return S.push([o,l]),this.size=++g.size,this;g=this.__data__=new vs(S)}return g.set(o,l),this.size=g.size,this}$i.prototype.clear=v3,$i.prototype.delete=b3,$i.prototype.get=w3,$i.prototype.has=_3,$i.prototype.set=x3;function m0(o,l){var g=Dt(o),S=!g&&Zo(o),F=!g&&!S&&to(o),K=!g&&!S&&!F&&Za(o),ee=g||S||F||K,ae=ee?Fo(o.length,wt):[],be=ae.length;for(var Le in o)(l||Ot.call(o,Le))&&!(ee&&(Le=="length"||F&&(Le=="offset"||Le=="parent")||K&&(Le=="buffer"||Le=="byteLength"||Le=="byteOffset")||xs(Le,be)))&&ae.push(Le);return ae}function v0(o){var l=o.length;return l?o[ip(0,l-1)]:n}function k3(o,l){return rf(Nr(o),Wo(l,0,o.length))}function S3(o){return rf(Nr(o))}function Gd(o,l,g){(g!==n&&!Pi(o[l],g)||g===n&&!(l in o))&&bs(o,l,g)}function cc(o,l,g){var S=o[l];(!(Ot.call(o,l)&&Pi(S,g))||g===n&&!(l in o))&&bs(o,l,g)}function qu(o,l){for(var g=o.length;g--;)if(Pi(o[g][0],l))return g;return-1}function E3(o,l,g,S){return Js(o,function(F,K,ee){l(S,F,g(F),ee)}),S}function b0(o,l){return o&&Qi(l,Zn(l),o)}function A3(o,l){return o&&Qi(l,Mr(l),o)}function bs(o,l,g){l=="__proto__"&&Lu?Lu(o,l,{configurable:!0,enumerable:!0,value:g,writable:!0}):o[l]=g}function Yd(o,l){for(var g=-1,S=l.length,F=se(S),K=o==null;++g<S;)F[g]=K?n:Ip(o,l[g]);return F}function Wo(o,l,g){return o===o&&(g!==n&&(o=o<=g?o:g),l!==n&&(o=o>=l?o:l)),o}function gi(o,l,g,S,F,K){var ee,ae=l&w,be=l&_,Le=l&A;if(g&&(ee=F?g(o,S,F,K):g(o)),ee!==n)return ee;if(!Cn(o))return o;var Ue=Dt(o);if(Ue){if(ee=pS(o),!ae)return Nr(o,ee)}else{var Ve=lr(o),it=Ve==O||Ve==z;if(to(o))return H0(o,ae);if(Ve==_e||Ve==Me||it&&!F){if(ee=be||it?{}:lv(o),!ae)return be?rS(o,A3(ee,o)):nS(o,b0(ee,o))}else{if(!nn[Ve])return F?o:{};ee=gS(o,Ve,ae)}}K||(K=new $i);var mt=K.get(o);if(mt)return mt;K.set(o,ee),Bv(o)?o.forEach(function(At){ee.add(gi(At,l,g,At,o,K))}):Mv(o)&&o.forEach(function(At,Yt){ee.set(Yt,gi(At,l,g,Yt,o,K))});var Et=Le?be?gp:pp:be?Mr:Zn,zt=Ue?n:Et(o);return X(zt||o,function(At,Yt){zt&&(Yt=At,At=o[Yt]),cc(ee,Yt,gi(At,l,g,Yt,o,K))}),ee}function C3(o){var l=Zn(o);return function(g){return w0(g,o,l)}}function w0(o,l,g){var S=g.length;if(o==null)return!S;for(o=st(o);S--;){var F=g[S],K=l[F],ee=o[F];if(ee===n&&!(F in o)||!K(ee))return!1}return!0}function _0(o,l,g){if(typeof o!="function")throw new Kt(a);return yc(function(){o.apply(n,g)},l)}function uc(o,l,g,S){var F=-1,K=Ee,ee=!0,ae=o.length,be=[],Le=l.length;if(!ae)return be;g&&(l=at(l,mr(g))),S?(K=Ge,ee=!1):l.length>=i&&(K=Uo,ee=!1,l=new Ko(l));e:for(;++F<ae;){var Ue=o[F],Ve=g==null?Ue:g(Ue);if(Ue=S||Ue!==0?Ue:0,ee&&Ve===Ve){for(var it=Le;it--;)if(l[it]===Ve)continue e;be.push(Ue)}else K(l,Ve,S)||be.push(Ue)}return be}var Js=G0(Xi),x0=G0(Jd,!0);function T3(o,l){var g=!0;return Js(o,function(S,F,K){return g=!!l(S,F,K),g}),g}function Ku(o,l,g){for(var S=-1,F=o.length;++S<F;){var K=o[S],ee=l(K);if(ee!=null&&(ae===n?ee===ee&&!Vr(ee):g(ee,ae)))var ae=ee,be=K}return be}function I3(o,l,g,S){var F=o.length;for(g=jt(g),g<0&&(g=-g>F?0:F+g),S=S===n||S>F?F:jt(S),S<0&&(S+=F),S=g>S?0:Fv(S);g<S;)o[g++]=l;return o}function k0(o,l){var g=[];return Js(o,function(S,F,K){l(S,F,K)&&g.push(S)}),g}function tr(o,l,g,S,F){var K=-1,ee=o.length;for(g||(g=mS),F||(F=[]);++K<ee;){var ae=o[K];l>0&&g(ae)?l>1?tr(ae,l-1,g,S,F):Mt(F,ae):S||(F[F.length]=ae)}return F}var Zd=Y0(),S0=Y0(!0);function Xi(o,l){return o&&Zd(o,l,Zn)}function Jd(o,l){return o&&S0(o,l,Zn)}function Wu(o,l){return Oe(l,function(g){return ks(o[g])})}function Vo(o,l){l=Qs(l,o);for(var g=0,S=l.length;o!=null&&g<S;)o=o[es(l[g++])];return g&&g==S?o:n}function E0(o,l,g){var S=l(o);return Dt(o)?S:Mt(S,g(o))}function wr(o){return o==null?o===n?ot:pe:Ho&&Ho in st(o)?fS(o):SS(o)}function Xd(o,l){return o>l}function $3(o,l){return o!=null&&Ot.call(o,l)}function P3(o,l){return o!=null&&l in st(o)}function O3(o,l,g){return o>=ar(l,g)&&o<Hn(l,g)}function Qd(o,l,g){for(var S=g?Ge:Ee,F=o[0].length,K=o.length,ee=K,ae=se(K),be=1/0,Le=[];ee--;){var Ue=o[ee];ee&&l&&(Ue=at(Ue,mr(l))),be=ar(Ue.length,be),ae[ee]=!g&&(l||F>=120&&Ue.length>=120)?new Ko(ee&&Ue):n}Ue=o[0];var Ve=-1,it=ae[0];e:for(;++Ve<F&&Le.length<be;){var mt=Ue[Ve],Et=l?l(mt):mt;if(mt=g||mt!==0?mt:0,!(it?Uo(it,Et):S(Le,Et,g))){for(ee=K;--ee;){var zt=ae[ee];if(!(zt?Uo(zt,Et):S(o[ee],Et,g)))continue e}it&&it.push(Et),Le.push(mt)}}return Le}function N3(o,l,g,S){return Xi(o,function(F,K,ee){l(S,g(F),K,ee)}),S}function fc(o,l,g){l=Qs(l,o),o=hv(o,l);var S=o==null?o:o[es(mi(l))];return S==null?n:j(S,o,g)}function A0(o){return On(o)&&wr(o)==Me}function R3(o){return On(o)&&wr(o)==gn}function M3(o){return On(o)&&wr(o)==v}function hc(o,l,g,S,F){return o===l?!0:o==null||l==null||!On(o)&&!On(l)?o!==o&&l!==l:D3(o,l,g,S,hc,F)}function D3(o,l,g,S,F,K){var ee=Dt(o),ae=Dt(l),be=ee?fe:lr(o),Le=ae?fe:lr(l);be=be==Me?_e:be,Le=Le==Me?_e:Le;var Ue=be==_e,Ve=Le==_e,it=be==Le;if(it&&to(o)){if(!to(l))return!1;ee=!0,Ue=!1}if(it&&!Ue)return K||(K=new $i),ee||Za(o)?sv(o,l,g,S,F,K):cS(o,l,be,g,S,F,K);if(!(g&I)){var mt=Ue&&Ot.call(o,"__wrapped__"),Et=Ve&&Ot.call(l,"__wrapped__");if(mt||Et){var zt=mt?o.value():o,At=Et?l.value():l;return K||(K=new $i),F(zt,At,g,S,K)}}return it?(K||(K=new $i),uS(o,l,g,S,F,K)):!1}function B3(o){return On(o)&&lr(o)==te}function ep(o,l,g,S){var F=g.length,K=F,ee=!S;if(o==null)return!K;for(o=st(o);F--;){var ae=g[F];if(ee&&ae[2]?ae[1]!==o[ae[0]]:!(ae[0]in o))return!1}for(;++F<K;){ae=g[F];var be=ae[0],Le=o[be],Ue=ae[1];if(ee&&ae[2]){if(Le===n&&!(be in o))return!1}else{var Ve=new $i;if(S)var it=S(Le,Ue,be,o,l,Ve);if(!(it===n?hc(Ue,Le,I|C,S,Ve):it))return!1}}return!0}function C0(o){if(!Cn(o)||bS(o))return!1;var l=ks(o)?Bk:No;return l.test(Yo(o))}function L3(o){return On(o)&&wr(o)==Je}function F3(o){return On(o)&&lr(o)==et}function U3(o){return On(o)&&uf(o.length)&&!!ln[wr(o)]}function T0(o){return typeof o=="function"?o:o==null?Dr:typeof o=="object"?Dt(o)?P0(o[0],o[1]):$0(o):Zv(o)}function tp(o){if(!gc(o))return Hk(o);var l=[];for(var g in st(o))Ot.call(o,g)&&g!="constructor"&&l.push(g);return l}function j3(o){if(!Cn(o))return kS(o);var l=gc(o),g=[];for(var S in o)S=="constructor"&&(l||!Ot.call(o,S))||g.push(S);return g}function np(o,l){return o<l}function I0(o,l){var g=-1,S=Rr(o)?se(o.length):[];return Js(o,function(F,K,ee){S[++g]=l(F,K,ee)}),S}function $0(o){var l=mp(o);return l.length==1&&l[0][2]?uv(l[0][0],l[0][1]):function(g){return g===o||ep(g,o,l)}}function P0(o,l){return bp(o)&&cv(l)?uv(es(o),l):function(g){var S=Ip(g,o);return S===n&&S===l?$p(g,o):hc(l,S,I|C)}}function Vu(o,l,g,S,F){o!==l&&Zd(l,function(K,ee){if(F||(F=new $i),Cn(K))z3(o,l,ee,g,Vu,S,F);else{var ae=S?S(_p(o,ee),K,ee+"",o,l,F):n;ae===n&&(ae=K),Gd(o,ee,ae)}},Mr)}function z3(o,l,g,S,F,K,ee){var ae=_p(o,g),be=_p(l,g),Le=ee.get(be);if(Le){Gd(o,g,Le);return}var Ue=K?K(ae,be,g+"",o,l,ee):n,Ve=Ue===n;if(Ve){var it=Dt(be),mt=!it&&to(be),Et=!it&&!mt&&Za(be);Ue=be,it||mt||Et?Dt(ae)?Ue=ae:Rn(ae)?Ue=Nr(ae):mt?(Ve=!1,Ue=H0(be,!0)):Et?(Ve=!1,Ue=q0(be,!0)):Ue=[]:mc(be)||Zo(be)?(Ue=ae,Zo(ae)?Ue=Uv(ae):(!Cn(ae)||ks(ae))&&(Ue=lv(be))):Ve=!1}Ve&&(ee.set(be,Ue),F(Ue,be,S,K,ee),ee.delete(be)),Gd(o,g,Ue)}function O0(o,l){var g=o.length;if(g)return l+=l<0?g:0,xs(l,g)?o[l]:n}function N0(o,l,g){l.length?l=at(l,function(K){return Dt(K)?function(ee){return Vo(ee,K.length===1?K[0]:K)}:K}):l=[Dr];var S=-1;l=at(l,mr(kt()));var F=I0(o,function(K,ee,ae){var be=at(l,function(Le){return Le(K)});return{criteria:be,index:++S,value:K}});return Yi(F,function(K,ee){return tS(K,ee,g)})}function H3(o,l){return R0(o,l,function(g,S){return $p(o,S)})}function R0(o,l,g){for(var S=-1,F=l.length,K={};++S<F;){var ee=l[S],ae=Vo(o,ee);g(ae,ee)&&dc(K,Qs(ee,o),ae)}return K}function q3(o){return function(l){return Vo(l,o)}}function rp(o,l,g,S){var F=S?Lo:sn,K=-1,ee=l.length,ae=o;for(o===l&&(l=Nr(l)),g&&(ae=at(o,mr(g)));++K<ee;)for(var be=0,Le=l[K],Ue=g?g(Le):Le;(be=F(ae,Ue,be,S))>-1;)ae!==o&&Bu.call(ae,be,1),Bu.call(o,be,1);return o}function M0(o,l){for(var g=o?l.length:0,S=g-1;g--;){var F=l[g];if(g==S||F!==K){var K=F;xs(F)?Bu.call(o,F,1):ap(o,F)}}return o}function ip(o,l){return o+Uu(g0()*(l-o+1))}function K3(o,l,g,S){for(var F=-1,K=Hn(Fu((l-o)/(g||1)),0),ee=se(K);K--;)ee[S?K:++F]=o,o+=g;return ee}function sp(o,l){var g="";if(!o||l<1||l>qe)return g;do l%2&&(g+=o),l=Uu(l/2),l&&(o+=o);while(l);return g}function Wt(o,l){return xp(fv(o,l,Dr),o+"")}function W3(o){return v0(Ja(o))}function V3(o,l){var g=Ja(o);return rf(g,Wo(l,0,g.length))}function dc(o,l,g,S){if(!Cn(o))return o;l=Qs(l,o);for(var F=-1,K=l.length,ee=K-1,ae=o;ae!=null&&++F<K;){var be=es(l[F]),Le=g;if(be==="__proto__"||be==="constructor"||be==="prototype")return o;if(F!=ee){var Ue=ae[be];Le=S?S(Ue,be,ae):n,Le===n&&(Le=Cn(Ue)?Ue:xs(l[F+1])?[]:{})}cc(ae,be,Le),ae=ae[be]}return o}var D0=ju?function(o,l){return ju.set(o,l),o}:Dr,G3=Lu?function(o,l){return Lu(o,"toString",{configurable:!0,enumerable:!1,value:Op(l),writable:!0})}:Dr;function Y3(o){return rf(Ja(o))}function yi(o,l,g){var S=-1,F=o.length;l<0&&(l=-l>F?0:F+l),g=g>F?F:g,g<0&&(g+=F),F=l>g?0:g-l>>>0,l>>>=0;for(var K=se(F);++S<F;)K[S]=o[S+l];return K}function Z3(o,l){var g;return Js(o,function(S,F,K){return g=l(S,F,K),!g}),!!g}function Gu(o,l,g){var S=0,F=o==null?S:o.length;if(typeof l=="number"&&l===l&&F<=He){for(;S<F;){var K=S+F>>>1,ee=o[K];ee!==null&&!Vr(ee)&&(g?ee<=l:ee<l)?S=K+1:F=K}return F}return op(o,l,Dr,g)}function op(o,l,g,S){var F=0,K=o==null?0:o.length;if(K===0)return 0;l=g(l);for(var ee=l!==l,ae=l===null,be=Vr(l),Le=l===n;F<K;){var Ue=Uu((F+K)/2),Ve=g(o[Ue]),it=Ve!==n,mt=Ve===null,Et=Ve===Ve,zt=Vr(Ve);if(ee)var At=S||Et;else Le?At=Et&&(S||it):ae?At=Et&&it&&(S||!mt):be?At=Et&&it&&!mt&&(S||!zt):mt||zt?At=!1:At=S?Ve<=l:Ve<l;At?F=Ue+1:K=Ue}return ar(K,Fe)}function B0(o,l){for(var g=-1,S=o.length,F=0,K=[];++g<S;){var ee=o[g],ae=l?l(ee):ee;if(!g||!Pi(ae,be)){var be=ae;K[F++]=ee===0?0:ee}}return K}function L0(o){return typeof o=="number"?o:Vr(o)?Qe:+o}function Wr(o){if(typeof o=="string")return o;if(Dt(o))return at(o,Wr)+"";if(Vr(o))return y0?y0.call(o):"";var l=o+"";return l=="0"&&1/o==-Te?"-0":l}function Xs(o,l,g){var S=-1,F=Ee,K=o.length,ee=!0,ae=[],be=ae;if(g)ee=!1,F=Ge;else if(K>=i){var Le=l?null:aS(o);if(Le)return ys(Le);ee=!1,F=Uo,be=new Ko}else be=l?[]:ae;e:for(;++S<K;){var Ue=o[S],Ve=l?l(Ue):Ue;if(Ue=g||Ue!==0?Ue:0,ee&&Ve===Ve){for(var it=be.length;it--;)if(be[it]===Ve)continue e;l&&be.push(Ve),ae.push(Ue)}else F(be,Ve,g)||(be!==ae&&be.push(Ve),ae.push(Ue))}return ae}function ap(o,l){return l=Qs(l,o),o=hv(o,l),o==null||delete o[es(mi(l))]}function F0(o,l,g,S){return dc(o,l,g(Vo(o,l)),S)}function Yu(o,l,g,S){for(var F=o.length,K=S?F:-1;(S?K--:++K<F)&&l(o[K],K,o););return g?yi(o,S?0:K,S?K+1:F):yi(o,S?K+1:0,S?F:K)}function U0(o,l){var g=o;return g instanceof Xt&&(g=g.value()),Rt(l,function(S,F){return F.func.apply(F.thisArg,Mt([S],F.args))},g)}function lp(o,l,g){var S=o.length;if(S<2)return S?Xs(o[0]):[];for(var F=-1,K=se(S);++F<S;)for(var ee=o[F],ae=-1;++ae<S;)ae!=F&&(K[F]=uc(K[F]||ee,o[ae],l,g));return Xs(tr(K,1),l,g)}function j0(o,l,g){for(var S=-1,F=o.length,K=l.length,ee={};++S<F;){var ae=S<K?l[S]:n;g(ee,o[S],ae)}return ee}function cp(o){return Rn(o)?o:[]}function up(o){return typeof o=="function"?o:Dr}function Qs(o,l){return Dt(o)?o:bp(o,l)?[o]:yv(rn(o))}var J3=Wt;function eo(o,l,g){var S=o.length;return g=g===n?S:g,!l&&g>=S?o:yi(o,l,g)}var z0=Lk||function(o){return En.clearTimeout(o)};function H0(o,l){if(l)return o.slice();var g=o.length,S=u0?u0(g):new o.constructor(g);return o.copy(S),S}function fp(o){var l=new o.constructor(o.byteLength);return new Mu(l).set(new Mu(o)),l}function X3(o,l){var g=l?fp(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.byteLength)}function Q3(o){var l=new o.constructor(o.source,Pa.exec(o));return l.lastIndex=o.lastIndex,l}function eS(o){return lc?st(lc.call(o)):{}}function q0(o,l){var g=l?fp(o.buffer):o.buffer;return new o.constructor(g,o.byteOffset,o.length)}function K0(o,l){if(o!==l){var g=o!==n,S=o===null,F=o===o,K=Vr(o),ee=l!==n,ae=l===null,be=l===l,Le=Vr(l);if(!ae&&!Le&&!K&&o>l||K&&ee&&be&&!ae&&!Le||S&&ee&&be||!g&&be||!F)return 1;if(!S&&!K&&!Le&&o<l||Le&&g&&F&&!S&&!K||ae&&g&&F||!ee&&F||!be)return-1}return 0}function tS(o,l,g){for(var S=-1,F=o.criteria,K=l.criteria,ee=F.length,ae=g.length;++S<ee;){var be=K0(F[S],K[S]);if(be){if(S>=ae)return be;var Le=g[S];return be*(Le=="desc"?-1:1)}}return o.index-l.index}function W0(o,l,g,S){for(var F=-1,K=o.length,ee=g.length,ae=-1,be=l.length,Le=Hn(K-ee,0),Ue=se(be+Le),Ve=!S;++ae<be;)Ue[ae]=l[ae];for(;++F<ee;)(Ve||F<K)&&(Ue[g[F]]=o[F]);for(;Le--;)Ue[ae++]=o[F++];return Ue}function V0(o,l,g,S){for(var F=-1,K=o.length,ee=-1,ae=g.length,be=-1,Le=l.length,Ue=Hn(K-ae,0),Ve=se(Ue+Le),it=!S;++F<Ue;)Ve[F]=o[F];for(var mt=F;++be<Le;)Ve[mt+be]=l[be];for(;++ee<ae;)(it||F<K)&&(Ve[mt+g[ee]]=o[F++]);return Ve}function Nr(o,l){var g=-1,S=o.length;for(l||(l=se(S));++g<S;)l[g]=o[g];return l}function Qi(o,l,g,S){var F=!g;g||(g={});for(var K=-1,ee=l.length;++K<ee;){var ae=l[K],be=S?S(g[ae],o[ae],ae,g,o):n;be===n&&(be=o[ae]),F?bs(g,ae,be):cc(g,ae,be)}return g}function nS(o,l){return Qi(o,vp(o),l)}function rS(o,l){return Qi(o,ov(o),l)}function Zu(o,l){return function(g,S){var F=Dt(g)?re:E3,K=l?l():{};return F(g,o,kt(S,2),K)}}function Va(o){return Wt(function(l,g){var S=-1,F=g.length,K=F>1?g[F-1]:n,ee=F>2?g[2]:n;for(K=o.length>3&&typeof K=="function"?(F--,K):n,ee&&_r(g[0],g[1],ee)&&(K=F<3?n:K,F=1),l=st(l);++S<F;){var ae=g[S];ae&&o(l,ae,S,K)}return l})}function G0(o,l){return function(g,S){if(g==null)return g;if(!Rr(g))return o(g,S);for(var F=g.length,K=l?F:-1,ee=st(g);(l?K--:++K<F)&&S(ee[K],K,ee)!==!1;);return g}}function Y0(o){return function(l,g,S){for(var F=-1,K=st(l),ee=S(l),ae=ee.length;ae--;){var be=ee[o?ae:++F];if(g(K[be],be,K)===!1)break}return l}}function iS(o,l,g){var S=l&R,F=pc(o);function K(){var ee=this&&this!==En&&this instanceof K?F:o;return ee.apply(S?g:this,arguments)}return K}function Z0(o){return function(l){l=rn(l);var g=Or(l)?vr(l):n,S=g?g[0]:l.charAt(0),F=g?eo(g,1).join(""):l.slice(1);return S[o]()+F}}function Ga(o){return function(l){return Rt(Gv(Vv(l).replace(Yl,"")),o,"")}}function pc(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var g=Wa(o.prototype),S=o.apply(g,l);return Cn(S)?S:g}}function sS(o,l,g){var S=pc(o);function F(){for(var K=arguments.length,ee=se(K),ae=K,be=Ya(F);ae--;)ee[ae]=arguments[ae];var Le=K<3&&ee[0]!==be&&ee[K-1]!==be?[]:Kr(ee,be);if(K-=Le.length,K<g)return tv(o,l,Ju,F.placeholder,n,ee,Le,n,n,g-K);var Ue=this&&this!==En&&this instanceof F?S:o;return j(Ue,this,ee)}return F}function J0(o){return function(l,g,S){var F=st(l);if(!Rr(l)){var K=kt(g,3);l=Zn(l),g=function(ae){return K(F[ae],ae,F)}}var ee=o(l,g,S);return ee>-1?F[K?l[ee]:ee]:n}}function X0(o){return _s(function(l){var g=l.length,S=g,F=pi.prototype.thru;for(o&&l.reverse();S--;){var K=l[S];if(typeof K!="function")throw new Kt(a);if(F&&!ee&&tf(K)=="wrapper")var ee=new pi([],!0)}for(S=ee?S:g;++S<g;){K=l[S];var ae=tf(K),be=ae=="wrapper"?yp(K):n;be&&wp(be[0])&&be[1]==(p|P|M|Z)&&!be[4].length&&be[9]==1?ee=ee[tf(be[0])].apply(ee,be[3]):ee=K.length==1&&wp(K)?ee[ae]():ee.thru(K)}return function(){var Le=arguments,Ue=Le[0];if(ee&&Le.length==1&&Dt(Ue))return ee.plant(Ue).value();for(var Ve=0,it=g?l[Ve].apply(this,Le):Ue;++Ve<g;)it=l[Ve].call(this,it);return it}})}function Ju(o,l,g,S,F,K,ee,ae,be,Le){var Ue=l&p,Ve=l&R,it=l&$,mt=l&(P|N),Et=l&J,zt=it?n:pc(o);function At(){for(var Yt=arguments.length,Qt=se(Yt),Gr=Yt;Gr--;)Qt[Gr]=arguments[Gr];if(mt)var xr=Ya(At),Yr=qr(Qt,xr);if(S&&(Qt=W0(Qt,S,F,mt)),K&&(Qt=V0(Qt,K,ee,mt)),Yt-=Yr,mt&&Yt<Le){var Mn=Kr(Qt,xr);return tv(o,l,Ju,At.placeholder,g,Qt,Mn,ae,be,Le-Yt)}var Oi=Ve?g:this,Es=it?Oi[o]:o;return Yt=Qt.length,ae?Qt=ES(Qt,ae):Et&&Yt>1&&Qt.reverse(),Ue&&be<Yt&&(Qt.length=be),this&&this!==En&&this instanceof At&&(Es=zt||pc(Es)),Es.apply(Oi,Qt)}return At}function Q0(o,l){return function(g,S){return N3(g,o,l(S),{})}}function Xu(o,l){return function(g,S){var F;if(g===n&&S===n)return l;if(g!==n&&(F=g),S!==n){if(F===n)return S;typeof g=="string"||typeof S=="string"?(g=Wr(g),S=Wr(S)):(g=L0(g),S=L0(S)),F=o(g,S)}return F}}function hp(o){return _s(function(l){return l=at(l,mr(kt())),Wt(function(g){var S=this;return o(l,function(F){return j(F,S,g)})})})}function Qu(o,l){l=l===n?" ":Wr(l);var g=l.length;if(g<2)return g?sp(l,o):l;var S=sp(l,Fu(o/Ji(l)));return Or(l)?eo(vr(S),0,o).join(""):S.slice(0,o)}function oS(o,l,g,S){var F=l&R,K=pc(o);function ee(){for(var ae=-1,be=arguments.length,Le=-1,Ue=S.length,Ve=se(Ue+be),it=this&&this!==En&&this instanceof ee?K:o;++Le<Ue;)Ve[Le]=S[Le];for(;be--;)Ve[Le++]=arguments[++ae];return j(it,F?g:this,Ve)}return ee}function ev(o){return function(l,g,S){return S&&typeof S!="number"&&_r(l,g,S)&&(g=S=n),l=Ss(l),g===n?(g=l,l=0):g=Ss(g),S=S===n?l<g?1:-1:Ss(S),K3(l,g,S,o)}}function ef(o){return function(l,g){return typeof l=="string"&&typeof g=="string"||(l=vi(l),g=vi(g)),o(l,g)}}function tv(o,l,g,S,F,K,ee,ae,be,Le){var Ue=l&P,Ve=Ue?ee:n,it=Ue?n:ee,mt=Ue?K:n,Et=Ue?n:K;l|=Ue?M:U,l&=~(Ue?U:M),l&L||(l&=~(R|$));var zt=[o,l,F,mt,Ve,Et,it,ae,be,Le],At=g.apply(n,zt);return wp(o)&&dv(At,zt),At.placeholder=S,pv(At,o,l)}function dp(o){var l=ct[o];return function(g,S){if(g=vi(g),S=S==null?0:ar(jt(S),292),S&&p0(g)){var F=(rn(g)+"e").split("e"),K=l(F[0]+"e"+(+F[1]+S));return F=(rn(K)+"e").split("e"),+(F[0]+"e"+(+F[1]-S))}return l(g)}}var aS=qa&&1/ys(new qa([,-0]))[1]==Te?function(o){return new qa(o)}:Mp;function nv(o){return function(l){var g=lr(l);return g==te?za(l):g==et?nc(l):Ti(l,o(l))}}function ws(o,l,g,S,F,K,ee,ae){var be=l&$;if(!be&&typeof o!="function")throw new Kt(a);var Le=S?S.length:0;if(Le||(l&=~(M|U),S=F=n),ee=ee===n?ee:Hn(jt(ee),0),ae=ae===n?ae:jt(ae),Le-=F?F.length:0,l&U){var Ue=S,Ve=F;S=F=n}var it=be?n:yp(o),mt=[o,l,g,S,F,Ue,Ve,K,ee,ae];if(it&&xS(mt,it),o=mt[0],l=mt[1],g=mt[2],S=mt[3],F=mt[4],ae=mt[9]=mt[9]===n?be?0:o.length:Hn(mt[9]-Le,0),!ae&&l&(P|N)&&(l&=~(P|N)),!l||l==R)var Et=iS(o,l,g);else l==P||l==N?Et=sS(o,l,ae):(l==M||l==(R|M))&&!F.length?Et=oS(o,l,g,S):Et=Ju.apply(n,mt);var zt=it?D0:dv;return pv(zt(Et,mt),o,l)}function rv(o,l,g,S){return o===n||Pi(o,zn[g])&&!Ot.call(S,g)?l:o}function iv(o,l,g,S,F,K){return Cn(o)&&Cn(l)&&(K.set(l,o),Vu(o,l,n,iv,K),K.delete(l)),o}function lS(o){return mc(o)?n:o}function sv(o,l,g,S,F,K){var ee=g&I,ae=o.length,be=l.length;if(ae!=be&&!(ee&&be>ae))return!1;var Le=K.get(o),Ue=K.get(l);if(Le&&Ue)return Le==l&&Ue==o;var Ve=-1,it=!0,mt=g&C?new Ko:n;for(K.set(o,l),K.set(l,o);++Ve<ae;){var Et=o[Ve],zt=l[Ve];if(S)var At=ee?S(zt,Et,Ve,l,o,K):S(Et,zt,Ve,o,l,K);if(At!==n){if(At)continue;it=!1;break}if(mt){if(!An(l,function(Yt,Qt){if(!Uo(mt,Qt)&&(Et===Yt||F(Et,Yt,g,S,K)))return mt.push(Qt)})){it=!1;break}}else if(!(Et===zt||F(Et,zt,g,S,K))){it=!1;break}}return K.delete(o),K.delete(l),it}function cS(o,l,g,S,F,K,ee){switch(g){case mn:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case gn:return!(o.byteLength!=l.byteLength||!K(new Mu(o),new Mu(l)));case h:case v:case ie:return Pi(+o,+l);case T:return o.name==l.name&&o.message==l.message;case Je:case yt:return o==l+"";case te:var ae=za;case et:var be=S&I;if(ae||(ae=ys),o.size!=l.size&&!be)return!1;var Le=ee.get(o);if(Le)return Le==l;S|=C,ee.set(o,l);var Ue=sv(ae(o),ae(l),S,F,K,ee);return ee.delete(o),Ue;case St:if(lc)return lc.call(o)==lc.call(l)}return!1}function uS(o,l,g,S,F,K){var ee=g&I,ae=pp(o),be=ae.length,Le=pp(l),Ue=Le.length;if(be!=Ue&&!ee)return!1;for(var Ve=be;Ve--;){var it=ae[Ve];if(!(ee?it in l:Ot.call(l,it)))return!1}var mt=K.get(o),Et=K.get(l);if(mt&&Et)return mt==l&&Et==o;var zt=!0;K.set(o,l),K.set(l,o);for(var At=ee;++Ve<be;){it=ae[Ve];var Yt=o[it],Qt=l[it];if(S)var Gr=ee?S(Qt,Yt,it,l,o,K):S(Yt,Qt,it,o,l,K);if(!(Gr===n?Yt===Qt||F(Yt,Qt,g,S,K):Gr)){zt=!1;break}At||(At=it=="constructor")}if(zt&&!At){var xr=o.constructor,Yr=l.constructor;xr!=Yr&&"constructor"in o&&"constructor"in l&&!(typeof xr=="function"&&xr instanceof xr&&typeof Yr=="function"&&Yr instanceof Yr)&&(zt=!1)}return K.delete(o),K.delete(l),zt}function _s(o){return xp(fv(o,n,wv),o+"")}function pp(o){return E0(o,Zn,vp)}function gp(o){return E0(o,Mr,ov)}var yp=ju?function(o){return ju.get(o)}:Mp;function tf(o){for(var l=o.name+"",g=Ka[l],S=Ot.call(Ka,l)?g.length:0;S--;){var F=g[S],K=F.func;if(K==null||K==o)return F.name}return l}function Ya(o){var l=Ot.call(H,"placeholder")?H:o;return l.placeholder}function kt(){var o=H.iteratee||Np;return o=o===Np?T0:o,arguments.length?o(arguments[0],arguments[1]):o}function nf(o,l){var g=o.__data__;return vS(l)?g[typeof l=="string"?"string":"hash"]:g.map}function mp(o){for(var l=Zn(o),g=l.length;g--;){var S=l[g],F=o[S];l[g]=[S,F,cv(F)]}return l}function Go(o,l){var g=$u(o,l);return C0(g)?g:n}function fS(o){var l=Ot.call(o,Ho),g=o[Ho];try{o[Ho]=n;var S=!0}catch{}var F=Nu.call(o);return S&&(l?o[Ho]=g:delete o[Ho]),F}var vp=Kd?function(o){return o==null?[]:(o=st(o),Oe(Kd(o),function(l){return h0.call(o,l)}))}:Dp,ov=Kd?function(o){for(var l=[];o;)Mt(l,vp(o)),o=Du(o);return l}:Dp,lr=wr;(Wd&&lr(new Wd(new ArrayBuffer(1)))!=mn||sc&&lr(new sc)!=te||Vd&&lr(Vd.resolve())!=je||qa&&lr(new qa)!=et||oc&&lr(new oc)!=Ke)&&(lr=function(o){var l=wr(o),g=l==_e?o.constructor:n,S=g?Yo(g):"";if(S)switch(S){case Vk:return mn;case Gk:return te;case Yk:return je;case Zk:return et;case Jk:return Ke}return l});function hS(o,l,g){for(var S=-1,F=g.length;++S<F;){var K=g[S],ee=K.size;switch(K.type){case"drop":o+=ee;break;case"dropRight":l-=ee;break;case"take":l=ar(l,o+ee);break;case"takeRight":o=Hn(o,l-ee);break}}return{start:o,end:l}}function dS(o){var l=o.match(Hl);return l?l[1].split(ql):[]}function av(o,l,g){l=Qs(l,o);for(var S=-1,F=l.length,K=!1;++S<F;){var ee=es(l[S]);if(!(K=o!=null&&g(o,ee)))break;o=o[ee]}return K||++S!=F?K:(F=o==null?0:o.length,!!F&&uf(F)&&xs(ee,F)&&(Dt(o)||Zo(o)))}function pS(o){var l=o.length,g=new o.constructor(l);return l&&typeof o[0]=="string"&&Ot.call(o,"index")&&(g.index=o.index,g.input=o.input),g}function lv(o){return typeof o.constructor=="function"&&!gc(o)?Wa(Du(o)):{}}function gS(o,l,g){var S=o.constructor;switch(l){case gn:return fp(o);case h:case v:return new S(+o);case mn:return X3(o,g);case gr:case Pn:case Ir:case si:case rr:case yr:case oi:case $o:case ai:return q0(o,g);case te:return new S;case ie:case yt:return new S(o);case Je:return Q3(o);case et:return new S;case St:return eS(o)}}function yS(o,l){var g=l.length;if(!g)return o;var S=g-1;return l[S]=(g>1?"& ":"")+l[S],l=l.join(g>2?", ":" "),o.replace(zl,`{
/* [wrapped with `+l+`] */
`)}function mS(o){return Dt(o)||Zo(o)||!!(d0&&o&&o[d0])}function xs(o,l){var g=typeof o;return l=l??qe,!!l&&(g=="number"||g!="symbol"&&Ks.test(o))&&o>-1&&o%1==0&&o<l}function _r(o,l,g){if(!Cn(g))return!1;var S=typeof l;return(S=="number"?Rr(g)&&xs(l,g.length):S=="string"&&l in g)?Pi(g[l],o):!1}function bp(o,l){if(Dt(o))return!1;var g=typeof o;return g=="number"||g=="symbol"||g=="boolean"||o==null||Vr(o)?!0:Ca.test(o)||!jl.test(o)||l!=null&&o in st(l)}function vS(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function wp(o){var l=tf(o),g=H[l];if(typeof g!="function"||!(l in Xt.prototype))return!1;if(o===g)return!0;var S=yp(g);return!!S&&o===S[0]}function bS(o){return!!c0&&c0 in o}var wS=br?ks:Bp;function gc(o){var l=o&&o.constructor,g=typeof l=="function"&&l.prototype||zn;return o===g}function cv(o){return o===o&&!Cn(o)}function uv(o,l){return function(g){return g==null?!1:g[o]===l&&(l!==n||o in st(g))}}function _S(o){var l=lf(o,function(S){return g.size===b&&g.clear(),S}),g=l.cache;return l}function xS(o,l){var g=o[1],S=l[1],F=g|S,K=F<(R|$|p),ee=S==p&&g==P||S==p&&g==Z&&o[7].length<=l[8]||S==(p|Z)&&l[7].length<=l[8]&&g==P;if(!(K||ee))return o;S&R&&(o[2]=l[2],F|=g&R?0:L);var ae=l[3];if(ae){var be=o[3];o[3]=be?W0(be,ae,l[4]):ae,o[4]=be?Kr(o[3],m):l[4]}return ae=l[5],ae&&(be=o[5],o[5]=be?V0(be,ae,l[6]):ae,o[6]=be?Kr(o[5],m):l[6]),ae=l[7],ae&&(o[7]=ae),S&p&&(o[8]=o[8]==null?l[8]:ar(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=F,o}function kS(o){var l=[];if(o!=null)for(var g in st(o))l.push(g);return l}function SS(o){return Nu.call(o)}function fv(o,l,g){return l=Hn(l===n?o.length-1:l,0),function(){for(var S=arguments,F=-1,K=Hn(S.length-l,0),ee=se(K);++F<K;)ee[F]=S[l+F];F=-1;for(var ae=se(l+1);++F<l;)ae[F]=S[F];return ae[l]=g(ee),j(o,this,ae)}}function hv(o,l){return l.length<2?o:Vo(o,yi(l,0,-1))}function ES(o,l){for(var g=o.length,S=ar(l.length,g),F=Nr(o);S--;){var K=l[S];o[S]=xs(K,g)?F[K]:n}return o}function _p(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var dv=gv(D0),yc=Uk||function(o,l){return En.setTimeout(o,l)},xp=gv(G3);function pv(o,l,g){var S=l+"";return xp(o,yS(S,AS(dS(S),g)))}function gv(o){var l=0,g=0;return function(){var S=qk(),F=we-(S-g);if(g=S,F>0){if(++l>=ke)return arguments[0]}else l=0;return o.apply(n,arguments)}}function rf(o,l){var g=-1,S=o.length,F=S-1;for(l=l===n?S:l;++g<l;){var K=ip(g,F),ee=o[K];o[K]=o[g],o[g]=ee}return o.length=l,o}var yv=_S(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(Ta,function(g,S,F,K){l.push(F?K.replace(Wl,"$1"):S||g)}),l});function es(o){if(typeof o=="string"||Vr(o))return o;var l=o+"";return l=="0"&&1/o==-Te?"-0":l}function Yo(o){if(o!=null){try{return Ii.call(o)}catch{}try{return o+""}catch{}}return""}function AS(o,l){return X($e,function(g){var S="_."+g[0];l&g[1]&&!Ee(o,S)&&o.push(S)}),o.sort()}function mv(o){if(o instanceof Xt)return o.clone();var l=new pi(o.__wrapped__,o.__chain__);return l.__actions__=Nr(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function CS(o,l,g){(g?_r(o,l,g):l===n)?l=1:l=Hn(jt(l),0);var S=o==null?0:o.length;if(!S||l<1)return[];for(var F=0,K=0,ee=se(Fu(S/l));F<S;)ee[K++]=yi(o,F,F+=l);return ee}function TS(o){for(var l=-1,g=o==null?0:o.length,S=0,F=[];++l<g;){var K=o[l];K&&(F[S++]=K)}return F}function IS(){var o=arguments.length;if(!o)return[];for(var l=se(o-1),g=arguments[0],S=o;S--;)l[S-1]=arguments[S];return Mt(Dt(g)?Nr(g):[g],tr(l,1))}var $S=Wt(function(o,l){return Rn(o)?uc(o,tr(l,1,Rn,!0)):[]}),PS=Wt(function(o,l){var g=mi(l);return Rn(g)&&(g=n),Rn(o)?uc(o,tr(l,1,Rn,!0),kt(g,2)):[]}),OS=Wt(function(o,l){var g=mi(l);return Rn(g)&&(g=n),Rn(o)?uc(o,tr(l,1,Rn,!0),n,g):[]});function NS(o,l,g){var S=o==null?0:o.length;return S?(l=g||l===n?1:jt(l),yi(o,l<0?0:l,S)):[]}function RS(o,l,g){var S=o==null?0:o.length;return S?(l=g||l===n?1:jt(l),l=S-l,yi(o,0,l<0?0:l)):[]}function MS(o,l){return o&&o.length?Yu(o,kt(l,3),!0,!0):[]}function DS(o,l){return o&&o.length?Yu(o,kt(l,3),!0):[]}function BS(o,l,g,S){var F=o==null?0:o.length;return F?(g&&typeof g!="number"&&_r(o,l,g)&&(g=0,S=F),I3(o,l,g,S)):[]}function vv(o,l,g){var S=o==null?0:o.length;if(!S)return-1;var F=g==null?0:jt(g);return F<0&&(F=Hn(S+F,0)),Gt(o,kt(l,3),F)}function bv(o,l,g){var S=o==null?0:o.length;if(!S)return-1;var F=S-1;return g!==n&&(F=jt(g),F=g<0?Hn(S+F,0):ar(F,S-1)),Gt(o,kt(l,3),F,!0)}function wv(o){var l=o==null?0:o.length;return l?tr(o,1):[]}function LS(o){var l=o==null?0:o.length;return l?tr(o,Te):[]}function FS(o,l){var g=o==null?0:o.length;return g?(l=l===n?1:jt(l),tr(o,l)):[]}function US(o){for(var l=-1,g=o==null?0:o.length,S={};++l<g;){var F=o[l];S[F[0]]=F[1]}return S}function _v(o){return o&&o.length?o[0]:n}function jS(o,l,g){var S=o==null?0:o.length;if(!S)return-1;var F=g==null?0:jt(g);return F<0&&(F=Hn(S+F,0)),sn(o,l,F)}function zS(o){var l=o==null?0:o.length;return l?yi(o,0,-1):[]}var HS=Wt(function(o){var l=at(o,cp);return l.length&&l[0]===o[0]?Qd(l):[]}),qS=Wt(function(o){var l=mi(o),g=at(o,cp);return l===mi(g)?l=n:g.pop(),g.length&&g[0]===o[0]?Qd(g,kt(l,2)):[]}),KS=Wt(function(o){var l=mi(o),g=at(o,cp);return l=typeof l=="function"?l:n,l&&g.pop(),g.length&&g[0]===o[0]?Qd(g,n,l):[]});function WS(o,l){return o==null?"":zk.call(o,l)}function mi(o){var l=o==null?0:o.length;return l?o[l-1]:n}function VS(o,l,g){var S=o==null?0:o.length;if(!S)return-1;var F=S;return g!==n&&(F=jt(g),F=F<0?Hn(S+F,0):ar(F,S-1)),l===l?Ha(o,l,F):Gt(o,ja,F,!0)}function GS(o,l){return o&&o.length?O0(o,jt(l)):n}var YS=Wt(xv);function xv(o,l){return o&&o.length&&l&&l.length?rp(o,l):o}function ZS(o,l,g){return o&&o.length&&l&&l.length?rp(o,l,kt(g,2)):o}function JS(o,l,g){return o&&o.length&&l&&l.length?rp(o,l,n,g):o}var XS=_s(function(o,l){var g=o==null?0:o.length,S=Yd(o,l);return M0(o,at(l,function(F){return xs(F,g)?+F:F}).sort(K0)),S});function QS(o,l){var g=[];if(!(o&&o.length))return g;var S=-1,F=[],K=o.length;for(l=kt(l,3);++S<K;){var ee=o[S];l(ee,S,o)&&(g.push(ee),F.push(S))}return M0(o,F),g}function kp(o){return o==null?o:Wk.call(o)}function eE(o,l,g){var S=o==null?0:o.length;return S?(g&&typeof g!="number"&&_r(o,l,g)?(l=0,g=S):(l=l==null?0:jt(l),g=g===n?S:jt(g)),yi(o,l,g)):[]}function tE(o,l){return Gu(o,l)}function nE(o,l,g){return op(o,l,kt(g,2))}function rE(o,l){var g=o==null?0:o.length;if(g){var S=Gu(o,l);if(S<g&&Pi(o[S],l))return S}return-1}function iE(o,l){return Gu(o,l,!0)}function sE(o,l,g){return op(o,l,kt(g,2),!0)}function oE(o,l){var g=o==null?0:o.length;if(g){var S=Gu(o,l,!0)-1;if(Pi(o[S],l))return S}return-1}function aE(o){return o&&o.length?B0(o):[]}function lE(o,l){return o&&o.length?B0(o,kt(l,2)):[]}function cE(o){var l=o==null?0:o.length;return l?yi(o,1,l):[]}function uE(o,l,g){return o&&o.length?(l=g||l===n?1:jt(l),yi(o,0,l<0?0:l)):[]}function fE(o,l,g){var S=o==null?0:o.length;return S?(l=g||l===n?1:jt(l),l=S-l,yi(o,l<0?0:l,S)):[]}function hE(o,l){return o&&o.length?Yu(o,kt(l,3),!1,!0):[]}function dE(o,l){return o&&o.length?Yu(o,kt(l,3)):[]}var pE=Wt(function(o){return Xs(tr(o,1,Rn,!0))}),gE=Wt(function(o){var l=mi(o);return Rn(l)&&(l=n),Xs(tr(o,1,Rn,!0),kt(l,2))}),yE=Wt(function(o){var l=mi(o);return l=typeof l=="function"?l:n,Xs(tr(o,1,Rn,!0),n,l)});function mE(o){return o&&o.length?Xs(o):[]}function vE(o,l){return o&&o.length?Xs(o,kt(l,2)):[]}function bE(o,l){return l=typeof l=="function"?l:n,o&&o.length?Xs(o,n,l):[]}function Sp(o){if(!(o&&o.length))return[];var l=0;return o=Oe(o,function(g){if(Rn(g))return l=Hn(g.length,l),!0}),Fo(l,function(g){return at(o,gs(g))})}function kv(o,l){if(!(o&&o.length))return[];var g=Sp(o);return l==null?g:at(g,function(S){return j(l,n,S)})}var wE=Wt(function(o,l){return Rn(o)?uc(o,l):[]}),_E=Wt(function(o){return lp(Oe(o,Rn))}),xE=Wt(function(o){var l=mi(o);return Rn(l)&&(l=n),lp(Oe(o,Rn),kt(l,2))}),kE=Wt(function(o){var l=mi(o);return l=typeof l=="function"?l:n,lp(Oe(o,Rn),n,l)}),SE=Wt(Sp);function EE(o,l){return j0(o||[],l||[],cc)}function AE(o,l){return j0(o||[],l||[],dc)}var CE=Wt(function(o){var l=o.length,g=l>1?o[l-1]:n;return g=typeof g=="function"?(o.pop(),g):n,kv(o,g)});function Sv(o){var l=H(o);return l.__chain__=!0,l}function TE(o,l){return l(o),o}function sf(o,l){return l(o)}var IE=_s(function(o){var l=o.length,g=l?o[0]:0,S=this.__wrapped__,F=function(K){return Yd(K,o)};return l>1||this.__actions__.length||!(S instanceof Xt)||!xs(g)?this.thru(F):(S=S.slice(g,+g+(l?1:0)),S.__actions__.push({func:sf,args:[F],thisArg:n}),new pi(S,this.__chain__).thru(function(K){return l&&!K.length&&K.push(n),K}))});function $E(){return Sv(this)}function PE(){return new pi(this.value(),this.__chain__)}function OE(){this.__values__===n&&(this.__values__=Lv(this.value()));var o=this.__index__>=this.__values__.length,l=o?n:this.__values__[this.__index__++];return{done:o,value:l}}function NE(){return this}function RE(o){for(var l,g=this;g instanceof Hu;){var S=mv(g);S.__index__=0,S.__values__=n,l?F.__wrapped__=S:l=S;var F=S;g=g.__wrapped__}return F.__wrapped__=o,l}function ME(){var o=this.__wrapped__;if(o instanceof Xt){var l=o;return this.__actions__.length&&(l=new Xt(this)),l=l.reverse(),l.__actions__.push({func:sf,args:[kp],thisArg:n}),new pi(l,this.__chain__)}return this.thru(kp)}function DE(){return U0(this.__wrapped__,this.__actions__)}var BE=Zu(function(o,l,g){Ot.call(o,g)?++o[g]:bs(o,g,1)});function LE(o,l,g){var S=Dt(o)?Ie:T3;return g&&_r(o,l,g)&&(l=n),S(o,kt(l,3))}function FE(o,l){var g=Dt(o)?Oe:k0;return g(o,kt(l,3))}var UE=J0(vv),jE=J0(bv);function zE(o,l){return tr(of(o,l),1)}function HE(o,l){return tr(of(o,l),Te)}function qE(o,l,g){return g=g===n?1:jt(g),tr(of(o,l),g)}function Ev(o,l){var g=Dt(o)?X:Js;return g(o,kt(l,3))}function Av(o,l){var g=Dt(o)?ge:x0;return g(o,kt(l,3))}var KE=Zu(function(o,l,g){Ot.call(o,g)?o[g].push(l):bs(o,g,[l])});function WE(o,l,g,S){o=Rr(o)?o:Ja(o),g=g&&!S?jt(g):0;var F=o.length;return g<0&&(g=Hn(F+g,0)),ff(o)?g<=F&&o.indexOf(l,g)>-1:!!F&&sn(o,l,g)>-1}var VE=Wt(function(o,l,g){var S=-1,F=typeof l=="function",K=Rr(o)?se(o.length):[];return Js(o,function(ee){K[++S]=F?j(l,ee,g):fc(ee,l,g)}),K}),GE=Zu(function(o,l,g){bs(o,g,l)});function of(o,l){var g=Dt(o)?at:I0;return g(o,kt(l,3))}function YE(o,l,g,S){return o==null?[]:(Dt(l)||(l=l==null?[]:[l]),g=S?n:g,Dt(g)||(g=g==null?[]:[g]),N0(o,l,g))}var ZE=Zu(function(o,l,g){o[g?0:1].push(l)},function(){return[[],[]]});function JE(o,l,g){var S=Dt(o)?Rt:Ci,F=arguments.length<3;return S(o,kt(l,4),g,F,Js)}function XE(o,l,g){var S=Dt(o)?Un:Ci,F=arguments.length<3;return S(o,kt(l,4),g,F,x0)}function QE(o,l){var g=Dt(o)?Oe:k0;return g(o,cf(kt(l,3)))}function eA(o){var l=Dt(o)?v0:W3;return l(o)}function tA(o,l,g){(g?_r(o,l,g):l===n)?l=1:l=jt(l);var S=Dt(o)?k3:V3;return S(o,l)}function nA(o){var l=Dt(o)?S3:Y3;return l(o)}function rA(o){if(o==null)return 0;if(Rr(o))return ff(o)?Ji(o):o.length;var l=lr(o);return l==te||l==et?o.size:tp(o).length}function iA(o,l,g){var S=Dt(o)?An:Z3;return g&&_r(o,l,g)&&(l=n),S(o,kt(l,3))}var sA=Wt(function(o,l){if(o==null)return[];var g=l.length;return g>1&&_r(o,l[0],l[1])?l=[]:g>2&&_r(l[0],l[1],l[2])&&(l=[l[0]]),N0(o,tr(l,1),[])}),af=Fk||function(){return En.Date.now()};function oA(o,l){if(typeof l!="function")throw new Kt(a);return o=jt(o),function(){if(--o<1)return l.apply(this,arguments)}}function Cv(o,l,g){return l=g?n:l,l=o&&l==null?o.length:l,ws(o,p,n,n,n,n,l)}function Tv(o,l){var g;if(typeof l!="function")throw new Kt(a);return o=jt(o),function(){return--o>0&&(g=l.apply(this,arguments)),o<=1&&(l=n),g}}var Ep=Wt(function(o,l,g){var S=R;if(g.length){var F=Kr(g,Ya(Ep));S|=M}return ws(o,S,l,g,F)}),Iv=Wt(function(o,l,g){var S=R|$;if(g.length){var F=Kr(g,Ya(Iv));S|=M}return ws(l,S,o,g,F)});function $v(o,l,g){l=g?n:l;var S=ws(o,P,n,n,n,n,n,l);return S.placeholder=$v.placeholder,S}function Pv(o,l,g){l=g?n:l;var S=ws(o,N,n,n,n,n,n,l);return S.placeholder=Pv.placeholder,S}function Ov(o,l,g){var S,F,K,ee,ae,be,Le=0,Ue=!1,Ve=!1,it=!0;if(typeof o!="function")throw new Kt(a);l=vi(l)||0,Cn(g)&&(Ue=!!g.leading,Ve="maxWait"in g,K=Ve?Hn(vi(g.maxWait)||0,l):K,it="trailing"in g?!!g.trailing:it);function mt(Mn){var Oi=S,Es=F;return S=F=n,Le=Mn,ee=o.apply(Es,Oi),ee}function Et(Mn){return Le=Mn,ae=yc(Yt,l),Ue?mt(Mn):ee}function zt(Mn){var Oi=Mn-be,Es=Mn-Le,Jv=l-Oi;return Ve?ar(Jv,K-Es):Jv}function At(Mn){var Oi=Mn-be,Es=Mn-Le;return be===n||Oi>=l||Oi<0||Ve&&Es>=K}function Yt(){var Mn=af();if(At(Mn))return Qt(Mn);ae=yc(Yt,zt(Mn))}function Qt(Mn){return ae=n,it&&S?mt(Mn):(S=F=n,ee)}function Gr(){ae!==n&&z0(ae),Le=0,S=be=F=ae=n}function xr(){return ae===n?ee:Qt(af())}function Yr(){var Mn=af(),Oi=At(Mn);if(S=arguments,F=this,be=Mn,Oi){if(ae===n)return Et(be);if(Ve)return z0(ae),ae=yc(Yt,l),mt(be)}return ae===n&&(ae=yc(Yt,l)),ee}return Yr.cancel=Gr,Yr.flush=xr,Yr}var aA=Wt(function(o,l){return _0(o,1,l)}),lA=Wt(function(o,l,g){return _0(o,vi(l)||0,g)});function cA(o){return ws(o,J)}function lf(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new Kt(a);var g=function(){var S=arguments,F=l?l.apply(this,S):S[0],K=g.cache;if(K.has(F))return K.get(F);var ee=o.apply(this,S);return g.cache=K.set(F,ee)||K,ee};return g.cache=new(lf.Cache||vs),g}lf.Cache=vs;function cf(o){if(typeof o!="function")throw new Kt(a);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function uA(o){return Tv(2,o)}var fA=J3(function(o,l){l=l.length==1&&Dt(l[0])?at(l[0],mr(kt())):at(tr(l,1),mr(kt()));var g=l.length;return Wt(function(S){for(var F=-1,K=ar(S.length,g);++F<K;)S[F]=l[F].call(this,S[F]);return j(o,this,S)})}),Ap=Wt(function(o,l){var g=Kr(l,Ya(Ap));return ws(o,M,n,l,g)}),Nv=Wt(function(o,l){var g=Kr(l,Ya(Nv));return ws(o,U,n,l,g)}),hA=_s(function(o,l){return ws(o,Z,n,n,n,l)});function dA(o,l){if(typeof o!="function")throw new Kt(a);return l=l===n?l:jt(l),Wt(o,l)}function pA(o,l){if(typeof o!="function")throw new Kt(a);return l=l==null?0:Hn(jt(l),0),Wt(function(g){var S=g[l],F=eo(g,0,l);return S&&Mt(F,S),j(o,this,F)})}function gA(o,l,g){var S=!0,F=!0;if(typeof o!="function")throw new Kt(a);return Cn(g)&&(S="leading"in g?!!g.leading:S,F="trailing"in g?!!g.trailing:F),Ov(o,l,{leading:S,maxWait:l,trailing:F})}function yA(o){return Cv(o,1)}function mA(o,l){return Ap(up(l),o)}function vA(){if(!arguments.length)return[];var o=arguments[0];return Dt(o)?o:[o]}function bA(o){return gi(o,A)}function wA(o,l){return l=typeof l=="function"?l:n,gi(o,A,l)}function _A(o){return gi(o,w|A)}function xA(o,l){return l=typeof l=="function"?l:n,gi(o,w|A,l)}function kA(o,l){return l==null||w0(o,l,Zn(l))}function Pi(o,l){return o===l||o!==o&&l!==l}var SA=ef(Xd),EA=ef(function(o,l){return o>=l}),Zo=A0(function(){return arguments}())?A0:function(o){return On(o)&&Ot.call(o,"callee")&&!h0.call(o,"callee")},Dt=se.isArray,AA=u?mr(u):R3;function Rr(o){return o!=null&&uf(o.length)&&!ks(o)}function Rn(o){return On(o)&&Rr(o)}function CA(o){return o===!0||o===!1||On(o)&&wr(o)==h}var to=jk||Bp,TA=y?mr(y):M3;function IA(o){return On(o)&&o.nodeType===1&&!mc(o)}function $A(o){if(o==null)return!0;if(Rr(o)&&(Dt(o)||typeof o=="string"||typeof o.splice=="function"||to(o)||Za(o)||Zo(o)))return!o.length;var l=lr(o);if(l==te||l==et)return!o.size;if(gc(o))return!tp(o).length;for(var g in o)if(Ot.call(o,g))return!1;return!0}function PA(o,l){return hc(o,l)}function OA(o,l,g){g=typeof g=="function"?g:n;var S=g?g(o,l):n;return S===n?hc(o,l,n,g):!!S}function Cp(o){if(!On(o))return!1;var l=wr(o);return l==T||l==k||typeof o.message=="string"&&typeof o.name=="string"&&!mc(o)}function NA(o){return typeof o=="number"&&p0(o)}function ks(o){if(!Cn(o))return!1;var l=wr(o);return l==O||l==z||l==pt||l==tt}function Rv(o){return typeof o=="number"&&o==jt(o)}function uf(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=qe}function Cn(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function On(o){return o!=null&&typeof o=="object"}var Mv=x?mr(x):B3;function RA(o,l){return o===l||ep(o,l,mp(l))}function MA(o,l,g){return g=typeof g=="function"?g:n,ep(o,l,mp(l),g)}function DA(o){return Dv(o)&&o!=+o}function BA(o){if(wS(o))throw new Be(s);return C0(o)}function LA(o){return o===null}function FA(o){return o==null}function Dv(o){return typeof o=="number"||On(o)&&wr(o)==ie}function mc(o){if(!On(o)||wr(o)!=_e)return!1;var l=Du(o);if(l===null)return!0;var g=Ot.call(l,"constructor")&&l.constructor;return typeof g=="function"&&g instanceof g&&Ii.call(g)==Mk}var Tp=E?mr(E):L3;function UA(o){return Rv(o)&&o>=-qe&&o<=qe}var Bv=D?mr(D):F3;function ff(o){return typeof o=="string"||!Dt(o)&&On(o)&&wr(o)==yt}function Vr(o){return typeof o=="symbol"||On(o)&&wr(o)==St}var Za=B?mr(B):U3;function jA(o){return o===n}function zA(o){return On(o)&&lr(o)==Ke}function HA(o){return On(o)&&wr(o)==gt}var qA=ef(np),KA=ef(function(o,l){return o<=l});function Lv(o){if(!o)return[];if(Rr(o))return ff(o)?vr(o):Nr(o);if(ic&&o[ic])return Zi(o[ic]());var l=lr(o),g=l==te?za:l==et?ys:Ja;return g(o)}function Ss(o){if(!o)return o===0?o:0;if(o=vi(o),o===Te||o===-Te){var l=o<0?-1:1;return l*ze}return o===o?o:0}function jt(o){var l=Ss(o),g=l%1;return l===l?g?l-g:l:0}function Fv(o){return o?Wo(jt(o),0,nt):0}function vi(o){if(typeof o=="number")return o;if(Vr(o))return Qe;if(Cn(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Cn(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=di(o);var g=Oa.test(o);return g||Ro.test(o)?Ud(o.slice(2),g?2:8):Ki.test(o)?Qe:+o}function Uv(o){return Qi(o,Mr(o))}function WA(o){return o?Wo(jt(o),-qe,qe):o===0?o:0}function rn(o){return o==null?"":Wr(o)}var VA=Va(function(o,l){if(gc(l)||Rr(l)){Qi(l,Zn(l),o);return}for(var g in l)Ot.call(l,g)&&cc(o,g,l[g])}),jv=Va(function(o,l){Qi(l,Mr(l),o)}),hf=Va(function(o,l,g,S){Qi(l,Mr(l),o,S)}),GA=Va(function(o,l,g,S){Qi(l,Zn(l),o,S)}),YA=_s(Yd);function ZA(o,l){var g=Wa(o);return l==null?g:b0(g,l)}var JA=Wt(function(o,l){o=st(o);var g=-1,S=l.length,F=S>2?l[2]:n;for(F&&_r(l[0],l[1],F)&&(S=1);++g<S;)for(var K=l[g],ee=Mr(K),ae=-1,be=ee.length;++ae<be;){var Le=ee[ae],Ue=o[Le];(Ue===n||Pi(Ue,zn[Le])&&!Ot.call(o,Le))&&(o[Le]=K[Le])}return o}),XA=Wt(function(o){return o.push(n,iv),j(zv,n,o)});function QA(o,l){return Gi(o,kt(l,3),Xi)}function e4(o,l){return Gi(o,kt(l,3),Jd)}function t4(o,l){return o==null?o:Zd(o,kt(l,3),Mr)}function n4(o,l){return o==null?o:S0(o,kt(l,3),Mr)}function r4(o,l){return o&&Xi(o,kt(l,3))}function i4(o,l){return o&&Jd(o,kt(l,3))}function s4(o){return o==null?[]:Wu(o,Zn(o))}function o4(o){return o==null?[]:Wu(o,Mr(o))}function Ip(o,l,g){var S=o==null?n:Vo(o,l);return S===n?g:S}function a4(o,l){return o!=null&&av(o,l,$3)}function $p(o,l){return o!=null&&av(o,l,P3)}var l4=Q0(function(o,l,g){l!=null&&typeof l.toString!="function"&&(l=Nu.call(l)),o[l]=g},Op(Dr)),c4=Q0(function(o,l,g){l!=null&&typeof l.toString!="function"&&(l=Nu.call(l)),Ot.call(o,l)?o[l].push(g):o[l]=[g]},kt),u4=Wt(fc);function Zn(o){return Rr(o)?m0(o):tp(o)}function Mr(o){return Rr(o)?m0(o,!0):j3(o)}function f4(o,l){var g={};return l=kt(l,3),Xi(o,function(S,F,K){bs(g,l(S,F,K),S)}),g}function h4(o,l){var g={};return l=kt(l,3),Xi(o,function(S,F,K){bs(g,F,l(S,F,K))}),g}var d4=Va(function(o,l,g){Vu(o,l,g)}),zv=Va(function(o,l,g,S){Vu(o,l,g,S)}),p4=_s(function(o,l){var g={};if(o==null)return g;var S=!1;l=at(l,function(K){return K=Qs(K,o),S||(S=K.length>1),K}),Qi(o,gp(o),g),S&&(g=gi(g,w|_|A,lS));for(var F=l.length;F--;)ap(g,l[F]);return g});function g4(o,l){return Hv(o,cf(kt(l)))}var y4=_s(function(o,l){return o==null?{}:H3(o,l)});function Hv(o,l){if(o==null)return{};var g=at(gp(o),function(S){return[S]});return l=kt(l),R0(o,g,function(S,F){return l(S,F[0])})}function m4(o,l,g){l=Qs(l,o);var S=-1,F=l.length;for(F||(F=1,o=n);++S<F;){var K=o==null?n:o[es(l[S])];K===n&&(S=F,K=g),o=ks(K)?K.call(o):K}return o}function v4(o,l,g){return o==null?o:dc(o,l,g)}function b4(o,l,g,S){return S=typeof S=="function"?S:n,o==null?o:dc(o,l,g,S)}var qv=nv(Zn),Kv=nv(Mr);function w4(o,l,g){var S=Dt(o),F=S||to(o)||Za(o);if(l=kt(l,4),g==null){var K=o&&o.constructor;F?g=S?new K:[]:Cn(o)?g=ks(K)?Wa(Du(o)):{}:g={}}return(F?X:Xi)(o,function(ee,ae,be){return l(g,ee,ae,be)}),g}function _4(o,l){return o==null?!0:ap(o,l)}function x4(o,l,g){return o==null?o:F0(o,l,up(g))}function k4(o,l,g,S){return S=typeof S=="function"?S:n,o==null?o:F0(o,l,up(g),S)}function Ja(o){return o==null?[]:ec(o,Zn(o))}function S4(o){return o==null?[]:ec(o,Mr(o))}function E4(o,l,g){return g===n&&(g=l,l=n),g!==n&&(g=vi(g),g=g===g?g:0),l!==n&&(l=vi(l),l=l===l?l:0),Wo(vi(o),l,g)}function A4(o,l,g){return l=Ss(l),g===n?(g=l,l=0):g=Ss(g),o=vi(o),O3(o,l,g)}function C4(o,l,g){if(g&&typeof g!="boolean"&&_r(o,l,g)&&(l=g=n),g===n&&(typeof l=="boolean"?(g=l,l=n):typeof o=="boolean"&&(g=o,o=n)),o===n&&l===n?(o=0,l=1):(o=Ss(o),l===n?(l=o,o=0):l=Ss(l)),o>l){var S=o;o=l,l=S}if(g||o%1||l%1){var F=g0();return ar(o+F*(l-o+Xl("1e-"+((F+"").length-1))),l)}return ip(o,l)}var T4=Ga(function(o,l,g){return l=l.toLowerCase(),o+(g?Wv(l):l)});function Wv(o){return Pp(rn(o).toLowerCase())}function Vv(o){return o=rn(o),o&&o.replace(Na,Ys).replace(Rd,"")}function I4(o,l,g){o=rn(o),l=Wr(l);var S=o.length;g=g===n?S:Wo(jt(g),0,S);var F=g;return g-=l.length,g>=0&&o.slice(g,F)==l}function $4(o){return o=rn(o),o&&Aa.test(o)?o.replace(Hi,zd):o}function P4(o){return o=rn(o),o&&qi.test(o)?o.replace(ci,"\\$&"):o}var O4=Ga(function(o,l,g){return o+(g?"-":"")+l.toLowerCase()}),N4=Ga(function(o,l,g){return o+(g?" ":"")+l.toLowerCase()}),R4=Z0("toLowerCase");function M4(o,l,g){o=rn(o),l=jt(l);var S=l?Ji(o):0;if(!l||S>=l)return o;var F=(l-S)/2;return Qu(Uu(F),g)+o+Qu(Fu(F),g)}function D4(o,l,g){o=rn(o),l=jt(l);var S=l?Ji(o):0;return l&&S<l?o+Qu(l-S,g):o}function B4(o,l,g){o=rn(o),l=jt(l);var S=l?Ji(o):0;return l&&S<l?Qu(l-S,g)+o:o}function L4(o,l,g){return g||l==null?l=0:l&&(l=+l),Kk(rn(o).replace(fs,""),l||0)}function F4(o,l,g){return(g?_r(o,l,g):l===n)?l=1:l=jt(l),sp(rn(o),l)}function U4(){var o=arguments,l=rn(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var j4=Ga(function(o,l,g){return o+(g?"_":"")+l.toLowerCase()});function z4(o,l,g){return g&&typeof g!="number"&&_r(o,l,g)&&(l=g=n),g=g===n?nt:g>>>0,g?(o=rn(o),o&&(typeof l=="string"||l!=null&&!Tp(l))&&(l=Wr(l),!l&&Or(o))?eo(vr(o),0,g):o.split(l,g)):[]}var H4=Ga(function(o,l,g){return o+(g?" ":"")+Pp(l)});function q4(o,l,g){return o=rn(o),g=g==null?0:Wo(jt(g),0,o.length),l=Wr(l),o.slice(g,g+l.length)==l}function K4(o,l,g){var S=H.templateSettings;g&&_r(o,l,g)&&(l=n),o=rn(o),l=hf({},l,S,rv);var F=hf({},l.imports,S.imports,rv),K=Zn(F),ee=ec(F,K),ae,be,Le=0,Ue=l.interpolate||Ws,Ve="__p += '",it=Ut((l.escape||Ws).source+"|"+Ue.source+"|"+(Ue===qs?$a:Ws).source+"|"+(l.evaluate||Ws).source+"|$","g"),mt="//# sourceURL="+(Ot.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fd+"]")+`
`;o.replace(it,function(At,Yt,Qt,Gr,xr,Yr){return Qt||(Qt=Gr),Ve+=o.slice(Le,Yr).replace(Wi,Hd),Yt&&(ae=!0,Ve+=`' +
__e(`+Yt+`) +
'`),xr&&(be=!0,Ve+=`';
`+xr+`;
__p += '`),Qt&&(Ve+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),Le=Yr+At.length,At}),Ve+=`';
`;var Et=Ot.call(l,"variable")&&l.variable;if(!Et)Ve=`with (obj) {
`+Ve+`
}
`;else if(Kl.test(Et))throw new Be(c);Ve=(be?Ve.replace(Po,""):Ve).replace(Ea,"$1").replace(li,"$1;"),Ve="function("+(Et||"obj")+`) {
`+(Et?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(be?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ve+`return __p
}`;var zt=Yv(function(){return lt(K,mt+"return "+Ve).apply(n,ee)});if(zt.source=Ve,Cp(zt))throw zt;return zt}function W4(o){return rn(o).toLowerCase()}function V4(o){return rn(o).toUpperCase()}function G4(o,l,g){if(o=rn(o),o&&(g||l===n))return di(o);if(!o||!(l=Wr(l)))return o;var S=vr(o),F=vr(l),K=en(S,F),ee=jo(S,F)+1;return eo(S,K,ee).join("")}function Y4(o,l,g){if(o=rn(o),o&&(g||l===n))return o.slice(0,Pu(o)+1);if(!o||!(l=Wr(l)))return o;var S=vr(o),F=jo(S,vr(l))+1;return eo(S,0,F).join("")}function Z4(o,l,g){if(o=rn(o),o&&(g||l===n))return o.replace(fs,"");if(!o||!(l=Wr(l)))return o;var S=vr(o),F=en(S,vr(l));return eo(S,F).join("")}function J4(o,l){var g=ce,S=me;if(Cn(l)){var F="separator"in l?l.separator:F;g="length"in l?jt(l.length):g,S="omission"in l?Wr(l.omission):S}o=rn(o);var K=o.length;if(Or(o)){var ee=vr(o);K=ee.length}if(g>=K)return o;var ae=g-Ji(S);if(ae<1)return S;var be=ee?eo(ee,0,ae).join(""):o.slice(0,ae);if(F===n)return be+S;if(ee&&(ae+=be.length-ae),Tp(F)){if(o.slice(ae).search(F)){var Le,Ue=be;for(F.global||(F=Ut(F.source,rn(Pa.exec(F))+"g")),F.lastIndex=0;Le=F.exec(Ue);)var Ve=Le.index;be=be.slice(0,Ve===n?ae:Ve)}}else if(o.indexOf(Wr(F),ae)!=ae){var it=be.lastIndexOf(F);it>-1&&(be=be.slice(0,it))}return be+S}function X4(o){return o=rn(o),o&&Oo.test(o)?o.replace(Si,rc):o}var Q4=Ga(function(o,l,g){return o+(g?" ":"")+l.toUpperCase()}),Pp=Z0("toUpperCase");function Gv(o,l,g){return o=rn(o),l=g?n:l,l===n?tc(o)?le(o):Vt(o):o.match(l)||[]}var Yv=Wt(function(o,l){try{return j(o,n,l)}catch(g){return Cp(g)?g:new Be(g)}}),eC=_s(function(o,l){return X(l,function(g){g=es(g),bs(o,g,Ep(o[g],o))}),o});function tC(o){var l=o==null?0:o.length,g=kt();return o=l?at(o,function(S){if(typeof S[1]!="function")throw new Kt(a);return[g(S[0]),S[1]]}):[],Wt(function(S){for(var F=-1;++F<l;){var K=o[F];if(j(K[0],this,S))return j(K[1],this,S)}})}function nC(o){return C3(gi(o,w))}function Op(o){return function(){return o}}function rC(o,l){return o==null||o!==o?l:o}var iC=X0(),sC=X0(!0);function Dr(o){return o}function Np(o){return T0(typeof o=="function"?o:gi(o,w))}function oC(o){return $0(gi(o,w))}function aC(o,l){return P0(o,gi(l,w))}var lC=Wt(function(o,l){return function(g){return fc(g,o,l)}}),cC=Wt(function(o,l){return function(g){return fc(o,g,l)}});function Rp(o,l,g){var S=Zn(l),F=Wu(l,S);g==null&&!(Cn(l)&&(F.length||!S.length))&&(g=l,l=o,o=this,F=Wu(l,Zn(l)));var K=!(Cn(g)&&"chain"in g)||!!g.chain,ee=ks(o);return X(F,function(ae){var be=l[ae];o[ae]=be,ee&&(o.prototype[ae]=function(){var Le=this.__chain__;if(K||Le){var Ue=o(this.__wrapped__),Ve=Ue.__actions__=Nr(this.__actions__);return Ve.push({func:be,args:arguments,thisArg:o}),Ue.__chain__=Le,Ue}return be.apply(o,Mt([this.value()],arguments))})}),o}function uC(){return En._===this&&(En._=Dk),this}function Mp(){}function fC(o){return o=jt(o),Wt(function(l){return O0(l,o)})}var hC=hp(at),dC=hp(Ie),pC=hp(An);function Zv(o){return bp(o)?gs(es(o)):q3(o)}function gC(o){return function(l){return o==null?n:Vo(o,l)}}var yC=ev(),mC=ev(!0);function Dp(){return[]}function Bp(){return!1}function vC(){return{}}function bC(){return""}function wC(){return!0}function _C(o,l){if(o=jt(o),o<1||o>qe)return[];var g=nt,S=ar(o,nt);l=kt(l),o-=nt;for(var F=Fo(S,l);++g<o;)l(g);return F}function xC(o){return Dt(o)?at(o,es):Vr(o)?[o]:Nr(yv(rn(o)))}function kC(o){var l=++Rk;return rn(o)+l}var SC=Xu(function(o,l){return o+l},0),EC=dp("ceil"),AC=Xu(function(o,l){return o/l},1),CC=dp("floor");function TC(o){return o&&o.length?Ku(o,Dr,Xd):n}function IC(o,l){return o&&o.length?Ku(o,kt(l,2),Xd):n}function $C(o){return Hr(o,Dr)}function PC(o,l){return Hr(o,kt(l,2))}function OC(o){return o&&o.length?Ku(o,Dr,np):n}function NC(o,l){return o&&o.length?Ku(o,kt(l,2),np):n}var RC=Xu(function(o,l){return o*l},1),MC=dp("round"),DC=Xu(function(o,l){return o-l},0);function BC(o){return o&&o.length?or(o,Dr):0}function LC(o,l){return o&&o.length?or(o,kt(l,2)):0}return H.after=oA,H.ary=Cv,H.assign=VA,H.assignIn=jv,H.assignInWith=hf,H.assignWith=GA,H.at=YA,H.before=Tv,H.bind=Ep,H.bindAll=eC,H.bindKey=Iv,H.castArray=vA,H.chain=Sv,H.chunk=CS,H.compact=TS,H.concat=IS,H.cond=tC,H.conforms=nC,H.constant=Op,H.countBy=BE,H.create=ZA,H.curry=$v,H.curryRight=Pv,H.debounce=Ov,H.defaults=JA,H.defaultsDeep=XA,H.defer=aA,H.delay=lA,H.difference=$S,H.differenceBy=PS,H.differenceWith=OS,H.drop=NS,H.dropRight=RS,H.dropRightWhile=MS,H.dropWhile=DS,H.fill=BS,H.filter=FE,H.flatMap=zE,H.flatMapDeep=HE,H.flatMapDepth=qE,H.flatten=wv,H.flattenDeep=LS,H.flattenDepth=FS,H.flip=cA,H.flow=iC,H.flowRight=sC,H.fromPairs=US,H.functions=s4,H.functionsIn=o4,H.groupBy=KE,H.initial=zS,H.intersection=HS,H.intersectionBy=qS,H.intersectionWith=KS,H.invert=l4,H.invertBy=c4,H.invokeMap=VE,H.iteratee=Np,H.keyBy=GE,H.keys=Zn,H.keysIn=Mr,H.map=of,H.mapKeys=f4,H.mapValues=h4,H.matches=oC,H.matchesProperty=aC,H.memoize=lf,H.merge=d4,H.mergeWith=zv,H.method=lC,H.methodOf=cC,H.mixin=Rp,H.negate=cf,H.nthArg=fC,H.omit=p4,H.omitBy=g4,H.once=uA,H.orderBy=YE,H.over=hC,H.overArgs=fA,H.overEvery=dC,H.overSome=pC,H.partial=Ap,H.partialRight=Nv,H.partition=ZE,H.pick=y4,H.pickBy=Hv,H.property=Zv,H.propertyOf=gC,H.pull=YS,H.pullAll=xv,H.pullAllBy=ZS,H.pullAllWith=JS,H.pullAt=XS,H.range=yC,H.rangeRight=mC,H.rearg=hA,H.reject=QE,H.remove=QS,H.rest=dA,H.reverse=kp,H.sampleSize=tA,H.set=v4,H.setWith=b4,H.shuffle=nA,H.slice=eE,H.sortBy=sA,H.sortedUniq=aE,H.sortedUniqBy=lE,H.split=z4,H.spread=pA,H.tail=cE,H.take=uE,H.takeRight=fE,H.takeRightWhile=hE,H.takeWhile=dE,H.tap=TE,H.throttle=gA,H.thru=sf,H.toArray=Lv,H.toPairs=qv,H.toPairsIn=Kv,H.toPath=xC,H.toPlainObject=Uv,H.transform=w4,H.unary=yA,H.union=pE,H.unionBy=gE,H.unionWith=yE,H.uniq=mE,H.uniqBy=vE,H.uniqWith=bE,H.unset=_4,H.unzip=Sp,H.unzipWith=kv,H.update=x4,H.updateWith=k4,H.values=Ja,H.valuesIn=S4,H.without=wE,H.words=Gv,H.wrap=mA,H.xor=_E,H.xorBy=xE,H.xorWith=kE,H.zip=SE,H.zipObject=EE,H.zipObjectDeep=AE,H.zipWith=CE,H.entries=qv,H.entriesIn=Kv,H.extend=jv,H.extendWith=hf,Rp(H,H),H.add=SC,H.attempt=Yv,H.camelCase=T4,H.capitalize=Wv,H.ceil=EC,H.clamp=E4,H.clone=bA,H.cloneDeep=_A,H.cloneDeepWith=xA,H.cloneWith=wA,H.conformsTo=kA,H.deburr=Vv,H.defaultTo=rC,H.divide=AC,H.endsWith=I4,H.eq=Pi,H.escape=$4,H.escapeRegExp=P4,H.every=LE,H.find=UE,H.findIndex=vv,H.findKey=QA,H.findLast=jE,H.findLastIndex=bv,H.findLastKey=e4,H.floor=CC,H.forEach=Ev,H.forEachRight=Av,H.forIn=t4,H.forInRight=n4,H.forOwn=r4,H.forOwnRight=i4,H.get=Ip,H.gt=SA,H.gte=EA,H.has=a4,H.hasIn=$p,H.head=_v,H.identity=Dr,H.includes=WE,H.indexOf=jS,H.inRange=A4,H.invoke=u4,H.isArguments=Zo,H.isArray=Dt,H.isArrayBuffer=AA,H.isArrayLike=Rr,H.isArrayLikeObject=Rn,H.isBoolean=CA,H.isBuffer=to,H.isDate=TA,H.isElement=IA,H.isEmpty=$A,H.isEqual=PA,H.isEqualWith=OA,H.isError=Cp,H.isFinite=NA,H.isFunction=ks,H.isInteger=Rv,H.isLength=uf,H.isMap=Mv,H.isMatch=RA,H.isMatchWith=MA,H.isNaN=DA,H.isNative=BA,H.isNil=FA,H.isNull=LA,H.isNumber=Dv,H.isObject=Cn,H.isObjectLike=On,H.isPlainObject=mc,H.isRegExp=Tp,H.isSafeInteger=UA,H.isSet=Bv,H.isString=ff,H.isSymbol=Vr,H.isTypedArray=Za,H.isUndefined=jA,H.isWeakMap=zA,H.isWeakSet=HA,H.join=WS,H.kebabCase=O4,H.last=mi,H.lastIndexOf=VS,H.lowerCase=N4,H.lowerFirst=R4,H.lt=qA,H.lte=KA,H.max=TC,H.maxBy=IC,H.mean=$C,H.meanBy=PC,H.min=OC,H.minBy=NC,H.stubArray=Dp,H.stubFalse=Bp,H.stubObject=vC,H.stubString=bC,H.stubTrue=wC,H.multiply=RC,H.nth=GS,H.noConflict=uC,H.noop=Mp,H.now=af,H.pad=M4,H.padEnd=D4,H.padStart=B4,H.parseInt=L4,H.random=C4,H.reduce=JE,H.reduceRight=XE,H.repeat=F4,H.replace=U4,H.result=m4,H.round=MC,H.runInContext=W,H.sample=eA,H.size=rA,H.snakeCase=j4,H.some=iA,H.sortedIndex=tE,H.sortedIndexBy=nE,H.sortedIndexOf=rE,H.sortedLastIndex=iE,H.sortedLastIndexBy=sE,H.sortedLastIndexOf=oE,H.startCase=H4,H.startsWith=q4,H.subtract=DC,H.sum=BC,H.sumBy=LC,H.template=K4,H.times=_C,H.toFinite=Ss,H.toInteger=jt,H.toLength=Fv,H.toLower=W4,H.toNumber=vi,H.toSafeInteger=WA,H.toString=rn,H.toUpper=V4,H.trim=G4,H.trimEnd=Y4,H.trimStart=Z4,H.truncate=J4,H.unescape=X4,H.uniqueId=kC,H.upperCase=Q4,H.upperFirst=Pp,H.each=Ev,H.eachRight=Av,H.first=_v,Rp(H,function(){var o={};return Xi(H,function(l,g){Ot.call(H.prototype,g)||(o[g]=l)}),o}(),{chain:!1}),H.VERSION=r,X(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){H[o].placeholder=H}),X(["drop","take"],function(o,l){Xt.prototype[o]=function(g){g=g===n?1:Hn(jt(g),0);var S=this.__filtered__&&!l?new Xt(this):this.clone();return S.__filtered__?S.__takeCount__=ar(g,S.__takeCount__):S.__views__.push({size:ar(g,nt),type:o+(S.__dir__<0?"Right":"")}),S},Xt.prototype[o+"Right"]=function(g){return this.reverse()[o](g).reverse()}}),X(["filter","map","takeWhile"],function(o,l){var g=l+1,S=g==Q||g==Ae;Xt.prototype[o]=function(F){var K=this.clone();return K.__iteratees__.push({iteratee:kt(F,3),type:g}),K.__filtered__=K.__filtered__||S,K}}),X(["head","last"],function(o,l){var g="take"+(l?"Right":"");Xt.prototype[o]=function(){return this[g](1).value()[0]}}),X(["initial","tail"],function(o,l){var g="drop"+(l?"":"Right");Xt.prototype[o]=function(){return this.__filtered__?new Xt(this):this[g](1)}}),Xt.prototype.compact=function(){return this.filter(Dr)},Xt.prototype.find=function(o){return this.filter(o).head()},Xt.prototype.findLast=function(o){return this.reverse().find(o)},Xt.prototype.invokeMap=Wt(function(o,l){return typeof o=="function"?new Xt(this):this.map(function(g){return fc(g,o,l)})}),Xt.prototype.reject=function(o){return this.filter(cf(kt(o)))},Xt.prototype.slice=function(o,l){o=jt(o);var g=this;return g.__filtered__&&(o>0||l<0)?new Xt(g):(o<0?g=g.takeRight(-o):o&&(g=g.drop(o)),l!==n&&(l=jt(l),g=l<0?g.dropRight(-l):g.take(l-o)),g)},Xt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},Xt.prototype.toArray=function(){return this.take(nt)},Xi(Xt.prototype,function(o,l){var g=/^(?:filter|find|map|reject)|While$/.test(l),S=/^(?:head|last)$/.test(l),F=H[S?"take"+(l=="last"?"Right":""):l],K=S||/^find/.test(l);F&&(H.prototype[l]=function(){var ee=this.__wrapped__,ae=S?[1]:arguments,be=ee instanceof Xt,Le=ae[0],Ue=be||Dt(ee),Ve=function(Yt){var Qt=F.apply(H,Mt([Yt],ae));return S&&it?Qt[0]:Qt};Ue&&g&&typeof Le=="function"&&Le.length!=1&&(be=Ue=!1);var it=this.__chain__,mt=!!this.__actions__.length,Et=K&&!it,zt=be&&!mt;if(!K&&Ue){ee=zt?ee:new Xt(this);var At=o.apply(ee,ae);return At.__actions__.push({func:sf,args:[Ve],thisArg:n}),new pi(At,it)}return Et&&zt?o.apply(this,ae):(At=this.thru(Ve),Et?S?At.value()[0]:At.value():At)})}),X(["pop","push","shift","sort","splice","unshift"],function(o){var l=jn[o],g=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",S=/^(?:pop|shift)$/.test(o);H.prototype[o]=function(){var F=arguments;if(S&&!this.__chain__){var K=this.value();return l.apply(Dt(K)?K:[],F)}return this[g](function(ee){return l.apply(Dt(ee)?ee:[],F)})}}),Xi(Xt.prototype,function(o,l){var g=H[l];if(g){var S=g.name+"";Ot.call(Ka,S)||(Ka[S]=[]),Ka[S].push({name:l,func:g})}}),Ka[Ju(n,$).name]=[{name:"wrapper",func:n}],Xt.prototype.clone=Xk,Xt.prototype.reverse=Qk,Xt.prototype.value=e3,H.prototype.at=IE,H.prototype.chain=$E,H.prototype.commit=PE,H.prototype.next=OE,H.prototype.plant=RE,H.prototype.reverse=ME,H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=DE,H.prototype.first=H.prototype.head,ic&&(H.prototype[ic]=NE),H},Ce=Se();Ai?((Ai.exports=Ce)._=Ce,Ua._=Ce):En._=Ce}).call(Dn)})(ah,ah.exports);var dr=ah.exports;const Cc=jr(dr),k1="c2fc1ad0-f76f-11ec-b939-0242ac120002",S1=new Set;In.config({driver:[In.LOCALSTORAGE,In.INDEXEDDB,In.WEBSQL]});let e6=class Y_{constructor(t="",n=null){xe(this,"id");xe(this,"parent");xe(this,"children",new Map);xe(this,"on_subscriptions",new Map);xe(this,"map_subscriptions",new Map);xe(this,"value");xe(this,"counter",0);xe(this,"loaded",!1);xe(this,"saveLocalForage",Cc.throttle(async()=>{if(this.loaded||await this.loadLocalForage(),this.children.size){const t=Array.from(this.children.keys());In.setItem(this.id,t)}else this.value===void 0?In.removeItem(this.id):In.setItem(this.id,this.value===null?k1:this.value)},500));xe(this,"loadLocalForage",Cc.throttle(async()=>{if(S1.has(this.id))return;let t=await In.getItem(this.id);if(t===null)t=void 0,S1.add(this.id);else if(t===k1)t=null;else if(Array.isArray(t)){const n={};await Promise.all(t.map(async r=>{n[r]=await this.get(r).once()})),t=n}else this.value=t;return this.loaded=!0,t},500));xe(this,"doCallbacks",Cc.throttle(()=>{for(const[t,n]of this.on_subscriptions){const r=()=>this.on_subscriptions.delete(t);this.once(n,r,!1)}if(this.parent){for(const[t,n]of this.parent.on_subscriptions){const r=()=>{var i;return(i=this.parent)==null?void 0:i.on_subscriptions.delete(t)};this.parent.once(n,r,!1)}for(const[t,n]of this.parent.map_subscriptions){const r=()=>{var i;return(i=this.parent)==null?void 0:i.map_subscriptions.delete(t)};this.once(n,r,!1)}}},40));this.id=t,this.parent=n}get(t){const n=this.children.get(t);if(n)return n;const r=new Y_(`${this.id}/${t}`,this);return this.children.set(t,r),this.saveLocalForage(),r}put(t){if(Array.isArray(t))throw new Error("Sorry, we don't deal with arrays");if(typeof t=="object"&&t!==null){this.value=void 0;for(const n in t)this.get(n).put(t[n]);Cc.defer(()=>this.doCallbacks(),100);return}this.children=new Map,this.value=t,this.doCallbacks(),this.saveLocalForage()}async once(t,n,r=!0){let i;if(this.children.size?(i={},await Promise.all(Array.from(this.children.keys()).map(async s=>{i[s]=await this.get(s).once(void 0,n)}))):this.value!==void 0?i=this.value:i=await this.loadLocalForage(),i!==void 0||r)return t&&t(i,this.id.slice(this.id.lastIndexOf("/")+1),n||(()=>{})),i}on(t){const n=this.counter++;this.on_subscriptions.set(n,t);const r=()=>this.on_subscriptions.delete(n);return this.once(t,r,!1),r}map(t){var s;const n=this.counter++;this.map_subscriptions.set(n,t);const r=()=>this.map_subscriptions.delete(n),i=()=>{for(const a of this.children.values())a.once(t,r,!1)};return this.loaded?i():(s=this.loadLocalForage())==null||s.then(i),r}};const Pe=new e6;var zs={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.createBitArray=t6;Cl.fromBits=r6;Cl.toBits=n6;function t6(e){return new Uint8Array(e)}function Z_(e,t,n,r,i){var s=(1<<r)-1,a=0,c=0,f=0;if(e.forEach(function(b){for(a=(a<<t)+b,c+=t;c>=r;)c-=r,n[f]=a>>c&s,f+=1}),i)c>0&&(n[f]=a<<r-c&s);else{if(c>=t)throw new Error("Excessive padding: ".concat(c," (max ").concat(t-1," allowed)"));if(a%(1<<c)!==0)throw new Error("Non-zero padding")}}function n6(e,t,n){if(t>8||t<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return Z_(e,8,n,t,!0),n}function r6(e,t,n){if(t>8||t<1)throw new RangeError("Invalid bits per element; 1 to 8 expected");return Z_(e,t,n,8,!1),n}var ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.CHECKSUM_LENGTH=void 0;ji.createChecksum=a6;ji.decode=t2;ji.decodeWithPrefix=c6;ji.detectCase=u6;ji.encode=l6;ji.expandPrefix=e2;ji.verifyChecksum=o6;var J_=Cl,$g="qpzry9x8gf2tvdw0s3jn54khce6mua7l",X_=734539939,E1=33,A1=126,Pg=6;ji.CHECKSUM_LENGTH=Pg;var i6=function(){for(var e=new Map,t=0;t<$g.length;t+=1)e.set($g[t],t);return e}(),s6=[996825010,642813549,513874426,1027748829,705979059];function Q_(e){return e.reduce(function(t,n){var r=t>>25,i=(t&33554431)<<5^n;return s6.reduce(function(s,a,c){return r>>c&1?s^a:s},i)},1)}function e2(e,t){for(var n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[n]=r>>5,t[n+e.length+1]=r&31}t[e.length]=0}function o6(e){switch(Q_(e)){case 1:return"bech32";case X_:return"bech32m";default:return}}function a6(e,t){var n;switch(t){case"bech32":n=1;break;case"bech32m":n=X_;break;default:throw Error("Invalid encoding value: ".concat(t,"; expected bech32 or bech32m"))}for(var r=Q_(e)^n,i=0;i<Pg;i+=1){var s=5*(5-i);e[e.length-Pg+i]=r>>s&31}}function l6(e){return e.reduce(function(t,n){return t+$g[n]},"")}function t2(e,t){for(var n=t||(0,J_.createBitArray)(e.length),r=0;r<e.length;r+=1){var i=i6.get(e[r]);if(i===void 0)throw new Error("Invalid char in message: ".concat(e[r]));n[r]=i}return n}function c6(e,t){var n=t.length+2*e.length+1,r=(0,J_.createBitArray)(n);return e2(e,r.subarray(0,2*e.length+1)),t2(t,r.subarray(2*e.length+1)),r}function u6(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"message",n=!1,r=!1,i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<E1||s>A1)throw new TypeError("Invalid char in ".concat(t,": ").concat(s,"; ")+"should be in ASCII range ".concat(E1,"-").concat(A1));r=r||s>=65&&s<=90,n=n||s>=97&&s<=122}if(n&&r)throw new TypeError("Mixed-case ".concat(t));return r?"upper":n?"lower":null}Object.defineProperty(zs,"__esModule",{value:!0});zs.BitcoinAddress=void 0;var Og=zs.decode=p6;zs.decodeTo5BitArray=Qy;var C1=zs.encode=d6;zs.encode5BitArray=Xy;zs.from5BitArray=Jy;zs.to5BitArray=Zy;var Kc=Cl,_i=ji;function f6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h6(e,t,n){return t&&T1(e.prototype,t),n&&T1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var lh=90;function Zy(e,t){var n=Math.ceil(e.length*8/5),r=t||(0,Kc.createBitArray)(n);return(0,Kc.toBits)(e,5,r)}function Jy(e,t){var n=Math.floor(e.length*5/8),r=t||new Uint8Array(n);return(0,Kc.fromBits)(e,5,r)}function Xy(e,t){var n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32",i=2*e.length+1+t.length+_i.CHECKSUM_LENGTH;if(i-e.length>lh)throw new Error("Message to be produced is too long (max ".concat(lh," supported)"));var s=(n=(0,_i.detectCase)(e,"prefix"))!==null&&n!==void 0?n:"lower",a=(0,Kc.createBitArray)(i);(0,_i.expandPrefix)(e.toLowerCase(),a.subarray(0,2*e.length+1));var c=a.subarray(2*e.length+1,a.length-_i.CHECKSUM_LENGTH);c.set(t),(0,_i.createChecksum)(a,r);var f=(0,_i.encode)(a.subarray(2*e.length+1));return s==="upper"&&(f=f.toUpperCase()),"".concat(e,"1").concat(f)}function d6(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"bech32";return Xy(e,Zy(t),n)}function Qy(e){if(e.length>lh)throw new TypeError("Message too long; max ".concat(lh," expected"));(0,_i.detectCase)(e);var t=e.toLowerCase(),n=t.lastIndexOf("1");if(n<0)throw new Error('No separator char ("1") found');if(n>e.length-_i.CHECKSUM_LENGTH-1)throw new Error("Data part of the message too short (at least ".concat(_i.CHECKSUM_LENGTH," chars expected)"));var r=t.substring(0,n),i=(0,_i.decodeWithPrefix)(r,t.substring(n+1)),s=(0,_i.verifyChecksum)(i);if(s===void 0)throw new Error("Invalid checksum");return{prefix:r,encoding:s,data:i.subarray(2*r.length+1,i.length-_i.CHECKSUM_LENGTH)}}function p6(e){var t=Qy(e),n=t.prefix,r=t.encoding,i=t.data;return{prefix:n,encoding:r,data:Jy(i)}}var g6=function(){function e(t,n,r){if(f6(this,e),t!=="bc"&&t!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');if(n<0||n>16)throw new RangeError("Invalid scriptVersion, value in range [0, 16] expected");if(r.length<2||r.length>40)throw new RangeError("Invalid script length: expected 2 to 40 bytes");if(n===0&&r.length!==20&&r.length!==32)throw new Error("Invalid v0 script length: expected 20 or 32 bytes");this.prefix=t,this.scriptVersion=n,this.data=r}return h6(e,[{key:"type",value:function(){if(this.scriptVersion===0)switch(this.data.length){case 20:return"p2wpkh";case 32:return"p2wsh";default:return}}},{key:"encode",value:function(){var n=Math.ceil(this.data.length*8/5),r=(0,Kc.createBitArray)(n+1);r[0]=this.scriptVersion,Zy(this.data,r.subarray(1));var i=this.scriptVersion===0?"bech32":"bech32m";return Xy(this.prefix,r,i)}}],[{key:"decode",value:function(n){var r=Qy(n),i=r.prefix,s=r.data,a=r.encoding;if(i!=="bc"&&i!=="tb")throw new Error('Invalid human-readable prefix, "bc" or "tb" expected');var c=s[0];if(c===0&&a!=="bech32")throw Error("Unexpected encoding ".concat(a," used for version 0 script"));if(c>0&&a!=="bech32m")throw Error("Unexpected encoding ".concat(a," used for version ").concat(c," script"));return new this(i,c,Jy(s.subarray(1)))}}]),e}();zs.BitcoinAddress=g6;function ch(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function n2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function co(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function r2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ch(e.outputLen),ch(e.blockLen)}function i2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function s2(e,t){co(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const po={number:ch,bool:n2,bytes:co,hash:r2,exists:i2,output:s2},y6=Object.freeze(Object.defineProperty({__proto__:null,bool:n2,bytes:co,default:po,exists:i2,hash:r2,number:ch,output:s2},Symbol.toStringTag,{value:"Module"})),Uf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,m6=Object.freeze(Object.defineProperty({__proto__:null,crypto:Uf},Symbol.toStringTag,{value:"Module"}));/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const v6=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),b6=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ha=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ri=(e,t)=>e<<32-t|e>>>t,o2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!o2)throw new Error("Non little-endian hardware is not supported");const w6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cr(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=w6[e[n]];return t}function bo(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[n]=s}return t}const a2=async()=>{};async function _6(e,t,n){let r=Date.now();for(let i=0;i<e;i++){n(i);const s=Date.now()-r;s>=0&&s<t||(await a2(),r+=s)}}function em(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function du(e){if(typeof e=="string"&&(e=em(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}function oa(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,i)=>r+i.length,0),n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const s=e[r];n.set(s,i),i+=s.length}return n}let tm=class{clone(){return this._cloneInto()}};const x6=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function k6(e,t){if(t!==void 0&&(typeof t!="object"||!x6(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}function Eo(e){const t=r=>e().update(du(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function S6(e){const t=(r,i)=>e(i).update(du(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function nd(e=32){if(Uf&&typeof Uf.getRandomValues=="function")return Uf.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const E6=Object.freeze(Object.defineProperty({__proto__:null,Hash:tm,asyncLoop:_6,bytesToHex:cr,checkOpts:k6,concatBytes:oa,createView:ha,hexToBytes:bo,isLE:o2,nextTick:a2,randomBytes:nd,rotr:Ri,toBytes:du,u32:b6,u8:v6,utf8ToBytes:em,wrapConstructor:Eo,wrapConstructorWithOpts:S6},Symbol.toStringTag,{value:"Module"}));function A6(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),c=Number(n&s),f=r?4:0,b=r?0:4;e.setUint32(t+f,a,r),e.setUint32(t+b,c,r)}class nm extends tm{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ha(this.buffer)}update(t){po.exists(this);const{view:n,buffer:r,blockLen:i}=this;t=du(t);const s=t.length;for(let a=0;a<s;){const c=Math.min(i-this.pos,s-a);if(c===i){const f=ha(t);for(;i<=s-a;a+=i)this.process(f,a);continue}r.set(t.subarray(a,a+c),this.pos),this.pos+=c,a+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){po.exists(this),po.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let w=a;w<i;w++)n[w]=0;A6(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=ha(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=f/4,m=this.get();if(b>m.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<b;w++)c.setUint32(4*w,m[w],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:a,pos:c}=this;return t.length=i,t.pos=c,t.finished=s,t.destroyed=a,i%n&&t.buffer.set(r),t}}const C6=(e,t,n)=>e&t^~e&n,T6=(e,t,n)=>e&t^e&n^t&n,I6=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),no=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ro=new Uint32Array(64);class l2 extends nm{constructor(){super(64,32,8,!1),this.A=no[0]|0,this.B=no[1]|0,this.C=no[2]|0,this.D=no[3]|0,this.E=no[4]|0,this.F=no[5]|0,this.G=no[6]|0,this.H=no[7]|0}get(){const{A:t,B:n,C:r,D:i,E:s,F:a,G:c,H:f}=this;return[t,n,r,i,s,a,c,f]}set(t,n,r,i,s,a,c,f){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=c|0,this.H=f|0}process(t,n){for(let w=0;w<16;w++,n+=4)ro[w]=t.getUint32(n,!1);for(let w=16;w<64;w++){const _=ro[w-15],A=ro[w-2],I=Ri(_,7)^Ri(_,18)^_>>>3,C=Ri(A,17)^Ri(A,19)^A>>>10;ro[w]=C+ro[w-7]+I+ro[w-16]|0}let{A:r,B:i,C:s,D:a,E:c,F:f,G:b,H:m}=this;for(let w=0;w<64;w++){const _=Ri(c,6)^Ri(c,11)^Ri(c,25),A=m+_+C6(c,f,b)+I6[w]+ro[w]|0,C=(Ri(r,2)^Ri(r,13)^Ri(r,22))+T6(r,i,s)|0;m=b,b=f,f=c,c=a+A|0,a=s,s=i,i=r,r=A+C|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,c=c+this.E|0,f=f+this.F|0,b=b+this.G|0,m=m+this.H|0,this.set(r,i,s,a,c,f,b,m)}roundClean(){ro.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class $6 extends l2{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ni=Eo(()=>new l2),P6=Eo(()=>new $6),O6=Object.freeze(Object.defineProperty({__proto__:null,sha224:P6,sha256:ni},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c2=BigInt(0),rd=BigInt(1),N6=BigInt(2),id=e=>e instanceof Uint8Array,R6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bl(e){if(!id(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=R6[e[n]];return t}function u2(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function rm(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function wl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");t[n]=s}return t}function Ar(e){return rm(bl(e))}function im(e){if(!id(e))throw new Error("Uint8Array expected");return rm(bl(Uint8Array.from(e).reverse()))}const go=(e,t)=>wl(e.toString(16).padStart(t*2,"0")),f2=(e,t)=>go(e,t).reverse(),M6=e=>wl(u2(e));function nr(e,t,n){let r;if(typeof t=="string")try{r=wl(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(id(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Xr(...e){const t=new Uint8Array(e.reduce((r,i)=>r+i.length,0));let n=0;return e.forEach(r=>{if(!id(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function D6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function B6(e){let t;for(t=0;e>c2;e>>=rd,t+=1);return t}const L6=(e,t)=>e>>BigInt(t)&rd,F6=(e,t,n)=>e|(n?rd:c2)<<BigInt(t),sm=e=>(N6<<BigInt(e-1))-rd,zp=e=>new Uint8Array(e),I1=e=>Uint8Array.from(e);function h2(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=zp(e),i=zp(e),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},c=(...w)=>n(i,r,...w),f=(w=zp())=>{i=c(I1([0]),w),r=c(),w.length!==0&&(i=c(I1([1]),w),r=c())},b=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const _=[];for(;w<t;){r=c();const A=r.slice();_.push(A),w+=r.length}return Xr(..._)};return(w,_)=>{a(),f(w);let A;for(;!(A=_(b()));)f();return a(),A}}const U6={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Tl(e,t,n={}){const r=(i,s,a)=>{const c=U6[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const f=e[i];if(!(a&&f===void 0)&&!c(f,e))throw new Error(`Invalid param ${String(i)}=${f} (${typeof f}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const j6=Object.freeze(Object.defineProperty({__proto__:null,bitGet:L6,bitLen:B6,bitMask:sm,bitSet:F6,bytesToHex:bl,bytesToNumberBE:Ar,bytesToNumberLE:im,concatBytes:Xr,createHmacDrbg:h2,ensureBytes:nr,equalBytes:D6,hexToBytes:wl,hexToNumber:rm,numberToBytesBE:go,numberToBytesLE:f2,numberToHexUnpadded:u2,numberToVarBytesBE:M6,utf8ToBytes:sd,validateObject:Tl},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xn=BigInt(0),Bn=BigInt(1),na=BigInt(2),z6=BigInt(3),Ng=BigInt(4),$1=BigInt(5),P1=BigInt(8);BigInt(9);BigInt(16);function Wn(e,t){const n=e%t;return n>=Xn?n:t+n}function H6(e,t,n){if(n<=Xn||t<Xn)throw new Error("Expected power/modulo > 0");if(n===Bn)return Xn;let r=Bn;for(;t>Xn;)t&Bn&&(r=r*e%n),e=e*e%n,t>>=Bn;return r}function wi(e,t,n){let r=e;for(;t-- >Xn;)r*=r,r%=n;return r}function Rg(e,t){if(e===Xn||t<=Xn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Wn(e,t),r=t,i=Xn,s=Bn;for(;n!==Xn;){const c=r/n,f=r%n,b=i-s*c;r=n,n=f,i=s,s=b}if(r!==Bn)throw new Error("invert: does not exist");return Wn(i,t)}function q6(e){const t=(e-Bn)/na;let n,r,i;for(n=e-Bn,r=0;n%na===Xn;n/=na,r++);for(i=na;i<e&&H6(i,t,e)!==e-Bn;i++);if(r===1){const a=(e+Bn)/Ng;return function(f,b){const m=f.pow(b,a);if(!f.eql(f.sqr(m),b))throw new Error("Cannot find square root");return m}}const s=(n+Bn)/na;return function(c,f){if(c.pow(f,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let b=r,m=c.pow(c.mul(c.ONE,i),n),w=c.pow(f,s),_=c.pow(f,n);for(;!c.eql(_,c.ONE);){if(c.eql(_,c.ZERO))return c.ZERO;let A=1;for(let C=c.sqr(_);A<b&&!c.eql(C,c.ONE);A++)C=c.sqr(C);const I=c.pow(m,Bn<<BigInt(b-A-1));m=c.sqr(I),w=c.mul(w,I),_=c.mul(_,m),b=A}return w}}function K6(e){if(e%Ng===z6){const t=(e+Bn)/Ng;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(e%P1===$1){const t=(e-$1)/P1;return function(r,i){const s=r.mul(i,na),a=r.pow(s,t),c=r.mul(i,a),f=r.mul(r.mul(c,na),a),b=r.mul(c,r.sub(f,r.ONE));if(!r.eql(r.sqr(b),i))throw new Error("Cannot find square root");return b}}return q6(e)}const W6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function d2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=W6.reduce((r,i)=>(r[i]="function",r),t);return Tl(e,n)}function V6(e,t,n){if(n<Xn)throw new Error("Expected power > 0");if(n===Xn)return e.ONE;if(n===Bn)return t;let r=e.ONE,i=t;for(;n>Xn;)n&Bn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Bn;return r}function G6(e,t){const n=new Array(t.length),r=t.reduce((s,a,c)=>e.is0(a)?s:(n[c]=s,e.mul(s,a)),e.ONE),i=e.inv(r);return t.reduceRight((s,a,c)=>e.is0(a)?s:(n[c]=e.mul(s,n[c]),e.mul(s,a)),i),n}function om(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Y6(e,t,n=!1,r={}){if(e<=Xn)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=om(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=K6(e),c=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:sm(i),ZERO:Xn,ONE:Bn,create:f=>Wn(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Xn<=f&&f<e},is0:f=>f===Xn,isOdd:f=>(f&Bn)===Bn,neg:f=>Wn(-f,e),eql:(f,b)=>f===b,sqr:f=>Wn(f*f,e),add:(f,b)=>Wn(f+b,e),sub:(f,b)=>Wn(f-b,e),mul:(f,b)=>Wn(f*b,e),pow:(f,b)=>V6(c,f,b),div:(f,b)=>Wn(f*Rg(b,e),e),sqrN:f=>f*f,addN:(f,b)=>f+b,subN:(f,b)=>f-b,mulN:(f,b)=>f*b,inv:f=>Rg(f,e),sqrt:r.sqrt||(f=>a(c,f)),invertBatch:f=>G6(c,f),cmov:(f,b,m)=>m?b:f,toBytes:f=>n?f2(f,s):go(f,s),fromBytes:f=>{if(f.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${f.length}`);return n?im(f):Ar(f)}});return Object.freeze(c)}function Z6(e,t,n=!1){e=nr("privateHash",e);const r=e.length,i=om(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);const s=n?im(e):Ar(e);return Wn(s,t-Bn)+Bn}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const J6=BigInt(0),Hp=BigInt(1);function X6(e,t){const n=(i,s)=>{const a=s.negate();return i?a:s},r=i=>{const s=Math.ceil(t/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:n,unsafeLadder(i,s){let a=e.ZERO,c=i;for(;s>J6;)s&Hp&&(a=a.add(c)),c=c.double(),s>>=Hp;return a},precomputeWindow(i,s){const{windows:a,windowSize:c}=r(s),f=[];let b=i,m=b;for(let w=0;w<a;w++){m=b,f.push(m);for(let _=1;_<c;_++)m=m.add(b),f.push(m);b=m.double()}return f},wNAF(i,s,a){const{windows:c,windowSize:f}=r(i);let b=e.ZERO,m=e.BASE;const w=BigInt(2**i-1),_=2**i,A=BigInt(i);for(let I=0;I<c;I++){const C=I*f;let R=Number(a&w);a>>=A,R>f&&(R-=_,a+=Hp);const $=C,L=C+Math.abs(R)-1,P=I%2!==0,N=R<0;R===0?m=m.add(n(P,s[$])):b=b.add(n(N,s[L]))}return{p:b,f:m}},wNAFCached(i,s,a,c){const f=i._WINDOW_SIZE||1;let b=s.get(i);return b||(b=this.precomputeWindow(i,f),f!==1&&s.set(i,c(b))),this.wNAF(f,b,a)}}}function p2(e){return d2(e.Fp),Tl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...om(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q6(e){const t=p2(e);Tl(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:e8,hexToBytes:t8}=j6,aa={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=aa;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:e8(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=aa,n=typeof e=="string"?t8(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=aa._parseInt(n.subarray(2)),{d:a,l:c}=aa._parseInt(s);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=b=>Number.parseInt(b[0],16)&8?"00"+b:b,n=b=>{const m=b.toString(16);return m.length&1?`0${m}`:m},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,a=i.length/2,c=n(s),f=n(a);return`30${n(a+s+4)}02${f}${i}02${c}${r}`}},Mi=BigInt(0),Ln=BigInt(1),Cs=BigInt(2),uh=BigInt(3),O1=BigInt(4);function n8(e){const t=Q6(e),{Fp:n}=t,r=t.toBytes||((I,C,R)=>{const $=C.toAffine();return Xr(Uint8Array.from([4]),n.toBytes($.x),n.toBytes($.y))}),i=t.fromBytes||(I=>{const C=I.subarray(1),R=n.fromBytes(C.subarray(0,n.BYTES)),$=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:R,y:$}});function s(I){const{a:C,b:R}=t,$=n.sqr(I),L=n.mul($,I);return n.add(n.add(L,n.mul(I,C)),R)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(I){return typeof I=="bigint"&&Mi<I&&I<t.n}function c(I){if(!a(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(I){const{allowedPrivateKeyLengths:C,nByteLength:R,wrapPrivateKey:$,n:L}=t;if(C&&typeof I!="bigint"){if(I instanceof Uint8Array&&(I=bl(I)),typeof I!="string"||!C.includes(I.length))throw new Error("Invalid key");I=I.padStart(R*2,"0")}let P;try{P=typeof I=="bigint"?I:Ar(nr("private key",I,R))}catch{throw new Error(`private key must be ${R} bytes, hex or bigint, not ${typeof I}`)}return $&&(P=Wn(P,L)),c(P),P}const b=new Map;function m(I){if(!(I instanceof w))throw new Error("ProjectivePoint expected")}class w{constructor(C,R,$){if(this.px=C,this.py=R,this.pz=$,C==null||!n.isValid(C))throw new Error("x required");if(R==null||!n.isValid(R))throw new Error("y required");if($==null||!n.isValid($))throw new Error("z required")}static fromAffine(C){const{x:R,y:$}=C||{};if(!C||!n.isValid(R)||!n.isValid($))throw new Error("invalid affine point");if(C instanceof w)throw new Error("projective point not allowed");const L=P=>n.eql(P,n.ZERO);return L(R)&&L($)?w.ZERO:new w(R,$,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const R=n.invertBatch(C.map($=>$.pz));return C.map(($,L)=>$.toAffine(R[L])).map(w.fromAffine)}static fromHex(C){const R=w.fromAffine(i(nr("pointHex",C)));return R.assertValidity(),R}static fromPrivateKey(C){return w.BASE.multiply(f(C))}_setWindowSize(C){this._WINDOW_SIZE=C,b.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:C,y:R}=this.toAffine();if(!n.isValid(C)||!n.isValid(R))throw new Error("bad point: x or y not FE");const $=n.sqr(R),L=s(C);if(!n.eql($,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:C}=this.toAffine();if(n.isOdd)return!n.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){m(C);const{px:R,py:$,pz:L}=this,{px:P,py:N,pz:M}=C,U=n.eql(n.mul(R,M),n.mul(P,L)),p=n.eql(n.mul($,M),n.mul(N,L));return U&&p}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:R}=t,$=n.mul(R,uh),{px:L,py:P,pz:N}=this;let M=n.ZERO,U=n.ZERO,p=n.ZERO,Z=n.mul(L,L),J=n.mul(P,P),ce=n.mul(N,N),me=n.mul(L,P);return me=n.add(me,me),p=n.mul(L,N),p=n.add(p,p),M=n.mul(C,p),U=n.mul($,ce),U=n.add(M,U),M=n.sub(J,U),U=n.add(J,U),U=n.mul(M,U),M=n.mul(me,M),p=n.mul($,p),ce=n.mul(C,ce),me=n.sub(Z,ce),me=n.mul(C,me),me=n.add(me,p),p=n.add(Z,Z),Z=n.add(p,Z),Z=n.add(Z,ce),Z=n.mul(Z,me),U=n.add(U,Z),ce=n.mul(P,N),ce=n.add(ce,ce),Z=n.mul(ce,me),M=n.sub(M,Z),p=n.mul(ce,J),p=n.add(p,p),p=n.add(p,p),new w(M,U,p)}add(C){m(C);const{px:R,py:$,pz:L}=this,{px:P,py:N,pz:M}=C;let U=n.ZERO,p=n.ZERO,Z=n.ZERO;const J=t.a,ce=n.mul(t.b,uh);let me=n.mul(R,P),ke=n.mul($,N),we=n.mul(L,M),Q=n.add(R,$),G=n.add(P,N);Q=n.mul(Q,G),G=n.add(me,ke),Q=n.sub(Q,G),G=n.add(R,L);let Ae=n.add(P,M);return G=n.mul(G,Ae),Ae=n.add(me,we),G=n.sub(G,Ae),Ae=n.add($,L),U=n.add(N,M),Ae=n.mul(Ae,U),U=n.add(ke,we),Ae=n.sub(Ae,U),Z=n.mul(J,G),U=n.mul(ce,we),Z=n.add(U,Z),U=n.sub(ke,Z),Z=n.add(ke,Z),p=n.mul(U,Z),ke=n.add(me,me),ke=n.add(ke,me),we=n.mul(J,we),G=n.mul(ce,G),ke=n.add(ke,we),we=n.sub(me,we),we=n.mul(J,we),G=n.add(G,we),me=n.mul(ke,G),p=n.add(p,me),me=n.mul(Ae,G),U=n.mul(Q,U),U=n.sub(U,me),me=n.mul(Q,ke),Z=n.mul(Ae,Z),Z=n.add(Z,me),new w(U,p,Z)}subtract(C){return this.add(C.negate())}is0(){return this.equals(w.ZERO)}wNAF(C){return A.wNAFCached(this,b,C,R=>{const $=n.invertBatch(R.map(L=>L.pz));return R.map((L,P)=>L.toAffine($[P])).map(w.fromAffine)})}multiplyUnsafe(C){const R=w.ZERO;if(C===Mi)return R;if(c(C),C===Ln)return this;const{endo:$}=t;if(!$)return A.unsafeLadder(this,C);let{k1neg:L,k1:P,k2neg:N,k2:M}=$.splitScalar(C),U=R,p=R,Z=this;for(;P>Mi||M>Mi;)P&Ln&&(U=U.add(Z)),M&Ln&&(p=p.add(Z)),Z=Z.double(),P>>=Ln,M>>=Ln;return L&&(U=U.negate()),N&&(p=p.negate()),p=new w(n.mul(p.px,$.beta),p.py,p.pz),U.add(p)}multiply(C){c(C);let R=C,$,L;const{endo:P}=t;if(P){const{k1neg:N,k1:M,k2neg:U,k2:p}=P.splitScalar(R);let{p:Z,f:J}=this.wNAF(M),{p:ce,f:me}=this.wNAF(p);Z=A.constTimeNegate(N,Z),ce=A.constTimeNegate(U,ce),ce=new w(n.mul(ce.px,P.beta),ce.py,ce.pz),$=Z.add(ce),L=J.add(me)}else{const{p:N,f:M}=this.wNAF(R);$=N,L=M}return w.normalizeZ([$,L])[0]}multiplyAndAddUnsafe(C,R,$){const L=w.BASE,P=(M,U)=>U===Mi||U===Ln||!M.equals(L)?M.multiplyUnsafe(U):M.multiply(U),N=P(this,R).add(P(C,$));return N.is0()?void 0:N}toAffine(C){const{px:R,py:$,pz:L}=this,P=this.is0();C==null&&(C=P?n.ONE:n.inv(L));const N=n.mul(R,C),M=n.mul($,C),U=n.mul(L,C);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:N,y:M}}isTorsionFree(){const{h:C,isTorsionFree:R}=t;if(C===Ln)return!0;if(R)return R(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:R}=t;return C===Ln?this:R?R(w,this):this.multiplyUnsafe(t.h)}toRawBytes(C=!0){return this.assertValidity(),r(w,this,C)}toHex(C=!0){return bl(this.toRawBytes(C))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const _=t.nBitLength,A=X6(w,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:f,weierstrassEquation:s,isWithinCurveOrder:a}}function r8(e){const t=p2(e);return Tl(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function i8(e){const t=r8(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function a(G){return Mi<G&&G<n.ORDER}function c(G){return Wn(G,r)}function f(G){return Rg(G,r)}const{ProjectivePoint:b,normPrivateKeyToScalar:m,weierstrassEquation:w,isWithinCurveOrder:_}=n8({...t,toBytes(G,Ae,Te){const qe=Ae.toAffine(),ze=n.toBytes(qe.x),Qe=Xr;return Te?Qe(Uint8Array.from([Ae.hasEvenY()?2:3]),ze):Qe(Uint8Array.from([4]),ze,n.toBytes(qe.y))},fromBytes(G){const Ae=G.length,Te=G[0],qe=G.subarray(1);if(Ae===i&&(Te===2||Te===3)){const ze=Ar(qe);if(!a(ze))throw new Error("Point is not on curve");const Qe=w(ze);let nt=n.sqrt(Qe);const Fe=(nt&Ln)===Ln;return(Te&1)===1!==Fe&&(nt=n.neg(nt)),{x:ze,y:nt}}else if(Ae===s&&Te===4){const ze=n.fromBytes(qe.subarray(0,n.BYTES)),Qe=n.fromBytes(qe.subarray(n.BYTES,2*n.BYTES));return{x:ze,y:Qe}}else throw new Error(`Point of length ${Ae} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),A=G=>bl(go(G,t.nByteLength));function I(G){const Ae=r>>Ln;return G>Ae}function C(G){return I(G)?c(-G):G}const R=(G,Ae,Te)=>Ar(G.slice(Ae,Te));class ${constructor(Ae,Te,qe){this.r=Ae,this.s=Te,this.recovery=qe,this.assertValidity()}static fromCompact(Ae){const Te=t.nByteLength;return Ae=nr("compactSignature",Ae,Te*2),new $(R(Ae,0,Te),R(Ae,Te,2*Te))}static fromDER(Ae){const{r:Te,s:qe}=aa.toSig(nr("DER",Ae));return new $(Te,qe)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Ae){return new $(this.r,this.s,Ae)}recoverPublicKey(Ae){const{r:Te,s:qe,recovery:ze}=this,Qe=p(nr("msgHash",Ae));if(ze==null||![0,1,2,3].includes(ze))throw new Error("recovery id invalid");const nt=ze===2||ze===3?Te+t.n:Te;if(nt>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const Fe=ze&1?"03":"02",He=b.fromHex(Fe+A(nt)),$e=f(nt),Me=c(-Qe*$e),fe=c(qe*$e),pt=b.BASE.multiplyAndAddUnsafe(He,Me,fe);if(!pt)throw new Error("point at infinify");return pt.assertValidity(),pt}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new $(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return wl(this.toDERHex())}toDERHex(){return aa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wl(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}const L={isValidPrivateKey(G){try{return m(G),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const G=t.randomBytes(n.BYTES+8),Ae=Z6(G,r);return go(Ae,t.nByteLength)},precompute(G=8,Ae=b.BASE){return Ae._setWindowSize(G),Ae.multiply(BigInt(3)),Ae}};function P(G,Ae=!0){return b.fromPrivateKey(G).toRawBytes(Ae)}function N(G){const Ae=G instanceof Uint8Array,Te=typeof G=="string",qe=(Ae||Te)&&G.length;return Ae?qe===i||qe===s:Te?qe===2*i||qe===2*s:G instanceof b}function M(G,Ae,Te=!0){if(N(G))throw new Error("first arg must be private key");if(!N(Ae))throw new Error("second arg must be public key");return b.fromHex(Ae).multiply(m(G)).toRawBytes(Te)}const U=t.bits2int||function(G){const Ae=Ar(G),Te=G.length*8-t.nBitLength;return Te>0?Ae>>BigInt(Te):Ae},p=t.bits2int_modN||function(G){return c(U(G))},Z=sm(t.nBitLength);function J(G){if(typeof G!="bigint")throw new Error("bigint expected");if(!(Mi<=G&&G<Z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return go(G,t.nByteLength)}function ce(G,Ae,Te=me){if(["recovered","canonical"].some(v=>v in Te))throw new Error("sign() legacy options not supported");const{hash:qe,randomBytes:ze}=t;let{lowS:Qe,prehash:nt,extraEntropy:Fe}=Te;Qe==null&&(Qe=!0),G=nr("msgHash",G),nt&&(G=nr("prehashed msgHash",qe(G)));const He=p(G),$e=m(Ae),Me=[J($e),J(He)];if(Fe!=null){const v=Fe===!0?ze(n.BYTES):Fe;Me.push(nr("extraEntropy",v,n.BYTES))}const fe=Xr(...Me),pt=He;function h(v){const k=U(v);if(!_(k))return;const T=f(k),O=b.BASE.multiply(k).toAffine(),z=c(O.x);if(z===Mi)return;const te=c(T*c(pt+z*$e));if(te===Mi)return;let ie=(O.x===z?0:2)|Number(O.y&Ln),pe=te;return Qe&&I(te)&&(pe=C(te),ie^=1),new $(z,pe,ie)}return{seed:fe,k2sig:h}}const me={lowS:t.lowS,prehash:!1},ke={lowS:t.lowS,prehash:!1};function we(G,Ae,Te=me){const{seed:qe,k2sig:ze}=ce(G,Ae,Te);return h2(t.hash.outputLen,t.nByteLength,t.hmac)(qe,ze)}b.BASE._setWindowSize(8);function Q(G,Ae,Te,qe=ke){var O;const ze=G;if(Ae=nr("msgHash",Ae),Te=nr("publicKey",Te),"strict"in qe)throw new Error("options.strict was renamed to lowS");const{lowS:Qe,prehash:nt}=qe;let Fe,He;try{if(typeof ze=="string"||ze instanceof Uint8Array)try{Fe=$.fromDER(ze)}catch(z){if(!(z instanceof aa.Err))throw z;Fe=$.fromCompact(ze)}else if(typeof ze=="object"&&typeof ze.r=="bigint"&&typeof ze.s=="bigint"){const{r:z,s:te}=ze;Fe=new $(z,te)}else throw new Error("PARSE");He=b.fromHex(Te)}catch(z){if(z.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Qe&&Fe.hasHighS())return!1;nt&&(Ae=t.hash(Ae));const{r:$e,s:Me}=Fe,fe=p(Ae),pt=f(Me),h=c(fe*pt),v=c($e*pt),k=(O=b.BASE.multiplyAndAddUnsafe(He,h,v))==null?void 0:O.toAffine();return k?c(k.x)===$e:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:M,sign:we,verify:Q,ProjectivePoint:b,Signature:$,utils:L}}function s8(e,t){const n=e.ORDER;let r=Mi;for(let _=n-Ln;_%Cs===Mi;_/=Cs)r+=Ln;const i=r,s=(n-Ln)/Cs**i,a=(s-Ln)/Cs,c=Cs**i-Ln,f=Cs**(i-Ln),b=e.pow(t,s),m=e.pow(t,(s+Ln)/Cs);let w=(_,A)=>{let I=b,C=e.pow(A,c),R=e.sqr(C);R=e.mul(R,A);let $=e.mul(_,R);$=e.pow($,a),$=e.mul($,C),C=e.mul($,A),R=e.mul($,_);let L=e.mul(R,C);$=e.pow(L,f);let P=e.eql($,e.ONE);C=e.mul(R,m),$=e.mul(L,I),R=e.cmov(C,R,P),L=e.cmov($,L,P);for(let N=i;N>Ln;N--){let M=Cs**(N-Cs),U=e.pow(L,M);const p=e.eql(U,e.ONE);C=e.mul(R,I),I=e.mul(I,I),U=e.mul(L,I),R=e.cmov(C,R,p),L=e.cmov(U,L,p)}return{isValid:P,value:R}};if(e.ORDER%O1===uh){const _=(e.ORDER-uh)/O1,A=e.sqrt(e.neg(t));w=(I,C)=>{let R=e.sqr(C);const $=e.mul(I,C);R=e.mul(R,$);let L=e.pow(R,_);L=e.mul(L,$);const P=e.mul(L,A),N=e.mul(e.sqr(L),C),M=e.eql(N,I);let U=e.cmov(P,L,M);return{isValid:M,value:U}}}return w}function o8(e,t){if(d2(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=s8(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,a,c,f,b,m,w;i=e.sqr(r),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),a=e.add(s,e.ONE),a=e.mul(a,t.B),c=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),c=e.mul(c,t.A),s=e.sqr(a),b=e.sqr(c),f=e.mul(b,t.A),s=e.add(s,f),s=e.mul(s,a),b=e.mul(b,c),f=e.mul(b,t.B),s=e.add(s,f),m=e.mul(i,a);const{isValid:_,value:A}=n(s,b);w=e.mul(i,r),w=e.mul(w,A),m=e.cmov(m,a,_),w=e.cmov(w,A,_);const I=e.isOdd(r)===e.isOdd(w);return w=e.cmov(e.neg(w),w,I),m=e.div(m,c),{x:m,y:w}}}function a8(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return sd(e);throw new Error("DST must be Uint8Array or string")}const l8=Ar;function ao(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function c8(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Wc(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function am(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u8(e,t,n,r){Wc(e),Wc(t),am(n),t.length>255&&(t=r(Xr(sd("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:s}=r,a=Math.ceil(n/i);if(a>255)throw new Error("Invalid xmd length");const c=Xr(t,ao(t.length,1)),f=ao(0,s),b=ao(n,2),m=new Array(a),w=r(Xr(f,e,b,ao(0,1),c));m[0]=r(Xr(w,ao(1,1),c));for(let A=1;A<=a;A++){const I=[c8(w,m[A-1]),ao(A+1,1),c];m[A]=r(Xr(...I))}return Xr(...m).slice(0,n)}function f8(e,t,n,r,i){if(Wc(e),Wc(t),am(n),t.length>255){const s=Math.ceil(2*r/8);t=i.create({dkLen:s}).update(sd("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(ao(n,2)).update(t).update(ao(t.length,1)).digest()}function N1(e,t,n){Tl(n,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:s,hash:a,expand:c,DST:f}=n;Wc(e),am(t);const b=a8(f),m=r.toString(2).length,w=Math.ceil((m+i)/8),_=t*s*w;let A;if(c==="xmd")A=u8(e,b,_,a);else if(c==="xof")A=f8(e,b,_,i,a);else if(c==="_internal_pass")A=e;else throw new Error('expand must be "xmd" or "xof"');const I=new Array(t);for(let C=0;C<t;C++){const R=new Array(s);for(let $=0;$<s;$++){const L=w*($+C*s),P=A.subarray(L,L+w);R[$]=Wn(l8(P),r)}I[C]=R}return I}function h8(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[s,a,c,f]=n.map(b=>b.reduce((m,w)=>e.add(e.mul(m,r),w)));return r=e.div(s,a),i=e.mul(i,e.div(c,f)),{x:r,y:i}}}function d8(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){const s=N1(r,2,{...n,DST:n.DST,...i}),a=e.fromAffine(t(s[0])),c=e.fromAffine(t(s[1])),f=a.add(c).clearCofactor();return f.assertValidity(),f},encodeToCurve(r,i){const s=N1(r,1,{...n,DST:n.encodeDST,...i}),a=e.fromAffine(t(s[0])).clearCofactor();return a.assertValidity(),a}}}class g2 extends tm{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,po.hash(t);const r=du(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=t.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(t){return po.exists(this),this.iHash.update(t),this}digestInto(t){po.exists(this),po.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fh=(e,t,n)=>new g2(e,t).update(n).digest();fh.create=(e,t)=>new g2(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p8(e){return{hash:e,hmac:(t,...n)=>fh(e,t,oa(...n)),randomBytes:nd}}function g8(e,t){const n=r=>i8({...e,...p8(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const od=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),hh=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),y2=BigInt(1),dh=BigInt(2),R1=(e,t)=>(e+t/dh)/t;function m2(e){const t=od,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),f=BigInt(88),b=e*e*e%t,m=b*b*e%t,w=wi(m,n,t)*m%t,_=wi(w,n,t)*m%t,A=wi(_,dh,t)*b%t,I=wi(A,i,t)*A%t,C=wi(I,s,t)*I%t,R=wi(C,c,t)*C%t,$=wi(R,f,t)*R%t,L=wi($,c,t)*C%t,P=wi(L,n,t)*m%t,N=wi(P,a,t)*I%t,M=wi(N,r,t)*b%t,U=wi(M,dh,t);if(!wo.eql(wo.sqr(U),e))throw new Error("Cannot find square root");return U}const wo=Y6(od,void 0,void 0,{sqrt:m2}),kr=g8({a:BigInt(0),b:BigInt(7),Fp:wo,n:hh,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=hh,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-y2*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),c=R1(s*e,t),f=R1(-r*e,t);let b=Wn(e-c*n-f*i,t),m=Wn(-c*r-f*s,t);const w=b>a,_=m>a;if(w&&(b=t-b),_&&(m=t-m),b>a||m>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:w,k1:b,k2neg:_,k2:m}}}},ni),ad=BigInt(0),v2=e=>typeof e=="bigint"&&ad<e&&e<od,y8=e=>typeof e=="bigint"&&ad<e&&e<hh,M1={};function ph(e,...t){let n=M1[e];if(n===void 0){const r=ni(Uint8Array.from(e,i=>i.charCodeAt(0)));n=Xr(r,r),M1[e]=n}return ni(Xr(n,...t))}const lm=e=>e.toRawBytes(!0).slice(1),Mg=e=>go(e,32),qp=e=>Wn(e,od),Vc=e=>Wn(e,hh),cm=kr.ProjectivePoint,m8=(e,t,n)=>cm.BASE.multiplyAndAddUnsafe(e,t,n);function Dg(e){let t=kr.utils.normPrivateKeyToScalar(e),n=cm.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Vc(-t),bytes:lm(n)}}function b2(e){if(!v2(e))throw new Error("bad x: need 0 < x < p");const t=qp(e*e),n=qp(t*e+BigInt(7));let r=m2(n);r%dh!==ad&&(r=qp(-r));const i=new cm(e,r,y2);return i.assertValidity(),i}function w2(...e){return Vc(Ar(ph("BIP0340/challenge",...e)))}function v8(e){return Dg(e).bytes}function b8(e,t,n=nd(32)){const r=nr("message",e),{bytes:i,scalar:s}=Dg(t),a=nr("auxRand",n,32),c=Mg(s^Ar(ph("BIP0340/aux",a))),f=ph("BIP0340/nonce",c,i,r),b=Vc(Ar(f));if(b===ad)throw new Error("sign failed: k is zero");const{bytes:m,scalar:w}=Dg(b),_=w2(m,i,r),A=new Uint8Array(64);if(A.set(m,0),A.set(Mg(Vc(w+_*s)),32),!_2(A,r,i))throw new Error("sign: Invalid signature produced");return A}function _2(e,t,n){const r=nr("signature",e,64),i=nr("message",t),s=nr("publicKey",n,32);try{const a=b2(Ar(s)),c=Ar(r.subarray(0,32));if(!v2(c))return!1;const f=Ar(r.subarray(32,64));if(!y8(f))return!1;const b=w2(Mg(c),lm(a),i),m=m8(a,f,Vc(-b));return!(!m||!m.hasEvenY()||m.toAffine().x!==c)}catch{return!1}}const Il={getPublicKey:v8,sign:b8,verify:_2,utils:{randomPrivateKey:kr.utils.randomPrivateKey,lift_x:b2,pointToBytes:lm,numberToBytesBE:go,bytesToNumberBE:Ar,taggedHash:ph,mod:Wn}},w8=h8(wo,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),_8=o8(wo,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:wo.create(BigInt("-11"))});d8(kr.ProjectivePoint,e=>{const{x:t,y:n}=_8(wo.create(e[0]));return w8(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:wo.ORDER,m:1,k:128,expand:"xmd",hash:ni});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ao(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function zi(...e){const t=(i,s)=>a=>i(s(a)),n=Array.from(e).reverse().reduce((i,s)=>i?t(i,s.encode):s.encode,void 0),r=e.reduce((i,s)=>i?t(i,s.decode):s.decode,void 0);return{encode:n,decode:r}}function as(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(Ao(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function ls(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function pu(e,t="="){if(Ao(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of n)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function x2(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function D1(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach(a=>{if(Ao(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,c=!0;for(let f=r;f<s.length;f++){const b=s[f],m=t*a+b;if(!Number.isSafeInteger(m)||t*a/t!==a||m-b!==t*a)throw new Error("convertRadix: carry overflow");if(a=m%n,s[f]=Math.floor(m/n),!Number.isSafeInteger(s[f])||s[f]*n+a!==m)throw new Error("convertRadix: carry overflow");if(c)s[f]?c=!1:r=f;else continue}if(i.push(a),c)break}for(let a=0;a<e.length-1&&e[a]===0;a++)i.push(0);return i.reverse()}const k2=(e,t)=>t?k2(t,e%t):e,gh=(e,t)=>e+(t-k2(e,t));function Bg(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(gh(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${gh(t,n)}`);let i=0,s=0;const a=2**n-1,c=[];for(const f of e){if(Ao(f),f>=2**t)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(i=i<<t|f,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);i&=2**s-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function S2(e){return Ao(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return D1(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(D1(t,e,2**8))}}}function Hs(e,t=!1){if(Ao(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(gh(8,e)>32||gh(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Bg(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Bg(n,e,8,t))}}}function B1(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function E2(e,t){if(Ao(e),typeof t!="function")throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),s=n.slice(-e);for(let a=0;a<e;a++)if(i[a]!==s[a])throw new Error("Invalid checksum");return r}}}const x8={alphabet:as,chain:zi,checksum:E2,radix:S2,radix2:Hs,join:ls,padding:pu},A2=zi(Hs(4),as("0123456789ABCDEF"),ls("")),C2=zi(Hs(5),as("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),pu(5),ls("")),k8=zi(Hs(5),as("0123456789ABCDEFGHIJKLMNOPQRSTUV"),pu(5),ls("")),S8=zi(Hs(5),as("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ls(""),x2(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),_l=zi(Hs(6),as("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),pu(6),ls("")),T2=zi(Hs(6),as("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),pu(6),ls("")),um=e=>zi(S2(58),as(e),ls("")),Gc=um("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),E8=um("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),A8=um("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),L1=[0,2,3,5,6,7,9,10,11],I2={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Gc.encode(r).padStart(L1[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=L1.indexOf(r.length),s=Gc.decode(r);for(let a=0;a<s.length-i;a++)if(s[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},$2=e=>zi(E2(4,t=>e(e(t))),Gc),Lg=zi(as("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ls("")),F1=[996825010,642813549,513874426,1027748829,705979059];function wc(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<F1.length;r++)(t>>r&1)===1&&(n^=F1[r]);return n}function U1(e,t,n=1){const r=e.length;let i=1;for(let s=0;s<r;s++){const a=e.charCodeAt(s);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);i=wc(i)^a>>5}i=wc(i);for(let s=0;s<r;s++)i=wc(i)^e.charCodeAt(s)&31;for(let s of t)i=wc(i)^s;for(let s=0;s<6;s++)i=wc(i);return i^=n,Lg.encode(Bg([i%2**30],30,5,!1))}function P2(e){const t=e==="bech32"?1:734539939,n=Hs(5),r=n.decode,i=n.encode,s=B1(r);function a(m,w,_=90){if(typeof m!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof m}`);if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof w}`);const A=m.length+7+w.length;if(_!==!1&&A>_)throw new TypeError(`Length ${A} exceeds limit ${_}`);return m=m.toLowerCase(),`${m}1${Lg.encode(w)}${U1(m,w,t)}`}function c(m,w=90){if(typeof m!="string")throw new Error(`bech32.decode input should be string, not ${typeof m}`);if(m.length<8||w!==!1&&m.length>w)throw new TypeError(`Wrong string length: ${m.length} (${m}). Expected (8..${w})`);const _=m.toLowerCase();if(m!==_&&m!==m.toUpperCase())throw new Error("String must be lowercase or uppercase");m=_;const A=m.lastIndexOf("1");if(A===0||A===-1)throw new Error('Letter "1" must be present between prefix and data only');const I=m.slice(0,A),C=m.slice(A+1);if(C.length<6)throw new Error("Data must be at least 6 characters long");const R=Lg.decode(C).slice(0,-6),$=U1(I,R,t);if(!C.endsWith($))throw new Error(`Invalid checksum in ${m}: expected "${$}"`);return{prefix:I,words:R}}const f=B1(c);function b(m){const{prefix:w,words:_}=c(m,!1);return{prefix:w,words:_,bytes:r(_)}}return{encode:a,decode:c,decodeToBytes:b,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:s,toWords:i}}const Cr=P2("bech32"),C8=P2("bech32m"),O2={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},N2=zi(Hs(4),as("0123456789abcdef"),ls(""),x2(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Yc={utf8:O2,hex:N2,base16:A2,base32:C2,base64:_l,base64url:T2,base58:Gc,base58xmr:I2},R2=`Invalid encoding type. Available types: ${Object.keys(Yc).join(", ")}`,M2=(e,t)=>{if(typeof e!="string"||!Yc.hasOwnProperty(e))throw new TypeError(R2);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return Yc[e].encode(t)},T8=M2,D2=(e,t)=>{if(!Yc.hasOwnProperty(e))throw new TypeError(R2);if(typeof t!="string")throw new TypeError("stringToBytes() expects string");return Yc[e].decode(t)},I8=D2,$8=Object.freeze(Object.defineProperty({__proto__:null,assertNumber:Ao,base16:A2,base32:C2,base32crockford:S8,base32hex:k8,base58:Gc,base58check:$2,base58flickr:E8,base58xmr:I2,base58xrp:A8,base64:_l,base64url:T2,bech32:Cr,bech32m:C8,bytes:I8,bytesToString:M2,hex:N2,str:T8,stringToBytes:D2,utf8:O2,utils:x8},Symbol.toStringTag,{value:"Module"}));var fm={};Object.defineProperty(fm,"__esModule",{value:!0});var hm=fm.wordlist=void 0;hm=fm.wordlist=`abandon
ability
able
about
above
absent
absorb
abstract
absurd
abuse
access
accident
account
accuse
achieve
acid
acoustic
acquire
across
act
action
actor
actress
actual
adapt
add
addict
address
adjust
admit
adult
advance
advice
aerobic
affair
afford
afraid
again
age
agent
agree
ahead
aim
air
airport
aisle
alarm
album
alcohol
alert
alien
all
alley
allow
almost
alone
alpha
already
also
alter
always
amateur
amazing
among
amount
amused
analyst
anchor
ancient
anger
angle
angry
animal
ankle
announce
annual
another
answer
antenna
antique
anxiety
any
apart
apology
appear
apple
approve
april
arch
arctic
area
arena
argue
arm
armed
armor
army
around
arrange
arrest
arrive
arrow
art
artefact
artist
artwork
ask
aspect
assault
asset
assist
assume
asthma
athlete
atom
attack
attend
attitude
attract
auction
audit
august
aunt
author
auto
autumn
average
avocado
avoid
awake
aware
away
awesome
awful
awkward
axis
baby
bachelor
bacon
badge
bag
balance
balcony
ball
bamboo
banana
banner
bar
barely
bargain
barrel
base
basic
basket
battle
beach
bean
beauty
because
become
beef
before
begin
behave
behind
believe
below
belt
bench
benefit
best
betray
better
between
beyond
bicycle
bid
bike
bind
biology
bird
birth
bitter
black
blade
blame
blanket
blast
bleak
bless
blind
blood
blossom
blouse
blue
blur
blush
board
boat
body
boil
bomb
bone
bonus
book
boost
border
boring
borrow
boss
bottom
bounce
box
boy
bracket
brain
brand
brass
brave
bread
breeze
brick
bridge
brief
bright
bring
brisk
broccoli
broken
bronze
broom
brother
brown
brush
bubble
buddy
budget
buffalo
build
bulb
bulk
bullet
bundle
bunker
burden
burger
burst
bus
business
busy
butter
buyer
buzz
cabbage
cabin
cable
cactus
cage
cake
call
calm
camera
camp
can
canal
cancel
candy
cannon
canoe
canvas
canyon
capable
capital
captain
car
carbon
card
cargo
carpet
carry
cart
case
cash
casino
castle
casual
cat
catalog
catch
category
cattle
caught
cause
caution
cave
ceiling
celery
cement
census
century
cereal
certain
chair
chalk
champion
change
chaos
chapter
charge
chase
chat
cheap
check
cheese
chef
cherry
chest
chicken
chief
child
chimney
choice
choose
chronic
chuckle
chunk
churn
cigar
cinnamon
circle
citizen
city
civil
claim
clap
clarify
claw
clay
clean
clerk
clever
click
client
cliff
climb
clinic
clip
clock
clog
close
cloth
cloud
clown
club
clump
cluster
clutch
coach
coast
coconut
code
coffee
coil
coin
collect
color
column
combine
come
comfort
comic
common
company
concert
conduct
confirm
congress
connect
consider
control
convince
cook
cool
copper
copy
coral
core
corn
correct
cost
cotton
couch
country
couple
course
cousin
cover
coyote
crack
cradle
craft
cram
crane
crash
crater
crawl
crazy
cream
credit
creek
crew
cricket
crime
crisp
critic
crop
cross
crouch
crowd
crucial
cruel
cruise
crumble
crunch
crush
cry
crystal
cube
culture
cup
cupboard
curious
current
curtain
curve
cushion
custom
cute
cycle
dad
damage
damp
dance
danger
daring
dash
daughter
dawn
day
deal
debate
debris
decade
december
decide
decline
decorate
decrease
deer
defense
define
defy
degree
delay
deliver
demand
demise
denial
dentist
deny
depart
depend
deposit
depth
deputy
derive
describe
desert
design
desk
despair
destroy
detail
detect
develop
device
devote
diagram
dial
diamond
diary
dice
diesel
diet
differ
digital
dignity
dilemma
dinner
dinosaur
direct
dirt
disagree
discover
disease
dish
dismiss
disorder
display
distance
divert
divide
divorce
dizzy
doctor
document
dog
doll
dolphin
domain
donate
donkey
donor
door
dose
double
dove
draft
dragon
drama
drastic
draw
dream
dress
drift
drill
drink
drip
drive
drop
drum
dry
duck
dumb
dune
during
dust
dutch
duty
dwarf
dynamic
eager
eagle
early
earn
earth
easily
east
easy
echo
ecology
economy
edge
edit
educate
effort
egg
eight
either
elbow
elder
electric
elegant
element
elephant
elevator
elite
else
embark
embody
embrace
emerge
emotion
employ
empower
empty
enable
enact
end
endless
endorse
enemy
energy
enforce
engage
engine
enhance
enjoy
enlist
enough
enrich
enroll
ensure
enter
entire
entry
envelope
episode
equal
equip
era
erase
erode
erosion
error
erupt
escape
essay
essence
estate
eternal
ethics
evidence
evil
evoke
evolve
exact
example
excess
exchange
excite
exclude
excuse
execute
exercise
exhaust
exhibit
exile
exist
exit
exotic
expand
expect
expire
explain
expose
express
extend
extra
eye
eyebrow
fabric
face
faculty
fade
faint
faith
fall
false
fame
family
famous
fan
fancy
fantasy
farm
fashion
fat
fatal
father
fatigue
fault
favorite
feature
february
federal
fee
feed
feel
female
fence
festival
fetch
fever
few
fiber
fiction
field
figure
file
film
filter
final
find
fine
finger
finish
fire
firm
first
fiscal
fish
fit
fitness
fix
flag
flame
flash
flat
flavor
flee
flight
flip
float
flock
floor
flower
fluid
flush
fly
foam
focus
fog
foil
fold
follow
food
foot
force
forest
forget
fork
fortune
forum
forward
fossil
foster
found
fox
fragile
frame
frequent
fresh
friend
fringe
frog
front
frost
frown
frozen
fruit
fuel
fun
funny
furnace
fury
future
gadget
gain
galaxy
gallery
game
gap
garage
garbage
garden
garlic
garment
gas
gasp
gate
gather
gauge
gaze
general
genius
genre
gentle
genuine
gesture
ghost
giant
gift
giggle
ginger
giraffe
girl
give
glad
glance
glare
glass
glide
glimpse
globe
gloom
glory
glove
glow
glue
goat
goddess
gold
good
goose
gorilla
gospel
gossip
govern
gown
grab
grace
grain
grant
grape
grass
gravity
great
green
grid
grief
grit
grocery
group
grow
grunt
guard
guess
guide
guilt
guitar
gun
gym
habit
hair
half
hammer
hamster
hand
happy
harbor
hard
harsh
harvest
hat
have
hawk
hazard
head
health
heart
heavy
hedgehog
height
hello
helmet
help
hen
hero
hidden
high
hill
hint
hip
hire
history
hobby
hockey
hold
hole
holiday
hollow
home
honey
hood
hope
horn
horror
horse
hospital
host
hotel
hour
hover
hub
huge
human
humble
humor
hundred
hungry
hunt
hurdle
hurry
hurt
husband
hybrid
ice
icon
idea
identify
idle
ignore
ill
illegal
illness
image
imitate
immense
immune
impact
impose
improve
impulse
inch
include
income
increase
index
indicate
indoor
industry
infant
inflict
inform
inhale
inherit
initial
inject
injury
inmate
inner
innocent
input
inquiry
insane
insect
inside
inspire
install
intact
interest
into
invest
invite
involve
iron
island
isolate
issue
item
ivory
jacket
jaguar
jar
jazz
jealous
jeans
jelly
jewel
job
join
joke
journey
joy
judge
juice
jump
jungle
junior
junk
just
kangaroo
keen
keep
ketchup
key
kick
kid
kidney
kind
kingdom
kiss
kit
kitchen
kite
kitten
kiwi
knee
knife
knock
know
lab
label
labor
ladder
lady
lake
lamp
language
laptop
large
later
latin
laugh
laundry
lava
law
lawn
lawsuit
layer
lazy
leader
leaf
learn
leave
lecture
left
leg
legal
legend
leisure
lemon
lend
length
lens
leopard
lesson
letter
level
liar
liberty
library
license
life
lift
light
like
limb
limit
link
lion
liquid
list
little
live
lizard
load
loan
lobster
local
lock
logic
lonely
long
loop
lottery
loud
lounge
love
loyal
lucky
luggage
lumber
lunar
lunch
luxury
lyrics
machine
mad
magic
magnet
maid
mail
main
major
make
mammal
man
manage
mandate
mango
mansion
manual
maple
marble
march
margin
marine
market
marriage
mask
mass
master
match
material
math
matrix
matter
maximum
maze
meadow
mean
measure
meat
mechanic
medal
media
melody
melt
member
memory
mention
menu
mercy
merge
merit
merry
mesh
message
metal
method
middle
midnight
milk
million
mimic
mind
minimum
minor
minute
miracle
mirror
misery
miss
mistake
mix
mixed
mixture
mobile
model
modify
mom
moment
monitor
monkey
monster
month
moon
moral
more
morning
mosquito
mother
motion
motor
mountain
mouse
move
movie
much
muffin
mule
multiply
muscle
museum
mushroom
music
must
mutual
myself
mystery
myth
naive
name
napkin
narrow
nasty
nation
nature
near
neck
need
negative
neglect
neither
nephew
nerve
nest
net
network
neutral
never
news
next
nice
night
noble
noise
nominee
noodle
normal
north
nose
notable
note
nothing
notice
novel
now
nuclear
number
nurse
nut
oak
obey
object
oblige
obscure
observe
obtain
obvious
occur
ocean
october
odor
off
offer
office
often
oil
okay
old
olive
olympic
omit
once
one
onion
online
only
open
opera
opinion
oppose
option
orange
orbit
orchard
order
ordinary
organ
orient
original
orphan
ostrich
other
outdoor
outer
output
outside
oval
oven
over
own
owner
oxygen
oyster
ozone
pact
paddle
page
pair
palace
palm
panda
panel
panic
panther
paper
parade
parent
park
parrot
party
pass
patch
path
patient
patrol
pattern
pause
pave
payment
peace
peanut
pear
peasant
pelican
pen
penalty
pencil
people
pepper
perfect
permit
person
pet
phone
photo
phrase
physical
piano
picnic
picture
piece
pig
pigeon
pill
pilot
pink
pioneer
pipe
pistol
pitch
pizza
place
planet
plastic
plate
play
please
pledge
pluck
plug
plunge
poem
poet
point
polar
pole
police
pond
pony
pool
popular
portion
position
possible
post
potato
pottery
poverty
powder
power
practice
praise
predict
prefer
prepare
present
pretty
prevent
price
pride
primary
print
priority
prison
private
prize
problem
process
produce
profit
program
project
promote
proof
property
prosper
protect
proud
provide
public
pudding
pull
pulp
pulse
pumpkin
punch
pupil
puppy
purchase
purity
purpose
purse
push
put
puzzle
pyramid
quality
quantum
quarter
question
quick
quit
quiz
quote
rabbit
raccoon
race
rack
radar
radio
rail
rain
raise
rally
ramp
ranch
random
range
rapid
rare
rate
rather
raven
raw
razor
ready
real
reason
rebel
rebuild
recall
receive
recipe
record
recycle
reduce
reflect
reform
refuse
region
regret
regular
reject
relax
release
relief
rely
remain
remember
remind
remove
render
renew
rent
reopen
repair
repeat
replace
report
require
rescue
resemble
resist
resource
response
result
retire
retreat
return
reunion
reveal
review
reward
rhythm
rib
ribbon
rice
rich
ride
ridge
rifle
right
rigid
ring
riot
ripple
risk
ritual
rival
river
road
roast
robot
robust
rocket
romance
roof
rookie
room
rose
rotate
rough
round
route
royal
rubber
rude
rug
rule
run
runway
rural
sad
saddle
sadness
safe
sail
salad
salmon
salon
salt
salute
same
sample
sand
satisfy
satoshi
sauce
sausage
save
say
scale
scan
scare
scatter
scene
scheme
school
science
scissors
scorpion
scout
scrap
screen
script
scrub
sea
search
season
seat
second
secret
section
security
seed
seek
segment
select
sell
seminar
senior
sense
sentence
series
service
session
settle
setup
seven
shadow
shaft
shallow
share
shed
shell
sheriff
shield
shift
shine
ship
shiver
shock
shoe
shoot
shop
short
shoulder
shove
shrimp
shrug
shuffle
shy
sibling
sick
side
siege
sight
sign
silent
silk
silly
silver
similar
simple
since
sing
siren
sister
situate
six
size
skate
sketch
ski
skill
skin
skirt
skull
slab
slam
sleep
slender
slice
slide
slight
slim
slogan
slot
slow
slush
small
smart
smile
smoke
smooth
snack
snake
snap
sniff
snow
soap
soccer
social
sock
soda
soft
solar
soldier
solid
solution
solve
someone
song
soon
sorry
sort
soul
sound
soup
source
south
space
spare
spatial
spawn
speak
special
speed
spell
spend
sphere
spice
spider
spike
spin
spirit
split
spoil
sponsor
spoon
sport
spot
spray
spread
spring
spy
square
squeeze
squirrel
stable
stadium
staff
stage
stairs
stamp
stand
start
state
stay
steak
steel
stem
step
stereo
stick
still
sting
stock
stomach
stone
stool
story
stove
strategy
street
strike
strong
struggle
student
stuff
stumble
style
subject
submit
subway
success
such
sudden
suffer
sugar
suggest
suit
summer
sun
sunny
sunset
super
supply
supreme
sure
surface
surge
surprise
surround
survey
suspect
sustain
swallow
swamp
swap
swarm
swear
sweet
swift
swim
swing
switch
sword
symbol
symptom
syrup
system
table
tackle
tag
tail
talent
talk
tank
tape
target
task
taste
tattoo
taxi
teach
team
tell
ten
tenant
tennis
tent
term
test
text
thank
that
theme
then
theory
there
they
thing
this
thought
three
thrive
throw
thumb
thunder
ticket
tide
tiger
tilt
timber
time
tiny
tip
tired
tissue
title
toast
tobacco
today
toddler
toe
together
toilet
token
tomato
tomorrow
tone
tongue
tonight
tool
tooth
top
topic
topple
torch
tornado
tortoise
toss
total
tourist
toward
tower
town
toy
track
trade
traffic
tragic
train
transfer
trap
trash
travel
tray
treat
tree
trend
trial
tribe
trick
trigger
trim
trip
trophy
trouble
truck
true
truly
trumpet
trust
truth
try
tube
tuition
tumble
tuna
tunnel
turkey
turn
turtle
twelve
twenty
twice
twin
twist
two
type
typical
ugly
umbrella
unable
unaware
uncle
uncover
under
undo
unfair
unfold
unhappy
uniform
unique
unit
universe
unknown
unlock
until
unusual
unveil
update
upgrade
uphold
upon
upper
upset
urban
urge
usage
use
used
useful
useless
usual
utility
vacant
vacuum
vague
valid
valley
valve
van
vanish
vapor
various
vast
vault
vehicle
velvet
vendor
venture
venue
verb
verify
version
very
vessel
veteran
viable
vibrant
vicious
victory
video
view
village
vintage
violin
virtual
virus
visa
visit
visual
vital
vivid
vocal
voice
void
volcano
volume
vote
voyage
wage
wagon
wait
walk
wall
walnut
want
warfare
warm
warrior
wash
wasp
waste
water
wave
way
wealth
weapon
wear
weasel
weather
web
wedding
weekend
weird
welcome
west
wet
whale
what
wheat
wheel
when
where
whip
whisper
wide
width
wife
wild
will
win
window
wine
wing
wink
winner
winter
wire
wisdom
wise
wish
witness
wolf
woman
wonder
wood
wool
word
work
world
worry
worth
wrap
wreck
wrestle
wrist
write
wrong
yard
year
yellow
you
young
youth
zebra
zero
zone
zoo`.split(`
`);var Qr={};const P8=So(y6);var xl={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.output=ur.exists=ur.hash=ur.bytes=ur.bool=ur.number=void 0;function yh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}ur.number=yh;function B2(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}ur.bool=B2;function dm(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}ur.bytes=dm;function L2(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");yh(e.outputLen),yh(e.blockLen)}ur.hash=L2;function F2(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ur.exists=F2;function U2(e,t){dm(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}ur.output=U2;const O8={number:yh,bool:B2,bytes:dm,hash:L2,exists:F2,output:U2};ur.default=O8;var j2={},pm={};const N8=So(m6);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=N8,n=N=>new Uint8Array(N.buffer,N.byteOffset,N.byteLength);e.u8=n;const r=N=>new Uint32Array(N.buffer,N.byteOffset,Math.floor(N.byteLength/4));e.u32=r;const i=N=>new DataView(N.buffer,N.byteOffset,N.byteLength);e.createView=i;const s=(N,M)=>N<<32-M|N>>>M;if(e.rotr=s,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(N,M)=>M.toString(16).padStart(2,"0"));function c(N){if(!(N instanceof Uint8Array))throw new Error("Uint8Array expected");let M="";for(let U=0;U<N.length;U++)M+=a[N[U]];return M}e.bytesToHex=c;function f(N){if(typeof N!="string")throw new TypeError("hexToBytes: expected string, got "+typeof N);if(N.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const M=new Uint8Array(N.length/2);for(let U=0;U<M.length;U++){const p=U*2,Z=N.slice(p,p+2),J=Number.parseInt(Z,16);if(Number.isNaN(J)||J<0)throw new Error("Invalid byte sequence");M[U]=J}return M}e.hexToBytes=f;const b=async()=>{};e.nextTick=b;async function m(N,M,U){let p=Date.now();for(let Z=0;Z<N;Z++){U(Z);const J=Date.now()-p;J>=0&&J<M||(await(0,e.nextTick)(),p+=J)}}e.asyncLoop=m;function w(N){if(typeof N!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof N}`);return new TextEncoder().encode(N)}e.utf8ToBytes=w;function _(N){if(typeof N=="string"&&(N=w(N)),!(N instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof N})`);return N}e.toBytes=_;function A(...N){if(!N.every(p=>p instanceof Uint8Array))throw new Error("Uint8Array list expected");if(N.length===1)return N[0];const M=N.reduce((p,Z)=>p+Z.length,0),U=new Uint8Array(M);for(let p=0,Z=0;p<N.length;p++){const J=N[p];U.set(J,Z),Z+=J.length}return U}e.concatBytes=A;class I{clone(){return this._cloneInto()}}e.Hash=I;const C=N=>Object.prototype.toString.call(N)==="[object Object]"&&N.constructor===Object;function R(N,M){if(M!==void 0&&(typeof M!="object"||!C(M)))throw new TypeError("Options should be object or undefined");return Object.assign(N,M)}e.checkOpts=R;function $(N){const M=p=>N().update(_(p)).digest(),U=N();return M.outputLen=U.outputLen,M.blockLen=U.blockLen,M.create=()=>N(),M}e.wrapConstructor=$;function L(N){const M=(p,Z)=>N(Z).update(_(p)).digest(),U=N({});return M.outputLen=U.outputLen,M.blockLen=U.blockLen,M.create=p=>N(p),M}e.wrapConstructorWithOpts=L;function P(N=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(N));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=P})(pm);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=void 0;const t=ur,n=pm;class r extends n.Hash{constructor(a,c){super(),this.finished=!1,this.destroyed=!1,t.default.hash(a);const f=(0,n.toBytes)(c);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const b=this.blockLen,m=new Uint8Array(b);m.set(f.length>b?a.create().update(f).digest():f);for(let w=0;w<m.length;w++)m[w]^=54;this.iHash.update(m),this.oHash=a.create();for(let w=0;w<m.length;w++)m[w]^=106;this.oHash.update(m),m.fill(0)}update(a){return t.default.exists(this),this.iHash.update(a),this}digestInto(a){t.default.exists(this),t.default.bytes(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:c,iHash:f,finished:b,destroyed:m,blockLen:w,outputLen:_}=this;return a=a,a.finished=b,a.destroyed=m,a.blockLen=w,a.outputLen=_,a.oHash=c._cloneInto(a.oHash),a.iHash=f._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const i=(s,a,c)=>new r(s,a).update(c).digest();e.hmac=i,e.hmac.create=(s,a)=>new r(s,a)})(j2);Object.defineProperty(xl,"__esModule",{value:!0});xl.pbkdf2Async=xl.pbkdf2=void 0;const df=ur,R8=j2,ul=pm;function z2(e,t,n,r){df.default.hash(e);const i=(0,ul.checkOpts)({dkLen:32,asyncTick:10},r),{c:s,dkLen:a,asyncTick:c}=i;if(df.default.number(s),df.default.number(a),df.default.number(c),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=(0,ul.toBytes)(t),b=(0,ul.toBytes)(n),m=new Uint8Array(a),w=R8.hmac.create(e,f),_=w._cloneInto().update(b);return{c:s,dkLen:a,asyncTick:c,DK:m,PRF:w,PRFSalt:_}}function H2(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}function M8(e,t,n,r){const{c:i,dkLen:s,DK:a,PRF:c,PRFSalt:f}=z2(e,t,n,r);let b;const m=new Uint8Array(4),w=(0,ul.createView)(m),_=new Uint8Array(c.outputLen);for(let A=1,I=0;I<s;A++,I+=c.outputLen){const C=a.subarray(I,I+c.outputLen);w.setInt32(0,A,!1),(b=f._cloneInto(b)).update(m).digestInto(_),C.set(_.subarray(0,C.length));for(let R=1;R<i;R++){c._cloneInto(b).update(_).digestInto(_);for(let $=0;$<C.length;$++)C[$]^=_[$]}}return H2(c,f,a,b,_)}xl.pbkdf2=M8;async function D8(e,t,n,r){const{c:i,dkLen:s,asyncTick:a,DK:c,PRF:f,PRFSalt:b}=z2(e,t,n,r);let m;const w=new Uint8Array(4),_=(0,ul.createView)(w),A=new Uint8Array(f.outputLen);for(let I=1,C=0;C<s;I++,C+=f.outputLen){const R=c.subarray(C,C+f.outputLen);_.setInt32(0,I,!1),(m=b._cloneInto(m)).update(w).digestInto(A),R.set(A.subarray(0,R.length)),await(0,ul.asyncLoop)(i-1,a,$=>{f._cloneInto(m).update(A).digestInto(A);for(let L=0;L<R.length;L++)R[L]^=A[L]})}return H2(f,b,c,m,A)}xl.pbkdf2Async=D8;const B8=So(O6),pf=BigInt(2**32-1),Fg=BigInt(32);function q2(e,t=!1){return t?{h:Number(e&pf),l:Number(e>>Fg&pf)}:{h:Number(e>>Fg&pf)|0,l:Number(e&pf)|0}}function L8(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=q2(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}const F8=(e,t)=>BigInt(e>>>0)<<Fg|BigInt(t>>>0),U8=(e,t,n)=>e>>>n,j8=(e,t,n)=>e<<32-n|t>>>n,z8=(e,t,n)=>e>>>n|t<<32-n,H8=(e,t,n)=>e<<32-n|t>>>n,q8=(e,t,n)=>e<<64-n|t>>>n-32,K8=(e,t,n)=>e>>>n-32|t<<64-n,W8=(e,t)=>t,V8=(e,t)=>e,G8=(e,t,n)=>e<<n|t>>>32-n,Y8=(e,t,n)=>t<<n|e>>>32-n,Z8=(e,t,n)=>t<<n-32|e>>>64-n,J8=(e,t,n)=>e<<n-32|t>>>64-n;function X8(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Q8=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),e$=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,t$=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),n$=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,r$=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),i$=(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,Ht={fromBig:q2,split:L8,toBig:F8,shrSH:U8,shrSL:j8,rotrSH:z8,rotrSL:H8,rotrBH:q8,rotrBL:K8,rotr32H:W8,rotr32L:V8,rotlSH:G8,rotlSL:Y8,rotlBH:Z8,rotlBL:J8,add:X8,add3L:Q8,add3H:e$,add4L:t$,add4H:n$,add5H:i$,add5L:r$},[s$,o$]=Ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),io=new Uint32Array(80),so=new Uint32Array(80);class gu extends nm{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:s,Cl:a,Dh:c,Dl:f,Eh:b,El:m,Fh:w,Fl:_,Gh:A,Gl:I,Hh:C,Hl:R}=this;return[t,n,r,i,s,a,c,f,b,m,w,_,A,I,C,R]}set(t,n,r,i,s,a,c,f,b,m,w,_,A,I,C,R){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=c|0,this.Dl=f|0,this.Eh=b|0,this.El=m|0,this.Fh=w|0,this.Fl=_|0,this.Gh=A|0,this.Gl=I|0,this.Hh=C|0,this.Hl=R|0}process(t,n){for(let P=0;P<16;P++,n+=4)io[P]=t.getUint32(n),so[P]=t.getUint32(n+=4);for(let P=16;P<80;P++){const N=io[P-15]|0,M=so[P-15]|0,U=Ht.rotrSH(N,M,1)^Ht.rotrSH(N,M,8)^Ht.shrSH(N,M,7),p=Ht.rotrSL(N,M,1)^Ht.rotrSL(N,M,8)^Ht.shrSL(N,M,7),Z=io[P-2]|0,J=so[P-2]|0,ce=Ht.rotrSH(Z,J,19)^Ht.rotrBH(Z,J,61)^Ht.shrSH(Z,J,6),me=Ht.rotrSL(Z,J,19)^Ht.rotrBL(Z,J,61)^Ht.shrSL(Z,J,6),ke=Ht.add4L(p,me,so[P-7],so[P-16]),we=Ht.add4H(ke,U,ce,io[P-7],io[P-16]);io[P]=we|0,so[P]=ke|0}let{Ah:r,Al:i,Bh:s,Bl:a,Ch:c,Cl:f,Dh:b,Dl:m,Eh:w,El:_,Fh:A,Fl:I,Gh:C,Gl:R,Hh:$,Hl:L}=this;for(let P=0;P<80;P++){const N=Ht.rotrSH(w,_,14)^Ht.rotrSH(w,_,18)^Ht.rotrBH(w,_,41),M=Ht.rotrSL(w,_,14)^Ht.rotrSL(w,_,18)^Ht.rotrBL(w,_,41),U=w&A^~w&C,p=_&I^~_&R,Z=Ht.add5L(L,M,p,o$[P],so[P]),J=Ht.add5H(Z,$,N,U,s$[P],io[P]),ce=Z|0,me=Ht.rotrSH(r,i,28)^Ht.rotrBH(r,i,34)^Ht.rotrBH(r,i,39),ke=Ht.rotrSL(r,i,28)^Ht.rotrBL(r,i,34)^Ht.rotrBL(r,i,39),we=r&s^r&c^s&c,Q=i&a^i&f^a&f;$=C|0,L=R|0,C=A|0,R=I|0,A=w|0,I=_|0,{h:w,l:_}=Ht.add(b|0,m|0,J|0,ce|0),b=c|0,m=f|0,c=s|0,f=a|0,s=r|0,a=i|0;const G=Ht.add3L(ce,ke,Q);r=Ht.add3H(G,J,me,we),i=G|0}({h:r,l:i}=Ht.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:a}=Ht.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:c,l:f}=Ht.add(this.Ch|0,this.Cl|0,c|0,f|0),{h:b,l:m}=Ht.add(this.Dh|0,this.Dl|0,b|0,m|0),{h:w,l:_}=Ht.add(this.Eh|0,this.El|0,w|0,_|0),{h:A,l:I}=Ht.add(this.Fh|0,this.Fl|0,A|0,I|0),{h:C,l:R}=Ht.add(this.Gh|0,this.Gl|0,C|0,R|0),{h:$,l:L}=Ht.add(this.Hh|0,this.Hl|0,$|0,L|0),this.set(r,i,s,a,c,f,b,m,w,_,A,I,C,R,$,L)}roundClean(){io.fill(0),so.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class a$ extends gu{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class l$ extends gu{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class c$ extends gu{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Ug=Eo(()=>new gu),u$=Eo(()=>new a$),f$=Eo(()=>new l$),h$=Eo(()=>new c$),d$=Object.freeze(Object.defineProperty({__proto__:null,SHA512:gu,sha384:h$,sha512:Ug,sha512_224:u$,sha512_256:f$},Symbol.toStringTag,{value:"Module"})),p$=So(d$),g$=So(E6),K2=So($8);Object.defineProperty(Qr,"__esModule",{value:!0});var W2=Qr.mnemonicToSeedSync=Qr.mnemonicToSeed=nx=Qr.validateMnemonic=Qr.entropyToMnemonic=Qr.mnemonicToEntropy=X2=Qr.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const V2=P8,G2=xl,y$=B8,Y2=p$,m$=g$,gf=K2,v$=e=>e[0]==="";function Z2(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function gm(e){const t=Z2(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function J2(e){V2.default.bytes(e,16,20,24,28,32)}function b$(e,t=128){if(V2.default.number(t),t%32!==0||t>256)throw new TypeError("Invalid entropy");return tx((0,m$.randomBytes)(t/8),e)}var X2=Qr.generateMnemonic=b$;const w$=e=>{const t=8-e.length/4;return new Uint8Array([(0,y$.sha256)(e)[0]>>t<<t])};function Q2(e){if(!Array.isArray(e)||e.length!==2048||typeof e[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return e.forEach(t=>{if(typeof t!="string")throw new Error(`Wordlist: non-string element: ${t}`)}),gf.utils.chain(gf.utils.checksum(1,w$),gf.utils.radix2(11,!0),gf.utils.alphabet(e))}function ex(e,t){const{words:n}=gm(e),r=Q2(t).decode(n);return J2(r),r}Qr.mnemonicToEntropy=ex;function tx(e,t){return J2(e),Q2(t).encode(e).join(v$(t)?"":" ")}Qr.entropyToMnemonic=tx;function _$(e,t){try{ex(e,t)}catch{return!1}return!0}var nx=Qr.validateMnemonic=_$;const rx=e=>Z2(`mnemonic${e}`);function x$(e,t=""){return(0,G2.pbkdf2Async)(Y2.sha512,gm(e).nfkd,rx(t),{c:2048,dkLen:64})}Qr.mnemonicToSeed=x$;function k$(e,t=""){return(0,G2.pbkdf2)(Y2.sha512,gm(e).nfkd,rx(t),{c:2048,dkLen:64})}W2=Qr.mnemonicToSeedSync=k$;const S$=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ix=Uint8Array.from({length:16},(e,t)=>t),E$=ix.map(e=>(9*e+5)%16);let ym=[ix],mm=[E$];for(let e=0;e<4;e++)for(let t of[ym,mm])t.push(t[e].map(n=>S$[n]));const sx=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),A$=ym.map((e,t)=>e.map(n=>sx[t][n])),C$=mm.map((e,t)=>e.map(n=>sx[t][n])),T$=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),I$=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),yf=(e,t)=>e<<t|e>>>32-t;function j1(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const mf=new Uint32Array(16);class $$ extends nm{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:i,h4:s}=this;return[t,n,r,i,s]}set(t,n,r,i,s){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(t,n){for(let A=0;A<16;A++,n+=4)mf[A]=t.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,a=s,c=this.h2|0,f=c,b=this.h3|0,m=b,w=this.h4|0,_=w;for(let A=0;A<5;A++){const I=4-A,C=T$[A],R=I$[A],$=ym[A],L=mm[A],P=A$[A],N=C$[A];for(let M=0;M<16;M++){const U=yf(r+j1(A,s,c,b)+mf[$[M]]+C,P[M])+w|0;r=w,w=b,b=yf(c,10)|0,c=s,s=U}for(let M=0;M<16;M++){const U=yf(i+j1(I,a,f,m)+mf[L[M]]+R,N[M])+_|0;i=_,_=m,m=yf(f,10)|0,f=a,a=U}}this.set(this.h1+c+m|0,this.h2+b+_|0,this.h3+w+i|0,this.h4+r+a|0,this.h0+s+f|0)}roundClean(){mf.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const P$=Eo(()=>new $$),vf=kr.ProjectivePoint,Kp=$2(ni);function z1(e){return BigInt(`0x${cr(e)}`)}function O$(e){return bo(e.toString(16).padStart(64,"0"))}const N$=em("Bitcoin seed"),Wp={private:76066276,public:76067358},Vp=2147483648,R$=e=>P$(ni(e)),M$=e=>ha(e).getUint32(0,!1),bf=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return ha(t).setUint32(0,e,!1),t};class ra{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return M$(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const t=this.privateKey;if(!t)throw new Error("No private key");return Kp.encode(this.serialize(this.versions.private,oa(new Uint8Array([0]),t)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Kp.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(t,n=Wp){if(co(t),8*t.length<128||8*t.length>512)throw new Error(`HDKey: wrong seed length=${t.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const r=fh(Ug,N$,t);return new ra({versions:n,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(t,n=Wp){const r=Kp.decode(t),i=ha(r),s=i.getUint32(0,!1),a={versions:n,depth:r[4],parentFingerprint:i.getUint32(5,!1),index:i.getUint32(9,!1),chainCode:r.slice(13,45)},c=r.slice(45),f=c[0]===0;if(s!==n[f?"private":"public"])throw new Error("Version mismatch");return f?new ra({...a,privateKey:c.slice(1)}):new ra({...a,publicKey:c})}static fromJSON(t){return ra.fromExtendedKey(t.xpriv)}constructor(t){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!t||typeof t!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=t.versions||Wp,this.depth=t.depth||0,this.chainCode=t.chainCode,this.index=t.index||0,this.parentFingerprint=t.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(t.publicKey&&t.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(t.privateKey){if(!kr.utils.isValidPrivateKey(t.privateKey))throw new Error("Invalid private key");this.privKey=typeof t.privateKey=="bigint"?t.privateKey:z1(t.privateKey),this.privKeyBytes=O$(this.privKey),this.pubKey=kr.getPublicKey(t.privateKey,!0)}else if(t.publicKey)this.pubKey=vf.fromHex(t.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=R$(this.pubKey)}derive(t){if(!/^[mM]'?/.test(t))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(t))return this;const n=t.replace(/^[mM]'?\//,"").split("/");let r=this;for(const i of n){const s=/^(\d+)('?)$/.exec(i);if(!s||s.length!==3)throw new Error(`Invalid child index: ${i}`);let a=+s[1];if(!Number.isSafeInteger(a)||a>=Vp)throw new Error("Invalid index");s[2]==="'"&&(a+=Vp),r=r.deriveChild(a)}return r}deriveChild(t){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=bf(t);if(t>=Vp){const c=this.privateKey;if(!c)throw new Error("Could not derive hardened child key");n=oa(new Uint8Array([0]),c,n)}else n=oa(this.pubKey,n);const r=fh(Ug,this.chainCode,n),i=z1(r.slice(0,32)),s=r.slice(32);if(!kr.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const a={versions:this.versions,chainCode:s,depth:this.depth+1,parentFingerprint:this.fingerprint,index:t};try{if(this.privateKey){const c=Wn(this.privKey+i,kr.CURVE.n);if(!kr.utils.isValidPrivateKey(c))throw new Error("The tweak was out of range or the resulted private key is invalid");a.privateKey=c}else{const c=vf.fromHex(this.pubKey).add(vf.fromPrivateKey(i));if(c.equals(vf.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");a.publicKey=c.toRawBytes(!0)}return new ra(a)}catch{return this.deriveChild(t+1)}}sign(t){if(!this.privateKey)throw new Error("No privateKey set!");return co(t,32),kr.sign(t,this.privKey).toCompactRawBytes()}verify(t,n){if(co(t,32),co(n,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=kr.Signature.fromCompact(n)}catch{return!1}return kr.verify(r,t,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(t,n){if(!this.chainCode)throw new Error("No chainCode set");return co(n,33),oa(bf(t),new Uint8Array([this.depth]),bf(this.parentFingerprint),bf(this.index),this.chainCode,n)}}var D$=Object.defineProperty,pr=(e,t)=>{for(var n in t)D$(e,n,{get:t[n],enumerable:!0})};function B$(){return cr(Il.utils.randomPrivateKey())}function mh(e){return cr(Il.getPublicKey(e))}var L$={};pr(L$,{insertEventIntoAscendingList:()=>j$,insertEventIntoDescendingList:()=>U$,normalizeURL:()=>F$,utf8Decoder:()=>uo,utf8Encoder:()=>os});var uo=new TextDecoder("utf-8"),os=new TextEncoder;function F$(e){let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function U$(e,t){var a;let n=0,r=e.length-1,i,s=n;if(r<0)s=0;else if(t.created_at<e[r].created_at)s=r+1;else if(t.created_at>=e[n].created_at)s=n;else for(;;){if(r<=n+1){s=r;break}if(i=Math.floor(n+(r-n)/2),e[i].created_at>t.created_at)n=i;else if(e[i].created_at<t.created_at)r=i;else{s=i;break}}return((a=e[s])==null?void 0:a.id)!==t.id?[...e.slice(0,s),t,...e.slice(s)]:e}function j$(e,t){var a;let n=0,r=e.length-1,i,s=n;if(r<0)s=0;else if(t.created_at>e[r].created_at)s=r+1;else if(t.created_at<=e[n].created_at)s=n;else for(;;){if(r<=n+1){s=r;break}if(i=Math.floor(n+(r-n)/2),e[i].created_at<t.created_at)n=i;else if(e[i].created_at>t.created_at)r=i;else{s=i;break}}return((a=e[s])==null?void 0:a.id)!==t.id?[...e.slice(0,s),t,...e.slice(s)]:e}var Kn=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.Blank=255]="Blank",e[e.Report=1984]="Report",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.RelayList=10002]="RelayList",e[e.ClientAuth=22242]="ClientAuth",e[e.BadgeDefinition=30008]="BadgeDefinition",e[e.ProfileBadge=30009]="ProfileBadge",e[e.Article=30023]="Article",e))(Kn||{});function ox(e,t){let n=e;return n.pubkey=mh(t),n.id=Zc(n),n.sig=ax(n,t),n}function z$(e){if(!vm(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Zc(e){let t=ni(os.encode(z$(e)));return cr(t)}var H$=e=>e instanceof Object;function vm(e){if(!H$(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}function bm(e){try{return Il.verify(e.sig,Zc(e),e.pubkey)}catch{return!1}}function q$(e,t){return console.warn("nostr-tools: `signEvent` is deprecated and will be removed or changed in the future. Please use `getSignature` instead."),ax(e,t)}function ax(e,t){return cr(Il.sign(Zc(e),t))}function yu(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),i=e[`#${r}`];if(i&&!t.tags.find(([s,a])=>s===n.slice(1)&&i.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>=e.until)}function K$(e,t){for(let n=0;n<e.length;n++)if(yu(e[n],t))return!0;return!1}var W$={};pr(W$,{getHex64:()=>wm,getInt:()=>lx,getSubscriptionId:()=>V$,matchEventId:()=>G$,matchEventKind:()=>Z$,matchEventPubkey:()=>Y$});function wm(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function lx(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function V$(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(i===-1)return null;let s=r+1+i;return e.slice(r+1,s)}function G$(e,t){return t===wm(e,"id")}function Y$(e,t){return t===wm(e,"pubkey")}function Z$(e,t){return t===lx(e,"kind")}var vh={};pr(vh,{BECH32_REGEX:()=>cx,decode:()=>ld,naddrEncode:()=>nP,neventEncode:()=>tP,noteEncode:()=>Q$,nprofileEncode:()=>eP,npubEncode:()=>X$,nrelayEncode:()=>rP,nsecEncode:()=>J$});var $l=5e3,cx=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ld(e){var i,s,a,c,f,b,m;let{prefix:t,words:n}=Cr.decode(e,$l),r=new Uint8Array(Cr.fromWords(n));switch(t){case"nprofile":{let w=wf(r);if(!((i=w[0])!=null&&i[0]))throw new Error("missing TLV 0 for nprofile");if(w[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:cr(w[0][0]),relays:w[1]?w[1].map(_=>uo.decode(_)):[]}}}case"nevent":{let w=wf(r);if(!((s=w[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(w[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(w[2]&&w[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:cr(w[0][0]),relays:w[1]?w[1].map(_=>uo.decode(_)):[],author:(a=w[2])!=null&&a[0]?cr(w[2][0]):void 0}}}case"naddr":{let w=wf(r);if(!((c=w[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((f=w[2])!=null&&f[0]))throw new Error("missing TLV 2 for naddr");if(w[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((b=w[3])!=null&&b[0]))throw new Error("missing TLV 3 for naddr");if(w[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:uo.decode(w[0][0]),pubkey:cr(w[2][0]),kind:parseInt(cr(w[3][0]),16),relays:w[1]?w[1].map(_=>uo.decode(_)):[]}}}case"nrelay":{let w=wf(r);if(!((m=w[0])!=null&&m[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:uo.decode(w[0][0])}}case"nsec":case"npub":case"note":return{type:t,data:cr(r)};default:throw new Error(`unknown prefix ${t}`)}}function wf(e){let t={},n=e;for(;n.length>0;){let r=n[0],i=n[1],s=n.slice(2,2+i);n=n.slice(2+i),!(s.length<i)&&(t[r]=t[r]||[],t[r].push(s))}return t}function J$(e){return _m("nsec",e)}function X$(e){return _m("npub",e)}function Q$(e){return _m("note",e)}function _m(e,t){let n=bo(t),r=Cr.toWords(n);return Cr.encode(e,r,$l)}function eP(e){let t=cd({0:[bo(e.pubkey)],1:(e.relays||[]).map(r=>os.encode(r))}),n=Cr.toWords(t);return Cr.encode("nprofile",n,$l)}function tP(e){let t=cd({0:[bo(e.id)],1:(e.relays||[]).map(r=>os.encode(r)),2:e.author?[bo(e.author)]:[]}),n=Cr.toWords(t);return Cr.encode("nevent",n,$l)}function nP(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=cd({0:[os.encode(e.identifier)],1:(e.relays||[]).map(i=>os.encode(i)),2:[bo(e.pubkey)],3:[new Uint8Array(t)]}),r=Cr.toWords(n);return Cr.encode("naddr",r,$l)}function rP(e){let t=cd({0:[os.encode(e)]}),n=Cr.toWords(t);return Cr.encode("nrelay",n,$l)}function cd(e){let t=[];return Object.entries(e).forEach(([n,r])=>{r.forEach(i=>{let s=new Uint8Array(i.length+2);s.set([parseInt(n)],0),s.set([i.length],1),s.set(i,2),t.push(s)})}),oa(...t)}var jg={};pr(jg,{decrypt:()=>sP,encrypt:()=>iP});typeof crypto<"u"&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle);async function iP(e,t,n){const r=kr.getSharedSecret(e,"02"+t),i=ux(r);let s=Uint8Array.from(nd(16)),a=os.encode(n),c=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt"]),f=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},c,a),b=_l.encode(new Uint8Array(f)),m=_l.encode(new Uint8Array(s.buffer));return`${b}?iv=${m}`}async function sP(e,t,n){let[r,i]=n.split("?iv="),s=kr.getSharedSecret(e,"02"+t),a=ux(s),c=await crypto.subtle.importKey("raw",a,{name:"AES-CBC"},!1,["decrypt"]),f=_l.decode(r),b=_l.decode(i),m=await crypto.subtle.decrypt({name:"AES-CBC",iv:b},c,f);return uo.decode(m)}function ux(e){return e.slice(1,33)}var oP={};pr(oP,{NIP05_REGEX:()=>fx,queryProfile:()=>cP,searchDomain:()=>lP,useFetchImplementation:()=>aP});var fx=/^(?:([\w.+-]+)@)?([\w.-]+)$/,ud;try{ud=fetch}catch{}function aP(e){ud=e}async function lP(e,t=""){try{return(await(await ud(`https://${e}/.well-known/nostr.json?name=${t}`)).json()).names}catch{return{}}}async function cP(e){const t=e.match(fx);if(!t)return null;const[n,r="_",i]=t;try{const s=await ud(`https://${i}/.well-known/nostr.json?name=${r}`),{names:a,relays:c}=uP(await s.json()),f=a[r];return f?{pubkey:f,relays:c==null?void 0:c[f]}:null}catch{return null}}function uP(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))typeof n=="string"&&typeof r=="string"&&(t.names[n]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))typeof n=="string"&&Array.isArray(r)&&(t.relays[n]=r.filter(i=>typeof i=="string"))}return t}var fP={};pr(fP,{generateSeedWords:()=>dP,privateKeyFromSeedWords:()=>hP,validateWords:()=>pP});function hP(e,t){let r=ra.fromMasterSeed(W2(e,t)).derive("m/44'/1237'/0'/0/0").privateKey;if(!r)throw new Error("could not derive private key");return cr(r)}function dP(){return X2(hm)}function pP(e){return nx(e,hm)}var gP={};pr(gP,{parse:()=>yP});function yP(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const i=n[r],[s,a,c,f]=i,b={id:a,relays:c?[c]:[]},m=r===0,w=r===n.length-1;if(f==="root"){t.root=b;continue}if(f==="reply"){t.reply=b;continue}if(f==="mention"){t.mentions.push(b);continue}if(m){t.root=b;continue}if(w){t.reply=b;continue}t.mentions.push(b)}return t}var mP={};pr(mP,{getPow:()=>vP});function vP(e){return bP(bo(e))}function bP(e){let t,n,r;for(n=0,t=0;n<e.length&&(r=wP(e[n]),t+=r,r===8);n++);return t}function wP(e){let t=0;if(e===0)return 8;for(;e>>=1;)t++;return 7-t}var _P={};pr(_P,{finishRepostEvent:()=>xP,getRepostedEvent:()=>kP,getRepostedEventPointer:()=>hx});function xP(e,t,n,r){return ox({kind:6,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}function hx(e){if(e.kind!==6)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const i=e.tags[r];i.length>=2&&(i[0]==="e"&&t===void 0?t=i:i[0]==="p"&&n===void 0&&(n=i))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function kP(e,{skipVerification:t}={}){const n=hx(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!bm(r)))return r}var SP={};pr(SP,{NOSTR_URI_REGEX:()=>fd,parse:()=>AP,test:()=>EP});var fd=new RegExp(`nostr:(${cx.source})`);function EP(e){return typeof e=="string"&&new RegExp(`^${fd.source}$`).test(e)}function AP(e){const t=e.match(new RegExp(`^${fd.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:ld(t[1])}}var CP={};pr(CP,{finishReactionEvent:()=>TP,getReactedEventPointer:()=>IP});function TP(e,t,n){const r=t.tags.filter(i=>i.length>=2&&(i[0]==="e"||i[0]==="p"));return ox({...e,kind:7,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function IP(e){if(e.kind!==7)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const i=e.tags[r];i.length>=2&&(i[0]==="e"&&t===void 0?t=i:i[0]==="p"&&n===void 0&&(n=i))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var $P={};pr($P,{createDelegation:()=>PP,getDelegator:()=>OP});function PP(e,t){let n=[];(t.kind||-1)>=0&&n.push(`kind=${t.kind}`),t.until&&n.push(`created_at<${t.until}`),t.since&&n.push(`created_at>${t.since}`);let r=n.join("&");if(r==="")throw new Error("refusing to create a delegation without any conditions");let i=ni(os.encode(`nostr:delegation:${t.pubkey}:${r}`)),s=cr(Il.sign(i,e));return{from:mh(e),to:t.pubkey,cond:r,sig:s}}function OP(e){let t=e.tags.find(c=>c[0]==="delegation"&&c.length>=4);if(!t)return null;let n=t[1],r=t[2],i=t[3],s=r.split("&");for(let c=0;c<s.length;c++){let[f,b,m]=s[c].split(/\b/);if(!(f==="kind"&&b==="="&&e.kind===parseInt(m))){if(f==="created_at"&&b==="<"&&e.created_at<parseInt(m))continue;if(f==="created_at"&&b===">"&&e.created_at>parseInt(m))continue;return null}}let a=ni(os.encode(`nostr:delegation:${e.pubkey}:${r}`));return Il.verify(i,a,n)?n:null}var NP={};pr(NP,{matchAll:()=>RP,regex:()=>xm,replaceAll:()=>MP});var xm=()=>new RegExp(`\\b${fd.source}\\b`,"g");function*RP(e){const t=e.matchAll(xm());for(const n of t){const[r,i]=n;yield{uri:r,value:i,decoded:ld(i),start:n.index,end:n.index+r.length}}}function MP(e,t){return e.replaceAll(xm(),(n,r)=>t({uri:n,value:r,decoded:ld(r)}))}var DP={};pr(DP,{useFetchImplementation:()=>BP,validateGithub:()=>LP});var km;try{km=fetch}catch{}function BP(e){km=e}async function LP(e,t,n){try{return await(await km(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var dx={};pr(dx,{authenticate:()=>FP});var FP=async({challenge:e,relay:t,sign:n})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",t.url],["challenge",e]],content:""},i=t.auth(await n(r));return new Promise((s,a)=>{i.on("ok",function c(){i.off("ok",c),s()}),i.on("failed",function c(f){i.off("failed",c),a(f)})})},UP={};pr(UP,{getZapEndpoint:()=>zP,makeZapReceipt:()=>KP,makeZapRequest:()=>HP,useFetchImplementation:()=>jP,validateZapRequest:()=>qP});var Sm;try{Sm=fetch}catch{}function jP(e){Sm=e}async function zP(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:a}=Cr.decode(n,1e3),c=Cr.fromWords(a);t=uo.decode(c)}else if(r){let[a,c]=r.split("@");t=`https://${c}/.well-known/lnurlp/${a}`}else return null;let s=await(await Sm(t)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function HP({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}function qP(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!vm(t))return"Zap request is not a valid Nostr event.";if(!bm(t))return"Invalid signature on zap request.";let n=t.tags.find(([s,a])=>s==="p"&&a);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([s,a])=>s==="e"&&a);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([s,a])=>s==="relays"&&a)?null:"Zap request doesn't have a 'relays' tag."}function KP({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let s=JSON.parse(e).tags.filter(([c])=>c==="e"||c==="p"||c==="a"),a={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["bolt11",n],["description",e]]};return t&&a.tags.push(["preimage",t]),a}var WP=function(e){return e instanceof RegExp},VP=function(t){var n=/[\\^$.*+?()[\]{}|]/g,r=RegExp(n.source);return t&&r.test(t)?t.replace(n,"\\$&"):t},px=function(e){return typeof e=="string"},GP=function(e){var t=[];return e.forEach(function(n){Array.isArray(n)?t=t.concat(n):t.push(n)}),t};function YP(e,t,n){var r=0,i=0;if(e==="")return e;if(!e||!px(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s=t;WP(s)||(s=new RegExp("("+VP(s)+")","gi"));for(var a=e.split(s),c=1,f=a.length;c<f;c+=2){if(a[c]===void 0||a[c-1]===void 0){console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");continue}i=a[c].length,r+=a[c-1].length,a[c]=n(a[c],c,r),r+=i}return a}var ZP=function(t,n,r){return Array.isArray(t)||(t=[t]),GP(t.map(function(i){return px(i)?YP(i,n,r):i}))};const cn=jr(ZP);var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.bech32m=zg=Jc.bech32=void 0;const bh="qpzry9x8gf2tvdw0s3jn54khce6mua7l",gx={};for(let e=0;e<bh.length;e++){const t=bh.charAt(e);gx[t]=e}function fl(e){const t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function H1(e){let t=1;for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=fl(t)^r>>5}t=fl(t);for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t=fl(t)^r&31}return t}function Em(e,t,n,r){let i=0,s=0;const a=(1<<n)-1,c=[];for(let f=0;f<e.length;++f)for(i=i<<t|e[f],s+=t;s>=n;)s-=n,c.push(i>>s&a);if(r)s>0&&c.push(i<<n-s&a);else{if(s>=t)return"Excess padding";if(i<<n-s&a)return"Non-zero padding"}return c}function JP(e){return Em(e,8,5,!0)}function XP(e){const t=Em(e,5,8,!1);if(Array.isArray(t))return t}function QP(e){const t=Em(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function yx(e){let t;e==="bech32"?t=1:t=734539939;function n(a,c,f){if(f=f||90,a.length+7+c.length>f)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let b=H1(a);if(typeof b=="string")throw new Error(b);let m=a+"1";for(let w=0;w<c.length;++w){const _=c[w];if(_>>5)throw new Error("Non 5-bit word");b=fl(b)^_,m+=bh.charAt(_)}for(let w=0;w<6;++w)b=fl(b);b^=t;for(let w=0;w<6;++w){const _=b>>(5-w)*5&31;m+=bh.charAt(_)}return m}function r(a,c){if(c=c||90,a.length<8)return a+" too short";if(a.length>c)return"Exceeds length limit";const f=a.toLowerCase(),b=a.toUpperCase();if(a!==f&&a!==b)return"Mixed-case string "+a;a=f;const m=a.lastIndexOf("1");if(m===-1)return"No separator character for "+a;if(m===0)return"Missing prefix for "+a;const w=a.slice(0,m),_=a.slice(m+1);if(_.length<6)return"Data too short";let A=H1(w);if(typeof A=="string")return A;const I=[];for(let C=0;C<_.length;++C){const R=_.charAt(C),$=gx[R];if($===void 0)return"Unknown character "+R;A=fl(A)^$,!(C+6>=_.length)&&I.push($)}return A!==t?"Invalid checksum for "+a:{prefix:w,words:I}}function i(a,c){const f=r(a,c);if(typeof f=="object")return f}function s(a,c){const f=r(a,c);if(typeof f=="object")return f;throw new Error(f)}return{decodeUnsafe:i,decode:s,encode:n,toWords:JP,fromWordsUnsafe:XP,fromWords:QP}}var zg=Jc.bech32=yx("bech32");Jc.bech32m=yx("bech32m");var mx={exports:{}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(e){(function(t,n){e.exports=t.document?n(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return n(r)}})(typeof window<"u"?window:Dn,function(t,n){var r=[],i=Object.getPrototypeOf,s=r.slice,a=r.flat?function(u){return r.flat.call(u)}:function(u){return r.concat.apply([],u)},c=r.push,f=r.indexOf,b={},m=b.toString,w=b.hasOwnProperty,_=w.toString,A=_.call(Object),I={},C=function(y){return typeof y=="function"&&typeof y.nodeType!="number"&&typeof y.item!="function"},R=function(y){return y!=null&&y===y.window},$=t.document,L={type:!0,src:!0,nonce:!0,noModule:!0};function P(u,y,x){x=x||$;var E,D,B=x.createElement("script");if(B.text=u,y)for(E in L)D=y[E]||y.getAttribute&&y.getAttribute(E),D&&B.setAttribute(E,D);x.head.appendChild(B).parentNode.removeChild(B)}function N(u){return u==null?u+"":typeof u=="object"||typeof u=="function"?b[m.call(u)]||"object":typeof u}var M="3.7.0",U=/HTML$/i,p=function(u,y){return new p.fn.init(u,y)};p.fn=p.prototype={jquery:M,constructor:p,length:0,toArray:function(){return s.call(this)},get:function(u){return u==null?s.call(this):u<0?this[u+this.length]:this[u]},pushStack:function(u){var y=p.merge(this.constructor(),u);return y.prevObject=this,y},each:function(u){return p.each(this,u)},map:function(u){return this.pushStack(p.map(this,function(y,x){return u.call(y,x,y)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(u,y){return(y+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(u,y){return y%2}))},eq:function(u){var y=this.length,x=+u+(u<0?y:0);return this.pushStack(x>=0&&x<y?[this[x]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},p.extend=p.fn.extend=function(){var u,y,x,E,D,B,j=arguments[0]||{},re=1,X=arguments.length,ge=!1;for(typeof j=="boolean"&&(ge=j,j=arguments[re]||{},re++),typeof j!="object"&&!C(j)&&(j={}),re===X&&(j=this,re--);re<X;re++)if((u=arguments[re])!=null)for(y in u)E=u[y],!(y==="__proto__"||j===E)&&(ge&&E&&(p.isPlainObject(E)||(D=Array.isArray(E)))?(x=j[y],D&&!Array.isArray(x)?B=[]:!D&&!p.isPlainObject(x)?B={}:B=x,D=!1,j[y]=p.extend(ge,B,E)):E!==void 0&&(j[y]=E));return j},p.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(u){throw new Error(u)},noop:function(){},isPlainObject:function(u){var y,x;return!u||m.call(u)!=="[object Object]"?!1:(y=i(u),y?(x=w.call(y,"constructor")&&y.constructor,typeof x=="function"&&_.call(x)===A):!0)},isEmptyObject:function(u){var y;for(y in u)return!1;return!0},globalEval:function(u,y,x){P(u,{nonce:y&&y.nonce},x)},each:function(u,y){var x,E=0;if(Z(u))for(x=u.length;E<x&&y.call(u[E],E,u[E])!==!1;E++);else for(E in u)if(y.call(u[E],E,u[E])===!1)break;return u},text:function(u){var y,x="",E=0,D=u.nodeType;if(D){if(D===1||D===9||D===11)return u.textContent;if(D===3||D===4)return u.nodeValue}else for(;y=u[E++];)x+=p.text(y);return x},makeArray:function(u,y){var x=y||[];return u!=null&&(Z(Object(u))?p.merge(x,typeof u=="string"?[u]:u):c.call(x,u)),x},inArray:function(u,y,x){return y==null?-1:f.call(y,u,x)},isXMLDoc:function(u){var y=u&&u.namespaceURI,x=u&&(u.ownerDocument||u).documentElement;return!U.test(y||x&&x.nodeName||"HTML")},merge:function(u,y){for(var x=+y.length,E=0,D=u.length;E<x;E++)u[D++]=y[E];return u.length=D,u},grep:function(u,y,x){for(var E,D=[],B=0,j=u.length,re=!x;B<j;B++)E=!y(u[B],B),E!==re&&D.push(u[B]);return D},map:function(u,y,x){var E,D,B=0,j=[];if(Z(u))for(E=u.length;B<E;B++)D=y(u[B],B,x),D!=null&&j.push(D);else for(B in u)D=y(u[B],B,x),D!=null&&j.push(D);return a(j)},guid:1,support:I}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=r[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(u,y){b["[object "+y+"]"]=y.toLowerCase()});function Z(u){var y=!!u&&"length"in u&&u.length,x=N(u);return C(u)||R(u)?!1:x==="array"||y===0||typeof y=="number"&&y>0&&y-1 in u}function J(u,y){return u.nodeName&&u.nodeName.toLowerCase()===y.toLowerCase()}var ce=r.pop,me=r.sort,ke=r.splice,we="[\\x20\\t\\r\\n\\f]",Q=new RegExp("^"+we+"+|((?:^|[^\\\\])(?:\\\\.)*)"+we+"+$","g");p.contains=function(u,y){var x=y&&y.parentNode;return u===x||!!(x&&x.nodeType===1&&(u.contains?u.contains(x):u.compareDocumentPosition&&u.compareDocumentPosition(x)&16))};var G=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Ae(u,y){return y?u==="\0"?"":u.slice(0,-1)+"\\"+u.charCodeAt(u.length-1).toString(16)+" ":"\\"+u}p.escapeSelector=function(u){return(u+"").replace(G,Ae)};var Te=$,qe=c;(function(){var u,y,x,E,D,B=qe,j,re,X,ge,Ie,Oe=p.expando,Ee=0,Ge=0,at=jo(),Mt=jo(),Rt=jo(),Un=jo(),An=function(Y,le){return Y===le&&(D=!0),0},fi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",hi="(?:\\\\[\\da-fA-F]{1,6}"+we+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Vt="\\["+we+"*("+hi+")(?:"+we+"*([*^$|!~]?=)"+we+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+hi+"))|)"+we+"*\\]",Gi=":("+hi+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Vt+")*)|.*)\\)|)",Gt=new RegExp(we+"+","g"),sn=new RegExp("^"+we+"*,"+we+"*"),Lo=new RegExp("^"+we+"*([>+~]|"+we+")"+we+"*"),ja=new RegExp(we+"|>"),Hr=new RegExp(Gi),gs=new RegExp("^"+hi+"$"),Pr={ID:new RegExp("^#("+hi+")"),CLASS:new RegExp("^\\.("+hi+")"),TAG:new RegExp("^("+hi+"|[*])"),ATTR:new RegExp("^"+Vt),PSEUDO:new RegExp("^"+Gi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+we+"*(even|odd|(([+-]|)(\\d*)n|)"+we+"*(?:([+-]|)"+we+"*(\\d+)|))"+we+"*\\)|)","i"),bool:new RegExp("^(?:"+fi+")$","i"),needsContext:new RegExp("^"+we+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+we+"*((?:-\\d)?\\d*)"+we+"*\\)|)(?=[^-]|$)","i")},Ci=/^(?:input|select|textarea|button)$/i,Yi=/^h\d$/i,or=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Fo=/[+~]/,Ti=new RegExp("\\\\[\\da-fA-F]{1,6}"+we+"?|\\\\([^\\r\\n\\f])","g"),di=function(Y,le){var Se="0x"+Y.slice(1)-65536;return le||(Se<0?String.fromCharCode(Se+65536):String.fromCharCode(Se>>10|55296,Se&1023|56320))},mr=function(){Zi()},ec=ys(function(Y){return Y.disabled===!0&&J(Y,"fieldset")},{dir:"parentNode",next:"legend"});function Uo(){try{return j.activeElement}catch{}}try{B.apply(r=s.call(Te.childNodes),Te.childNodes),r[Te.childNodes.length].nodeType}catch{B={apply:function(le,Se){qe.apply(le,s.call(Se))},call:function(le){qe.apply(le,s.call(arguments,1))}}}function en(Y,le,Se,Ce){var W,oe,se,Ne,Be,lt,ct,st=le&&le.ownerDocument,Ut=le?le.nodeType:9;if(Se=Se||[],typeof Y!="string"||!Y||Ut!==1&&Ut!==9&&Ut!==11)return Se;if(!Ce&&(Zi(le),le=le||j,X)){if(Ut!==11&&(Be=or.exec(Y)))if(W=Be[1]){if(Ut===9)if(se=le.getElementById(W)){if(se.id===W)return B.call(Se,se),Se}else return Se;else if(st&&(se=st.getElementById(W))&&en.contains(le,se)&&se.id===W)return B.call(Se,se),Se}else{if(Be[2])return B.apply(Se,le.getElementsByTagName(Y)),Se;if((W=Be[3])&&le.getElementsByClassName)return B.apply(Se,le.getElementsByClassName(W)),Se}if(!Un[Y+" "]&&(!ge||!ge.test(Y))){if(ct=Y,st=le,Ut===1&&(ja.test(Y)||Lo.test(Y))){for(st=Fo.test(Y)&&tc(le.parentNode)||le,(st!=le||!I.scope)&&((Ne=le.getAttribute("id"))?Ne=p.escapeSelector(Ne):le.setAttribute("id",Ne=Oe)),lt=zo(Y),oe=lt.length;oe--;)lt[oe]=(Ne?"#"+Ne:":scope")+" "+Kr(lt[oe]);ct=lt.join(",")}try{return B.apply(Se,st.querySelectorAll(ct)),Se}catch{Un(Y,!0)}finally{Ne===Oe&&le.removeAttribute("id")}}}return Ou(Y.replace(Q,"$1"),le,Se,Ce)}function jo(){var Y=[];function le(Se,Ce){return Y.push(Se+" ")>y.cacheLength&&delete le[Y.shift()],le[Se+" "]=Ce}return le}function qr(Y){return Y[Oe]=!0,Y}function Ys(Y){var le=j.createElement("fieldset");try{return!!Y(le)}catch{return!1}finally{le.parentNode&&le.parentNode.removeChild(le),le=null}}function zd(Y){return function(le){return J(le,"input")&&le.type===Y}}function Hd(Y){return function(le){return(J(le,"input")||J(le,"button"))&&le.type===Y}}function $u(Y){return function(le){return"form"in le?le.parentNode&&le.disabled===!1?"label"in le?"label"in le.parentNode?le.parentNode.disabled===Y:le.disabled===Y:le.isDisabled===Y||le.isDisabled!==!Y&&ec(le)===Y:le.disabled===Y:"label"in le?le.disabled===Y:!1}}function Or(Y){return qr(function(le){return le=+le,qr(function(Se,Ce){for(var W,oe=Y([],Se.length,le),se=oe.length;se--;)Se[W=oe[se]]&&(Se[W]=!(Ce[W]=Se[W]))})})}function tc(Y){return Y&&typeof Y.getElementsByTagName<"u"&&Y}function Zi(Y){var le,Se=Y?Y.ownerDocument||Y:Te;return Se==j||Se.nodeType!==9||!Se.documentElement||(j=Se,re=j.documentElement,X=!p.isXMLDoc(j),Ie=re.matches||re.webkitMatchesSelector||re.msMatchesSelector,Te!=j&&(le=j.defaultView)&&le.top!==le&&le.addEventListener("unload",mr),I.getById=Ys(function(Ce){return re.appendChild(Ce).id=p.expando,!j.getElementsByName||!j.getElementsByName(p.expando).length}),I.disconnectedMatch=Ys(function(Ce){return Ie.call(Ce,"*")}),I.scope=Ys(function(){return j.querySelectorAll(":scope")}),I.cssHas=Ys(function(){try{return j.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),I.getById?(y.filter.ID=function(Ce){var W=Ce.replace(Ti,di);return function(oe){return oe.getAttribute("id")===W}},y.find.ID=function(Ce,W){if(typeof W.getElementById<"u"&&X){var oe=W.getElementById(Ce);return oe?[oe]:[]}}):(y.filter.ID=function(Ce){var W=Ce.replace(Ti,di);return function(oe){var se=typeof oe.getAttributeNode<"u"&&oe.getAttributeNode("id");return se&&se.value===W}},y.find.ID=function(Ce,W){if(typeof W.getElementById<"u"&&X){var oe,se,Ne,Be=W.getElementById(Ce);if(Be){if(oe=Be.getAttributeNode("id"),oe&&oe.value===Ce)return[Be];for(Ne=W.getElementsByName(Ce),se=0;Be=Ne[se++];)if(oe=Be.getAttributeNode("id"),oe&&oe.value===Ce)return[Be]}return[]}}),y.find.TAG=function(Ce,W){return typeof W.getElementsByTagName<"u"?W.getElementsByTagName(Ce):W.querySelectorAll(Ce)},y.find.CLASS=function(Ce,W){if(typeof W.getElementsByClassName<"u"&&X)return W.getElementsByClassName(Ce)},ge=[],Ys(function(Ce){var W;re.appendChild(Ce).innerHTML="<a id='"+Oe+"' href='' disabled='disabled'></a><select id='"+Oe+"-\r\\' disabled='disabled'><option selected=''></option></select>",Ce.querySelectorAll("[selected]").length||ge.push("\\["+we+"*(?:value|"+fi+")"),Ce.querySelectorAll("[id~="+Oe+"-]").length||ge.push("~="),Ce.querySelectorAll("a#"+Oe+"+*").length||ge.push(".#.+[+~]"),Ce.querySelectorAll(":checked").length||ge.push(":checked"),W=j.createElement("input"),W.setAttribute("type","hidden"),Ce.appendChild(W).setAttribute("name","D"),re.appendChild(Ce).disabled=!0,Ce.querySelectorAll(":disabled").length!==2&&ge.push(":enabled",":disabled"),W=j.createElement("input"),W.setAttribute("name",""),Ce.appendChild(W),Ce.querySelectorAll("[name='']").length||ge.push("\\["+we+"*name"+we+"*="+we+`*(?:''|"")`)}),I.cssHas||ge.push(":has"),ge=ge.length&&new RegExp(ge.join("|")),An=function(Ce,W){if(Ce===W)return D=!0,0;var oe=!Ce.compareDocumentPosition-!W.compareDocumentPosition;return oe||(oe=(Ce.ownerDocument||Ce)==(W.ownerDocument||W)?Ce.compareDocumentPosition(W):1,oe&1||!I.sortDetached&&W.compareDocumentPosition(Ce)===oe?Ce===j||Ce.ownerDocument==Te&&en.contains(Te,Ce)?-1:W===j||W.ownerDocument==Te&&en.contains(Te,W)?1:E?f.call(E,Ce)-f.call(E,W):0:oe&4?-1:1)}),j}en.matches=function(Y,le){return en(Y,null,null,le)},en.matchesSelector=function(Y,le){if(Zi(Y),X&&!Un[le+" "]&&(!ge||!ge.test(le)))try{var Se=Ie.call(Y,le);if(Se||I.disconnectedMatch||Y.document&&Y.document.nodeType!==11)return Se}catch{Un(le,!0)}return en(le,j,null,[Y]).length>0},en.contains=function(Y,le){return(Y.ownerDocument||Y)!=j&&Zi(Y),p.contains(Y,le)},en.attr=function(Y,le){(Y.ownerDocument||Y)!=j&&Zi(Y);var Se=y.attrHandle[le.toLowerCase()],Ce=Se&&w.call(y.attrHandle,le.toLowerCase())?Se(Y,le,!X):void 0;return Ce!==void 0?Ce:Y.getAttribute(le)},en.error=function(Y){throw new Error("Syntax error, unrecognized expression: "+Y)},p.uniqueSort=function(Y){var le,Se=[],Ce=0,W=0;if(D=!I.sortStable,E=!I.sortStable&&s.call(Y,0),me.call(Y,An),D){for(;le=Y[W++];)le===Y[W]&&(Ce=Se.push(W));for(;Ce--;)ke.call(Y,Se[Ce],1)}return E=null,Y},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(s.apply(this)))},y=p.expr={cacheLength:50,createPseudo:qr,match:Pr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Y){return Y[1]=Y[1].replace(Ti,di),Y[3]=(Y[3]||Y[4]||Y[5]||"").replace(Ti,di),Y[2]==="~="&&(Y[3]=" "+Y[3]+" "),Y.slice(0,4)},CHILD:function(Y){return Y[1]=Y[1].toLowerCase(),Y[1].slice(0,3)==="nth"?(Y[3]||en.error(Y[0]),Y[4]=+(Y[4]?Y[5]+(Y[6]||1):2*(Y[3]==="even"||Y[3]==="odd")),Y[5]=+(Y[7]+Y[8]||Y[3]==="odd")):Y[3]&&en.error(Y[0]),Y},PSEUDO:function(Y){var le,Se=!Y[6]&&Y[2];return Pr.CHILD.test(Y[0])?null:(Y[3]?Y[2]=Y[4]||Y[5]||"":Se&&Hr.test(Se)&&(le=zo(Se,!0))&&(le=Se.indexOf(")",Se.length-le)-Se.length)&&(Y[0]=Y[0].slice(0,le),Y[2]=Se.slice(0,le)),Y.slice(0,3))}},filter:{TAG:function(Y){var le=Y.replace(Ti,di).toLowerCase();return Y==="*"?function(){return!0}:function(Se){return J(Se,le)}},CLASS:function(Y){var le=at[Y+" "];return le||(le=new RegExp("(^|"+we+")"+Y+"("+we+"|$)"))&&at(Y,function(Se){return le.test(typeof Se.className=="string"&&Se.className||typeof Se.getAttribute<"u"&&Se.getAttribute("class")||"")})},ATTR:function(Y,le,Se){return function(Ce){var W=en.attr(Ce,Y);return W==null?le==="!=":le?(W+="",le==="="?W===Se:le==="!="?W!==Se:le==="^="?Se&&W.indexOf(Se)===0:le==="*="?Se&&W.indexOf(Se)>-1:le==="$="?Se&&W.slice(-Se.length)===Se:le==="~="?(" "+W.replace(Gt," ")+" ").indexOf(Se)>-1:le==="|="?W===Se||W.slice(0,Se.length+1)===Se+"-":!1):!0}},CHILD:function(Y,le,Se,Ce,W){var oe=Y.slice(0,3)!=="nth",se=Y.slice(-4)!=="last",Ne=le==="of-type";return Ce===1&&W===0?function(Be){return!!Be.parentNode}:function(Be,lt,ct){var st,Ut,wt,Kt,jn,Yn=oe!==se?"nextSibling":"previousSibling",zn=Be.parentNode,br=Ne&&Be.nodeName.toLowerCase(),Ii=!ct&&!Ne,Ot=!1;if(zn){if(oe){for(;Yn;){for(wt=Be;wt=wt[Yn];)if(Ne?J(wt,br):wt.nodeType===1)return!1;jn=Yn=Y==="only"&&!jn&&"nextSibling"}return!0}if(jn=[se?zn.firstChild:zn.lastChild],se&&Ii){for(Ut=zn[Oe]||(zn[Oe]={}),st=Ut[Y]||[],Kt=st[0]===Ee&&st[1],Ot=Kt&&st[2],wt=Kt&&zn.childNodes[Kt];wt=++Kt&&wt&&wt[Yn]||(Ot=Kt=0)||jn.pop();)if(wt.nodeType===1&&++Ot&&wt===Be){Ut[Y]=[Ee,Kt,Ot];break}}else if(Ii&&(Ut=Be[Oe]||(Be[Oe]={}),st=Ut[Y]||[],Kt=st[0]===Ee&&st[1],Ot=Kt),Ot===!1)for(;(wt=++Kt&&wt&&wt[Yn]||(Ot=Kt=0)||jn.pop())&&!((Ne?J(wt,br):wt.nodeType===1)&&++Ot&&(Ii&&(Ut=wt[Oe]||(wt[Oe]={}),Ut[Y]=[Ee,Ot]),wt===Be)););return Ot-=W,Ot===Ce||Ot%Ce===0&&Ot/Ce>=0}}},PSEUDO:function(Y,le){var Se,Ce=y.pseudos[Y]||y.setFilters[Y.toLowerCase()]||en.error("unsupported pseudo: "+Y);return Ce[Oe]?Ce(le):Ce.length>1?(Se=[Y,Y,"",le],y.setFilters.hasOwnProperty(Y.toLowerCase())?qr(function(W,oe){for(var se,Ne=Ce(W,le),Be=Ne.length;Be--;)se=f.call(W,Ne[Be]),W[se]=!(oe[se]=Ne[Be])}):function(W){return Ce(W,0,Se)}):Ce}},pseudos:{not:qr(function(Y){var le=[],Se=[],Ce=rc(Y.replace(Q,"$1"));return Ce[Oe]?qr(function(W,oe,se,Ne){for(var Be,lt=Ce(W,null,Ne,[]),ct=W.length;ct--;)(Be=lt[ct])&&(W[ct]=!(oe[ct]=Be))}):function(W,oe,se){return le[0]=W,Ce(le,null,se,Se),le[0]=null,!Se.pop()}}),has:qr(function(Y){return function(le){return en(Y,le).length>0}}),contains:qr(function(Y){return Y=Y.replace(Ti,di),function(le){return(le.textContent||p.text(le)).indexOf(Y)>-1}}),lang:qr(function(Y){return gs.test(Y||"")||en.error("unsupported lang: "+Y),Y=Y.replace(Ti,di).toLowerCase(),function(le){var Se;do if(Se=X?le.lang:le.getAttribute("xml:lang")||le.getAttribute("lang"))return Se=Se.toLowerCase(),Se===Y||Se.indexOf(Y+"-")===0;while((le=le.parentNode)&&le.nodeType===1);return!1}}),target:function(Y){var le=t.location&&t.location.hash;return le&&le.slice(1)===Y.id},root:function(Y){return Y===re},focus:function(Y){return Y===Uo()&&j.hasFocus()&&!!(Y.type||Y.href||~Y.tabIndex)},enabled:$u(!1),disabled:$u(!0),checked:function(Y){return J(Y,"input")&&!!Y.checked||J(Y,"option")&&!!Y.selected},selected:function(Y){return Y.parentNode&&Y.parentNode.selectedIndex,Y.selected===!0},empty:function(Y){for(Y=Y.firstChild;Y;Y=Y.nextSibling)if(Y.nodeType<6)return!1;return!0},parent:function(Y){return!y.pseudos.empty(Y)},header:function(Y){return Yi.test(Y.nodeName)},input:function(Y){return Ci.test(Y.nodeName)},button:function(Y){return J(Y,"input")&&Y.type==="button"||J(Y,"button")},text:function(Y){var le;return J(Y,"input")&&Y.type==="text"&&((le=Y.getAttribute("type"))==null||le.toLowerCase()==="text")},first:Or(function(){return[0]}),last:Or(function(Y,le){return[le-1]}),eq:Or(function(Y,le,Se){return[Se<0?Se+le:Se]}),even:Or(function(Y,le){for(var Se=0;Se<le;Se+=2)Y.push(Se);return Y}),odd:Or(function(Y,le){for(var Se=1;Se<le;Se+=2)Y.push(Se);return Y}),lt:Or(function(Y,le,Se){var Ce;for(Se<0?Ce=Se+le:Se>le?Ce=le:Ce=Se;--Ce>=0;)Y.push(Ce);return Y}),gt:Or(function(Y,le,Se){for(var Ce=Se<0?Se+le:Se;++Ce<le;)Y.push(Ce);return Y})}},y.pseudos.nth=y.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[u]=zd(u);for(u in{submit:!0,reset:!0})y.pseudos[u]=Hd(u);function za(){}za.prototype=y.filters=y.pseudos,y.setFilters=new za;function zo(Y,le){var Se,Ce,W,oe,se,Ne,Be,lt=Mt[Y+" "];if(lt)return le?0:lt.slice(0);for(se=Y,Ne=[],Be=y.preFilter;se;){(!Se||(Ce=sn.exec(se)))&&(Ce&&(se=se.slice(Ce[0].length)||se),Ne.push(W=[])),Se=!1,(Ce=Lo.exec(se))&&(Se=Ce.shift(),W.push({value:Se,type:Ce[0].replace(Q," ")}),se=se.slice(Se.length));for(oe in y.filter)(Ce=Pr[oe].exec(se))&&(!Be[oe]||(Ce=Be[oe](Ce)))&&(Se=Ce.shift(),W.push({value:Se,type:oe,matches:Ce}),se=se.slice(Se.length));if(!Se)break}return le?se.length:se?en.error(Y):Mt(Y,Ne).slice(0)}function Kr(Y){for(var le=0,Se=Y.length,Ce="";le<Se;le++)Ce+=Y[le].value;return Ce}function ys(Y,le,Se){var Ce=le.dir,W=le.next,oe=W||Ce,se=Se&&oe==="parentNode",Ne=Ge++;return le.first?function(Be,lt,ct){for(;Be=Be[Ce];)if(Be.nodeType===1||se)return Y(Be,lt,ct);return!1}:function(Be,lt,ct){var st,Ut,wt=[Ee,Ne];if(ct){for(;Be=Be[Ce];)if((Be.nodeType===1||se)&&Y(Be,lt,ct))return!0}else for(;Be=Be[Ce];)if(Be.nodeType===1||se)if(Ut=Be[Oe]||(Be[Oe]={}),W&&J(Be,W))Be=Be[Ce]||Be;else{if((st=Ut[oe])&&st[0]===Ee&&st[1]===Ne)return wt[2]=st[2];if(Ut[oe]=wt,wt[2]=Y(Be,lt,ct))return!0}return!1}}function nc(Y){return Y.length>1?function(le,Se,Ce){for(var W=Y.length;W--;)if(!Y[W](le,Se,Ce))return!1;return!0}:Y[0]}function qd(Y,le,Se){for(var Ce=0,W=le.length;Ce<W;Ce++)en(Y,le[Ce],Se);return Se}function Ha(Y,le,Se,Ce,W){for(var oe,se=[],Ne=0,Be=Y.length,lt=le!=null;Ne<Be;Ne++)(oe=Y[Ne])&&(!Se||Se(oe,Ce,W))&&(se.push(oe),lt&&le.push(Ne));return se}function Ji(Y,le,Se,Ce,W,oe){return Ce&&!Ce[Oe]&&(Ce=Ji(Ce)),W&&!W[Oe]&&(W=Ji(W,oe)),qr(function(se,Ne,Be,lt){var ct,st,Ut,wt,Kt=[],jn=[],Yn=Ne.length,zn=se||qd(le||"*",Be.nodeType?[Be]:Be,[]),br=Y&&(se||!le)?Ha(zn,Kt,Y,Be,lt):zn;if(Se?(wt=W||(se?Y:Yn||Ce)?[]:Ne,Se(br,wt,Be,lt)):wt=br,Ce)for(ct=Ha(wt,jn),Ce(ct,[],Be,lt),st=ct.length;st--;)(Ut=ct[st])&&(wt[jn[st]]=!(br[jn[st]]=Ut));if(se){if(W||Y){if(W){for(ct=[],st=wt.length;st--;)(Ut=wt[st])&&ct.push(br[st]=Ut);W(null,wt=[],ct,lt)}for(st=wt.length;st--;)(Ut=wt[st])&&(ct=W?f.call(se,Ut):Kt[st])>-1&&(se[ct]=!(Ne[ct]=Ut))}}else wt=Ha(wt===Ne?wt.splice(Yn,wt.length):wt),W?W(null,Ne,wt,lt):B.apply(Ne,wt)})}function vr(Y){for(var le,Se,Ce,W=Y.length,oe=y.relative[Y[0].type],se=oe||y.relative[" "],Ne=oe?1:0,Be=ys(function(st){return st===le},se,!0),lt=ys(function(st){return f.call(le,st)>-1},se,!0),ct=[function(st,Ut,wt){var Kt=!oe&&(wt||Ut!=x)||((le=Ut).nodeType?Be(st,Ut,wt):lt(st,Ut,wt));return le=null,Kt}];Ne<W;Ne++)if(Se=y.relative[Y[Ne].type])ct=[ys(nc(ct),Se)];else{if(Se=y.filter[Y[Ne].type].apply(null,Y[Ne].matches),Se[Oe]){for(Ce=++Ne;Ce<W&&!y.relative[Y[Ce].type];Ce++);return Ji(Ne>1&&nc(ct),Ne>1&&Kr(Y.slice(0,Ne-1).concat({value:Y[Ne-2].type===" "?"*":""})).replace(Q,"$1"),Se,Ne<Ce&&vr(Y.slice(Ne,Ce)),Ce<W&&vr(Y=Y.slice(Ce)),Ce<W&&Kr(Y))}ct.push(Se)}return nc(ct)}function Pu(Y,le){var Se=le.length>0,Ce=Y.length>0,W=function(oe,se,Ne,Be,lt){var ct,st,Ut,wt=0,Kt="0",jn=oe&&[],Yn=[],zn=x,br=oe||Ce&&y.find.TAG("*",lt),Ii=Ee+=zn==null?1:Math.random()||.1,Ot=br.length;for(lt&&(x=se==j||se||lt);Kt!==Ot&&(ct=br[Kt])!=null;Kt++){if(Ce&&ct){for(st=0,!se&&ct.ownerDocument!=j&&(Zi(ct),Ne=!X);Ut=Y[st++];)if(Ut(ct,se||j,Ne)){B.call(Be,ct);break}lt&&(Ee=Ii)}Se&&((ct=!Ut&&ct)&&wt--,oe&&jn.push(ct))}if(wt+=Kt,Se&&Kt!==wt){for(st=0;Ut=le[st++];)Ut(jn,Yn,se,Ne);if(oe){if(wt>0)for(;Kt--;)jn[Kt]||Yn[Kt]||(Yn[Kt]=ce.call(Be));Yn=Ha(Yn)}B.apply(Be,Yn),lt&&!oe&&Yn.length>0&&wt+le.length>1&&p.uniqueSort(Be)}return lt&&(Ee=Ii,x=zn),jn};return Se?qr(W):W}function rc(Y,le){var Se,Ce=[],W=[],oe=Rt[Y+" "];if(!oe){for(le||(le=zo(Y)),Se=le.length;Se--;)oe=vr(le[Se]),oe[Oe]?Ce.push(oe):W.push(oe);oe=Rt(Y,Pu(W,Ce)),oe.selector=Y}return oe}function Ou(Y,le,Se,Ce){var W,oe,se,Ne,Be,lt=typeof Y=="function"&&Y,ct=!Ce&&zo(Y=lt.selector||Y);if(Se=Se||[],ct.length===1){if(oe=ct[0]=ct[0].slice(0),oe.length>2&&(se=oe[0]).type==="ID"&&le.nodeType===9&&X&&y.relative[oe[1].type]){if(le=(y.find.ID(se.matches[0].replace(Ti,di),le)||[])[0],le)lt&&(le=le.parentNode);else return Se;Y=Y.slice(oe.shift().value.length)}for(W=Pr.needsContext.test(Y)?0:oe.length;W--&&(se=oe[W],!y.relative[Ne=se.type]);)if((Be=y.find[Ne])&&(Ce=Be(se.matches[0].replace(Ti,di),Fo.test(oe[0].type)&&tc(le.parentNode)||le))){if(oe.splice(W,1),Y=Ce.length&&Kr(oe),!Y)return B.apply(Se,Ce),Se;break}}return(lt||rc(Y,ct))(Ce,le,!X,Se,!le||Fo.test(Y)&&tc(le.parentNode)||le),Se}I.sortStable=Oe.split("").sort(An).join("")===Oe,Zi(),I.sortDetached=Ys(function(Y){return Y.compareDocumentPosition(j.createElement("fieldset"))&1}),p.find=en,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,en.compile=rc,en.select=Ou,en.setDocument=Zi,en.escape=p.escapeSelector,en.getText=p.text,en.isXML=p.isXMLDoc,en.selectors=p.expr,en.support=p.support,en.uniqueSort=p.uniqueSort})();var ze=function(u,y,x){for(var E=[],D=x!==void 0;(u=u[y])&&u.nodeType!==9;)if(u.nodeType===1){if(D&&p(u).is(x))break;E.push(u)}return E},Qe=function(u,y){for(var x=[];u;u=u.nextSibling)u.nodeType===1&&u!==y&&x.push(u);return x},nt=p.expr.match.needsContext,Fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function He(u,y,x){return C(y)?p.grep(u,function(E,D){return!!y.call(E,D,E)!==x}):y.nodeType?p.grep(u,function(E){return E===y!==x}):typeof y!="string"?p.grep(u,function(E){return f.call(y,E)>-1!==x}):p.filter(y,u,x)}p.filter=function(u,y,x){var E=y[0];return x&&(u=":not("+u+")"),y.length===1&&E.nodeType===1?p.find.matchesSelector(E,u)?[E]:[]:p.find.matches(u,p.grep(y,function(D){return D.nodeType===1}))},p.fn.extend({find:function(u){var y,x,E=this.length,D=this;if(typeof u!="string")return this.pushStack(p(u).filter(function(){for(y=0;y<E;y++)if(p.contains(D[y],this))return!0}));for(x=this.pushStack([]),y=0;y<E;y++)p.find(u,D[y],x);return E>1?p.uniqueSort(x):x},filter:function(u){return this.pushStack(He(this,u||[],!1))},not:function(u){return this.pushStack(He(this,u||[],!0))},is:function(u){return!!He(this,typeof u=="string"&&nt.test(u)?p(u):u||[],!1).length}});var $e,Me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,fe=p.fn.init=function(u,y,x){var E,D;if(!u)return this;if(x=x||$e,typeof u=="string")if(u[0]==="<"&&u[u.length-1]===">"&&u.length>=3?E=[null,u,null]:E=Me.exec(u),E&&(E[1]||!y))if(E[1]){if(y=y instanceof p?y[0]:y,p.merge(this,p.parseHTML(E[1],y&&y.nodeType?y.ownerDocument||y:$,!0)),Fe.test(E[1])&&p.isPlainObject(y))for(E in y)C(this[E])?this[E](y[E]):this.attr(E,y[E]);return this}else return D=$.getElementById(E[2]),D&&(this[0]=D,this.length=1),this;else return!y||y.jquery?(y||x).find(u):this.constructor(y).find(u);else{if(u.nodeType)return this[0]=u,this.length=1,this;if(C(u))return x.ready!==void 0?x.ready(u):u(p)}return p.makeArray(u,this)};fe.prototype=p.fn,$e=p($);var pt=/^(?:parents|prev(?:Until|All))/,h={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(u){var y=p(u,this),x=y.length;return this.filter(function(){for(var E=0;E<x;E++)if(p.contains(this,y[E]))return!0})},closest:function(u,y){var x,E=0,D=this.length,B=[],j=typeof u!="string"&&p(u);if(!nt.test(u)){for(;E<D;E++)for(x=this[E];x&&x!==y;x=x.parentNode)if(x.nodeType<11&&(j?j.index(x)>-1:x.nodeType===1&&p.find.matchesSelector(x,u))){B.push(x);break}}return this.pushStack(B.length>1?p.uniqueSort(B):B)},index:function(u){return u?typeof u=="string"?f.call(p(u),this[0]):f.call(this,u.jquery?u[0]:u):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(u,y){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(u,y))))},addBack:function(u){return this.add(u==null?this.prevObject:this.prevObject.filter(u))}});function v(u,y){for(;(u=u[y])&&u.nodeType!==1;);return u}p.each({parent:function(u){var y=u.parentNode;return y&&y.nodeType!==11?y:null},parents:function(u){return ze(u,"parentNode")},parentsUntil:function(u,y,x){return ze(u,"parentNode",x)},next:function(u){return v(u,"nextSibling")},prev:function(u){return v(u,"previousSibling")},nextAll:function(u){return ze(u,"nextSibling")},prevAll:function(u){return ze(u,"previousSibling")},nextUntil:function(u,y,x){return ze(u,"nextSibling",x)},prevUntil:function(u,y,x){return ze(u,"previousSibling",x)},siblings:function(u){return Qe((u.parentNode||{}).firstChild,u)},children:function(u){return Qe(u.firstChild)},contents:function(u){return u.contentDocument!=null&&i(u.contentDocument)?u.contentDocument:(J(u,"template")&&(u=u.content||u),p.merge([],u.childNodes))}},function(u,y){p.fn[u]=function(x,E){var D=p.map(this,y,x);return u.slice(-5)!=="Until"&&(E=x),E&&typeof E=="string"&&(D=p.filter(E,D)),this.length>1&&(h[u]||p.uniqueSort(D),pt.test(u)&&D.reverse()),this.pushStack(D)}});var k=/[^\x20\t\r\n\f]+/g;function T(u){var y={};return p.each(u.match(k)||[],function(x,E){y[E]=!0}),y}p.Callbacks=function(u){u=typeof u=="string"?T(u):p.extend({},u);var y,x,E,D,B=[],j=[],re=-1,X=function(){for(D=D||u.once,E=y=!0;j.length;re=-1)for(x=j.shift();++re<B.length;)B[re].apply(x[0],x[1])===!1&&u.stopOnFalse&&(re=B.length,x=!1);u.memory||(x=!1),y=!1,D&&(x?B=[]:B="")},ge={add:function(){return B&&(x&&!y&&(re=B.length-1,j.push(x)),function Ie(Oe){p.each(Oe,function(Ee,Ge){C(Ge)?(!u.unique||!ge.has(Ge))&&B.push(Ge):Ge&&Ge.length&&N(Ge)!=="string"&&Ie(Ge)})}(arguments),x&&!y&&X()),this},remove:function(){return p.each(arguments,function(Ie,Oe){for(var Ee;(Ee=p.inArray(Oe,B,Ee))>-1;)B.splice(Ee,1),Ee<=re&&re--}),this},has:function(Ie){return Ie?p.inArray(Ie,B)>-1:B.length>0},empty:function(){return B&&(B=[]),this},disable:function(){return D=j=[],B=x="",this},disabled:function(){return!B},lock:function(){return D=j=[],!x&&!y&&(B=x=""),this},locked:function(){return!!D},fireWith:function(Ie,Oe){return D||(Oe=Oe||[],Oe=[Ie,Oe.slice?Oe.slice():Oe],j.push(Oe),y||X()),this},fire:function(){return ge.fireWith(this,arguments),this},fired:function(){return!!E}};return ge};function O(u){return u}function z(u){throw u}function te(u,y,x,E){var D;try{u&&C(D=u.promise)?D.call(u).done(y).fail(x):u&&C(D=u.then)?D.call(u,y,x):y.apply(void 0,[u].slice(E))}catch(B){x.apply(void 0,[B])}}p.extend({Deferred:function(u){var y=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],x="pending",E={state:function(){return x},always:function(){return D.done(arguments).fail(arguments),this},catch:function(B){return E.then(null,B)},pipe:function(){var B=arguments;return p.Deferred(function(j){p.each(y,function(re,X){var ge=C(B[X[4]])&&B[X[4]];D[X[1]](function(){var Ie=ge&&ge.apply(this,arguments);Ie&&C(Ie.promise)?Ie.promise().progress(j.notify).done(j.resolve).fail(j.reject):j[X[0]+"With"](this,ge?[Ie]:arguments)})}),B=null}).promise()},then:function(B,j,re){var X=0;function ge(Ie,Oe,Ee,Ge){return function(){var at=this,Mt=arguments,Rt=function(){var An,fi;if(!(Ie<X)){if(An=Ee.apply(at,Mt),An===Oe.promise())throw new TypeError("Thenable self-resolution");fi=An&&(typeof An=="object"||typeof An=="function")&&An.then,C(fi)?Ge?fi.call(An,ge(X,Oe,O,Ge),ge(X,Oe,z,Ge)):(X++,fi.call(An,ge(X,Oe,O,Ge),ge(X,Oe,z,Ge),ge(X,Oe,O,Oe.notifyWith))):(Ee!==O&&(at=void 0,Mt=[An]),(Ge||Oe.resolveWith)(at,Mt))}},Un=Ge?Rt:function(){try{Rt()}catch(An){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(An,Un.error),Ie+1>=X&&(Ee!==z&&(at=void 0,Mt=[An]),Oe.rejectWith(at,Mt))}};Ie?Un():(p.Deferred.getErrorHook?Un.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(Un.error=p.Deferred.getStackHook()),t.setTimeout(Un))}}return p.Deferred(function(Ie){y[0][3].add(ge(0,Ie,C(re)?re:O,Ie.notifyWith)),y[1][3].add(ge(0,Ie,C(B)?B:O)),y[2][3].add(ge(0,Ie,C(j)?j:z))}).promise()},promise:function(B){return B!=null?p.extend(B,E):E}},D={};return p.each(y,function(B,j){var re=j[2],X=j[5];E[j[1]]=re.add,X&&re.add(function(){x=X},y[3-B][2].disable,y[3-B][3].disable,y[0][2].lock,y[0][3].lock),re.add(j[3].fire),D[j[0]]=function(){return D[j[0]+"With"](this===D?void 0:this,arguments),this},D[j[0]+"With"]=re.fireWith}),E.promise(D),u&&u.call(D,D),D},when:function(u){var y=arguments.length,x=y,E=Array(x),D=s.call(arguments),B=p.Deferred(),j=function(re){return function(X){E[re]=this,D[re]=arguments.length>1?s.call(arguments):X,--y||B.resolveWith(E,D)}};if(y<=1&&(te(u,B.done(j(x)).resolve,B.reject,!y),B.state()==="pending"||C(D[x]&&D[x].then)))return B.then();for(;x--;)te(D[x],j(x),B.reject);return B.promise()}});var ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(u,y){t.console&&t.console.warn&&u&&ie.test(u.name)&&t.console.warn("jQuery.Deferred exception: "+u.message,u.stack,y)},p.readyException=function(u){t.setTimeout(function(){throw u})};var pe=p.Deferred();p.fn.ready=function(u){return pe.then(u).catch(function(y){p.readyException(y)}),this},p.extend({isReady:!1,readyWait:1,ready:function(u){(u===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(u!==!0&&--p.readyWait>0)&&pe.resolveWith($,[p]))}}),p.ready.then=pe.then;function _e(){$.removeEventListener("DOMContentLoaded",_e),t.removeEventListener("load",_e),p.ready()}$.readyState==="complete"||$.readyState!=="loading"&&!$.documentElement.doScroll?t.setTimeout(p.ready):($.addEventListener("DOMContentLoaded",_e),t.addEventListener("load",_e));var je=function(u,y,x,E,D,B,j){var re=0,X=u.length,ge=x==null;if(N(x)==="object"){D=!0;for(re in x)je(u,y,re,x[re],!0,B,j)}else if(E!==void 0&&(D=!0,C(E)||(j=!0),ge&&(j?(y.call(u,E),y=null):(ge=y,y=function(Ie,Oe,Ee){return ge.call(p(Ie),Ee)})),y))for(;re<X;re++)y(u[re],x,j?E:E.call(u[re],re,y(u[re],x)));return D?u:ge?y.call(u):X?y(u[0],x):B},tt=/^-ms-/,Je=/-([a-z])/g;function et(u,y){return y.toUpperCase()}function yt(u){return u.replace(tt,"ms-").replace(Je,et)}var St=function(u){return u.nodeType===1||u.nodeType===9||!+u.nodeType};function ot(){this.expando=p.expando+ot.uid++}ot.uid=1,ot.prototype={cache:function(u){var y=u[this.expando];return y||(y={},St(u)&&(u.nodeType?u[this.expando]=y:Object.defineProperty(u,this.expando,{value:y,configurable:!0}))),y},set:function(u,y,x){var E,D=this.cache(u);if(typeof y=="string")D[yt(y)]=x;else for(E in y)D[yt(E)]=y[E];return D},get:function(u,y){return y===void 0?this.cache(u):u[this.expando]&&u[this.expando][yt(y)]},access:function(u,y,x){return y===void 0||y&&typeof y=="string"&&x===void 0?this.get(u,y):(this.set(u,y,x),x!==void 0?x:y)},remove:function(u,y){var x,E=u[this.expando];if(E!==void 0){if(y!==void 0)for(Array.isArray(y)?y=y.map(yt):(y=yt(y),y=y in E?[y]:y.match(k)||[]),x=y.length;x--;)delete E[y[x]];(y===void 0||p.isEmptyObject(E))&&(u.nodeType?u[this.expando]=void 0:delete u[this.expando])}},hasData:function(u){var y=u[this.expando];return y!==void 0&&!p.isEmptyObject(y)}};var Ke=new ot,gt=new ot,gn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mn=/[A-Z]/g;function gr(u){return u==="true"?!0:u==="false"?!1:u==="null"?null:u===+u+""?+u:gn.test(u)?JSON.parse(u):u}function Pn(u,y,x){var E;if(x===void 0&&u.nodeType===1)if(E="data-"+y.replace(mn,"-$&").toLowerCase(),x=u.getAttribute(E),typeof x=="string"){try{x=gr(x)}catch{}gt.set(u,y,x)}else x=void 0;return x}p.extend({hasData:function(u){return gt.hasData(u)||Ke.hasData(u)},data:function(u,y,x){return gt.access(u,y,x)},removeData:function(u,y){gt.remove(u,y)},_data:function(u,y,x){return Ke.access(u,y,x)},_removeData:function(u,y){Ke.remove(u,y)}}),p.fn.extend({data:function(u,y){var x,E,D,B=this[0],j=B&&B.attributes;if(u===void 0){if(this.length&&(D=gt.get(B),B.nodeType===1&&!Ke.get(B,"hasDataAttrs"))){for(x=j.length;x--;)j[x]&&(E=j[x].name,E.indexOf("data-")===0&&(E=yt(E.slice(5)),Pn(B,E,D[E])));Ke.set(B,"hasDataAttrs",!0)}return D}return typeof u=="object"?this.each(function(){gt.set(this,u)}):je(this,function(re){var X;if(B&&re===void 0)return X=gt.get(B,u),X!==void 0||(X=Pn(B,u),X!==void 0)?X:void 0;this.each(function(){gt.set(this,u,re)})},null,y,arguments.length>1,null,!0)},removeData:function(u){return this.each(function(){gt.remove(this,u)})}}),p.extend({queue:function(u,y,x){var E;if(u)return y=(y||"fx")+"queue",E=Ke.get(u,y),x&&(!E||Array.isArray(x)?E=Ke.access(u,y,p.makeArray(x)):E.push(x)),E||[]},dequeue:function(u,y){y=y||"fx";var x=p.queue(u,y),E=x.length,D=x.shift(),B=p._queueHooks(u,y),j=function(){p.dequeue(u,y)};D==="inprogress"&&(D=x.shift(),E--),D&&(y==="fx"&&x.unshift("inprogress"),delete B.stop,D.call(u,j,B)),!E&&B&&B.empty.fire()},_queueHooks:function(u,y){var x=y+"queueHooks";return Ke.get(u,x)||Ke.access(u,x,{empty:p.Callbacks("once memory").add(function(){Ke.remove(u,[y+"queue",x])})})}}),p.fn.extend({queue:function(u,y){var x=2;return typeof u!="string"&&(y=u,u="fx",x--),arguments.length<x?p.queue(this[0],u):y===void 0?this:this.each(function(){var E=p.queue(this,u,y);p._queueHooks(this,u),u==="fx"&&E[0]!=="inprogress"&&p.dequeue(this,u)})},dequeue:function(u){return this.each(function(){p.dequeue(this,u)})},clearQueue:function(u){return this.queue(u||"fx",[])},promise:function(u,y){var x,E=1,D=p.Deferred(),B=this,j=this.length,re=function(){--E||D.resolveWith(B,[B])};for(typeof u!="string"&&(y=u,u=void 0),u=u||"fx";j--;)x=Ke.get(B[j],u+"queueHooks"),x&&x.empty&&(E++,x.empty.add(re));return re(),D.promise(y)}});var Ir=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,si=new RegExp("^(?:([+-])=|)("+Ir+")([a-z%]*)$","i"),rr=["Top","Right","Bottom","Left"],yr=$.documentElement,oi=function(u){return p.contains(u.ownerDocument,u)},$o={composed:!0};yr.getRootNode&&(oi=function(u){return p.contains(u.ownerDocument,u)||u.getRootNode($o)===u.ownerDocument});var ai=function(u,y){return u=y||u,u.style.display==="none"||u.style.display===""&&oi(u)&&p.css(u,"display")==="none"};function Po(u,y,x,E){var D,B,j=20,re=E?function(){return E.cur()}:function(){return p.css(u,y,"")},X=re(),ge=x&&x[3]||(p.cssNumber[y]?"":"px"),Ie=u.nodeType&&(p.cssNumber[y]||ge!=="px"&&+X)&&si.exec(p.css(u,y));if(Ie&&Ie[3]!==ge){for(X=X/2,ge=ge||Ie[3],Ie=+X||1;j--;)p.style(u,y,Ie+ge),(1-B)*(1-(B=re()/X||.5))<=0&&(j=0),Ie=Ie/B;Ie=Ie*2,p.style(u,y,Ie+ge),x=x||[]}return x&&(Ie=+Ie||+X||0,D=x[1]?Ie+(x[1]+1)*x[2]:+x[2],E&&(E.unit=ge,E.start=Ie,E.end=D)),D}var Ea={};function li(u){var y,x=u.ownerDocument,E=u.nodeName,D=Ea[E];return D||(y=x.body.appendChild(x.createElement(E)),D=p.css(y,"display"),y.parentNode.removeChild(y),D==="none"&&(D="block"),Ea[E]=D,D)}function Si(u,y){for(var x,E,D=[],B=0,j=u.length;B<j;B++)E=u[B],E.style&&(x=E.style.display,y?(x==="none"&&(D[B]=Ke.get(E,"display")||null,D[B]||(E.style.display="")),E.style.display===""&&ai(E)&&(D[B]=li(E))):x!=="none"&&(D[B]="none",Ke.set(E,"display",x)));for(B=0;B<j;B++)D[B]!=null&&(u[B].style.display=D[B]);return u}p.fn.extend({show:function(){return Si(this,!0)},hide:function(){return Si(this)},toggle:function(u){return typeof u=="boolean"?u?this.show():this.hide():this.each(function(){ai(this)?p(this).show():p(this).hide()})}});var Hi=/^(?:checkbox|radio)$/i,Oo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Aa=/^$|^module$|\/(?:java|ecma)script/i;(function(){var u=$.createDocumentFragment(),y=u.appendChild($.createElement("div")),x=$.createElement("input");x.setAttribute("type","radio"),x.setAttribute("checked","checked"),x.setAttribute("name","t"),y.appendChild(x),I.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.innerHTML="<textarea>x</textarea>",I.noCloneChecked=!!y.cloneNode(!0).lastChild.defaultValue,y.innerHTML="<option></option>",I.option=!!y.lastChild})();var ir={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ir.tbody=ir.tfoot=ir.colgroup=ir.caption=ir.thead,ir.th=ir.td,I.option||(ir.optgroup=ir.option=[1,"<select multiple='multiple'>","</select>"]);function Gn(u,y){var x;return typeof u.getElementsByTagName<"u"?x=u.getElementsByTagName(y||"*"):typeof u.querySelectorAll<"u"?x=u.querySelectorAll(y||"*"):x=[],y===void 0||y&&J(u,y)?p.merge([u],x):x}function qs(u,y){for(var x=0,E=u.length;x<E;x++)Ke.set(u[x],"globalEval",!y||Ke.get(y[x],"globalEval"))}var jl=/<|&#?\w+;/;function Ca(u,y,x,E,D){for(var B,j,re,X,ge,Ie,Oe=y.createDocumentFragment(),Ee=[],Ge=0,at=u.length;Ge<at;Ge++)if(B=u[Ge],B||B===0)if(N(B)==="object")p.merge(Ee,B.nodeType?[B]:B);else if(!jl.test(B))Ee.push(y.createTextNode(B));else{for(j=j||Oe.appendChild(y.createElement("div")),re=(Oo.exec(B)||["",""])[1].toLowerCase(),X=ir[re]||ir._default,j.innerHTML=X[1]+p.htmlPrefilter(B)+X[2],Ie=X[0];Ie--;)j=j.lastChild;p.merge(Ee,j.childNodes),j=Oe.firstChild,j.textContent=""}for(Oe.textContent="",Ge=0;B=Ee[Ge++];){if(E&&p.inArray(B,E)>-1){D&&D.push(B);continue}if(ge=oi(B),j=Gn(Oe.appendChild(B),"script"),ge&&qs(j),x)for(Ie=0;B=j[Ie++];)Aa.test(B.type||"")&&x.push(B)}return Oe}var Ta=/^([^.]*)(?:\.(.+)|)/;function ci(){return!0}function qi(){return!1}function fs(u,y,x,E,D,B){var j,re;if(typeof y=="object"){typeof x!="string"&&(E=E||x,x=void 0);for(re in y)fs(u,re,x,E,y[re],B);return u}if(E==null&&D==null?(D=x,E=x=void 0):D==null&&(typeof x=="string"?(D=E,E=void 0):(D=E,E=x,x=void 0)),D===!1)D=qi;else if(!D)return u;return B===1&&(j=D,D=function(X){return p().off(X),j.apply(this,arguments)},D.guid=j.guid||(j.guid=p.guid++)),u.each(function(){p.event.add(this,y,D,E,x)})}p.event={global:{},add:function(u,y,x,E,D){var B,j,re,X,ge,Ie,Oe,Ee,Ge,at,Mt,Rt=Ke.get(u);if(St(u))for(x.handler&&(B=x,x=B.handler,D=B.selector),D&&p.find.matchesSelector(yr,D),x.guid||(x.guid=p.guid++),(X=Rt.events)||(X=Rt.events=Object.create(null)),(j=Rt.handle)||(j=Rt.handle=function(Un){return typeof p<"u"&&p.event.triggered!==Un.type?p.event.dispatch.apply(u,arguments):void 0}),y=(y||"").match(k)||[""],ge=y.length;ge--;)re=Ta.exec(y[ge])||[],Ge=Mt=re[1],at=(re[2]||"").split(".").sort(),Ge&&(Oe=p.event.special[Ge]||{},Ge=(D?Oe.delegateType:Oe.bindType)||Ge,Oe=p.event.special[Ge]||{},Ie=p.extend({type:Ge,origType:Mt,data:E,handler:x,guid:x.guid,selector:D,needsContext:D&&p.expr.match.needsContext.test(D),namespace:at.join(".")},B),(Ee=X[Ge])||(Ee=X[Ge]=[],Ee.delegateCount=0,(!Oe.setup||Oe.setup.call(u,E,at,j)===!1)&&u.addEventListener&&u.addEventListener(Ge,j)),Oe.add&&(Oe.add.call(u,Ie),Ie.handler.guid||(Ie.handler.guid=x.guid)),D?Ee.splice(Ee.delegateCount++,0,Ie):Ee.push(Ie),p.event.global[Ge]=!0)},remove:function(u,y,x,E,D){var B,j,re,X,ge,Ie,Oe,Ee,Ge,at,Mt,Rt=Ke.hasData(u)&&Ke.get(u);if(!(!Rt||!(X=Rt.events))){for(y=(y||"").match(k)||[""],ge=y.length;ge--;){if(re=Ta.exec(y[ge])||[],Ge=Mt=re[1],at=(re[2]||"").split(".").sort(),!Ge){for(Ge in X)p.event.remove(u,Ge+y[ge],x,E,!0);continue}for(Oe=p.event.special[Ge]||{},Ge=(E?Oe.delegateType:Oe.bindType)||Ge,Ee=X[Ge]||[],re=re[2]&&new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"),j=B=Ee.length;B--;)Ie=Ee[B],(D||Mt===Ie.origType)&&(!x||x.guid===Ie.guid)&&(!re||re.test(Ie.namespace))&&(!E||E===Ie.selector||E==="**"&&Ie.selector)&&(Ee.splice(B,1),Ie.selector&&Ee.delegateCount--,Oe.remove&&Oe.remove.call(u,Ie));j&&!Ee.length&&((!Oe.teardown||Oe.teardown.call(u,at,Rt.handle)===!1)&&p.removeEvent(u,Ge,Rt.handle),delete X[Ge])}p.isEmptyObject(X)&&Ke.remove(u,"handle events")}},dispatch:function(u){var y,x,E,D,B,j,re=new Array(arguments.length),X=p.event.fix(u),ge=(Ke.get(this,"events")||Object.create(null))[X.type]||[],Ie=p.event.special[X.type]||{};for(re[0]=X,y=1;y<arguments.length;y++)re[y]=arguments[y];if(X.delegateTarget=this,!(Ie.preDispatch&&Ie.preDispatch.call(this,X)===!1)){for(j=p.event.handlers.call(this,X,ge),y=0;(D=j[y++])&&!X.isPropagationStopped();)for(X.currentTarget=D.elem,x=0;(B=D.handlers[x++])&&!X.isImmediatePropagationStopped();)(!X.rnamespace||B.namespace===!1||X.rnamespace.test(B.namespace))&&(X.handleObj=B,X.data=B.data,E=((p.event.special[B.origType]||{}).handle||B.handler).apply(D.elem,re),E!==void 0&&(X.result=E)===!1&&(X.preventDefault(),X.stopPropagation()));return Ie.postDispatch&&Ie.postDispatch.call(this,X),X.result}},handlers:function(u,y){var x,E,D,B,j,re=[],X=y.delegateCount,ge=u.target;if(X&&ge.nodeType&&!(u.type==="click"&&u.button>=1)){for(;ge!==this;ge=ge.parentNode||this)if(ge.nodeType===1&&!(u.type==="click"&&ge.disabled===!0)){for(B=[],j={},x=0;x<X;x++)E=y[x],D=E.selector+" ",j[D]===void 0&&(j[D]=E.needsContext?p(D,this).index(ge)>-1:p.find(D,this,null,[ge]).length),j[D]&&B.push(E);B.length&&re.push({elem:ge,handlers:B})}}return ge=this,X<y.length&&re.push({elem:ge,handlers:y.slice(X)}),re},addProp:function(u,y){Object.defineProperty(p.Event.prototype,u,{enumerable:!0,configurable:!0,get:C(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[u]},set:function(x){Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:x})}})},fix:function(u){return u[p.expando]?u:new p.Event(u)},special:{load:{noBubble:!0},click:{setup:function(u){var y=this||u;return Hi.test(y.type)&&y.click&&J(y,"input")&&hs(y,"click",!0),!1},trigger:function(u){var y=this||u;return Hi.test(y.type)&&y.click&&J(y,"input")&&hs(y,"click"),!0},_default:function(u){var y=u.target;return Hi.test(y.type)&&y.click&&J(y,"input")&&Ke.get(y,"click")||J(y,"a")}},beforeunload:{postDispatch:function(u){u.result!==void 0&&u.originalEvent&&(u.originalEvent.returnValue=u.result)}}}};function hs(u,y,x){if(!x){Ke.get(u,y)===void 0&&p.event.add(u,y,ci);return}Ke.set(u,y,!1),p.event.add(u,y,{namespace:!1,handler:function(E){var D,B=Ke.get(this,y);if(E.isTrigger&1&&this[y]){if(B)(p.event.special[y]||{}).delegateType&&E.stopPropagation();else if(B=s.call(arguments),Ke.set(this,y,B),this[y](),D=Ke.get(this,y),Ke.set(this,y,!1),B!==D)return E.stopImmediatePropagation(),E.preventDefault(),D}else B&&(Ke.set(this,y,p.event.trigger(B[0],B.slice(1),this)),E.stopPropagation(),E.isImmediatePropagationStopped=ci)}})}p.removeEvent=function(u,y,x){u.removeEventListener&&u.removeEventListener(y,x)},p.Event=function(u,y){if(!(this instanceof p.Event))return new p.Event(u,y);u&&u.type?(this.originalEvent=u,this.type=u.type,this.isDefaultPrevented=u.defaultPrevented||u.defaultPrevented===void 0&&u.returnValue===!1?ci:qi,this.target=u.target&&u.target.nodeType===3?u.target.parentNode:u.target,this.currentTarget=u.currentTarget,this.relatedTarget=u.relatedTarget):this.type=u,y&&p.extend(this,y),this.timeStamp=u&&u.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:qi,isPropagationStopped:qi,isImmediatePropagationStopped:qi,isSimulated:!1,preventDefault:function(){var u=this.originalEvent;this.isDefaultPrevented=ci,u&&!this.isSimulated&&u.preventDefault()},stopPropagation:function(){var u=this.originalEvent;this.isPropagationStopped=ci,u&&!this.isSimulated&&u.stopPropagation()},stopImmediatePropagation:function(){var u=this.originalEvent;this.isImmediatePropagationStopped=ci,u&&!this.isSimulated&&u.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(u,y){function x(E){if($.documentMode){var D=Ke.get(this,"handle"),B=p.event.fix(E);B.type=E.type==="focusin"?"focus":"blur",B.isSimulated=!0,D(E),B.target===B.currentTarget&&D(B)}else p.event.simulate(y,E.target,p.event.fix(E))}p.event.special[u]={setup:function(){var E;if(hs(this,u,!0),$.documentMode)E=Ke.get(this,y),E||this.addEventListener(y,x),Ke.set(this,y,(E||0)+1);else return!1},trigger:function(){return hs(this,u),!0},teardown:function(){var E;if($.documentMode)E=Ke.get(this,y)-1,E?Ke.set(this,y,E):(this.removeEventListener(y,x),Ke.remove(this,y));else return!1},_default:function(E){return Ke.get(E.target,u)},delegateType:y},p.event.special[y]={setup:function(){var E=this.ownerDocument||this.document||this,D=$.documentMode?this:E,B=Ke.get(D,y);B||($.documentMode?this.addEventListener(y,x):E.addEventListener(u,x,!0)),Ke.set(D,y,(B||0)+1)},teardown:function(){var E=this.ownerDocument||this.document||this,D=$.documentMode?this:E,B=Ke.get(D,y)-1;B?Ke.set(D,y,B):($.documentMode?this.removeEventListener(y,x):E.removeEventListener(u,x,!0),Ke.remove(D,y))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(u,y){p.event.special[u]={delegateType:y,bindType:y,handle:function(x){var E,D=this,B=x.relatedTarget,j=x.handleObj;return(!B||B!==D&&!p.contains(D,B))&&(x.type=j.origType,E=j.handler.apply(this,arguments),x.type=y),E}}}),p.fn.extend({on:function(u,y,x,E){return fs(this,u,y,x,E)},one:function(u,y,x,E){return fs(this,u,y,x,E,1)},off:function(u,y,x){var E,D;if(u&&u.preventDefault&&u.handleObj)return E=u.handleObj,p(u.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this;if(typeof u=="object"){for(D in u)this.off(D,y,u[D]);return this}return(y===!1||typeof y=="function")&&(x=y,y=void 0),x===!1&&(x=qi),this.each(function(){p.event.remove(this,u,x,y)})}});var zl=/<script|<style|<link/i,Hl=/checked\s*(?:[^=]|=\s*.checked.)/i,ql=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ia(u,y){return J(u,"table")&&J(y.nodeType!==11?y:y.firstChild,"tr")&&p(u).children("tbody")[0]||u}function Kl(u){return u.type=(u.getAttribute("type")!==null)+"/"+u.type,u}function Wl(u){return(u.type||"").slice(0,5)==="true/"?u.type=u.type.slice(5):u.removeAttribute("type"),u}function $a(u,y){var x,E,D,B,j,re,X;if(y.nodeType===1){if(Ke.hasData(u)&&(B=Ke.get(u),X=B.events,X)){Ke.remove(y,"handle events");for(D in X)for(x=0,E=X[D].length;x<E;x++)p.event.add(y,D,X[D][x])}gt.hasData(u)&&(j=gt.access(u),re=p.extend({},j),gt.set(y,re))}}function Pa(u,y){var x=y.nodeName.toLowerCase();x==="input"&&Hi.test(u.type)?y.checked=u.checked:(x==="input"||x==="textarea")&&(y.defaultValue=u.defaultValue)}function Ki(u,y,x,E){y=a(y);var D,B,j,re,X,ge,Ie=0,Oe=u.length,Ee=Oe-1,Ge=y[0],at=C(Ge);if(at||Oe>1&&typeof Ge=="string"&&!I.checkClone&&Hl.test(Ge))return u.each(function(Mt){var Rt=u.eq(Mt);at&&(y[0]=Ge.call(this,Mt,Rt.html())),Ki(Rt,y,x,E)});if(Oe&&(D=Ca(y,u[0].ownerDocument,!1,u,E),B=D.firstChild,D.childNodes.length===1&&(D=B),B||E)){for(j=p.map(Gn(D,"script"),Kl),re=j.length;Ie<Oe;Ie++)X=D,Ie!==Ee&&(X=p.clone(X,!0,!0),re&&p.merge(j,Gn(X,"script"))),x.call(u[Ie],X,Ie);if(re)for(ge=j[j.length-1].ownerDocument,p.map(j,Wl),Ie=0;Ie<re;Ie++)X=j[Ie],Aa.test(X.type||"")&&!Ke.access(X,"globalEval")&&p.contains(ge,X)&&(X.src&&(X.type||"").toLowerCase()!=="module"?p._evalUrl&&!X.noModule&&p._evalUrl(X.src,{nonce:X.nonce||X.getAttribute("nonce")},ge):P(X.textContent.replace(ql,""),X,ge))}return u}function Oa(u,y,x){for(var E,D=y?p.filter(y,u):u,B=0;(E=D[B])!=null;B++)!x&&E.nodeType===1&&p.cleanData(Gn(E)),E.parentNode&&(x&&oi(E)&&qs(Gn(E,"script")),E.parentNode.removeChild(E));return u}p.extend({htmlPrefilter:function(u){return u},clone:function(u,y,x){var E,D,B,j,re=u.cloneNode(!0),X=oi(u);if(!I.noCloneChecked&&(u.nodeType===1||u.nodeType===11)&&!p.isXMLDoc(u))for(j=Gn(re),B=Gn(u),E=0,D=B.length;E<D;E++)Pa(B[E],j[E]);if(y)if(x)for(B=B||Gn(u),j=j||Gn(re),E=0,D=B.length;E<D;E++)$a(B[E],j[E]);else $a(u,re);return j=Gn(re,"script"),j.length>0&&qs(j,!X&&Gn(u,"script")),re},cleanData:function(u){for(var y,x,E,D=p.event.special,B=0;(x=u[B])!==void 0;B++)if(St(x)){if(y=x[Ke.expando]){if(y.events)for(E in y.events)D[E]?p.event.remove(x,E):p.removeEvent(x,E,y.handle);x[Ke.expando]=void 0}x[gt.expando]&&(x[gt.expando]=void 0)}}}),p.fn.extend({detach:function(u){return Oa(this,u,!0)},remove:function(u){return Oa(this,u)},text:function(u){return je(this,function(y){return y===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=y)})},null,u,arguments.length)},append:function(){return Ki(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Ia(this,u);y.appendChild(u)}})},prepend:function(){return Ki(this,arguments,function(u){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Ia(this,u);y.insertBefore(u,y.firstChild)}})},before:function(){return Ki(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this)})},after:function(){return Ki(this,arguments,function(u){this.parentNode&&this.parentNode.insertBefore(u,this.nextSibling)})},empty:function(){for(var u,y=0;(u=this[y])!=null;y++)u.nodeType===1&&(p.cleanData(Gn(u,!1)),u.textContent="");return this},clone:function(u,y){return u=u??!1,y=y??u,this.map(function(){return p.clone(this,u,y)})},html:function(u){return je(this,function(y){var x=this[0]||{},E=0,D=this.length;if(y===void 0&&x.nodeType===1)return x.innerHTML;if(typeof y=="string"&&!zl.test(y)&&!ir[(Oo.exec(y)||["",""])[1].toLowerCase()]){y=p.htmlPrefilter(y);try{for(;E<D;E++)x=this[E]||{},x.nodeType===1&&(p.cleanData(Gn(x,!1)),x.innerHTML=y);x=0}catch{}}x&&this.empty().append(y)},null,u,arguments.length)},replaceWith:function(){var u=[];return Ki(this,arguments,function(y){var x=this.parentNode;p.inArray(this,u)<0&&(p.cleanData(Gn(this)),x&&x.replaceChild(y,this))},u)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(u,y){p.fn[u]=function(x){for(var E,D=[],B=p(x),j=B.length-1,re=0;re<=j;re++)E=re===j?this:this.clone(!0),p(B[re])[y](E),c.apply(D,E.get());return this.pushStack(D)}});var No=new RegExp("^("+Ir+")(?!px)[a-z%]+$","i"),Ro=/^--/,Ks=function(u){var y=u.ownerDocument.defaultView;return(!y||!y.opener)&&(y=t),y.getComputedStyle(u)},Na=function(u,y,x){var E,D,B={};for(D in y)B[D]=u.style[D],u.style[D]=y[D];E=x.call(u);for(D in y)u.style[D]=B[D];return E},Ws=new RegExp(rr.join("|"),"i");(function(){function u(){if(ge){X.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ge.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yr.appendChild(X).appendChild(ge);var Ie=t.getComputedStyle(ge);x=Ie.top!=="1%",re=y(Ie.marginLeft)===12,ge.style.right="60%",B=y(Ie.right)===36,E=y(Ie.width)===36,ge.style.position="absolute",D=y(ge.offsetWidth/3)===12,yr.removeChild(X),ge=null}}function y(Ie){return Math.round(parseFloat(Ie))}var x,E,D,B,j,re,X=$.createElement("div"),ge=$.createElement("div");ge.style&&(ge.style.backgroundClip="content-box",ge.cloneNode(!0).style.backgroundClip="",I.clearCloneStyle=ge.style.backgroundClip==="content-box",p.extend(I,{boxSizingReliable:function(){return u(),E},pixelBoxStyles:function(){return u(),B},pixelPosition:function(){return u(),x},reliableMarginLeft:function(){return u(),re},scrollboxSize:function(){return u(),D},reliableTrDimensions:function(){var Ie,Oe,Ee,Ge;return j==null&&(Ie=$.createElement("table"),Oe=$.createElement("tr"),Ee=$.createElement("div"),Ie.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Oe.style.cssText="border:1px solid",Oe.style.height="1px",Ee.style.height="9px",Ee.style.display="block",yr.appendChild(Ie).appendChild(Oe).appendChild(Ee),Ge=t.getComputedStyle(Oe),j=parseInt(Ge.height,10)+parseInt(Ge.borderTopWidth,10)+parseInt(Ge.borderBottomWidth,10)===Oe.offsetHeight,yr.removeChild(Ie)),j}}))})();function Wi(u,y,x){var E,D,B,j,re=Ro.test(y),X=u.style;return x=x||Ks(u),x&&(j=x.getPropertyValue(y)||x[y],re&&j&&(j=j.replace(Q,"$1")||void 0),j===""&&!oi(u)&&(j=p.style(u,y)),!I.pixelBoxStyles()&&No.test(j)&&Ws.test(y)&&(E=X.width,D=X.minWidth,B=X.maxWidth,X.minWidth=X.maxWidth=X.width=j,j=x.width,X.width=E,X.minWidth=D,X.maxWidth=B)),j!==void 0?j+"":j}function zr(u,y){return{get:function(){if(u()){delete this.get;return}return(this.get=y).apply(this,arguments)}}}var Mo=["Webkit","Moz","ms"],Ei=$.createElement("div").style,Ra={};function ds(u){for(var y=u[0].toUpperCase()+u.slice(1),x=Mo.length;x--;)if(u=Mo[x]+y,u in Ei)return u}function Vi(u){var y=p.cssProps[u]||Ra[u];return y||(u in Ei?u:Ra[u]=ds(u)||u)}var Ma=/^(none|table(?!-c[ea]).+)/,Vl={position:"absolute",visibility:"hidden",display:"block"},Vs={letterSpacing:"0",fontWeight:"400"};function Da(u,y,x){var E=si.exec(y);return E?Math.max(0,E[2]-(x||0))+(E[3]||"px"):y}function Do(u,y,x,E,D,B){var j=y==="width"?1:0,re=0,X=0,ge=0;if(x===(E?"border":"content"))return 0;for(;j<4;j+=2)x==="margin"&&(ge+=p.css(u,x+rr[j],!0,D)),E?(x==="content"&&(X-=p.css(u,"padding"+rr[j],!0,D)),x!=="margin"&&(X-=p.css(u,"border"+rr[j]+"Width",!0,D))):(X+=p.css(u,"padding"+rr[j],!0,D),x!=="padding"?X+=p.css(u,"border"+rr[j]+"Width",!0,D):re+=p.css(u,"border"+rr[j]+"Width",!0,D));return!E&&B>=0&&(X+=Math.max(0,Math.ceil(u["offset"+y[0].toUpperCase()+y.slice(1)]-B-X-re-.5))||0),X+ge}function q(u,y,x){var E=Ks(u),D=!I.boxSizingReliable()||x,B=D&&p.css(u,"boxSizing",!1,E)==="border-box",j=B,re=Wi(u,y,E),X="offset"+y[0].toUpperCase()+y.slice(1);if(No.test(re)){if(!x)return re;re="auto"}return(!I.boxSizingReliable()&&B||!I.reliableTrDimensions()&&J(u,"tr")||re==="auto"||!parseFloat(re)&&p.css(u,"display",!1,E)==="inline")&&u.getClientRects().length&&(B=p.css(u,"boxSizing",!1,E)==="border-box",j=X in u,j&&(re=u[X])),re=parseFloat(re)||0,re+Do(u,y,x||(B?"border":"content"),j,E,re)+"px"}p.extend({cssHooks:{opacity:{get:function(u,y){if(y){var x=Wi(u,"opacity");return x===""?"1":x}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(u,y,x,E){if(!(!u||u.nodeType===3||u.nodeType===8||!u.style)){var D,B,j,re=yt(y),X=Ro.test(y),ge=u.style;if(X||(y=Vi(re)),j=p.cssHooks[y]||p.cssHooks[re],x!==void 0){if(B=typeof x,B==="string"&&(D=si.exec(x))&&D[1]&&(x=Po(u,y,D),B="number"),x==null||x!==x)return;B==="number"&&!X&&(x+=D&&D[3]||(p.cssNumber[re]?"":"px")),!I.clearCloneStyle&&x===""&&y.indexOf("background")===0&&(ge[y]="inherit"),(!j||!("set"in j)||(x=j.set(u,x,E))!==void 0)&&(X?ge.setProperty(y,x):ge[y]=x)}else return j&&"get"in j&&(D=j.get(u,!1,E))!==void 0?D:ge[y]}},css:function(u,y,x,E){var D,B,j,re=yt(y),X=Ro.test(y);return X||(y=Vi(re)),j=p.cssHooks[y]||p.cssHooks[re],j&&"get"in j&&(D=j.get(u,!0,x)),D===void 0&&(D=Wi(u,y,E)),D==="normal"&&y in Vs&&(D=Vs[y]),x===""||x?(B=parseFloat(D),x===!0||isFinite(B)?B||0:D):D}}),p.each(["height","width"],function(u,y){p.cssHooks[y]={get:function(x,E,D){if(E)return Ma.test(p.css(x,"display"))&&(!x.getClientRects().length||!x.getBoundingClientRect().width)?Na(x,Vl,function(){return q(x,y,D)}):q(x,y,D)},set:function(x,E,D){var B,j=Ks(x),re=!I.scrollboxSize()&&j.position==="absolute",X=re||D,ge=X&&p.css(x,"boxSizing",!1,j)==="border-box",Ie=D?Do(x,y,D,ge,j):0;return ge&&re&&(Ie-=Math.ceil(x["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(j[y])-Do(x,y,"border",!1,j)-.5)),Ie&&(B=si.exec(E))&&(B[3]||"px")!=="px"&&(x.style[y]=E,E=p.css(x,y)),Da(x,E,Ie)}}}),p.cssHooks.marginLeft=zr(I.reliableMarginLeft,function(u,y){if(y)return(parseFloat(Wi(u,"marginLeft"))||u.getBoundingClientRect().left-Na(u,{marginLeft:0},function(){return u.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(u,y){p.cssHooks[u+y]={expand:function(x){for(var E=0,D={},B=typeof x=="string"?x.split(" "):[x];E<4;E++)D[u+rr[E]+y]=B[E]||B[E-2]||B[0];return D}},u!=="margin"&&(p.cssHooks[u+y].set=Da)}),p.fn.extend({css:function(u,y){return je(this,function(x,E,D){var B,j,re={},X=0;if(Array.isArray(E)){for(B=Ks(x),j=E.length;X<j;X++)re[E[X]]=p.css(x,E[X],!1,B);return re}return D!==void 0?p.style(x,E,D):p.css(x,E)},u,y,arguments.length>1)}});function ne(u,y,x,E,D){return new ne.prototype.init(u,y,x,E,D)}p.Tween=ne,ne.prototype={constructor:ne,init:function(u,y,x,E,D,B){this.elem=u,this.prop=x,this.easing=D||p.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=E,this.unit=B||(p.cssNumber[x]?"":"px")},cur:function(){var u=ne.propHooks[this.prop];return u&&u.get?u.get(this):ne.propHooks._default.get(this)},run:function(u){var y,x=ne.propHooks[this.prop];return this.options.duration?this.pos=y=p.easing[this.easing](u,this.options.duration*u,0,1,this.options.duration):this.pos=y=u,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),x&&x.set?x.set(this):ne.propHooks._default.set(this),this}},ne.prototype.init.prototype=ne.prototype,ne.propHooks={_default:{get:function(u){var y;return u.elem.nodeType!==1||u.elem[u.prop]!=null&&u.elem.style[u.prop]==null?u.elem[u.prop]:(y=p.css(u.elem,u.prop,""),!y||y==="auto"?0:y)},set:function(u){p.fx.step[u.prop]?p.fx.step[u.prop](u):u.elem.nodeType===1&&(p.cssHooks[u.prop]||u.elem.style[Vi(u.prop)]!=null)?p.style(u.elem,u.prop,u.now+u.unit):u.elem[u.prop]=u.now}}},ne.propHooks.scrollTop=ne.propHooks.scrollLeft={set:function(u){u.elem.nodeType&&u.elem.parentNode&&(u.elem[u.prop]=u.now)}},p.easing={linear:function(u){return u},swing:function(u){return .5-Math.cos(u*Math.PI)/2},_default:"swing"},p.fx=ne.prototype.init,p.fx.step={};var V,he,ve=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function Re(){he&&($.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Re):t.setTimeout(Re,p.fx.interval),p.fx.tick())}function We(){return t.setTimeout(function(){V=void 0}),V=Date.now()}function Ye(u,y){var x,E=0,D={height:u};for(y=y?1:0;E<4;E+=2-y)x=rr[E],D["margin"+x]=D["padding"+x]=u;return y&&(D.opacity=D.width=u),D}function Ze(u,y,x){for(var E,D=(xt.tweeners[y]||[]).concat(xt.tweeners["*"]),B=0,j=D.length;B<j;B++)if(E=D[B].call(x,y,u))return E}function Xe(u,y,x){var E,D,B,j,re,X,ge,Ie,Oe="width"in y||"height"in y,Ee=this,Ge={},at=u.style,Mt=u.nodeType&&ai(u),Rt=Ke.get(u,"fxshow");x.queue||(j=p._queueHooks(u,"fx"),j.unqueued==null&&(j.unqueued=0,re=j.empty.fire,j.empty.fire=function(){j.unqueued||re()}),j.unqueued++,Ee.always(function(){Ee.always(function(){j.unqueued--,p.queue(u,"fx").length||j.empty.fire()})}));for(E in y)if(D=y[E],ve.test(D)){if(delete y[E],B=B||D==="toggle",D===(Mt?"hide":"show"))if(D==="show"&&Rt&&Rt[E]!==void 0)Mt=!0;else continue;Ge[E]=Rt&&Rt[E]||p.style(u,E)}if(X=!p.isEmptyObject(y),!(!X&&p.isEmptyObject(Ge))){Oe&&u.nodeType===1&&(x.overflow=[at.overflow,at.overflowX,at.overflowY],ge=Rt&&Rt.display,ge==null&&(ge=Ke.get(u,"display")),Ie=p.css(u,"display"),Ie==="none"&&(ge?Ie=ge:(Si([u],!0),ge=u.style.display||ge,Ie=p.css(u,"display"),Si([u]))),(Ie==="inline"||Ie==="inline-block"&&ge!=null)&&p.css(u,"float")==="none"&&(X||(Ee.done(function(){at.display=ge}),ge==null&&(Ie=at.display,ge=Ie==="none"?"":Ie)),at.display="inline-block")),x.overflow&&(at.overflow="hidden",Ee.always(function(){at.overflow=x.overflow[0],at.overflowX=x.overflow[1],at.overflowY=x.overflow[2]})),X=!1;for(E in Ge)X||(Rt?"hidden"in Rt&&(Mt=Rt.hidden):Rt=Ke.access(u,"fxshow",{display:ge}),B&&(Rt.hidden=!Mt),Mt&&Si([u],!0),Ee.done(function(){Mt||Si([u]),Ke.remove(u,"fxshow");for(E in Ge)p.style(u,E,Ge[E])})),X=Ze(Mt?Rt[E]:0,E,Ee),E in Rt||(Rt[E]=X.start,Mt&&(X.end=X.start,X.start=0))}}function ht(u,y){var x,E,D,B,j;for(x in u)if(E=yt(x),D=y[E],B=u[x],Array.isArray(B)&&(D=B[1],B=u[x]=B[0]),x!==E&&(u[E]=B,delete u[x]),j=p.cssHooks[E],j&&"expand"in j){B=j.expand(B),delete u[E];for(x in B)x in u||(u[x]=B[x],y[x]=D)}else y[E]=D}function xt(u,y,x){var E,D,B=0,j=xt.prefilters.length,re=p.Deferred().always(function(){delete X.elem}),X=function(){if(D)return!1;for(var Oe=V||We(),Ee=Math.max(0,ge.startTime+ge.duration-Oe),Ge=Ee/ge.duration||0,at=1-Ge,Mt=0,Rt=ge.tweens.length;Mt<Rt;Mt++)ge.tweens[Mt].run(at);return re.notifyWith(u,[ge,at,Ee]),at<1&&Rt?Ee:(Rt||re.notifyWith(u,[ge,1,0]),re.resolveWith(u,[ge]),!1)},ge=re.promise({elem:u,props:p.extend({},y),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},x),originalProperties:y,originalOptions:x,startTime:V||We(),duration:x.duration,tweens:[],createTween:function(Oe,Ee){var Ge=p.Tween(u,ge.opts,Oe,Ee,ge.opts.specialEasing[Oe]||ge.opts.easing);return ge.tweens.push(Ge),Ge},stop:function(Oe){var Ee=0,Ge=Oe?ge.tweens.length:0;if(D)return this;for(D=!0;Ee<Ge;Ee++)ge.tweens[Ee].run(1);return Oe?(re.notifyWith(u,[ge,1,0]),re.resolveWith(u,[ge,Oe])):re.rejectWith(u,[ge,Oe]),this}}),Ie=ge.props;for(ht(Ie,ge.opts.specialEasing);B<j;B++)if(E=xt.prefilters[B].call(ge,u,Ie,ge.opts),E)return C(E.stop)&&(p._queueHooks(ge.elem,ge.opts.queue).stop=E.stop.bind(E)),E;return p.map(Ie,Ze,ge),C(ge.opts.start)&&ge.opts.start.call(u,ge),ge.progress(ge.opts.progress).done(ge.opts.done,ge.opts.complete).fail(ge.opts.fail).always(ge.opts.always),p.fx.timer(p.extend(X,{elem:u,anim:ge,queue:ge.opts.queue})),ge}p.Animation=p.extend(xt,{tweeners:{"*":[function(u,y){var x=this.createTween(u,y);return Po(x.elem,u,si.exec(y),x),x}]},tweener:function(u,y){C(u)?(y=u,u=["*"]):u=u.match(k);for(var x,E=0,D=u.length;E<D;E++)x=u[E],xt.tweeners[x]=xt.tweeners[x]||[],xt.tweeners[x].unshift(y)},prefilters:[Xe],prefilter:function(u,y){y?xt.prefilters.unshift(u):xt.prefilters.push(u)}}),p.speed=function(u,y,x){var E=u&&typeof u=="object"?p.extend({},u):{complete:x||!x&&y||C(u)&&u,duration:u,easing:x&&y||y&&!C(y)&&y};return p.fx.off?E.duration=0:typeof E.duration!="number"&&(E.duration in p.fx.speeds?E.duration=p.fx.speeds[E.duration]:E.duration=p.fx.speeds._default),(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(){C(E.old)&&E.old.call(this),E.queue&&p.dequeue(this,E.queue)},E},p.fn.extend({fadeTo:function(u,y,x,E){return this.filter(ai).css("opacity",0).show().end().animate({opacity:y},u,x,E)},animate:function(u,y,x,E){var D=p.isEmptyObject(u),B=p.speed(y,x,E),j=function(){var re=xt(this,p.extend({},u),B);(D||Ke.get(this,"finish"))&&re.stop(!0)};return j.finish=j,D||B.queue===!1?this.each(j):this.queue(B.queue,j)},stop:function(u,y,x){var E=function(D){var B=D.stop;delete D.stop,B(x)};return typeof u!="string"&&(x=y,y=u,u=void 0),y&&this.queue(u||"fx",[]),this.each(function(){var D=!0,B=u!=null&&u+"queueHooks",j=p.timers,re=Ke.get(this);if(B)re[B]&&re[B].stop&&E(re[B]);else for(B in re)re[B]&&re[B].stop&&ue.test(B)&&E(re[B]);for(B=j.length;B--;)j[B].elem===this&&(u==null||j[B].queue===u)&&(j[B].anim.stop(x),D=!1,j.splice(B,1));(D||!x)&&p.dequeue(this,u)})},finish:function(u){return u!==!1&&(u=u||"fx"),this.each(function(){var y,x=Ke.get(this),E=x[u+"queue"],D=x[u+"queueHooks"],B=p.timers,j=E?E.length:0;for(x.finish=!0,p.queue(this,u,[]),D&&D.stop&&D.stop.call(this,!0),y=B.length;y--;)B[y].elem===this&&B[y].queue===u&&(B[y].anim.stop(!0),B.splice(y,1));for(y=0;y<j;y++)E[y]&&E[y].finish&&E[y].finish.call(this);delete x.finish})}}),p.each(["toggle","show","hide"],function(u,y){var x=p.fn[y];p.fn[y]=function(E,D,B){return E==null||typeof E=="boolean"?x.apply(this,arguments):this.animate(Ye(y,!0),E,D,B)}}),p.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(u,y){p.fn[u]=function(x,E,D){return this.animate(y,x,E,D)}}),p.timers=[],p.fx.tick=function(){var u,y=0,x=p.timers;for(V=Date.now();y<x.length;y++)u=x[y],!u()&&x[y]===u&&x.splice(y--,1);x.length||p.fx.stop(),V=void 0},p.fx.timer=function(u){p.timers.push(u),p.fx.start()},p.fx.interval=13,p.fx.start=function(){he||(he=!0,Re())},p.fx.stop=function(){he=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(u,y){return u=p.fx&&p.fx.speeds[u]||u,y=y||"fx",this.queue(y,function(x,E){var D=t.setTimeout(x,u);E.stop=function(){t.clearTimeout(D)}})},function(){var u=$.createElement("input"),y=$.createElement("select"),x=y.appendChild($.createElement("option"));u.type="checkbox",I.checkOn=u.value!=="",I.optSelected=x.selected,u=$.createElement("input"),u.value="t",u.type="radio",I.radioValue=u.value==="t"}();var Jt,qt=p.expr.attrHandle;p.fn.extend({attr:function(u,y){return je(this,p.attr,u,y,arguments.length>1)},removeAttr:function(u){return this.each(function(){p.removeAttr(this,u)})}}),p.extend({attr:function(u,y,x){var E,D,B=u.nodeType;if(!(B===3||B===8||B===2)){if(typeof u.getAttribute>"u")return p.prop(u,y,x);if((B!==1||!p.isXMLDoc(u))&&(D=p.attrHooks[y.toLowerCase()]||(p.expr.match.bool.test(y)?Jt:void 0)),x!==void 0){if(x===null){p.removeAttr(u,y);return}return D&&"set"in D&&(E=D.set(u,x,y))!==void 0?E:(u.setAttribute(y,x+""),x)}return D&&"get"in D&&(E=D.get(u,y))!==null?E:(E=p.find.attr(u,y),E??void 0)}},attrHooks:{type:{set:function(u,y){if(!I.radioValue&&y==="radio"&&J(u,"input")){var x=u.value;return u.setAttribute("type",y),x&&(u.value=x),y}}}},removeAttr:function(u,y){var x,E=0,D=y&&y.match(k);if(D&&u.nodeType===1)for(;x=D[E++];)u.removeAttribute(x)}}),Jt={set:function(u,y,x){return y===!1?p.removeAttr(u,x):u.setAttribute(x,x),x}},p.each(p.expr.match.bool.source.match(/\w+/g),function(u,y){var x=qt[y]||p.find.attr;qt[y]=function(E,D,B){var j,re,X=D.toLowerCase();return B||(re=qt[X],qt[X]=j,j=x(E,D,B)!=null?X:null,qt[X]=re),j}});var yn=/^(?:input|select|textarea|button)$/i,tn=/^(?:a|area)$/i;p.fn.extend({prop:function(u,y){return je(this,p.prop,u,y,arguments.length>1)},removeProp:function(u){return this.each(function(){delete this[p.propFix[u]||u]})}}),p.extend({prop:function(u,y,x){var E,D,B=u.nodeType;if(!(B===3||B===8||B===2))return(B!==1||!p.isXMLDoc(u))&&(y=p.propFix[y]||y,D=p.propHooks[y]),x!==void 0?D&&"set"in D&&(E=D.set(u,x,y))!==void 0?E:u[y]=x:D&&"get"in D&&(E=D.get(u,y))!==null?E:u[y]},propHooks:{tabIndex:{get:function(u){var y=p.find.attr(u,"tabindex");return y?parseInt(y,10):yn.test(u.nodeName)||tn.test(u.nodeName)&&u.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),I.optSelected||(p.propHooks.selected={get:function(u){var y=u.parentNode;return y&&y.parentNode&&y.parentNode.selectedIndex,null},set:function(u){var y=u.parentNode;y&&(y.selectedIndex,y.parentNode&&y.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function Sn(u){var y=u.match(k)||[];return y.join(" ")}function sr(u){return u.getAttribute&&u.getAttribute("class")||""}function ps(u){return Array.isArray(u)?u:typeof u=="string"?u.match(k)||[]:[]}p.fn.extend({addClass:function(u){var y,x,E,D,B,j;return C(u)?this.each(function(re){p(this).addClass(u.call(this,re,sr(this)))}):(y=ps(u),y.length?this.each(function(){if(E=sr(this),x=this.nodeType===1&&" "+Sn(E)+" ",x){for(B=0;B<y.length;B++)D=y[B],x.indexOf(" "+D+" ")<0&&(x+=D+" ");j=Sn(x),E!==j&&this.setAttribute("class",j)}}):this)},removeClass:function(u){var y,x,E,D,B,j;return C(u)?this.each(function(re){p(this).removeClass(u.call(this,re,sr(this)))}):arguments.length?(y=ps(u),y.length?this.each(function(){if(E=sr(this),x=this.nodeType===1&&" "+Sn(E)+" ",x){for(B=0;B<y.length;B++)for(D=y[B];x.indexOf(" "+D+" ")>-1;)x=x.replace(" "+D+" "," ");j=Sn(x),E!==j&&this.setAttribute("class",j)}}):this):this.attr("class","")},toggleClass:function(u,y){var x,E,D,B,j=typeof u,re=j==="string"||Array.isArray(u);return C(u)?this.each(function(X){p(this).toggleClass(u.call(this,X,sr(this),y),y)}):typeof y=="boolean"&&re?y?this.addClass(u):this.removeClass(u):(x=ps(u),this.each(function(){if(re)for(B=p(this),D=0;D<x.length;D++)E=x[D],B.hasClass(E)?B.removeClass(E):B.addClass(E);else(u===void 0||j==="boolean")&&(E=sr(this),E&&Ke.set(this,"__className__",E),this.setAttribute&&this.setAttribute("class",E||u===!1?"":Ke.get(this,"__className__")||""))}))},hasClass:function(u){var y,x,E=0;for(y=" "+u+" ";x=this[E++];)if(x.nodeType===1&&(" "+Sn(sr(x))+" ").indexOf(y)>-1)return!0;return!1}});var Ba=/\r/g;p.fn.extend({val:function(u){var y,x,E,D=this[0];return arguments.length?(E=C(u),this.each(function(B){var j;this.nodeType===1&&(E?j=u.call(this,B,p(this).val()):j=u,j==null?j="":typeof j=="number"?j+="":Array.isArray(j)&&(j=p.map(j,function(re){return re==null?"":re+""})),y=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!y||!("set"in y)||y.set(this,j,"value")===void 0)&&(this.value=j))})):D?(y=p.valHooks[D.type]||p.valHooks[D.nodeName.toLowerCase()],y&&"get"in y&&(x=y.get(D,"value"))!==void 0?x:(x=D.value,typeof x=="string"?x.replace(Ba,""):x??"")):void 0}}),p.extend({valHooks:{option:{get:function(u){var y=p.find.attr(u,"value");return y??Sn(p.text(u))}},select:{get:function(u){var y,x,E,D=u.options,B=u.selectedIndex,j=u.type==="select-one",re=j?null:[],X=j?B+1:D.length;for(B<0?E=X:E=j?B:0;E<X;E++)if(x=D[E],(x.selected||E===B)&&!x.disabled&&(!x.parentNode.disabled||!J(x.parentNode,"optgroup"))){if(y=p(x).val(),j)return y;re.push(y)}return re},set:function(u,y){for(var x,E,D=u.options,B=p.makeArray(y),j=D.length;j--;)E=D[j],(E.selected=p.inArray(p.valHooks.option.get(E),B)>-1)&&(x=!0);return x||(u.selectedIndex=-1),B}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(u,y){if(Array.isArray(y))return u.checked=p.inArray(p(u).val(),y)>-1}},I.checkOn||(p.valHooks[this].get=function(u){return u.getAttribute("value")===null?"on":u.value})});var ui=t.location,La={guid:Date.now()},Gs=/\?/;p.parseXML=function(u){var y,x;if(!u||typeof u!="string")return null;try{y=new t.DOMParser().parseFromString(u,"text/xml")}catch{}return x=y&&y.getElementsByTagName("parsererror")[0],(!y||x)&&p.error("Invalid XML: "+(x?p.map(x.childNodes,function(E){return E.textContent}).join(`
`):u)),y};var Fa=/^(?:focusinfocus|focusoutblur)$/,Bo=function(u){u.stopPropagation()};p.extend(p.event,{trigger:function(u,y,x,E){var D,B,j,re,X,ge,Ie,Oe,Ee=[x||$],Ge=w.call(u,"type")?u.type:u,at=w.call(u,"namespace")?u.namespace.split("."):[];if(B=Oe=j=x=x||$,!(x.nodeType===3||x.nodeType===8)&&!Fa.test(Ge+p.event.triggered)&&(Ge.indexOf(".")>-1&&(at=Ge.split("."),Ge=at.shift(),at.sort()),X=Ge.indexOf(":")<0&&"on"+Ge,u=u[p.expando]?u:new p.Event(Ge,typeof u=="object"&&u),u.isTrigger=E?2:3,u.namespace=at.join("."),u.rnamespace=u.namespace?new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=void 0,u.target||(u.target=x),y=y==null?[u]:p.makeArray(y,[u]),Ie=p.event.special[Ge]||{},!(!E&&Ie.trigger&&Ie.trigger.apply(x,y)===!1))){if(!E&&!Ie.noBubble&&!R(x)){for(re=Ie.delegateType||Ge,Fa.test(re+Ge)||(B=B.parentNode);B;B=B.parentNode)Ee.push(B),j=B;j===(x.ownerDocument||$)&&Ee.push(j.defaultView||j.parentWindow||t)}for(D=0;(B=Ee[D++])&&!u.isPropagationStopped();)Oe=B,u.type=D>1?re:Ie.bindType||Ge,ge=(Ke.get(B,"events")||Object.create(null))[u.type]&&Ke.get(B,"handle"),ge&&ge.apply(B,y),ge=X&&B[X],ge&&ge.apply&&St(B)&&(u.result=ge.apply(B,y),u.result===!1&&u.preventDefault());return u.type=Ge,!E&&!u.isDefaultPrevented()&&(!Ie._default||Ie._default.apply(Ee.pop(),y)===!1)&&St(x)&&X&&C(x[Ge])&&!R(x)&&(j=x[X],j&&(x[X]=null),p.event.triggered=Ge,u.isPropagationStopped()&&Oe.addEventListener(Ge,Bo),x[Ge](),u.isPropagationStopped()&&Oe.removeEventListener(Ge,Bo),p.event.triggered=void 0,j&&(x[X]=j)),u.result}},simulate:function(u,y,x){var E=p.extend(new p.Event,x,{type:u,isSimulated:!0});p.event.trigger(E,null,y)}}),p.fn.extend({trigger:function(u,y){return this.each(function(){p.event.trigger(u,y,this)})},triggerHandler:function(u,y){var x=this[0];if(x)return p.event.trigger(u,y,x,!0)}});var Pd=/\[\]$/,Gl=/\r?\n/g,Od=/^(?:submit|button|image|reset|file)$/i,Nd=/^(?:input|select|textarea|keygen)/i;function Yl(u,y,x,E){var D;if(Array.isArray(y))p.each(y,function(B,j){x||Pd.test(u)?E(u,j):Yl(u+"["+(typeof j=="object"&&j!=null?B:"")+"]",j,x,E)});else if(!x&&N(y)==="object")for(D in y)Yl(u+"["+D+"]",y[D],x,E);else E(u,y)}p.param=function(u,y){var x,E=[],D=function(B,j){var re=C(j)?j():j;E[E.length]=encodeURIComponent(B)+"="+encodeURIComponent(re??"")};if(u==null)return"";if(Array.isArray(u)||u.jquery&&!p.isPlainObject(u))p.each(u,function(){D(this.name,this.value)});else for(x in u)Yl(x,u[x],y,D);return E.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var u=p.prop(this,"elements");return u?p.makeArray(u):this}).filter(function(){var u=this.type;return this.name&&!p(this).is(":disabled")&&Nd.test(this.nodeName)&&!Od.test(u)&&(this.checked||!Hi.test(u))}).map(function(u,y){var x=p(this).val();return x==null?null:Array.isArray(x)?p.map(x,function(E){return{name:y.name,value:E.replace(Gl,`\r
`)}}):{name:y.name,value:x.replace(Gl,`\r
`)}}).get()}});var Rd=/%20/g,Zl=/#.*$/,Md=/([?&])_=[^&]*/,Dd=/^(.*?):[ \t]*([^\r\n]*)$/mg,Bd=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ld=/^(?:GET|HEAD)$/,Fd=/^\/\//,ln={},nn={},Eu="*/".concat("*"),Jl=$.createElement("a");Jl.href=ui.href;function Au(u){return function(y,x){typeof y!="string"&&(x=y,y="*");var E,D=0,B=y.toLowerCase().match(k)||[];if(C(x))for(;E=B[D++];)E[0]==="+"?(E=E.slice(1)||"*",(u[E]=u[E]||[]).unshift(x)):(u[E]=u[E]||[]).push(x)}}function Cu(u,y,x,E){var D={},B=u===nn;function j(re){var X;return D[re]=!0,p.each(u[re]||[],function(ge,Ie){var Oe=Ie(y,x,E);if(typeof Oe=="string"&&!B&&!D[Oe])return y.dataTypes.unshift(Oe),j(Oe),!1;if(B)return!(X=Oe)}),X}return j(y.dataTypes[0])||!D["*"]&&j("*")}function Xl(u,y){var x,E,D=p.ajaxSettings.flatOptions||{};for(x in y)y[x]!==void 0&&((D[x]?u:E||(E={}))[x]=y[x]);return E&&p.extend(!0,u,E),u}function Ud(u,y,x){for(var E,D,B,j,re=u.contents,X=u.dataTypes;X[0]==="*";)X.shift(),E===void 0&&(E=u.mimeType||y.getResponseHeader("Content-Type"));if(E){for(D in re)if(re[D]&&re[D].test(E)){X.unshift(D);break}}if(X[0]in x)B=X[0];else{for(D in x){if(!X[0]||u.converters[D+" "+X[0]]){B=D;break}j||(j=D)}B=B||j}if(B)return B!==X[0]&&X.unshift(B),x[B]}function Tu(u,y,x,E){var D,B,j,re,X,ge={},Ie=u.dataTypes.slice();if(Ie[1])for(j in u.converters)ge[j.toLowerCase()]=u.converters[j];for(B=Ie.shift();B;)if(u.responseFields[B]&&(x[u.responseFields[B]]=y),!X&&E&&u.dataFilter&&(y=u.dataFilter(y,u.dataType)),X=B,B=Ie.shift(),B){if(B==="*")B=X;else if(X!=="*"&&X!==B){if(j=ge[X+" "+B]||ge["* "+B],!j){for(D in ge)if(re=D.split(" "),re[1]===B&&(j=ge[X+" "+re[0]]||ge["* "+re[0]],j)){j===!0?j=ge[D]:ge[D]!==!0&&(B=re[0],Ie.unshift(re[1]));break}}if(j!==!0)if(j&&u.throws)y=j(y);else try{y=j(y)}catch(Oe){return{state:"parsererror",error:j?Oe:"No conversion from "+X+" to "+B}}}}return{state:"success",data:y}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ui.href,type:"GET",isLocal:Bd.test(ui.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Eu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(u,y){return y?Xl(Xl(u,p.ajaxSettings),y):Xl(p.ajaxSettings,u)},ajaxPrefilter:Au(ln),ajaxTransport:Au(nn),ajax:function(u,y){typeof u=="object"&&(y=u,u=void 0),y=y||{};var x,E,D,B,j,re,X,ge,Ie,Oe,Ee=p.ajaxSetup({},y),Ge=Ee.context||Ee,at=Ee.context&&(Ge.nodeType||Ge.jquery)?p(Ge):p.event,Mt=p.Deferred(),Rt=p.Callbacks("once memory"),Un=Ee.statusCode||{},An={},fi={},hi="canceled",Vt={readyState:0,getResponseHeader:function(Gt){var sn;if(X){if(!B)for(B={};sn=Dd.exec(D);)B[sn[1].toLowerCase()+" "]=(B[sn[1].toLowerCase()+" "]||[]).concat(sn[2]);sn=B[Gt.toLowerCase()+" "]}return sn==null?null:sn.join(", ")},getAllResponseHeaders:function(){return X?D:null},setRequestHeader:function(Gt,sn){return X==null&&(Gt=fi[Gt.toLowerCase()]=fi[Gt.toLowerCase()]||Gt,An[Gt]=sn),this},overrideMimeType:function(Gt){return X==null&&(Ee.mimeType=Gt),this},statusCode:function(Gt){var sn;if(Gt)if(X)Vt.always(Gt[Vt.status]);else for(sn in Gt)Un[sn]=[Un[sn],Gt[sn]];return this},abort:function(Gt){var sn=Gt||hi;return x&&x.abort(sn),Gi(0,sn),this}};if(Mt.promise(Vt),Ee.url=((u||Ee.url||ui.href)+"").replace(Fd,ui.protocol+"//"),Ee.type=y.method||y.type||Ee.method||Ee.type,Ee.dataTypes=(Ee.dataType||"*").toLowerCase().match(k)||[""],Ee.crossDomain==null){re=$.createElement("a");try{re.href=Ee.url,re.href=re.href,Ee.crossDomain=Jl.protocol+"//"+Jl.host!=re.protocol+"//"+re.host}catch{Ee.crossDomain=!0}}if(Ee.data&&Ee.processData&&typeof Ee.data!="string"&&(Ee.data=p.param(Ee.data,Ee.traditional)),Cu(ln,Ee,y,Vt),X)return Vt;ge=p.event&&Ee.global,ge&&p.active++===0&&p.event.trigger("ajaxStart"),Ee.type=Ee.type.toUpperCase(),Ee.hasContent=!Ld.test(Ee.type),E=Ee.url.replace(Zl,""),Ee.hasContent?Ee.data&&Ee.processData&&(Ee.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Ee.data=Ee.data.replace(Rd,"+")):(Oe=Ee.url.slice(E.length),Ee.data&&(Ee.processData||typeof Ee.data=="string")&&(E+=(Gs.test(E)?"&":"?")+Ee.data,delete Ee.data),Ee.cache===!1&&(E=E.replace(Md,"$1"),Oe=(Gs.test(E)?"&":"?")+"_="+La.guid+++Oe),Ee.url=E+Oe),Ee.ifModified&&(p.lastModified[E]&&Vt.setRequestHeader("If-Modified-Since",p.lastModified[E]),p.etag[E]&&Vt.setRequestHeader("If-None-Match",p.etag[E])),(Ee.data&&Ee.hasContent&&Ee.contentType!==!1||y.contentType)&&Vt.setRequestHeader("Content-Type",Ee.contentType),Vt.setRequestHeader("Accept",Ee.dataTypes[0]&&Ee.accepts[Ee.dataTypes[0]]?Ee.accepts[Ee.dataTypes[0]]+(Ee.dataTypes[0]!=="*"?", "+Eu+"; q=0.01":""):Ee.accepts["*"]);for(Ie in Ee.headers)Vt.setRequestHeader(Ie,Ee.headers[Ie]);if(Ee.beforeSend&&(Ee.beforeSend.call(Ge,Vt,Ee)===!1||X))return Vt.abort();if(hi="abort",Rt.add(Ee.complete),Vt.done(Ee.success),Vt.fail(Ee.error),x=Cu(nn,Ee,y,Vt),!x)Gi(-1,"No Transport");else{if(Vt.readyState=1,ge&&at.trigger("ajaxSend",[Vt,Ee]),X)return Vt;Ee.async&&Ee.timeout>0&&(j=t.setTimeout(function(){Vt.abort("timeout")},Ee.timeout));try{X=!1,x.send(An,Gi)}catch(Gt){if(X)throw Gt;Gi(-1,Gt)}}function Gi(Gt,sn,Lo,ja){var Hr,gs,Pr,Ci,Yi,or=sn;X||(X=!0,j&&t.clearTimeout(j),x=void 0,D=ja||"",Vt.readyState=Gt>0?4:0,Hr=Gt>=200&&Gt<300||Gt===304,Lo&&(Ci=Ud(Ee,Vt,Lo)),!Hr&&p.inArray("script",Ee.dataTypes)>-1&&p.inArray("json",Ee.dataTypes)<0&&(Ee.converters["text script"]=function(){}),Ci=Tu(Ee,Ci,Vt,Hr),Hr?(Ee.ifModified&&(Yi=Vt.getResponseHeader("Last-Modified"),Yi&&(p.lastModified[E]=Yi),Yi=Vt.getResponseHeader("etag"),Yi&&(p.etag[E]=Yi)),Gt===204||Ee.type==="HEAD"?or="nocontent":Gt===304?or="notmodified":(or=Ci.state,gs=Ci.data,Pr=Ci.error,Hr=!Pr)):(Pr=or,(Gt||!or)&&(or="error",Gt<0&&(Gt=0))),Vt.status=Gt,Vt.statusText=(sn||or)+"",Hr?Mt.resolveWith(Ge,[gs,or,Vt]):Mt.rejectWith(Ge,[Vt,or,Pr]),Vt.statusCode(Un),Un=void 0,ge&&at.trigger(Hr?"ajaxSuccess":"ajaxError",[Vt,Ee,Hr?gs:Pr]),Rt.fireWith(Ge,[Vt,or]),ge&&(at.trigger("ajaxComplete",[Vt,Ee]),--p.active||p.event.trigger("ajaxStop")))}return Vt},getJSON:function(u,y,x){return p.get(u,y,x,"json")},getScript:function(u,y){return p.get(u,void 0,y,"script")}}),p.each(["get","post"],function(u,y){p[y]=function(x,E,D,B){return C(E)&&(B=B||D,D=E,E=void 0),p.ajax(p.extend({url:x,type:y,dataType:B,data:E,success:D},p.isPlainObject(x)&&x))}}),p.ajaxPrefilter(function(u){var y;for(y in u.headers)y.toLowerCase()==="content-type"&&(u.contentType=u.headers[y]||"")}),p._evalUrl=function(u,y,x){return p.ajax({url:u,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(E){p.globalEval(E,y,x)}})},p.fn.extend({wrapAll:function(u){var y;return this[0]&&(C(u)&&(u=u.call(this[0])),y=p(u,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var x=this;x.firstElementChild;)x=x.firstElementChild;return x}).append(this)),this},wrapInner:function(u){return C(u)?this.each(function(y){p(this).wrapInner(u.call(this,y))}):this.each(function(){var y=p(this),x=y.contents();x.length?x.wrapAll(u):y.append(u)})},wrap:function(u){var y=C(u);return this.each(function(x){p(this).wrapAll(y?u.call(this,x):u)})},unwrap:function(u){return this.parent(u).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(u){return!p.expr.pseudos.visible(u)},p.expr.pseudos.visible=function(u){return!!(u.offsetWidth||u.offsetHeight||u.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var jd={0:200,1223:204},En=p.ajaxSettings.xhr();I.cors=!!En&&"withCredentials"in En,I.ajax=En=!!En,p.ajaxTransport(function(u){var y,x;if(I.cors||En&&!u.crossDomain)return{send:function(E,D){var B,j=u.xhr();if(j.open(u.type,u.url,u.async,u.username,u.password),u.xhrFields)for(B in u.xhrFields)j[B]=u.xhrFields[B];u.mimeType&&j.overrideMimeType&&j.overrideMimeType(u.mimeType),!u.crossDomain&&!E["X-Requested-With"]&&(E["X-Requested-With"]="XMLHttpRequest");for(B in E)j.setRequestHeader(B,E[B]);y=function(re){return function(){y&&(y=x=j.onload=j.onerror=j.onabort=j.ontimeout=j.onreadystatechange=null,re==="abort"?j.abort():re==="error"?typeof j.status!="number"?D(0,"error"):D(j.status,j.statusText):D(jd[j.status]||j.status,j.statusText,(j.responseType||"text")!=="text"||typeof j.responseText!="string"?{binary:j.response}:{text:j.responseText},j.getAllResponseHeaders()))}},j.onload=y(),x=j.onerror=j.ontimeout=y("error"),j.onabort!==void 0?j.onabort=x:j.onreadystatechange=function(){j.readyState===4&&t.setTimeout(function(){y&&x()})},y=y("abort");try{j.send(u.hasContent&&u.data||null)}catch(re){if(y)throw re}},abort:function(){y&&y()}}}),p.ajaxPrefilter(function(u){u.crossDomain&&(u.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(u){return p.globalEval(u),u}}}),p.ajaxPrefilter("script",function(u){u.cache===void 0&&(u.cache=!1),u.crossDomain&&(u.type="GET")}),p.ajaxTransport("script",function(u){if(u.crossDomain||u.scriptAttrs){var y,x;return{send:function(E,D){y=p("<script>").attr(u.scriptAttrs||{}).prop({charset:u.scriptCharset,src:u.url}).on("load error",x=function(B){y.remove(),x=null,B&&D(B.type==="error"?404:200,B.type)}),$.head.appendChild(y[0])},abort:function(){x&&x()}}}});var Ua=[],Ai=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var u=Ua.pop()||p.expando+"_"+La.guid++;return this[u]=!0,u}}),p.ajaxPrefilter("json jsonp",function(u,y,x){var E,D,B,j=u.jsonp!==!1&&(Ai.test(u.url)?"url":typeof u.data=="string"&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ai.test(u.data)&&"data");if(j||u.dataTypes[0]==="jsonp")return E=u.jsonpCallback=C(u.jsonpCallback)?u.jsonpCallback():u.jsonpCallback,j?u[j]=u[j].replace(Ai,"$1"+E):u.jsonp!==!1&&(u.url+=(Gs.test(u.url)?"&":"?")+u.jsonp+"="+E),u.converters["script json"]=function(){return B||p.error(E+" was not called"),B[0]},u.dataTypes[0]="json",D=t[E],t[E]=function(){B=arguments},x.always(function(){D===void 0?p(t).removeProp(E):t[E]=D,u[E]&&(u.jsonpCallback=y.jsonpCallback,Ua.push(E)),B&&C(D)&&D(B[0]),B=D=void 0}),"script"}),I.createHTMLDocument=function(){var u=$.implementation.createHTMLDocument("").body;return u.innerHTML="<form></form><form></form>",u.childNodes.length===2}(),p.parseHTML=function(u,y,x){if(typeof u!="string")return[];typeof y=="boolean"&&(x=y,y=!1);var E,D,B;return y||(I.createHTMLDocument?(y=$.implementation.createHTMLDocument(""),E=y.createElement("base"),E.href=$.location.href,y.head.appendChild(E)):y=$),D=Fe.exec(u),B=!x&&[],D?[y.createElement(D[1])]:(D=Ca([u],y,B),B&&B.length&&p(B).remove(),p.merge([],D.childNodes))},p.fn.load=function(u,y,x){var E,D,B,j=this,re=u.indexOf(" ");return re>-1&&(E=Sn(u.slice(re)),u=u.slice(0,re)),C(y)?(x=y,y=void 0):y&&typeof y=="object"&&(D="POST"),j.length>0&&p.ajax({url:u,type:D||"GET",dataType:"html",data:y}).done(function(X){B=arguments,j.html(E?p("<div>").append(p.parseHTML(X)).find(E):X)}).always(x&&function(X,ge){j.each(function(){x.apply(this,B||[X.responseText,ge,X])})}),this},p.expr.pseudos.animated=function(u){return p.grep(p.timers,function(y){return u===y.elem}).length},p.offset={setOffset:function(u,y,x){var E,D,B,j,re,X,ge,Ie=p.css(u,"position"),Oe=p(u),Ee={};Ie==="static"&&(u.style.position="relative"),re=Oe.offset(),B=p.css(u,"top"),X=p.css(u,"left"),ge=(Ie==="absolute"||Ie==="fixed")&&(B+X).indexOf("auto")>-1,ge?(E=Oe.position(),j=E.top,D=E.left):(j=parseFloat(B)||0,D=parseFloat(X)||0),C(y)&&(y=y.call(u,x,p.extend({},re))),y.top!=null&&(Ee.top=y.top-re.top+j),y.left!=null&&(Ee.left=y.left-re.left+D),"using"in y?y.using.call(u,Ee):Oe.css(Ee)}},p.fn.extend({offset:function(u){if(arguments.length)return u===void 0?this:this.each(function(D){p.offset.setOffset(this,u,D)});var y,x,E=this[0];if(E)return E.getClientRects().length?(y=E.getBoundingClientRect(),x=E.ownerDocument.defaultView,{top:y.top+x.pageYOffset,left:y.left+x.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var u,y,x,E=this[0],D={top:0,left:0};if(p.css(E,"position")==="fixed")y=E.getBoundingClientRect();else{for(y=this.offset(),x=E.ownerDocument,u=E.offsetParent||x.documentElement;u&&(u===x.body||u===x.documentElement)&&p.css(u,"position")==="static";)u=u.parentNode;u&&u!==E&&u.nodeType===1&&(D=p(u).offset(),D.top+=p.css(u,"borderTopWidth",!0),D.left+=p.css(u,"borderLeftWidth",!0))}return{top:y.top-D.top-p.css(E,"marginTop",!0),left:y.left-D.left-p.css(E,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var u=this.offsetParent;u&&p.css(u,"position")==="static";)u=u.offsetParent;return u||yr})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(u,y){var x=y==="pageYOffset";p.fn[u]=function(E){return je(this,function(D,B,j){var re;if(R(D)?re=D:D.nodeType===9&&(re=D.defaultView),j===void 0)return re?re[y]:D[B];re?re.scrollTo(x?re.pageXOffset:j,x?j:re.pageYOffset):D[B]=j},u,E,arguments.length)}}),p.each(["top","left"],function(u,y){p.cssHooks[y]=zr(I.pixelPosition,function(x,E){if(E)return E=Wi(x,y),No.test(E)?p(x).position()[y]+"px":E})}),p.each({Height:"height",Width:"width"},function(u,y){p.each({padding:"inner"+u,content:y,"":"outer"+u},function(x,E){p.fn[E]=function(D,B){var j=arguments.length&&(x||typeof D!="boolean"),re=x||(D===!0||B===!0?"margin":"border");return je(this,function(X,ge,Ie){var Oe;return R(X)?E.indexOf("outer")===0?X["inner"+u]:X.document.documentElement["client"+u]:X.nodeType===9?(Oe=X.documentElement,Math.max(X.body["scroll"+u],Oe["scroll"+u],X.body["offset"+u],Oe["offset"+u],Oe["client"+u])):Ie===void 0?p.css(X,ge,re):p.style(X,ge,Ie,re)},y,j?D:void 0,j)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(u,y){p.fn[y]=function(x){return this.on(y,x)}}),p.fn.extend({bind:function(u,y,x){return this.on(u,null,y,x)},unbind:function(u,y){return this.off(u,null,y)},delegate:function(u,y,x,E){return this.on(y,u,x,E)},undelegate:function(u,y,x){return arguments.length===1?this.off(u,"**"):this.off(y,u||"**",x)},hover:function(u,y){return this.mouseenter(u).mouseleave(y||u)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(u,y){p.fn[y]=function(x,E){return arguments.length>0?this.on(y,null,x,E):this.trigger(y)}});var Iu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(u,y){var x,E,D;if(typeof y=="string"&&(x=u[y],y=u,u=x),!!C(u))return E=s.call(arguments,2),D=function(){return u.apply(y||this,E.concat(s.call(arguments)))},D.guid=u.guid=u.guid||p.guid++,D},p.holdReady=function(u){u?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=J,p.isFunction=C,p.isWindow=R,p.camelCase=yt,p.type=N,p.now=Date.now,p.isNumeric=function(u){var y=p.type(u);return(y==="number"||y==="string")&&!isNaN(u-parseFloat(u))},p.trim=function(u){return u==null?"":(u+"").replace(Iu,"$1")};var Ql=t.jQuery,$r=t.$;return p.noConflict=function(u){return t.$===p&&(t.$=$r),u&&t.jQuery===p&&(t.jQuery=Ql),p},typeof n>"u"&&(t.jQuery=t.$=p),p})})(mx);var e7=mx.exports;const Tt=jr(e7);function t7(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mu=t7,n7=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,vx=n7,r7=vx,i7=typeof self=="object"&&self&&self.Object===Object&&self,s7=r7||i7||Function("return this")(),cs=s7,o7=cs,a7=function(){return o7.Date.now()},l7=a7,c7=/\s/;function u7(e){for(var t=e.length;t--&&c7.test(e.charAt(t)););return t}var f7=u7,h7=f7,d7=/^\s+/;function p7(e){return e&&e.slice(0,h7(e)+1).replace(d7,"")}var g7=p7,y7=cs,m7=y7.Symbol,Am=m7,q1=Am,bx=Object.prototype,v7=bx.hasOwnProperty,b7=bx.toString,_c=q1?q1.toStringTag:void 0;function w7(e){var t=v7.call(e,_c),n=e[_c];try{e[_c]=void 0;var r=!0}catch{}var i=b7.call(e);return r&&(t?e[_c]=n:delete e[_c]),i}var _7=w7,x7=Object.prototype,k7=x7.toString;function S7(e){return k7.call(e)}var E7=S7,K1=Am,A7=_7,C7=E7,T7="[object Null]",I7="[object Undefined]",W1=K1?K1.toStringTag:void 0;function $7(e){return e==null?e===void 0?I7:T7:W1&&W1 in Object(e)?A7(e):C7(e)}var vu=$7;function P7(e){return e!=null&&typeof e=="object"}var bu=P7,O7=vu,N7=bu,R7="[object Symbol]";function M7(e){return typeof e=="symbol"||N7(e)&&O7(e)==R7}var D7=M7,B7=g7,V1=mu,L7=D7,G1=0/0,F7=/^[-+]0x[0-9a-f]+$/i,U7=/^0b[01]+$/i,j7=/^0o[0-7]+$/i,z7=parseInt;function H7(e){if(typeof e=="number")return e;if(L7(e))return G1;if(V1(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=V1(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=B7(e);var n=U7.test(e);return n||j7.test(e)?z7(e.slice(2),n?2:8):F7.test(e)?G1:+e}var q7=H7,K7=mu,Gp=l7,Y1=q7,W7="Expected a function",V7=Math.max,G7=Math.min;function Y7(e,t,n){var r,i,s,a,c,f,b=0,m=!1,w=!1,_=!0;if(typeof e!="function")throw new TypeError(W7);t=Y1(t)||0,K7(n)&&(m=!!n.leading,w="maxWait"in n,s=w?V7(Y1(n.maxWait)||0,t):s,_="trailing"in n?!!n.trailing:_);function A(U){var p=r,Z=i;return r=i=void 0,b=U,a=e.apply(Z,p),a}function I(U){return b=U,c=setTimeout($,t),m?A(U):a}function C(U){var p=U-f,Z=U-b,J=t-p;return w?G7(J,s-Z):J}function R(U){var p=U-f,Z=U-b;return f===void 0||p>=t||p<0||w&&Z>=s}function $(){var U=Gp();if(R(U))return L(U);c=setTimeout($,C(U))}function L(U){return c=void 0,_&&r?A(U):(r=i=void 0,a)}function P(){c!==void 0&&clearTimeout(c),b=0,r=f=i=c=void 0}function N(){return c===void 0?a:L(Gp())}function M(){var U=Gp(),p=R(U);if(r=arguments,i=this,f=U,p){if(c===void 0)return I(f);if(w)return clearTimeout(c),c=setTimeout($,t),A(f)}return c===void 0&&(c=setTimeout($,t)),a}return M.cancel=P,M.flush=N,M}var Z7=Y7,J7=Z7,X7=mu,Q7="Expected a function";function eO(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Q7);return X7(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),J7(e,t,{leading:r,maxWait:t,trailing:i})}var tO=eO;const Cm=jr(tO);var nO=0;function d(e,t,n,r,i,s){var a,c,f={};for(c in t)c=="ref"?a=t[c]:f[c]=t[c];var b={type:e,props:f,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--nO,__source:i,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)f[c]===void 0&&(f[c]=a[c]);return vt.vnode&&vt.vnode(b),b}const un={post:d("svg",{width:"24",viewBox:"0 0 512 512",fill:"currentColor",children:d("g",{children:d("path",{d:"M473.818,0.003c0,0-18.578,28.297-139.938,70.172c-123.719,42.688-199.875,216.406-199.875,216.406 c-18.344,35.578-90.813,183.453-90.813,183.453c-19.953,38.172,16.625,60.734,38.063,21.313 c41.156-75.703,67.688-144.875,130.25-146.844c91.219-2.875,153.609-84.109,133.984-80.359 c-25.844,11.484-82.781,0.875-49.234-4.391c80.531-6.594,130.125-68.297,113.969-72.5c-28.563,11.219-55.172,0.578-60.391-2.656 C491.959,166.987,473.818,0.003,473.818,0.003z"})})}),video:d("svg",{width:"18",viewBox:"0 0 122.88 111.34",fill:"currentColor",children:d("path",{d:"M23.59,0h75.7a23.68,23.68,0,0,1,23.59,23.59V87.75A23.56,23.56,0,0,1,116,104.41l-.22.2a23.53,23.53,0,0,1-16.44,6.73H23.59a23.53,23.53,0,0,1-16.66-6.93l-.2-.22A23.46,23.46,0,0,1,0,87.75V23.59A23.66,23.66,0,0,1,23.59,0ZM54,47.73,79.25,65.36a3.79,3.79,0,0,1,.14,6.3L54.22,89.05a3.75,3.75,0,0,1-2.4.87A3.79,3.79,0,0,1,48,86.13V50.82h0A3.77,3.77,0,0,1,54,47.73ZM7.35,26.47h14L30.41,7.35H23.59A16.29,16.29,0,0,0,7.35,23.59v2.88ZM37.05,7.35,28,26.47H53.36L62.43,7.38v0Zm32,0L59.92,26.47h24.7L93.7,7.35Zm31.32,0L91.26,26.47h24.27V23.59a16.32,16.32,0,0,0-15.2-16.21Zm15.2,26.68H7.35V87.75A16.21,16.21,0,0,0,12,99.05l.17.16A16.19,16.19,0,0,0,23.59,104h75.7a16.21,16.21,0,0,0,11.3-4.6l.16-.18a16.17,16.17,0,0,0,4.78-11.46V34.06Z"})}),grid:d("svg",{style:"margin-top: 4px",width:"18",height:"18",viewBox:"0 0 140 140",children:[d("rect",{x:"8",y:"8",width:"124",height:"124",rx:"4",ry:"4",fill:"none",stroke:"currentColor","stroke-width":"16"}),d("g",{stroke:"currentColor","stroke-width":"15",children:[d("line",{x1:"50",y1:"0",x2:"50",y2:"140"}),d("line",{x1:"90",y1:"0",x2:"90",y2:"140"}),d("line",{x1:"0",y1:"50",x2:"140",y2:"50"}),d("line",{x1:"0",y1:"90",x2:"140",y2:"90"})]})]}),feed:d("svg",{width:"32",viewBox:"0 0 24 24",fill:"none",children:d("g",{children:[d("path",{d:"M5 12H18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),d("path",{d:"M5 17H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),d("path",{d:"M5 7H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})]})}),reply:d("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"})}),lightning:d("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),folder:d("svg",{"enable-background":"new 0 0 512 512",height:"24",viewBox:"0 0 512 512",width:"24",fill:"currentColor",children:d("path",{d:"m255.964 90c-13.696-18.207-35.478-30-59.964-30h-196v392h512v-362zm226.036 332h-452v-332h166c24.813 0 45 20.187 45 45v45h241zm0-272h-211v-15c0-5.137-.519-10.151-1.507-15h212.507z"})}),close:d("svg",{height:"25px",viewBox:"0 0 329.26933 329",width:"25px",fill:"currentColor",children:d("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})}),play:d("svg",{x:"0px",y:"0px",height:"25px",width:"25px",viewBox:"0 0 30.051 30.051",fill:"currentColor",style:"enable-background:new 0 0 30.051 30.051;",children:[d("path",{d:"M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069 c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532 c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z"}),d("path",{d:"M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021 C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518 c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z"})]}),pause:d("svg",{"enable-background":"new 0 0 511.448 511.448",height:"25px",width:"25px",viewBox:"0 0 511.448 511.448",fill:"currentColor",children:[d("path",{d:"m436.508 74.94c-99.913-99.913-261.64-99.928-361.567 0-99.913 99.913-99.928 261.64 0 361.567 99.913 99.913 261.64 99.928 361.567 0 99.912-99.912 99.927-261.639 0-361.567zm-180.784 394.45c-117.816 0-213.667-95.851-213.667-213.667s95.851-213.666 213.667-213.666 213.666 95.851 213.666 213.667-95.85 213.666-213.666 213.666z"}),d("path",{d:"m298.39 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"}),d("path",{d:"m213.057 160.057c-11.598 0-21 9.402-21 21v149.333c0 11.598 9.402 21 21 21s21-9.402 21-21v-149.333c0-11.598-9.401-21-21-21z"})]}),user:d("svg",{fill:"currentColor",width:"24px",height:"24px",viewBox:"0 0 478.024 478.024",style:"enable-background:new 0 0 478.024 478.024;",children:d("path",{d:"M411.703,73.561c-45.117-47.093-107.542-73.67-172.76-73.55C107.145-0.155,0.166,106.554,0,238.353 c-0.082,65.17,26.492,127.538,73.55,172.623c0.137,0.136,0.188,0.341,0.324,0.461c1.382,1.331,2.884,2.458,4.284,3.738 c3.84,3.413,7.68,6.946,11.725,10.24c2.167,1.707,4.42,3.413,6.639,4.983c3.823,2.85,7.646,5.7,11.639,8.329 c2.714,1.707,5.513,3.413,8.294,5.12c3.686,2.219,7.356,4.454,11.162,6.485c3.226,1.707,6.519,3.174,9.796,4.727 c3.584,1.707,7.117,3.413,10.786,4.949c3.669,1.536,7.356,2.731,11.076,4.062s6.929,2.56,10.496,3.652 c4.028,1.212,8.158,2.15,12.254,3.157c3.413,0.836,6.724,1.792,10.24,2.475c4.71,0.939,9.489,1.536,14.268,2.185 c2.953,0.41,5.837,0.99,8.823,1.28c7.817,0.768,15.701,1.195,23.654,1.195s15.838-0.427,23.654-1.195 c2.987-0.29,5.871-0.87,8.823-1.28c4.779-0.649,9.557-1.246,14.268-2.185c3.413-0.683,6.827-1.707,10.24-2.475 c4.096-1.007,8.226-1.946,12.254-3.157c3.567-1.092,7.014-2.423,10.496-3.652c3.482-1.229,7.441-2.56,11.076-4.062 s7.202-3.26,10.786-4.949c3.277-1.553,6.571-3.021,9.796-4.727c3.806-2.031,7.475-4.267,11.162-6.485 c2.782-1.707,5.581-3.26,8.294-5.12c3.994-2.628,7.817-5.478,11.639-8.329c2.219-1.707,4.471-3.243,6.639-4.983 c4.045-3.243,7.885-6.69,11.725-10.24c1.399-1.28,2.901-2.406,4.284-3.738c0.136-0.119,0.188-0.324,0.324-0.461 C499.644,319.798,502.881,168.732,411.703,73.561z M373.344,393.107c-3.106,2.731-6.315,5.325-9.557,7.834 c-1.911,1.468-3.823,2.918-5.786,4.318c-3.089,2.236-6.229,4.352-9.421,6.383c-2.321,1.485-4.693,2.918-7.083,4.318 c-3.004,1.707-6.059,3.413-9.148,5.12c-2.731,1.399-5.513,2.714-8.311,4.011s-5.888,2.679-8.909,3.891 c-3.021,1.212-6.229,2.355-9.387,3.413c-2.884,0.99-5.768,2.014-8.687,2.884c-3.413,1.024-6.98,1.86-10.513,2.714 c-2.765,0.648-5.495,1.382-8.294,1.929c-4.045,0.785-8.175,1.331-12.322,1.894c-2.355,0.307-4.693,0.734-7.066,0.973 c-6.554,0.631-13.193,1.007-19.9,1.007s-13.346-0.375-19.9-1.007c-2.372-0.239-4.71-0.666-7.066-0.973 c-4.147-0.563-8.277-1.109-12.322-1.894c-2.799-0.546-5.53-1.28-8.294-1.929c-3.533-0.853-7.049-1.707-10.513-2.714 c-2.918-0.87-5.803-1.894-8.687-2.884c-3.157-1.092-6.315-2.202-9.387-3.413c-3.072-1.212-5.973-2.543-8.909-3.891 s-5.581-2.611-8.311-4.011c-3.089-1.604-6.144-3.294-9.148-5.12c-2.389-1.399-4.762-2.833-7.083-4.318 c-3.191-2.031-6.332-4.147-9.421-6.383c-1.963-1.399-3.874-2.85-5.786-4.318c-3.243-2.509-6.451-5.12-9.557-7.834 c-0.751-0.563-1.434-1.28-2.167-1.929c0.763-58.057,38.06-109.321,93.065-127.915c27.503,13.083,59.435,13.083,86.938,0 c55.004,18.594,92.301,69.857,93.065,127.915C374.76,391.827,374.077,392.476,373.344,393.107z M179.43,136.849 c18.479-32.864,60.1-44.525,92.964-26.046s44.525,60.1,26.046,92.964c-6.131,10.904-15.141,19.914-26.046,26.046 c-0.085,0-0.188,0-0.29,0.102c-4.526,2.519-9.309,4.545-14.268,6.042c-0.887,0.256-1.707,0.597-2.645,0.819 c-1.707,0.444-3.499,0.751-5.257,1.058c-3.31,0.579-6.659,0.915-10.018,1.007h-1.946c-3.359-0.092-6.708-0.428-10.018-1.007 c-1.707-0.307-3.516-0.614-5.256-1.058c-0.905-0.222-1.707-0.563-2.645-0.819c-4.959-1.497-9.742-3.522-14.268-6.042l-0.307-0.102 C172.612,211.334,160.951,169.713,179.43,136.849z M405.753,357.336L405.753,357.336c-10.952-51.083-44.59-94.39-91.375-117.64 c38.245-41.661,35.475-106.438-6.186-144.683c-41.661-38.245-106.438-35.475-144.683,6.186 c-35.954,39.166-35.954,99.332,0,138.497c-46.785,23.251-80.423,66.557-91.375,117.64C6.69,265.153,28.366,137.371,120.549,71.927 s219.965-43.768,285.409,48.415c24.601,34.653,37.807,76.104,37.786,118.602C443.744,281.405,430.46,322.802,405.753,357.336z"})}),newFollower:d("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),menu:d("svg",{width:"28",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),attach:d("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),smile:d("svg",{width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})}),language:d("svg",{width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802"})}),search:d("svg",{width:"28",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:d("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.69 4.69a.75.75 0 11-1.06 1.06l-4.69-4.69A8.25 8.25 0 012.25 10.5z","clip-rule":"evenodd"})}),global:d("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"})}),backArrow:d("svg",{width:"24",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),network:d("svg",{fill:"currentColor","enable-background":"new 0 0 512 512",height:"16px",width:"16px",viewBox:"0 0 512 512",children:d("g",{children:[d("g",{children:[d("g",{children:d("path",{d:"m256 150.5c-41.353 0-75-33.647-75-75s33.647-75 75-75 75 33.647 75 75-33.647 75-75 75z"})}),d("g",{children:d("path",{d:"m10.026 429c-20.669-35.815-8.35-81.768 27.466-102.451 36.551-21.085 82.083-7.806 102.451 27.451 20.722 35.87 8.44 81.717-27.451 102.451-35.96 20.737-81.757 8.396-102.466-27.451z"})}),d("g",{children:d("path",{d:"m399.508 456.451c-35.867-20.721-48.185-66.561-27.451-102.451 20.367-35.256 65.898-48.537 102.451-27.451 35.815 20.684 48.135 66.636 27.466 102.451-20.683 35.802-66.455 48.218-102.466 27.451z"})})]}),d("g",{children:d("path",{d:"m61.293 275.587-29.941-1.641c3.896-70.957 41.807-136.641 101.396-175.723l16.465 25.078c-51.665 33.883-84.522 90.821-87.92 152.286z"})}),d("g",{children:d("path",{d:"m450.707 275.587c-3.398-61.465-36.255-118.403-87.92-152.285l16.465-25.078c59.59 39.082 97.5 104.766 101.396 175.723z"})}),d("g",{children:d("path",{d:"m256 511.5c-35.684 0-69.8-8.115-101.426-24.097l13.535-26.777c54.785 27.715 120.996 27.715 175.781 0l13.535 26.777c-31.625 15.982-65.741 24.097-101.425 24.097z"})})]})}),QRcode:d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6",children:[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})]}),checkmark:d("svg",{height:"14",width:"14",x:"0px",y:"0px",viewBox:"0 0 191.667 191.667",children:d("path",{fill:"currentColor",d:"M95.833,0C42.991,0,0,42.99,0,95.833s42.991,95.834,95.833,95.834s95.833-42.991,95.833-95.834S148.676,0,95.833,0z M150.862,79.646l-60.207,60.207c-2.56,2.56-5.963,3.969-9.583,3.969c-3.62,0-7.023-1.409-9.583-3.969l-30.685-30.685 c-2.56-2.56-3.97-5.963-3.97-9.583c0-3.621,1.41-7.024,3.97-9.584c2.559-2.56,5.962-3.97,9.583-3.97c3.62,0,7.024,1.41,9.583,3.971 l21.101,21.1l50.623-50.623c2.56-2.56,5.963-3.969,9.583-3.969c3.62,0,7.023,1.409,9.583,3.969 C156.146,65.765,156.146,74.362,150.862,79.646z"})})};var wx={exports:{}},Yp={exports:{}},Z1;function rO(){return Z1||(Z1=1,function(e,t){(function(n,r){e.exports=r()})(Dn,function(){return function(){function n(i,s){if(this.app="loki",this.options=s||{},typeof i<"u"&&(this.app=i),this.catalog=null,!this.checkAvailability())throw new Error("indexedDB does not seem to be supported for your environment")}n.prototype.closeDatabase=function(){this.catalog&&this.catalog.db&&(this.catalog.db.close(),this.catalog.db=null)},n.prototype.checkAvailability=function(){return!!(typeof indexedDB<"u"&&indexedDB)},n.prototype.loadDatabase=function(i,s){var a=this.app,c=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new r(function(f){c.catalog=f,c.loadDatabase(i,s)});return}this.catalog.getAppKey(a,i,function(f){if(typeof s=="function"){if(f.id===0){s(null);return}s(f.val)}else console.log(f.val)})},n.prototype.loadKey=n.prototype.loadDatabase,n.prototype.saveDatabase=function(i,s,a){var c=this.app,f=this;function b(m){m&&m.success===!0?a(null):a(new Error("Error saving database")),f.options.closeAfterSave&&f.closeDatabase()}if(this.catalog===null||this.catalog.db===null){this.catalog=new r(function(m){f.saveDatabase(i,s,b)});return}this.catalog.setAppKey(c,i,s,b)},n.prototype.saveKey=n.prototype.saveDatabase,n.prototype.deleteDatabase=function(i,s){var a=this.app,c=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new r(function(f){c.catalog=f,c.deleteDatabase(i,s)});return}this.catalog.getAppKey(a,i,function(f){var b=f.id;b!==0?c.catalog.deleteAppKey(b,s):typeof s=="function"&&s({success:!0})})},n.prototype.deleteKey=n.prototype.deleteDatabase,n.prototype.deleteDatabasePartitions=function(i){var s=this;this.getDatabaseList(function(a){a.forEach(function(c){c.startsWith(i)&&s.deleteDatabase(c)})})},n.prototype.getDatabaseList=function(i){var s=this.app,a=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new r(function(c){a.catalog=c,a.getDatabaseList(i)});return}this.catalog.getAppKeys(s,function(c){for(var f=[],b=0;b<c.length;b++)f.push(c[b].key);typeof i=="function"?i(f):f.forEach(function(m){console.log(m)})})},n.prototype.getKeyList=n.prototype.getDatabaseList,n.prototype.getCatalogSummary=function(i){this.app;var s=this;if(this.catalog===null||this.catalog.db===null){this.catalog=new r(function(a){s.catalog=a,s.getCatalogSummary(i)});return}this.catalog.getAllKeys(function(a){for(var c=[],f,b,m,w,_,A=0;A<a.length;A++)f=a[A],m=f.app||"",w=f.key||"",_=f.val||"",b=m.length*2+w.length*2+_.length+1,c.push({app:f.app,key:f.key,size:b});typeof i=="function"?i(c):c.forEach(function(I){console.log(I)})})};function r(i){this.db=null,this.initializeLokiCatalog(i)}return r.prototype.initializeLokiCatalog=function(i){var s=indexedDB.open("LokiCatalog",1),a=this;s.onupgradeneeded=function(c){var f=c.target.result;if(f.objectStoreNames.contains("LokiAKV")&&f.deleteObjectStore("LokiAKV"),!f.objectStoreNames.contains("LokiAKV")){var b=f.createObjectStore("LokiAKV",{keyPath:"id",autoIncrement:!0});b.createIndex("app","app",{unique:!1}),b.createIndex("key","key",{unique:!1}),b.createIndex("appkey","appkey",{unique:!0})}},s.onsuccess=function(c){a.db=c.target.result,typeof i=="function"&&i(a)},s.onerror=function(c){throw c}},r.prototype.getAppKey=function(i,s,a){var c=this.db.transaction(["LokiAKV"],"readonly"),f=c.objectStore("LokiAKV"),b=f.index("appkey"),m=i+","+s,w=b.get(m);w.onsuccess=function(_){return function(A){var I=A.target.result;(I===null||typeof I>"u")&&(I={id:0,success:!1}),typeof _=="function"?_(I):console.log(I)}}(a),w.onerror=function(_){return function(A){if(typeof _=="function")_({id:0,success:!1});else throw A}}(a)},r.prototype.getAppKeyById=function(i,s,a){var c=this.db.transaction(["LokiAKV"],"readonly"),f=c.objectStore("LokiAKV"),b=f.get(i);b.onsuccess=function(m,w){return function(_){typeof w=="function"?w(_.target.result,m):console.log(_.target.result)}}(a,s)},r.prototype.setAppKey=function(i,s,a,c){var f=this.db.transaction(["LokiAKV"],"readwrite"),b=f.objectStore("LokiAKV"),m=b.index("appkey"),w=i+","+s,_=m.get(w);_.onsuccess=function(A){var I=A.target.result;I==null?I={app:i,key:s,appkey:i+","+s,val:a}:I.val=a;var C=b.put(I);C.onerror=function(R){return function($){typeof R=="function"?R({success:!1}):(console.error("LokiCatalog.setAppKey (set) onerror"),console.error(_.error))}}(c),C.onsuccess=function(R){return function($){typeof R=="function"&&R({success:!0})}}(c)},_.onerror=function(A){return function(I){typeof A=="function"?A({success:!1}):(console.error("LokiCatalog.setAppKey (get) onerror"),console.error(_.error))}}(c)},r.prototype.deleteAppKey=function(i,s){var a=this.db.transaction(["LokiAKV"],"readwrite"),c=a.objectStore("LokiAKV"),f=c.delete(i);f.onsuccess=function(b){return function(m){typeof b=="function"&&b({success:!0})}}(s),f.onerror=function(b){return function(m){typeof b=="function"?b({success:!1}):(console.error("LokiCatalog.deleteAppKey raised onerror"),console.error(f.error))}}(s)},r.prototype.getAppKeys=function(i,s){var a=this.db.transaction(["LokiAKV"],"readonly"),c=a.objectStore("LokiAKV"),f=c.index("app"),b=IDBKeyRange.only(i),m=f.openCursor(b),w=[];m.onsuccess=function(_,A){return function(I){var C=I.target.result;if(C){var R=C.value;_.push(R),C.continue()}else typeof A=="function"?A(_):console.log(_)}}(w,s),m.onerror=function(_){return function(A){typeof _=="function"?_(null):(console.error("LokiCatalog.getAppKeys raised onerror"),console.error(A))}}(s)},r.prototype.getAllKeys=function(i){var s=this.db.transaction(["LokiAKV"],"readonly"),a=s.objectStore("LokiAKV"),c=a.openCursor(),f=[];c.onsuccess=function(b,m){return function(w){var _=w.target.result;if(_){var A=_.value;b.push(A),_.continue()}else typeof m=="function"?m(b):console.log(b)}}(f,i),c.onerror=function(b){return function(m){typeof b=="function"&&b(null)}}(i)},n}()})}(Yp)),Yp.exports}const iO={},sO=Object.freeze(Object.defineProperty({__proto__:null,default:iO},Symbol.toStringTag,{value:"Module"})),oO=So(sO);(function(e,t){(function(n,r){e.exports=r()})(Dn,function(){return function(){var n=Object.prototype.hasOwnProperty;function r(h){var v,k;if(Array.isArray(h)){for(k=0;k<h.length;k++)r(h[k]);i(h)}else if(h!==null&&typeof h=="object"){for(v in h)h.hasOwnProperty(v)&&r(h[v]);i(h)}}function i(h){Object.isFrozen(h)||Object.freeze(h)}function s(h){return Object.isFrozen(h)?P(h,"shallow"):h}var a={copyProperties:function(h,v){var k;for(k in h)v[k]=h[k]},resolveTransformObject:function(h,v,k){var T,O;if(typeof k!="number"&&(k=0),++k>=10)return h;for(T in h)typeof h[T]=="string"&&h[T].indexOf("[%lktxp]")===0?(O=h[T].substring(8),v.hasOwnProperty(O)&&(h[T]=v[O])):typeof h[T]=="object"&&(h[T]=a.resolveTransformObject(h[T],v,k));return h},resolveTransformParams:function(h,v){var k,T,O=[];if(typeof v>"u")return h;for(k=0;k<h.length;k++)T=P(h[k],"shallow-recurse-objects"),O.push(a.resolveTransformObject(T,v));return O},getIn:function(h,v,k){if(h!=null){if(!k)return h[v];if(typeof v=="string"&&(v=v.split(".")),!Array.isArray(v))throw new Error("path must be a string or array. Found "+typeof v);for(var T=0,O=v.length;h!=null&&T<O;)h=h[v[T++]];return T&&T==O?h:void 0}}},c={aeq:f,lt:b,gt:m};function f(h,v){var k,T,O,z;if(h===v)return!0;if(!h||!v||h===!0||v===!0||h!==h||v!==v){switch(h){case void 0:O=1;break;case null:O=1;break;case!1:O=3;break;case!0:O=4;break;case"":O=5;break;default:O=h===h?9:0;break}switch(v){case void 0:z=1;break;case null:z=1;break;case!1:z=3;break;case!0:z=4;break;case"":z=5;break;default:z=v===v?9:0;break}if(O!==9||z!==9)return O===z}return k=Number(h),T=Number(v),k===k||T===T?k===T:(k=h.toString(),T=v.toString(),k==T)}function b(h,v,k){var T,O,z,te;if(!h||!v||h===!0||v===!0||h!==h||v!==v){switch(h){case void 0:z=1;break;case null:z=1;break;case!1:z=3;break;case!0:z=4;break;case"":z=5;break;default:z=h===h?9:0;break}switch(v){case void 0:te=1;break;case null:te=1;break;case!1:te=3;break;case!0:te=4;break;case"":te=5;break;default:te=v===v?9:0;break}if(z!==9||te!==9)return z===te?k:z<te}return T=Number(h),O=Number(v),T===T&&O===O?T<O?!0:T>O?!1:k:T===T&&O!==O?!0:O===O&&T!==T?!1:h<v?!0:h>v?!1:h==v?k:(T=h.toString(),O=v.toString(),T<O?!0:T==O?k:!1)}function m(h,v,k){var T,O,z,te;if(!h||!v||h===!0||v===!0||h!==h||v!==v){switch(h){case void 0:z=1;break;case null:z=1;break;case!1:z=3;break;case!0:z=4;break;case"":z=5;break;default:z=h===h?9:0;break}switch(v){case void 0:te=1;break;case null:te=1;break;case!1:te=3;break;case!0:te=4;break;case"":te=5;break;default:te=v===v?9:0;break}if(z!==9||te!==9)return z===te?k:z>te}return T=Number(h),O=Number(v),T===T&&O===O?T>O?!0:T<O?!1:k:T===T&&O!==O?!1:O===O&&T!==T||h>v?!0:h<v?!1:h==v?k:(T=h.toString(),O=v.toString(),T>O?!0:T==O?k:!1)}function w(h,v,k){return c.aeq(h,v)?0:c.lt(h,v,!1)?k?1:-1:c.gt(h,v,!1)?k?-1:1:0}function _(h,v,k){for(var T=0,O,z,te,ie,pe,_e=0,je=h.length;_e<je;_e++)if(O=h[_e],z=O[0],~z.indexOf(".")?(pe=z.split("."),te=a.getIn(v,pe,!0),ie=a.getIn(k,pe,!0)):(te=v[z],ie=k[z]),T=w(te,ie,O[1]),T!==0)return T;return 0}function A(h,v,k,T,O,z){var te=z||0,ie=v[te],pe=!1,_e;if(typeof h=="object"&&ie in h&&(_e=h[ie]),te+1>=v.length)pe=k(_e,T,O);else if(Array.isArray(_e))for(var je=0,tt=_e.length;je<tt&&(pe=A(_e[je],v,k,T,O,te+1),pe!==!0);je+=1);else pe=A(_e,v,k,T,O,te+1);return pe}function I(h){return typeof h=="string"||Array.isArray(h)?function(v){return h.indexOf(v)!==-1}:typeof h=="object"&&h!==null?function(v){return n.call(h,v)}:null}function C(h,v,k){for(var T in v)if(n.call(v,T))return R[T](h,v[T],k);return!1}var R={$eq:function(h,v){return h===v},$aeq:function(h,v){return h==v},$ne:function(h,v){return v!==v?h===h:h!==v},$dteq:function(h,v){return c.aeq(h,v)},$gt:function(h,v){return c.gt(h,v,!1)},$gte:function(h,v){return c.gt(h,v,!0)},$lt:function(h,v){return c.lt(h,v,!1)},$lte:function(h,v){return c.lt(h,v,!0)},$jgt:function(h,v){return h>v},$jgte:function(h,v){return h>=v},$jlt:function(h,v){return h<v},$jlte:function(h,v){return h<=v},$between:function(h,v){return h==null?!1:c.gt(h,v[0],!0)&&c.lt(h,v[1],!0)},$jbetween:function(h,v){return h==null?!1:h>=v[0]&&h<=v[1]},$in:function(h,v){return v.indexOf(h)!==-1},$inSet:function(h,v){return v.has(h)},$nin:function(h,v){return v.indexOf(h)===-1},$keyin:function(h,v){return h in v},$nkeyin:function(h,v){return!(h in v)},$definedin:function(h,v){return v[h]!==void 0},$undefinedin:function(h,v){return v[h]===void 0},$regex:function(h,v){return v.test(h)},$containsString:function(h,v){return typeof h=="string"&&h.indexOf(v)!==-1},$containsNone:function(h,v){return!R.$containsAny(h,v)},$containsAny:function(h,v){var k=I(h);return k!==null?Array.isArray(v)?v.some(k):k(v):!1},$contains:function(h,v){var k=I(h);return k!==null?Array.isArray(v)?v.every(k):k(v):!1},$elemMatch:function(h,v){return Array.isArray(h)?h.some(function(k){return Object.keys(v).every(function(T){var O=v[T];return typeof O=="object"&&O||(O={$eq:O}),T.indexOf(".")!==-1?A(k,T.split("."),C,v[T],k):C(k[T],O,k)})}):!1},$type:function(h,v,k){var T=typeof h;return T==="object"&&(Array.isArray(h)?T="array":h instanceof Date&&(T="date")),typeof v!="object"?T===v:C(T,v,k)},$finite:function(h,v){return v===isFinite(h)},$size:function(h,v,k){return Array.isArray(h)?typeof v!="object"?h.length===v:C(h.length,v,k):!1},$len:function(h,v,k){return typeof h=="string"?typeof v!="object"?h.length===v:C(h.length,v,k):!1},$where:function(h,v){return v(h)===!0},$not:function(h,v,k){return!C(h,v,k)},$and:function(h,v,k){for(var T=0,O=v.length;T<O;T+=1)if(!C(h,v[T],k))return!1;return!0},$or:function(h,v,k){for(var T=0,O=v.length;T<O;T+=1)if(C(h,v[T],k))return!0;return!1},$exists:function(h,v){return v?h!==void 0:h===void 0}},$=["$eq","$aeq","$ne","$dteq","$gt","$gte","$lt","$lte","$jgt","$jgte","$jlt","$jlte","$type"];$.forEach(function(h){var v=R[h];R["$"+h]=function(k,T,O){if(typeof T=="string")return v(k,O[T]);if(typeof T=="function")return v(k,T(O));throw new Error("Invalid argument to $$ matcher")}});var L={$eq:R.$eq,$aeq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};function P(h,v){if(h==null)return null;var k=v||"parse-stringify",T;switch(k){case"parse-stringify":T=JSON.parse(JSON.stringify(h));break;case"jquery-extend-deep":T=jQuery.extend(!0,{},h);break;case"shallow":T=Object.create(h.constructor.prototype),Object.keys(h).map(function(z){T[z]=h[z]});break;case"shallow-assign":T=Object.create(h.constructor.prototype),Object.assign(T,h);break;case"shallow-recurse-objects":T=P(h,"shallow");var O=Object.keys(h);O.forEach(function(z){typeof h[z]=="object"&&h[z].constructor.name==="Object"?T[z]=P(h[z],"shallow-recurse-objects"):Array.isArray(h[z])&&(T[z]=N(h[z],"shallow-recurse-objects"))});break}return T}function N(h,v){if(v=="parse-stringify")return P(h,v);for(var k=[],T=0,O=h.length;T<O;T++)k[T]=P(h[T],v);return k}function M(){try{return window&&window.localStorage!==void 0&&window.localStorage!==null}catch{return!1}}function U(){}U.prototype.events={},U.prototype.asyncListeners=!1,U.prototype.on=function(h,v){var k,T=this;return Array.isArray(h)?(h.forEach(function(O){T.on(O,v)}),v):(k=this.events[h],k||(k=this.events[h]=[]),k.push(v),v)},U.prototype.emit=function(h){var v=this,k;if(h&&this.events[h])this.events[h].length&&(k=Array.prototype.slice.call(arguments,1),this.events[h].forEach(function(T){v.asyncListeners?setTimeout(function(){T.apply(v,k)},1):T.apply(v,k)}));else throw new Error("No event "+h+" defined")},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(h,v){var k=this;if(Array.isArray(h)){h.forEach(function(O){k.removeListener(O,v)});return}if(this.events[h]){var T=this.events[h];T.splice(T.indexOf(v),1)}};function p(h,v){this.filename=h||"loki.db",this.collections=[],this.databaseVersion=1.5,this.engineVersion=1.5,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.throttledSaves=!0,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.throttledSavePending=!1,this.throttledCallbacks=[],this.verbose=v&&v.hasOwnProperty("verbose")?v.verbose:!1,this.events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]};var k=function(){return typeof Dn<"u"&&(Dn.android||Dn.NSObject)?"NATIVESCRIPT":typeof window>"u"||typeof Dn<"u"&&Dn.window&&typeof process<"u"?"NODEJS":typeof document<"u"?document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER":"CORDOVA"};v&&v.hasOwnProperty("env")?this.ENV=v.env:this.ENV=k(),this.ENV==="undefined"&&(this.ENV="NODEJS"),this.configureOptions(v,!0),this.on("init",this.clearChanges)}p.prototype=new U,p.prototype.constructor=p,p.prototype.getIndexedAdapter=function(){var h;return typeof Ac=="function"&&(h=rO()),h},p.prototype.configureOptions=function(h,v){var k={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage",MEMORY:"memory"},T={fs:ce,localStorage:me,memory:Z};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,typeof h<"u"){if(this.options=h,this.options.hasOwnProperty("persistenceMethod")&&typeof T[h.persistenceMethod]=="function"&&(this.persistenceMethod=h.persistenceMethod,this.persistenceAdapter=new T[h.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=h.adapter,this.options.adapter=null,this.isIncremental=this.persistenceAdapter.mode==="incremental"),h.autoload&&v){var O=this;setTimeout(function(){O.loadDatabase(h,h.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.options.hasOwnProperty("autosaveCallback")?this.autosaveEnable(h,h.autosaveCallback):this.autosaveEnable()),this.options.hasOwnProperty("throttledSaves")&&(this.throttledSaves=this.options.throttledSaves)}this.options.hasOwnProperty("serializationMethod")||(this.options.serializationMethod="normal"),this.options.hasOwnProperty("destructureDelimiter")||(this.options.destructureDelimiter=`$<
`),this.persistenceAdapter===null&&(this.persistenceMethod=k[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new T[this.persistenceMethod]))},p.prototype.copy=function(h){var v=new p(this.filename,{env:"NA"}),k,T;if(h=h||{},v.loadJSONObject(this,{retainDirtyFlags:!0}),h.hasOwnProperty("removeNonSerializable")&&h.removeNonSerializable===!0)for(v.autosaveHandle=null,v.persistenceAdapter=null,k=v.collections.length,T=0;T<k;T++)v.collections[T].constraints=null,v.collections[T].ttl=null;return v},p.prototype.addCollection=function(h,v){var k,T=this.collections.length;if(v&&v.disableMeta===!0){if(v.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(v.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof v.ttl=="number"&&v.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}for(k=0;k<T;k+=1)if(this.collections[k].name===h)return this.collections[k];var O=new G(h,v);return O.isIncremental=this.isIncremental,this.collections.push(O),this.verbose&&(O.lokiConsoleWrapper=console),O},p.prototype.loadCollection=function(h){if(!h.name)throw new Error("Collection must have a name property to be loaded");this.collections.push(h)},p.prototype.getCollection=function(h){var v,k=this.collections.length;for(v=0;v<k;v+=1)if(this.collections[v].name===h)return this.collections[v];return this.emit("warning","collection "+h+" not found"),null},p.prototype.renameCollection=function(h,v){var k=this.getCollection(h);return k&&(k.name=v),k},p.prototype.listCollections=function(){for(var h=this.collections.length,v=[];h--;)v.push({name:this.collections[h].name,type:this.collections[h].objType,count:this.collections[h].data.length});return v},p.prototype.removeCollection=function(h){var v,k=this.collections.length;for(v=0;v<k;v+=1)if(this.collections[v].name===h){var T=new G(h,{}),O=this.collections[v];for(var z in O)O.hasOwnProperty(z)&&T.hasOwnProperty(z)&&(O[z]=T[z]);this.collections.splice(v,1);return}},p.prototype.getName=function(){return this.name},p.prototype.serializeReplacer=function(h,v){switch(h){case"autosaveHandle":case"persistenceAdapter":case"constraints":case"ttl":return null;case"throttledSavePending":case"throttledCallbacks":return;case"lokiConsoleWrapper":return null;default:return v}},p.prototype.serialize=function(h){switch(h=h||{},h.hasOwnProperty("serializationMethod")||(h.serializationMethod=this.options.serializationMethod),h.serializationMethod){case"normal":return JSON.stringify(this,this.serializeReplacer);case"pretty":return JSON.stringify(this,this.serializeReplacer,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this,this.serializeReplacer)}},p.prototype.toJson=p.prototype.serialize,p.prototype.serializeDestructured=function(h){var v,k,T,O,z=[],te;if(h=h||{},h.hasOwnProperty("partitioned")||(h.partitioned=!1),h.hasOwnProperty("delimited")||(h.delimited=!0),h.hasOwnProperty("delimiter")||(h.delimiter=this.options.destructureDelimiter),h.partitioned===!0&&h.hasOwnProperty("partition")&&h.partition>=0)return this.serializeCollection({delimited:h.delimited,delimiter:h.delimiter,collectionIndex:h.partition});for(te=new p(this.filename),te.loadJSONObject(this),v=0;v<te.collections.length;v++)te.collections[v].data=[];if(h.partitioned===!0&&h.partition===-1)return te.serialize({serializationMethod:"normal"});for(z.push(te.serialize({serializationMethod:"normal"})),te=null,v=0;v<this.collections.length;v++)if(T=this.serializeCollection({delimited:h.delimited,delimiter:h.delimiter,collectionIndex:v}),h.partitioned===!1&&h.delimited===!1){if(!Array.isArray(T))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(O=T.length,k=0;k<O;k++)z.push(T[k]),T[k]=null;z.push("")}else z.push(T);return h.partitioned?(h.delimited,z):h.delimited?(z.push(""),z.join(h.delimiter)):(z.push(""),z)},p.prototype.serializeCollection=function(h){var v,k,T=[];if(h=h||{},h.hasOwnProperty("delimited")||(h.delimited=!0),!h.hasOwnProperty("collectionIndex"))throw new Error("serializeCollection called without 'collectionIndex' option");for(v=this.collections[h.collectionIndex].data.length,T=[],k=0;k<v;k++)T.push(JSON.stringify(this.collections[h.collectionIndex].data[k]));return h.delimited?(T.push(""),T.join(h.delimiter)):T},p.prototype.deserializeDestructured=function(h,v){var k=[],T,O,z=0,te,ie=1,pe=!1,_e;if(v=v||{},v.hasOwnProperty("partitioned")||(v.partitioned=!1),v.hasOwnProperty("delimited")||(v.delimited=!0),v.hasOwnProperty("delimiter")||(v.delimiter=this.options.destructureDelimiter),v.partitioned){if(v.hasOwnProperty("partition"))return v.partition===-1?(O=JSON.parse(h[0]),O):this.deserializeCollection(h[v.partition+1],v);for(O=JSON.parse(h[0]),te=O.collections.length,z=0;z<te;z++)O.collections[z].data=this.deserializeCollection(h[z+1],v);return O}if(v.delimited){if(k=h.split(v.delimiter),h=null,T=k.length,T===0)return null}else k=h;for(O=JSON.parse(k[0]),te=O.collections.length,k[0]=null;!pe;)k[ie],k[ie]===""?++z>te&&(pe=!0):(_e=JSON.parse(k[ie]),O.collections[z].data.push(_e)),k[ie++]=null;return O},p.prototype.deserializeCollection=function(h,v){var k=[],T,O;for(v=v||{},v.hasOwnProperty("partitioned")||(v.partitioned=!1),v.hasOwnProperty("delimited")||(v.delimited=!0),v.hasOwnProperty("delimiter")||(v.delimiter=this.options.destructureDelimiter),v.delimited?(k=h.split(v.delimiter),k.pop()):k=h,O=k.length,T=0;T<O;T++)k[T]=JSON.parse(k[T]);return k},p.prototype.loadJSON=function(h,v){var k;if(h.length===0)k={};else switch(this.options.serializationMethod){case"normal":case"pretty":k=JSON.parse(h);break;case"destructured":k=this.deserializeDestructured(h);break;default:k=JSON.parse(h);break}this.loadJSONObject(k,v)},p.prototype.loadJSONObject=function(h,v){var k=0,T=h.collections?h.collections.length:0,O,z,te,ie,pe,_e;this.name=h.name,h.hasOwnProperty("throttledSaves")&&v&&!v.hasOwnProperty("throttledSaves")&&(this.throttledSaves=h.throttledSaves),this.collections=[];function je(yt){var St=v[yt.name],ot;return St.proto?(ot=St.inflate||a.copyProperties,function(Ke){var gt=new St.proto;return ot(Ke,gt),gt}):St.inflate}for(k;k<T;k+=1){if(O=h.collections[k],z=this.addCollection(O.name,{disableChangesApi:O.disableChangesApi,disableDeltaChangesApi:O.disableDeltaChangesApi,disableMeta:O.disableMeta,disableFreeze:O.hasOwnProperty("disableFreeze")?O.disableFreeze:!0}),z.adaptiveBinaryIndices=O.hasOwnProperty("adaptiveBinaryIndices")?O.adaptiveBinaryIndices===!0:!1,z.transactional=O.transactional,z.asyncListeners=O.asyncListeners,z.cloneObjects=O.cloneObjects,z.cloneMethod=O.cloneMethod||"parse-stringify",z.autoupdate=O.autoupdate,z.changes=O.changes,z.dirtyIds=O.dirtyIds||[],v&&v.retainDirtyFlags===!0?z.dirty=O.dirty:z.dirty=!1,te=O.data.length,ie=0,v&&v.hasOwnProperty(O.name))for(pe=je(O),ie;ie<te;ie++)_e=pe(O.data[ie]),z.data[ie]=_e,z.addAutoUpdateObserver(_e),z.disableFreeze||r(z.data[ie]);else for(ie;ie<te;ie++)z.data[ie]=O.data[ie],z.addAutoUpdateObserver(z.data[ie]),z.disableFreeze||r(z.data[ie]);if(z.maxId=typeof O.maxId>"u"?0:O.maxId,typeof O.binaryIndices<"u"&&(z.binaryIndices=O.binaryIndices),typeof O.transforms<"u"&&(z.transforms=O.transforms),z.uniqueNames=[],O.hasOwnProperty("uniqueNames")&&(z.uniqueNames=O.uniqueNames),!(typeof O.DynamicViews>"u")){for(var tt=0;tt<O.DynamicViews.length;tt++){var Je=O.DynamicViews[tt],et=z.addDynamicView(Je.name,Je.options);et.resultdata=Je.resultdata,et.resultsdirty=Je.resultsdirty,et.filterPipeline=Je.filterPipeline,et.sortCriteriaSimple=Je.sortCriteriaSimple,et.sortCriteria=Je.sortCriteria,et.sortFunction=null,et.sortDirty=Je.sortDirty,z.disableFreeze||(r(et.filterPipeline),et.sortCriteriaSimple?r(et.sortCriteriaSimple):et.sortCriteria&&r(et.sortCriteria)),et.resultset.filteredrows=Je.resultset.filteredrows,et.resultset.filterInitialized=Je.resultset.filterInitialized,et.rematerialize({removeWhereFilters:!0})}h.databaseVersion<1.5&&(z.ensureAllIndexes(!0),z.dirty=!0)}}},p.prototype.close=function(h){this.autosave&&(this.autosaveDisable(),this.autosaveDirty()&&(this.saveDatabase(h),h=void 0)),h&&this.on("close",h),this.emit("close")},p.prototype.generateChangesNotification=function(h){function v(O){return O.name}var k=[],T=h||this.collections.map(v);return this.collections.forEach(function(O){T.indexOf(v(O))!==-1&&(k=k.concat(O.getChanges()))}),k},p.prototype.serializeChanges=function(h){return JSON.stringify(this.generateChangesNotification(h))},p.prototype.clearChanges=function(){this.collections.forEach(function(h){h.flushChanges&&h.flushChanges()})};function Z(h){this.hashStore={},this.options=h||{},this.options.hasOwnProperty("asyncResponses")||(this.options.asyncResponses=!1),this.options.hasOwnProperty("asyncTimeout")||(this.options.asyncTimeout=50)}Z.prototype.loadDatabase=function(h,v){var k=this;this.options.asyncResponses?setTimeout(function(){k.hashStore.hasOwnProperty(h)?v(k.hashStore[h].value):v(null)},this.options.asyncTimeout):this.hashStore.hasOwnProperty(h)?v(this.hashStore[h].value):v(null)},Z.prototype.saveDatabase=function(h,v,k){var T=this,O;this.options.asyncResponses?setTimeout(function(){O=T.hashStore.hasOwnProperty(h)?T.hashStore[h].savecount:0,T.hashStore[h]={savecount:O+1,lastsave:new Date,value:v},k()},this.options.asyncTimeout):(O=this.hashStore.hasOwnProperty(h)?this.hashStore[h].savecount:0,this.hashStore[h]={savecount:O+1,lastsave:new Date,value:v},k())},Z.prototype.deleteDatabase=function(h,v){this.hashStore.hasOwnProperty(h)&&delete this.hashStore[h],typeof v=="function"&&v()};function J(h,v){if(this.mode="reference",this.adapter=null,this.options=v||{},this.dbref=null,this.dbname="",this.pageIterator={},h){if(h.mode==="reference")throw new Error("LokiPartitioningAdapter cannot be instantiated with a reference mode adapter");this.adapter=h}else throw new Error("LokiPartitioningAdapter requires a (non-reference mode) adapter on construction");this.options.hasOwnProperty("paging")||(this.options.paging=!1),this.options.hasOwnProperty("pageSize")||(this.options.pageSize=25*1024*1024),this.options.hasOwnProperty("delimiter")||(this.options.delimiter=`$<
`)}J.prototype.loadDatabase=function(h,v){var k=this;this.dbname=h,this.dbref=new p(h),this.adapter.loadDatabase(h,function(T){if(!T){v(T);return}typeof T!="string"&&v(new Error("LokiPartitioningAdapter received an unexpected response from inner adapter loadDatabase()"));var O=JSON.parse(T);if(k.dbref.loadJSONObject(O),O=null,k.dbref.collections.length,k.dbref.collections.length===0){v(k.dbref);return}k.pageIterator={collection:0,pageIndex:0},k.loadNextPartition(0,function(){v(k.dbref)})})},J.prototype.loadNextPartition=function(h,v){var k=this.dbname+"."+h,T=this;if(this.options.paging===!0){this.pageIterator.pageIndex=0,this.loadNextPage(v);return}this.adapter.loadDatabase(k,function(O){var z=T.dbref.deserializeCollection(O,{delimited:!0,collectionIndex:h});T.dbref.collections[h].data=z,++h<T.dbref.collections.length?T.loadNextPartition(h,v):v()})},J.prototype.loadNextPage=function(h){var v=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,k=this;this.adapter.loadDatabase(v,function(T){var O=T.split(k.options.delimiter);T="";var z=O.length,te,ie=O[z-1]==="";for(ie&&(O.pop(),z=O.length,O[z-1]===""&&z===1&&(O.pop(),z=O.length)),te=0;te<z;te++)k.dbref.collections[k.pageIterator.collection].data.push(JSON.parse(O[te])),O[te]=null;O=[],ie?++k.pageIterator.collection<k.dbref.collections.length?k.loadNextPartition(k.pageIterator.collection,h):h():(k.pageIterator.pageIndex++,k.loadNextPage(h))})},J.prototype.exportDatabase=function(h,v,k){var T,O=v.collections.length;for(this.dbref=v,this.dbname=h,this.dirtyPartitions=[-1],T=0;T<O;T++)v.collections[T].dirty&&this.dirtyPartitions.push(T);this.saveNextPartition(function(z){k(z)})},J.prototype.saveNextPartition=function(h){var v=this,k=this.dirtyPartitions.shift(),T=this.dbname+(k===-1?"":"."+k);if(this.options.paging&&k!==-1){this.pageIterator={collection:k,docIndex:0,pageIndex:0},this.saveNextPage(function(z){v.dirtyPartitions.length===0?h(z):v.saveNextPartition(h)});return}var O=this.dbref.serializeDestructured({partitioned:!0,delimited:!0,partition:k});this.adapter.saveDatabase(T,O,function(z){if(z){h(z);return}v.dirtyPartitions.length===0?h(null):v.saveNextPartition(h)})},J.prototype.saveNextPage=function(h){var v=this,k=this.dbref.collections[this.pageIterator.collection],T=this.dbname+"."+this.pageIterator.collection+"."+this.pageIterator.pageIndex,O=0,z=k.data.length,te=this.options.delimiter.length,ie="",pe="",_e=!1,je=!1,tt=function(Je){pe="",Je&&h(Je),_e?h(null):(v.pageIterator.pageIndex++,v.saveNextPage(h))};for(k.data.length===0&&(_e=!0);;)if(_e||(ie=JSON.stringify(k.data[this.pageIterator.docIndex]),pe+=ie,O+=ie.length,++this.pageIterator.docIndex>=z&&(_e=!0)),O>=this.options.pageSize&&(je=!0),(!je||_e)&&(pe+=this.options.delimiter,O+=te),_e||je){this.adapter.saveDatabase(T,pe,tt);return}};function ce(){try{this.fs=oO}catch{this.fs=null}}ce.prototype.loadDatabase=function(v,k){var T=this;this.fs.stat(v,function(O,z){!O&&z.isFile()?T.fs.readFile(v,{encoding:"utf8"},function(ie,pe){k(ie?new Error(ie):pe)}):k(null)})},ce.prototype.saveDatabase=function(v,k,T){var O=this,z=v+"~";this.fs.writeFile(z,k,function(ie){ie?T(new Error(ie)):O.fs.rename(z,v,T)})},ce.prototype.deleteDatabase=function(v,k){this.fs.unlink(v,function(O){O?k(new Error(O)):k()})};function me(){}me.prototype.loadDatabase=function(v,k){M()?k(localStorage.getItem(v)):k(new Error("localStorage is not available"))},me.prototype.saveDatabase=function(v,k,T){M()?(localStorage.setItem(v,k),T(null)):T(new Error("localStorage is not available"))},me.prototype.deleteDatabase=function(v,k){M()?(localStorage.removeItem(v),k(null)):k(new Error("localStorage is not available"))},p.prototype.throttledSaveDrain=function(h,v){var k=this,T=new Date().getTime();if(this.throttledSaves||h(!0),v=v||{},v.hasOwnProperty("recursiveWait")||(v.recursiveWait=!0),v.hasOwnProperty("recursiveWaitLimit")||(v.recursiveWaitLimit=!1),v.hasOwnProperty("recursiveWaitLimitDuration")||(v.recursiveWaitLimitDuration=2e3),v.hasOwnProperty("started")||(v.started=new Date().getTime()),this.throttledSaves&&this.throttledSavePending)if(v.recursiveWait)this.throttledCallbacks.push(function(){if(k.throttledSavePending){if(v.recursiveWaitLimit&&T-v.started>v.recursiveWaitLimitDuration){h(!1);return}k.throttledSaveDrain(h,v);return}else{h(!0);return}});else{this.throttledCallbacks.push(h);return}else h(!0)},p.prototype.loadDatabaseInternal=function(h,v){var k=v||function(O,z){if(O)throw O},T=this;this.persistenceAdapter!==null?this.persistenceAdapter.loadDatabase(this.filename,function(z){if(typeof z=="string"){var te=!1;try{T.loadJSON(z,h||{}),te=!0}catch(ie){k(ie)}te&&(k(null),T.emit("loaded","database "+T.filename+" loaded"))}else{if(!z){k(null),T.emit("loaded","empty database "+T.filename+" loaded");return}if(z instanceof Error){k(z);return}if(typeof z=="object"){T.loadJSONObject(z,h||{}),k(null),T.emit("loaded","database "+T.filename+" loaded");return}k("unexpected adapter response : "+z)}}):k(new Error("persistenceAdapter not configured"))},p.prototype.loadDatabase=function(h,v){var k=this;if(!this.throttledSaves){this.loadDatabaseInternal(h,v);return}this.throttledSaveDrain(function(T){if(T){k.throttledSavePending=!0,k.loadDatabaseInternal(h,function(O){k.throttledCallbacks.length===0?k.throttledSavePending=!1:k.saveDatabase(),typeof v=="function"&&v(O)});return}else typeof v=="function"&&v(new Error("Unable to pause save throttling long enough to read database"))},h)},p.prototype.saveDatabaseInternal=function(h){var v=h||function(O){if(O)throw O},k=this;if(!this.persistenceAdapter){v(new Error("persistenceAdapter not configured"));return}if(this.persistenceAdapter.mode==="incremental"){var T;this.ignoreAutosave=!0,this.persistenceAdapter.saveDatabase(this.filename,function(){if(k.ignoreAutosave=!1,T){v(new Error("adapter error - getLokiCopy called more than once"));return}var z=k.copy({removeNonSerializable:!0});return T=k.collections.map(function(te){return[te.dirty,te.dirtyIds]}),k.collections.forEach(function(te){te.dirty=!1,te.dirtyIds=[]}),z},function(z){k.ignoreAutosave=!1,z&&T&&k.collections.forEach(function(te,ie){var pe=T[ie];te.dirty=te.dirty||pe[0],te.dirtyIds=te.dirtyIds.concat(pe[1])}),v(z)})}else this.persistenceAdapter.mode==="reference"&&typeof this.persistenceAdapter.exportDatabase=="function"?this.persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}),function(z){k.autosaveClearFlags(),v(z)}):(this.autosaveClearFlags(),this.persistenceAdapter.saveDatabase(this.filename,this.serialize(),function(z){v(z)}))},p.prototype.saveDatabase=function(h){if(!this.throttledSaves){this.saveDatabaseInternal(h);return}if(this.throttledSavePending){this.throttledCallbacks.push(h);return}var v=this.throttledCallbacks;this.throttledCallbacks=[],v.unshift(h),this.throttledSavePending=!0;var k=this;this.saveDatabaseInternal(function(T){k.throttledSavePending=!1,v.forEach(function(O){typeof O=="function"&&setTimeout(function(){O(T)},1)}),k.throttledCallbacks.length>0&&k.saveDatabase()})},p.prototype.save=p.prototype.saveDatabase,p.prototype.deleteDatabase=function(h,v){var k=v||function(T,O){if(T)throw T};typeof h=="function"&&!v&&(k=h),this.persistenceAdapter!==null?this.persistenceAdapter.deleteDatabase(this.filename,function(O){k(O)}):k(new Error("persistenceAdapter not configured"))},p.prototype.autosaveDirty=function(){for(var h=0;h<this.collections.length;h++)if(this.collections[h].dirty)return!0;return!1},p.prototype.autosaveClearFlags=function(){for(var h=0;h<this.collections.length;h++)this.collections[h].dirty=!1},p.prototype.autosaveEnable=function(h,v){this.autosave=!0;var k=5e3,T=this;typeof this.autosaveInterval<"u"&&this.autosaveInterval!==null&&(k=this.autosaveInterval),this.autosaveHandle=setInterval(function(){T.autosaveDirty()&&!T.ignoreAutosave&&T.saveDatabase(v)},k)},p.prototype.autosaveDisable=function(){typeof this.autosaveHandle<"u"&&this.autosaveHandle!==null&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)};function ke(h,v){return this.collection=h,this.filteredrows=[],this.filterInitialized=!1,this}ke.prototype.reset=function(){return this.filteredrows.length>0&&(this.filteredrows=[]),this.filterInitialized=!1,this},ke.prototype.toJSON=function(){var h=this.copy();return h.collection=null,h},ke.prototype.limit=function(h){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var v=new ke(this.collection);return v.filteredrows=this.filteredrows.slice(0,h),v.filterInitialized=!0,v},ke.prototype.offset=function(h){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var v=new ke(this.collection);return v.filteredrows=this.filteredrows.slice(h),v.filterInitialized=!0,v},ke.prototype.copy=function(){var h=new ke(this.collection);return this.filteredrows.length>0&&(h.filteredrows=this.filteredrows.slice()),h.filterInitialized=this.filterInitialized,h},ke.prototype.branch=ke.prototype.copy,ke.prototype.transform=function(h,v){var k,T,O=this;if(typeof h=="string"&&this.collection.transforms.hasOwnProperty(h)&&(h=this.collection.transforms[h]),typeof h!="object"||!Array.isArray(h))throw new Error("Invalid transform");for(typeof v<"u"&&(h=a.resolveTransformParams(h,v)),k=0;k<h.length;k++)switch(T=h[k],T.type){case"find":O.find(T.value);break;case"where":O.where(T.value);break;case"simplesort":O.simplesort(T.property,T.desc||T.options);break;case"compoundsort":O.compoundsort(T.value);break;case"sort":O.sort(T.value);break;case"limit":O=O.limit(T.value);break;case"offset":O=O.offset(T.value);break;case"map":O=O.map(T.value,T.dataOptions);break;case"eqJoin":O=O.eqJoin(T.joinData,T.leftJoinKey,T.rightJoinKey,T.mapFun,T.dataOptions);break;case"mapReduce":O=O.mapReduce(T.mapFunction,T.reduceFunction);break;case"update":O.update(T.value);break;case"remove":O.remove();break}return O},ke.prototype.sort=function(h){!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var v=function(k,T){return function(O,z){return k(T[O],T[z])}}(h,this.collection.data);return this.filteredrows.sort(v),this},ke.prototype.simplesort=function(h,v){var k,T=10,O=this.collection.data.length,z=this.filteredrows.length,te=this.collection.binaryIndices.hasOwnProperty(h);if((typeof v>"u"||v===!1)&&(v={desc:!1}),v===!0&&(v={desc:!0}),z===0){if(this.filterInitialized)return this;if(this.collection.binaryIndices.hasOwnProperty(h))return this.collection.ensureIndex(h),this.filteredrows=this.collection.binaryIndices[h].values.slice(0),v.desc&&this.filteredrows.reverse(),this;this.filteredrows=this.collection.prepareFullDocIndex()}else if(!v.disableIndexIntersect&&te&&(k=O/z,v.useJavascriptSorting&&(T=6),k<=T||v.forceIndexIntersect)){var ie,pe=this.filteredrows,_e={};for(ie=0;ie<z;ie++)_e[pe[ie]]=!0;var je=this.collection.binaryIndices[h].values;return this.filteredrows=je.filter(function(Je){return _e[Je]}),v.desc&&this.filteredrows.reverse(),this}if(v.useJavascriptSorting)return this.sort(function(Je,et){if(Je[h]===et[h])return 0;if(Je[h]>et[h])return 1;if(Je[h]<et[h])return-1});var tt=function(Je,et,yt){var St,ot,Ke;return function(gt,gn){return~Je.indexOf(".")?(Ke=Je.split("."),St=a.getIn(yt[gt],Ke,!0),ot=a.getIn(yt[gn],Ke,!0)):(St=yt[gt][Je],ot=yt[gn][Je]),w(St,ot,et)}}(h,v.desc,this.collection.data);return this.filteredrows.sort(tt),this},ke.prototype.compoundsort=function(h){if(h.length===0)throw new Error("Invalid call to compoundsort, need at least one property");var v;if(h.length===1)return v=h[0],Array.isArray(v)?this.simplesort(v[0],v[1]):this.simplesort(v,!1);for(var k=0,T=h.length;k<T;k+=1)v=h[k],Array.isArray(v)||(h[k]=[v,!1]);!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());var O=function(z,te){return function(ie,pe){return _(z,te[ie],te[pe])}}(h,this.collection.data);return this.filteredrows.sort(O),this},ke.prototype.findOr=function(h){var v=null,k=0,T=0,O=[],z=[],te=0;this.count();for(var ie=0,pe=h.length;ie<pe;ie++)for(v=this.branch().find(h[ie]).filteredrows,T=v.length,k=0;k<T;k++)te=v[k],z[te]===void 0&&(z[te]=!0,O.push(te));return this.filteredrows=O,this.filterInitialized=!0,this},ke.prototype.$or=ke.prototype.findOr;function we(h,v){if(h==="$regex")Array.isArray(v)?v=new RegExp(v[0],v[1]):v instanceof RegExp||(v=new RegExp(v));else if(typeof v=="object")for(var k in v)(k==="$regex"||typeof v[k]=="object")&&(v[k]=we(k,v[k]));return v}ke.prototype.findAnd=function(h){for(var v=0,k=h.length;v<k;v++){if(this.count()===0)return this;this.find(h[v])}return this},ke.prototype.$and=ke.prototype.findAnd,ke.prototype.find=function(h,v){if(this.collection.data.length===0)return this.filteredrows=[],this.filterInitialized=!0,this;var k=h||"getAll",T,O,z,te,ie,pe,_e,je=!1,tt=[],Je=[],et=null;if(v=v||!1,typeof k=="object"){for(T in k)te={},te[T]=k[T],Je.push(te),n.call(k,T)&&(O=T,z=k[T]);if(Je.length>1)return this.find({$and:Je},v)}if(!O||k==="getAll")return v&&(this.filterInitialized?this.filteredrows=this.filteredrows.slice(0,1):(this.filteredrows=this.collection.data.length>0?[0]:[],this.filterInitialized=!0)),this;if(O==="$and"||O==="$or")return this[O](z),v&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this;if(z===null||typeof z!="object"||z instanceof Date)ie="$eq",pe=z;else if(typeof z=="object"){for(_e in z)if(n.call(z,_e)){ie=_e,pe=z[_e];break}}else throw new Error("Do not know what you want to do.");(ie==="$regex"||typeof pe=="object")&&(pe=we(ie,pe));var yt=O.indexOf(".")!==-1,St=!this.filterInitialized;St&&this.collection.binaryIndices[O]&&L[ie]&&(this.collection.adaptiveBinaryIndices!==!0&&this.collection.ensureIndex(O),je=!0,et=this.collection.binaryIndices[O]),!je&&ie==="$in"&&Array.isArray(pe)&&typeof Set<"u"&&(pe=new Set(pe),ie="$inSet");var ot=R[ie],Ke=this.collection.data,gt=0,gn=0,mn,gr=0,Pn;if(this.filterInitialized){if(mn=this.filteredrows,gn=mn.length,yt){for(O=O.split("."),gt=0;gt<gn;gt++)if(gr=mn[gt],Pn=Ke[gr],A(Pn,O,ot,pe,Pn)&&(tt.push(gr),v))return this.filteredrows=tt,this}else for(gt=0;gt<gn;gt++)if(gr=mn[gt],Pn=Ke[gr],ot(Pn[O],pe,Pn)&&(tt.push(gr),v))return this.filteredrows=tt,this}else if(je){var Ir=this.collection.calculateRange(ie,O,pe);if(ie!=="$in"){for(gt=Ir[0];gt<=Ir[1];gt++)if(L[ie]!==!0){if(L[ie](a.getIn(Ke[et.values[gt]],O,yt),pe)&&(tt.push(et.values[gt]),v))return this.filteredrows=tt,this.filterInitialized=!0,this}else if(tt.push(et.values[gt]),v)return this.filteredrows=tt,this.filterInitialized=!0,this}else for(gt=0,gn=Ir.length;gt<gn;gt++)if(tt.push(et.values[Ir[gt]]),v)return this.filteredrows=tt,this.filterInitialized=!0,this}else if(gn=Ke.length,yt){for(O=O.split("."),gt=0;gt<gn;gt++)if(Pn=Ke[gt],A(Pn,O,ot,pe,Pn)&&(tt.push(gt),v))return this.filteredrows=tt,this.filterInitialized=!0,this}else for(gt=0;gt<gn;gt++)if(Pn=Ke[gt],ot(Pn[O],pe,Pn)&&(tt.push(gt),v))return this.filteredrows=tt,this.filterInitialized=!0,this;return this.filteredrows=tt,this.filterInitialized=!0,this},ke.prototype.where=function(h){var v,k=[];if(typeof h=="function")v=h;else throw new TypeError("Argument is not a stored view or a function");try{if(this.filterInitialized){for(var T=this.filteredrows.length;T--;)v(this.collection.data[this.filteredrows[T]])===!0&&k.push(this.filteredrows[T]);return this.filteredrows=k,this}else{for(var O=this.collection.data.length;O--;)v(this.collection.data[O])===!0&&k.push(O);return this.filteredrows=k,this.filterInitialized=!0,this}}catch(z){throw z}},ke.prototype.count=function(){return this.filterInitialized?this.filteredrows.length:this.collection.count()},ke.prototype.data=function(h){var v=[],k=this.collection.data,T,O,z,te;if(h=h||{},h.removeMeta&&!h.forceClones&&(h.forceClones=!0,h.forceCloneMethod=h.forceCloneMethod||"shallow"),!this.collection.disableDeltaChangesApi&&this.collection.disableFreeze&&(h.forceClones=!0,h.forceCloneMethod="parse-stringify"),!this.filterInitialized)if(this.filteredrows.length===0)if(this.collection.cloneObjects||h.forceClones){for(O=k.length,te=h.forceCloneMethod||this.collection.cloneMethod,z=0;z<O;z++)T=P(k[z],te),h.removeMeta&&(delete T.$loki,delete T.meta),v.push(T);return v}else return k.slice();else this.filterInitialized=!0;var ie=this.filteredrows;if(O=ie.length,this.collection.cloneObjects||h.forceClones)for(te=h.forceCloneMethod||this.collection.cloneMethod,z=0;z<O;z++)T=P(k[ie[z]],te),h.removeMeta&&(delete T.$loki,delete T.meta),v.push(T);else for(z=0;z<O;z++)v.push(k[ie[z]]);return v},ke.prototype.update=function(h){if(typeof h!="function")throw new TypeError("Argument is not a function");!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex());for(var v,k=this.filteredrows.length,T=this.collection.data,O=0;O<k;O++)!this.disableFreeze||this.collection.cloneObjects||!this.collection.disableDeltaChangesApi?(v=P(T[this.filteredrows[O]],this.collection.cloneMethod),h(v),this.collection.update(v)):(h(T[this.filteredrows[O]]),this.collection.update(T[this.filteredrows[O]]));return this},ke.prototype.remove=function(){return!this.filterInitialized&&this.filteredrows.length===0&&(this.filteredrows=this.collection.prepareFullDocIndex()),this.collection.removeBatchByPositions(this.filteredrows),this.filteredrows=[],this},ke.prototype.mapReduce=function(h,v){try{return v(this.data().map(h))}catch(k){throw k}},ke.prototype.eqJoin=function(h,v,k,T,O){var z=[],te,ie=[],pe,_e,je=[],tt=typeof v=="function",Je=typeof k=="function",et={};if(z=this.data(O),te=z.length,h instanceof G)ie=h.chain().data(O);else if(h instanceof ke)ie=h.data(O);else if(Array.isArray(h))ie=h;else throw new TypeError("joinData needs to be an array or result set");pe=ie.length;for(var yt=0;yt<pe;yt++)_e=Je?k(ie[yt]):ie[yt][k],et[_e]=ie[yt];T||(T=function(ot,Ke){return{left:ot,right:Ke}});for(var St=0;St<te;St++)_e=tt?v(z[St]):z[St][v],je.push(T(z[St],et[_e]||{}));return this.collection=new G("joinData"),this.collection.insert(je),this.filteredrows=[],this.filterInitialized=!1,this},ke.prototype.map=function(h,v){var k=this.data(v).map(h);return this.collection=new G("mappedData"),this.collection.insert(k),this.filteredrows=[],this.filterInitialized=!1,this};function Q(h,v,k){this.collection=h,this.name=v,this.rebuildPending=!1,this.options=k||{},this.options.hasOwnProperty("persistent")||(this.options.persistent=!1),this.options.hasOwnProperty("sortPriority")||(this.options.sortPriority="passive"),this.options.hasOwnProperty("minRebuildInterval")||(this.options.minRebuildInterval=1),this.resultset=new ke(h),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.collection.disableFreeze||Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,this.events={rebuild:[],filter:[],sort:[]}}Q.prototype=new U,Q.prototype.constructor=Q,Q.prototype.getSort=function(){return this.sortFunction||this.sortCriteria||this.sortCriteriaSimple},Q.prototype.rematerialize=function(h){var v,k,T;h=h||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new ke(this.collection),(this.sortFunction||this.sortCriteria||this.sortCriteriaSimple)&&(this.sortDirty=!0);var O=Object.isFrozen(this.filterPipeline);if(h.hasOwnProperty("removeWhereFilters"))for(O&&(this.filterPipeline=this.filterPipeline.slice()),v=this.filterPipeline.length,k=v;k--;)this.filterPipeline[k].type==="where"&&(k!==this.filterPipeline.length-1&&(this.filterPipeline[k]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var z=this.filterPipeline;for(this.filterPipeline=[],v=z.length,T=0;T<v;T++)this.applyFind(z[T].val,z[T].uid);return O&&Object.freeze(this.filterPipeline),this.data(),this.emit("rebuild",this),this},Q.prototype.branchResultset=function(h,v){var k=this.resultset.branch();return typeof h>"u"?k:k.transform(h,v)},Q.prototype.toJSON=function(){var h=new Q(this.collection,this.name,this.options);return h.resultset=this.resultset,h.resultdata=[],h.resultsdirty=!0,h.filterPipeline=this.filterPipeline,h.sortFunction=this.sortFunction,h.sortCriteria=this.sortCriteria,h.sortCriteriaSimple=this.sortCriteriaSimple||null,h.sortDirty=this.sortDirty,h.collection=null,h},Q.prototype.removeFilters=function(h){h=h||{},this.rebuildPending=!1,this.resultset.reset(),this.resultdata=[],this.resultsdirty=!0,this.cachedresultset=null;var v=Object.isFrozen(this.filterPipeline),k=this.filterPipeline.length>0;this.filterPipeline=[],v&&Object.freeze(this.filterPipeline),this.sortFunction=null,this.sortCriteria=null,this.sortCriteriaSimple=null,this.sortDirty=!1,h.queueSortPhase===!0&&this.queueSortPhase(),k&&this.emit("filter")},Q.prototype.applySort=function(h){return this.sortFunction=h,this.sortCriteria=null,this.sortCriteriaSimple=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.applySimpleSort=function(h,v){return this.sortCriteriaSimple={propname:h,options:v||!1},this.collection.disableFreeze||r(this.sortCriteriaSimple),this.sortCriteria=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.applySortCriteria=function(h){return this.sortCriteria=h,this.collection.disableFreeze||r(this.sortCriteria),this.sortCriteriaSimple=null,this.sortFunction=null,this.queueSortPhase(),this.emit("sort"),this},Q.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},Q.prototype.commit=function(){return this.cachedresultset=null,this},Q.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.options.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},Q.prototype._indexOfFilterWithId=function(h){if(typeof h=="string"||typeof h=="number"){for(var v=0,k=this.filterPipeline.length;v<k;v+=1)if(h===this.filterPipeline[v].uid)return v}return-1},Q.prototype._addFilter=function(h){var v=Object.isFrozen(this.filterPipeline);v&&(this.filterPipeline=this.filterPipeline.slice()),this.collection.disableFreeze||r(h),this.filterPipeline.push(h),v&&Object.freeze(this.filterPipeline),this.resultset[h.type](h.val)},Q.prototype.reapplyFilters=function(){this.resultset.reset(),this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0);var h=this.filterPipeline,v=Object.isFrozen(h);this.filterPipeline=[];for(var k=0,T=h.length;k<T;k+=1)this._addFilter(h[k]);return v&&Object.freeze(this.filterPipeline),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Q.prototype.applyFilter=function(h){var v=this._indexOfFilterWithId(h.uid);if(v>=0){var k=Object.isFrozen(this.filterPipeline);return k&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline[v]=h,k&&(i(h),Object.freeze(this.filterPipeline)),this.reapplyFilters()}return this.cachedresultset=null,this.options.persistent&&(this.resultdata=[],this.resultsdirty=!0),this._addFilter(h),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent(),this.emit("filter"),this},Q.prototype.applyFind=function(h,v){return this.applyFilter({type:"find",val:h,uid:v}),this},Q.prototype.applyWhere=function(h,v){return this.applyFilter({type:"where",val:h,uid:v}),this},Q.prototype.removeFilter=function(h){var v=this._indexOfFilterWithId(h);if(v<0)throw new Error("Dynamic view does not contain a filter with ID: "+h);var k=Object.isFrozen(this.filterPipeline);return k&&(this.filterPipeline=this.filterPipeline.slice()),this.filterPipeline.splice(v,1),k&&Object.freeze(this.filterPipeline),this.reapplyFilters(),this},Q.prototype.count=function(){return this.resultsdirty&&(this.resultdata=this.resultset.data()),this.resultset.count()},Q.prototype.data=function(h){return(this.sortDirty||this.resultsdirty)&&this.performSortPhase({suppressRebuildEvent:!0}),this.options.persistent?this.resultdata:this.resultset.data(h)},Q.prototype.queueRebuildEvent=function(){if(!this.rebuildPending){this.rebuildPending=!0;var h=this;setTimeout(function(){h.rebuildPending&&(h.rebuildPending=!1,h.emit("rebuild",h))},this.options.minRebuildInterval)}},Q.prototype.queueSortPhase=function(){if(!this.sortDirty){this.sortDirty=!0;var h=this;this.options.sortPriority==="active"?setTimeout(function(){h.performSortPhase()},this.options.minRebuildInterval):this.queueRebuildEvent()}},Q.prototype.performSortPhase=function(h){!this.sortDirty&&!this.resultsdirty||(h=h||{},this.sortDirty&&(this.sortFunction?this.resultset.sort(this.sortFunction):this.sortCriteria?this.resultset.compoundsort(this.sortCriteria):this.sortCriteriaSimple&&this.resultset.simplesort(this.sortCriteriaSimple.propname,this.sortCriteriaSimple.options),this.sortDirty=!1),this.options.persistent&&(this.resultdata=this.resultset.data(),this.resultsdirty=!1),h.suppressRebuildEvent||this.emit("rebuild",this))},Q.prototype.evaluateDocument=function(h,v){if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}var k=this.resultset.filteredrows,T=v?-1:k.indexOf(+h),O=k.length,z=new ke(this.collection);z.filteredrows=[h],z.filterInitialized=!0;for(var te,ie=0,pe=this.filterPipeline.length;ie<pe;ie++)te=this.filterPipeline[ie],z[te.type](te.val);var _e=z.filteredrows.length===0?-1:0;if(!(T===-1&&_e===-1)){if(T===-1&&_e!==-1){k.push(h),this.options.persistent&&this.resultdata.push(this.collection.data[h]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(T!==-1&&_e===-1){T<O-1?(k.splice(T,1),this.options.persistent&&this.resultdata.splice(T,1)):(k.length=O-1,this.options.persistent&&(this.resultdata.length=O-1)),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}if(T!==-1&&_e!==-1){this.options.persistent&&(this.resultdata[T]=this.collection.data[h]),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}}},Q.prototype.removeDocument=function(h){var v,k,T,O={},z={},te=[],ie=this.resultset,pe=this.resultset.filteredrows,_e=pe.length;if(!this.resultset.filterInitialized){this.options.persistent&&(this.resultdata=this.resultset.data()),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent();return}for(Array.isArray(h)||(h=[h]),T=h.length,k=0;k<T;k++)O[h[k]]=!0;for(v=0;v<_e;v++)O[pe[v]]&&(z[v]=!0);Object.keys(z).length>0&&(this.resultset.filteredrows=this.resultset.filteredrows.filter(function(tt,Je){return!z[Je]}),this.options.persistent&&(this.resultdata=this.resultdata.filter(function(tt,Je){return!z[Je]})),this.sortFunction||this.sortCriteria||this.sortCriteriaSimple?this.queueSortPhase():this.queueRebuildEvent());var je=function(tt){return function(Je){return Je<ie.filteredrows[tt]}};for(_e=ie.filteredrows.length,v=0;v<_e;v++)te=h.filter(je(v)),ie.filteredrows[v]-=te.length},Q.prototype.mapReduce=function(h,v){try{return v(this.data().map(h))}catch(k){throw k}};function G(h,v){this.name=h,this.data=[],this.idIndex=null,this.binaryIndices={},this.constraints={unique:{},exact:{}},this.uniqueNames=[],this.transforms={},this.objType=h,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var k=this;v=v||{},v.hasOwnProperty("unique")&&(Array.isArray(v.unique)||(v.unique=[v.unique]),v.unique.forEach(function(_e){k.uniqueNames.push(_e)})),v.hasOwnProperty("exact")&&v.exact.forEach(function(_e){k.constraints.exact[_e]=new pt(_e)}),this.adaptiveBinaryIndices=v.hasOwnProperty("adaptiveBinaryIndices")?v.adaptiveBinaryIndices:!0,this.transactional=v.hasOwnProperty("transactional")?v.transactional:!1,this.cloneObjects=v.hasOwnProperty("clone")?v.clone:!1,this.cloneMethod=v.hasOwnProperty("cloneMethod")?v.cloneMethod:"parse-stringify",this.asyncListeners=v.hasOwnProperty("asyncListeners")?v.asyncListeners:!1,this.disableMeta=v.hasOwnProperty("disableMeta")?v.disableMeta:!1,this.disableChangesApi=v.hasOwnProperty("disableChangesApi")?v.disableChangesApi:!0,this.disableDeltaChangesApi=v.hasOwnProperty("disableDeltaChangesApi")?v.disableDeltaChangesApi:!0,this.disableChangesApi&&(this.disableDeltaChangesApi=!0),this.autoupdate=v.hasOwnProperty("autoupdate")?v.autoupdate:!1,this.serializableIndices=v.hasOwnProperty("serializableIndices")?v.serializableIndices:!0,this.disableFreeze=v.hasOwnProperty("disableFreeze")?v.disableFreeze:!0,this.ttl={age:null,ttlInterval:null,daemon:null},this.setTTL(v.ttl||-1,v.ttlInterval),this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this.changes=[],this.dirtyIds=[];var T=[];if(v&&v.indices)if(Object.prototype.toString.call(v.indices)==="[object Array]")T=v.indices;else if(typeof v.indices=="string")T=[v.indices];else throw new TypeError("Indices needs to be a string or an array of strings");for(var O=0;O<T.length;O++)this.ensureIndex(T[O]);function z(_e){var je=typeof Set=="function"?new Set:[];je.add||(je.add=function(tt){return this.indexOf(tt)===-1&&this.push(tt),this}),_e.forEach(function(tt){je.add(tt.object)}),je.forEach(function(tt){if(!n.call(tt,"$loki"))return k.removeAutoUpdateObserver(tt);try{k.update(tt)}catch{}})}this.observerCallback=z;function te(_e,je){return je?ie(je,_e):JSON.parse(JSON.stringify(_e))}this.getChangeDelta=te;function ie(_e,je){var tt=je!==null&&typeof je=="object"?Object.keys(je):null;if(tt&&tt.length&&["string","boolean","number"].indexOf(typeof je)<0){for(var Je={},et=0;et<tt.length;et++){var yt=tt[et];if(je.hasOwnProperty(yt))if(!_e.hasOwnProperty(yt)||k.uniqueNames.indexOf(yt)>=0||yt=="$loki"||yt=="meta")Je[yt]=je[yt];else{var St=ie(_e[yt],je[yt]);typeof St<"u"&&St!={}&&(Je[yt]=St)}}return Object.keys(Je).length===0?void 0:Je}else return _e===je?void 0:je}this.getObjectDelta=ie;function pe(){k.changes=[]}this.getChanges=function(){return k.changes},this.flushChanges=pe,this.setChangesApi=function(_e){k.disableChangesApi=!_e,_e||(k.disableDeltaChangesApi=!1)},this.on("delete",function(je){k.disableChangesApi||k.createChange(k.name,"R",je)}),this.on("warning",function(_e){k.lokiConsoleWrapper.warn(_e)}),pe()}G.prototype=new U,G.prototype.contructor=G,G.prototype.createChange=function(h,v,k,T){this.changes.push({name:h,operation:v,obj:v=="U"&&!this.disableDeltaChangesApi?this.getChangeDelta(k,T):JSON.parse(JSON.stringify(k))})},G.prototype.insertMeta=function(h){var v,k;if(!(this.disableMeta||!h)){if(Array.isArray(h)){for(v=h.length,k=0;k<v;k++)h[k].hasOwnProperty("meta")||(h[k].meta={}),h[k].meta.created=new Date().getTime(),h[k].meta.revision=0;return}h.meta||(h.meta={}),h.meta.created=new Date().getTime(),h.meta.revision=0}},G.prototype.updateMeta=function(h){return this.disableMeta||!h||(this.disableFreeze||(h=s(h),h.meta=s(h.meta)),h.meta.updated=new Date().getTime(),h.meta.revision+=1),h},G.prototype.createInsertChange=function(h){this.createChange(this.name,"I",h)},G.prototype.createUpdateChange=function(h,v){this.createChange(this.name,"U",h,v)},G.prototype.insertMetaWithChange=function(h){this.insertMeta(h),this.createInsertChange(h)},G.prototype.updateMetaWithChange=function(h,v,k){return h=this.updateMeta(h,k),this.createUpdateChange(h,v),h},G.prototype.lokiConsoleWrapper={log:function(){},warn:function(){},error:function(){}},G.prototype.addAutoUpdateObserver=function(h){!this.autoupdate||typeof Object.observe!="function"||Object.observe(h,this.observerCallback,["add","update","delete","reconfigure","setPrototype"])},G.prototype.removeAutoUpdateObserver=function(h){!this.autoupdate||typeof Object.observe!="function"||Object.unobserve(h,this.observerCallback)},G.prototype.addTransform=function(h,v){if(this.transforms.hasOwnProperty(h))throw new Error("a transform by that name already exists");this.transforms[h]=v},G.prototype.getTransform=function(h){return this.transforms[h]},G.prototype.setTransform=function(h,v){this.transforms[h]=v},G.prototype.removeTransform=function(h){delete this.transforms[h]},G.prototype.byExample=function(h){var v,k,T;T=[];for(v in h)h.hasOwnProperty(v)&&T.push((k={},k[v]=h[v],k));return{$and:T}},G.prototype.findObject=function(h){return this.findOne(this.byExample(h))},G.prototype.findObjects=function(h){return this.find(this.byExample(h))},G.prototype.ttlDaemonFuncGen=function(){var h=this,v=this.ttl.age;return function(){var T=Date.now(),O=h.chain().where(function(te){var ie=te.meta.updated||te.meta.created,pe=T-ie;return v<pe});O.remove()}},G.prototype.setTTL=function(h,v){h<0?clearInterval(this.ttl.daemon):(this.ttl.age=h,this.ttl.ttlInterval=v,this.ttl.daemon=setInterval(this.ttlDaemonFuncGen(),v))},G.prototype.prepareFullDocIndex=function(){for(var h=this.data.length,v=new Array(h),k=0;k<h;k+=1)v[k]=k;return v},G.prototype.configureOptions=function(h){h=h||{},h.hasOwnProperty("adaptiveBinaryIndices")&&(this.adaptiveBinaryIndices=h.adaptiveBinaryIndices,this.adaptiveBinaryIndices&&this.ensureAllIndexes())},G.prototype.ensureIndex=function(h,v){if(typeof v>"u"&&(v=!1),h==null)throw new Error("Attempting to set index without an associated property");if(!(this.binaryIndices[h]&&!v&&!this.binaryIndices[h].dirty)&&!(this.adaptiveBinaryIndices===!0&&this.binaryIndices.hasOwnProperty(h)&&!v)){var k={name:h,dirty:!0,values:this.prepareFullDocIndex()};this.binaryIndices[h]=k;var T=function(O,z){var te,ie,pe=~O.indexOf(".")?O.split("."):!1;return function(_e,je){if(pe?(te=a.getIn(z[_e],pe,!0),ie=a.getIn(z[je],pe,!0)):(te=z[_e][O],ie=z[je][O]),te!==ie){if(c.lt(te,ie,!1))return-1;if(c.gt(te,ie,!1))return 1}return 0}}(h,this.data);k.values.sort(T),k.dirty=!1,this.dirty=!0}},G.prototype.checkAllIndexes=function(h){var v,k=this.binaryIndices,T=[],O;for(v in k)n.call(k,v)&&(O=this.checkIndex(v,h),O||T.push(v));return T},G.prototype.checkIndex=function(h,v){v=v||{},v.randomSamplingFactor&&v.randomSampling!==!1&&(v.randomSampling=!0),v.randomSamplingFactor=v.randomSamplingFactor||.1,(v.randomSamplingFactor<0||v.randomSamplingFactor>1)&&(v.randomSamplingFactor=.1);var k=!0,T,O,z,te,ie;if(!this.binaryIndices.hasOwnProperty(h))throw new Error("called checkIndex on property without an index: "+h);if(this.adaptiveBinaryIndices||this.ensureIndex(h),ie=this.binaryIndices[h].values,te=ie.length,te!==this.data.length)return v.repair&&this.ensureIndex(h,!0),!1;if(te===0)return!0;var pe=h.indexOf(".")!==-1;if(te===1)k=ie[0]===0;else if(v.randomSampling){if(R.$lte(a.getIn(this.data[ie[0]],h,pe),a.getIn(this.data[ie[1]],h,pe))||(k=!1),R.$lte(a.getIn(this.data[ie[te-2]],h,pe),a.getIn(this.data[ie[te-1]],h,pe))||(k=!1),k){for(O=Math.floor((te-1)*v.randomSamplingFactor),T=0;T<O-1;T++)if(z=Math.floor(Math.random()*(te-1)),!R.$lte(a.getIn(this.data[ie[z]],h,pe),a.getIn(this.data[ie[z+1]],h,pe))){k=!1;break}}}else for(T=0;T<te-1;T++)if(!R.$lte(a.getIn(this.data[ie[T]],h,pe),a.getIn(this.data[ie[T+1]],h,pe))){k=!1;break}return!k&&v.repair&&this.ensureIndex(h,!0),k},G.prototype.getBinaryIndexValues=function(h){var v,k=this.binaryIndices[h].values,T=[];for(v=0;v<k.length;v++)T.push(a.getIn(this.data[k[v]],h,!0));return T},G.prototype.getUniqueIndex=function(h,v){var k=this.constraints.unique[h];return!k&&v?this.ensureUniqueIndex(h):k},G.prototype.ensureUniqueIndex=function(h){var v=this.constraints.unique[h];return v||this.uniqueNames.indexOf(h)==-1&&this.uniqueNames.push(h),this.constraints.unique[h]=v=new fe(h),this.data.forEach(function(k){v.set(k)}),v},G.prototype.ensureAllIndexes=function(h){var v,k=this.binaryIndices;for(v in k)n.call(k,v)&&this.ensureIndex(v,h)},G.prototype.flagBinaryIndexesDirty=function(){var h,v=this.binaryIndices;for(h in v)n.call(v,h)&&(v[h].dirty=!0)},G.prototype.flagBinaryIndexDirty=function(h){this.binaryIndices[h]&&(this.binaryIndices[h].dirty=!0)},G.prototype.count=function(h){return h?this.chain().find(h).filteredrows.length:this.data.length},G.prototype.ensureId=function(){if(!this.idIndex){var h=this.data,v=0,k=h.length,T=new Array(k);for(v;v<k;v++)T[v]=h[v].$loki;this.idIndex=T}},G.prototype.ensureIdAsync=function(h){this.async(function(){this.ensureId()},h)},G.prototype.addDynamicView=function(h,v){var k=new Q(this,h,v);return this.DynamicViews.push(k),k},G.prototype.removeDynamicView=function(h){this.DynamicViews=this.DynamicViews.filter(function(v){return v.name!==h})},G.prototype.getDynamicView=function(h){for(var v=0;v<this.DynamicViews.length;v++)if(this.DynamicViews[v].name===h)return this.DynamicViews[v];return null},G.prototype.findAndUpdate=function(h,v){typeof h=="function"?this.updateWhere(h,v):this.chain().find(h).update(v)},G.prototype.findAndRemove=function(h){this.chain().find(h).remove()},G.prototype.insert=function(h,v){if(!Array.isArray(h))return this.insertOne(h);var k,T=[],O=v&&!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0;O&&(this.adaptiveBinaryIndices=!1);try{this.emit("pre-insert",h);for(var z=0,te=h.length;z<te;z++){if(k=this.insertOne(h[z],!0),!k)return;T.push(k)}}finally{O&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return this.emit("insert",T),T=this.cloneObjects?P(T,this.cloneMethod):T,T.length===1?T[0]:T},G.prototype.insertOne=function(h,v){var k=null,T;if(typeof h!="object"?k=new TypeError("Document needs to be an object"):h===null&&(k=new TypeError("Object cannot be null")),k!==null)throw this.emit("error",k),k;var O=this.cloneObjects?P(h,this.cloneMethod):h;if(this.disableFreeze||(O=s(O)),this.disableMeta||(typeof O.meta>"u"?O.meta={revision:0,created:0}:this.disableFreeze||(O.meta=s(O.meta))),v||this.emit("pre-insert",O),!!this.add(O))return this.disableChangesApi?this.insertMeta(O):this.insertMetaWithChange(O),this.disableFreeze||r(O),T=this.cloneObjects?P(O,this.cloneMethod):O,v||this.emit("insert",T),this.addAutoUpdateObserver(T),T},G.prototype.clear=function(h){var v=this;if(h=h||{},this.data=[],this.idIndex=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0,this.constraints={unique:{},exact:{}},h.removeIndices===!0)this.binaryIndices={},this.uniqueNames=[];else{var k=Object.keys(this.binaryIndices);k.forEach(function(T){v.binaryIndices[T].dirty=!1,v.binaryIndices[T].values=[]})}},G.prototype.update=function(h){var v,k,T;if(Array.isArray(h)){T=h.length,v=!this.cloneObjects&&this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,v&&(this.adaptiveBinaryIndices=!1);try{for(k=0;k<T;k+=1)this.update(h[k])}finally{v&&(this.ensureAllIndexes(),this.adaptiveBinaryIndices=!0)}return}if(!n.call(h,"$loki"))throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();var O=this.get(h.$loki,!0),z,te,ie,pe=this;if(!O)throw new Error("Trying to update a document not in collection.");z=O[0],ie=O[1],te=this.cloneObjects||!this.disableDeltaChangesApi&&this.disableFreeze?P(h,this.cloneMethod):h,this.emit("pre-update",h),this.uniqueNames.forEach(function(et){pe.getUniqueIndex(et,!0).update(z,te)}),this.data[ie]=te,te!==h&&this.addAutoUpdateObserver(h);for(var _e=0;_e<this.DynamicViews.length;_e++)this.DynamicViews[_e].evaluateDocument(ie,!1);var je;if(this.adaptiveBinaryIndices){var tt=this.binaryIndices;for(je in tt)this.adaptiveBinaryIndexUpdate(ie,je)}else this.flagBinaryIndexesDirty();this.idIndex[ie]=te.$loki,this.isIncremental&&this.dirtyIds.push(te.$loki),this.commit(),this.dirty=!0,this.disableChangesApi?te=this.updateMeta(te):te=this.updateMetaWithChange(te,z),this.disableFreeze||r(te);var Je;return this.cloneObjects?Je=P(te,this.cloneMethod):Je=te,this.emit("update",Je,z),Je}catch(et){throw this.rollback(),this.lokiConsoleWrapper.error(et.message),this.emit("error",et),et}},G.prototype.add=function(h){if(typeof h!="object")throw new TypeError("Object being added needs to be an object");if(typeof h.$loki<"u")throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1);var v=this.maxId;h.$loki=v,this.disableMeta||(h.meta.version=0);for(var k=0,T=this.uniqueNames.length;k<T;k++)this.getUniqueIndex(this.uniqueNames[k],!0).set(h);this.idIndex&&this.idIndex.push(v),this.isIncremental&&this.dirtyIds.push(v),this.data.push(h);var O=this.data.length-1,z=this.DynamicViews.length;for(k=0;k<z;k++)this.DynamicViews[k].evaluateDocument(O,!0);if(this.adaptiveBinaryIndices){var te=this.binaryIndices;for(var ie in te)this.adaptiveBinaryIndexInsert(O,ie)}else this.flagBinaryIndexesDirty();return this.commit(),this.dirty=!0,this.cloneObjects?P(h,this.cloneMethod):h}catch(pe){throw this.rollback(),this.lokiConsoleWrapper.error(pe.message),this.emit("error",pe),pe}},G.prototype.updateWhere=function(h,v){var k=this.where(h),T=0,O;try{for(T;T<k.length;T++)O=v(k[T]),this.update(O)}catch(z){this.rollback(),this.lokiConsoleWrapper.error(z.message)}},G.prototype.removeWhere=function(h){var v;typeof h=="function"?(v=this.data.filter(h),this.remove(v)):this.chain().find(h).remove()},G.prototype.removeDataOnly=function(){this.remove(this.data.slice())},G.prototype.removeBatchByPositions=function(h){var v=h.length,k={},T,O,z,te=Object.keys(this.binaryIndices).length,ie=Object.keys(this.constraints.unique).length,pe=this.adaptiveBinaryIndices&&Object.keys(this.binaryIndices).length>0,_e,je=this;try{for(this.startTransaction(),this.ensureId(),z=0;z<v;z++)k[this.idIndex[h[z]]]=!0;if(T=this.DynamicViews.length,T>0||te>0||ie>0){if(T>0)for(O=0;O<T;O++)this.DynamicViews[O].removeDocument(h);if(this.adaptiveBinaryIndices&&!pe){var tt,Je=this.binaryIndices;for(tt in Je)this.adaptiveBinaryIndexRemove(h,tt)}else this.flagBinaryIndexesDirty();ie&&this.uniqueNames.forEach(function(et){var yt=je.getUniqueIndex(et);if(yt)for(z=0;z<v;z++)_e=je.data[h[z]],_e[et]!==null&&_e[et]!==void 0&&yt.remove(_e[et])})}if(!this.disableChangesApi||this.events.delete.length>1)for(z=0;z<v;z++)this.emit("delete",this.data[h[z]]);if(this.data=this.data.filter(function(et){return!k[et.$loki]}),this.isIncremental)for(z=0;z<v;z++)this.dirtyIds.push(this.idIndex[h[z]]);this.idIndex=this.idIndex.filter(function(et){return!k[et]}),this.adaptiveBinaryIndices&&pe&&(this.adaptiveBinaryIndices=!1,this.ensureAllIndexes(!0),this.adaptiveBinaryIndices=!0),this.commit(),this.dirty=!0}catch(et){return this.rollback(),pe&&(this.adaptiveBinaryIndices=!0),this.lokiConsoleWrapper.error(et.message),this.emit("error",et),null}},G.prototype.removeBatch=function(h){var v=h.length,k=this.data.length,T,O={},z=[];for(T=0;T<k;T++)O[this.data[T].$loki]=T;for(T=0;T<v;T++)typeof h[T]=="object"?z.push(O[h[T].$loki]):z.push(O[h[T]]);this.removeBatchByPositions(z)},G.prototype.remove=function(h){if(typeof h=="number"&&(h=this.get(h)),typeof h!="object")throw new Error("Parameter is not an object");if(Array.isArray(h)){this.removeBatch(h);return}if(!n.call(h,"$loki"))throw new Error("Object is not a document stored in the collection");try{this.startTransaction();var v=this.get(h.$loki,!0),k=v[1],T=this;this.uniqueNames.forEach(function(ie){if(h[ie]!==null&&typeof h[ie]<"u"){var pe=T.getUniqueIndex(ie);pe&&pe.remove(h[ie])}});for(var O=0;O<this.DynamicViews.length;O++)this.DynamicViews[O].removeDocument(k);if(this.adaptiveBinaryIndices){var z,te=this.binaryIndices;for(z in te)this.adaptiveBinaryIndexRemove(k,z)}else this.flagBinaryIndexesDirty();return this.data.splice(k,1),this.removeAutoUpdateObserver(h),this.idIndex.splice(k,1),this.isIncremental&&this.dirtyIds.push(h.$loki),this.commit(),this.dirty=!0,this.emit("delete",v[0]),this.disableFreeze||(h=s(h)),delete h.$loki,delete h.meta,this.disableFreeze||i(h),h}catch(ie){return this.rollback(),this.lokiConsoleWrapper.error(ie.message),this.emit("error",ie),null}},G.prototype.get=function(h,v){this.idIndex||this.ensureId();var k=v||!1,T=this.idIndex,O=T.length-1,z=0,te=z+O>>1;if(h=typeof h=="number"?h:parseInt(h,10),isNaN(h))throw new TypeError("Passed id is not an integer");for(;T[z]<T[O];)te=z+O>>1,T[te]<h?z=te+1:O=te;return O===z&&T[z]===h?k?[this.data[z],z]:this.data[z]:null},G.prototype.getBinaryIndexPosition=function(h,v){var k=a.getIn(this.data[h],v,!0),T=this.binaryIndices[v].values,O=this.calculateRange("$eq",v,k);if(O[0]===0&&O[1]===-1)return null;for(var z=O[0],te=O[1],ie=z;ie<=te;ie++)if(T[ie]===h)return ie;return null},G.prototype.adaptiveBinaryIndexInsert=function(h,v){var k=v.indexOf(".")!==-1,T=this.binaryIndices[v].values,O=a.getIn(this.data[h],v,k);this.serializableIndices===!0&&O instanceof Date&&(this.data[h][v]=O.getTime(),O=a.getIn(this.data[h],v));var z=T.length===0?0:this.calculateRangeStart(v,O,!0,k);this.binaryIndices[v].values.splice(z,0,h)},G.prototype.adaptiveBinaryIndexUpdate=function(h,v){var k,T=this.binaryIndices[v].values,O=T.length;for(k=0;k<O&&T[k]!==h;k++);this.binaryIndices[v].values.splice(k,1),this.adaptiveBinaryIndexInsert(h,v)},G.prototype.adaptiveBinaryIndexRemove=function(h,v,k){var T=this.binaryIndices[v],O,z,te,ie,pe={},_e,je,tt;if(Array.isArray(h))if(ie=h.length,ie===1)h=h[0];else{for(te=0;te<ie;te++)pe[h[te]]=!0;if(T.values=T.values.filter(function(et){return!pe[et]}),k===!0)return;var Je=h.slice();for(Je.sort(function(et,yt){return et-yt}),O=T.values.length,z=0;z<O;z++){for(_e=T.values[z],je=0,te=0;te<ie&&_e>Je[te];te++)je++;T.values[z]-=je}return}if(tt=this.getBinaryIndexPosition(h,v),tt===null)return null;if(T.values.splice(tt,1),k!==!0)for(O=T.values.length,z=0;z<O;z++)T.values[z]>h&&T.values[z]--},G.prototype.calculateRangeStart=function(h,v,k,T){var O=this.data,z=this.binaryIndices[h].values,te=0,ie=z.length-1,pe=0;if(z.length===0)return-1;for(a.getIn(O[z[te]],h,T),a.getIn(O[z[ie]],h,T);te<ie;)pe=te+ie>>1,c.lt(a.getIn(O[z[pe]],h,T),v,!1)?te=pe+1:ie=pe;var _e=te;return c.aeq(v,a.getIn(O[z[_e]],h,T))?_e:c.lt(v,a.getIn(O[z[_e]],h,T),!1)?k?_e:_e-1:k?_e+1:_e},G.prototype.calculateRangeEnd=function(h,v,k){var T=this.data,O=this.binaryIndices[h].values,z=0,te=O.length-1,ie=0;if(O.length===0)return-1;for(a.getIn(T[O[z]],h,k),a.getIn(T[O[te]],h,k);z<te;)ie=z+te>>1,c.lt(v,a.getIn(T[O[ie]],h,k),!1)?te=ie:z=ie+1;var pe=te;return c.aeq(v,a.getIn(T[O[pe]],h,k))?pe:c.gt(v,a.getIn(T[O[pe]],h,k),!1)?pe+1:c.aeq(v,a.getIn(T[O[pe-1]],h,k))?pe-1:pe},G.prototype.calculateRange=function(h,v,k){var T=this.data,O=this.binaryIndices[v].values,z=0,te=O.length-1,ie,pe,_e;if(T.length===0)return[0,-1];var je=v.indexOf(".")!==-1,tt=a.getIn(T[O[z]],v,je),Je=a.getIn(T[O[te]],v,je);switch(h){case"$eq":case"$aeq":if(c.lt(k,tt,!1)||c.gt(k,Je,!1))return[0,-1];break;case"$dteq":if(c.lt(k,tt,!1)||c.gt(k,Je,!1))return[0,-1];break;case"$gt":if(c.gt(k,Je,!0))return[0,-1];if(c.gt(tt,k,!1))return[z,te];break;case"$gte":if(c.gt(k,Je,!1))return[0,-1];if(c.gt(tt,k,!0))return[z,te];break;case"$lt":if(c.lt(k,tt,!0))return[0,-1];if(c.lt(Je,k,!1))return[z,te];break;case"$lte":if(c.lt(k,tt,!1))return[0,-1];if(c.lt(Je,k,!0))return[z,te];break;case"$between":return c.gt(k[0],Je,!1)?[0,-1]:c.lt(k[1],tt,!1)?[0,-1]:(ie=this.calculateRangeStart(v,k[0],!1,je),_e=this.calculateRangeEnd(v,k[1],je),ie<0&&ie++,_e>te&&_e--,c.gt(a.getIn(T[O[ie]],v,je),k[0],!0)||ie++,c.lt(a.getIn(T[O[_e]],v,je),k[1],!0)||_e--,_e<ie?[0,-1]:[ie,_e]);case"$in":for(var et=[],yt=[],St=0,ot=k.length;St<ot;St++)for(var Ke=this.calculateRange("$eq",v,k[St]),gt=Ke[0];gt<=Ke[1];gt++)et[gt]===void 0&&(et[gt]=!0,yt.push(gt));return yt}switch(h){case"$eq":case"$aeq":case"$dteq":case"$gte":case"$lt":ie=this.calculateRangeStart(v,k,!1,je),pe=a.getIn(T[O[ie]],v,je);break}switch(h){case"$eq":case"$aeq":case"$dteq":case"$lte":case"$gt":_e=this.calculateRangeEnd(v,k,je),a.getIn(T[O[_e]],v,je);break}switch(h){case"$eq":case"$aeq":case"$dteq":return c.aeq(pe,k)?[ie,_e]:[0,-1];case"$gt":return c.aeq(a.getIn(T[O[_e]],v,je),k)?[_e+1,te]:[_e,te];case"$gte":return c.aeq(a.getIn(T[O[ie]],v,je),k)?[ie,te]:[ie+1,te];case"$lt":return c.aeq(a.getIn(T[O[ie]],v,je),k)?[z,ie-1]:[z,ie];case"$lte":return c.aeq(a.getIn(T[O[_e]],v,je),k)?[z,_e]:[z,_e-1];default:return[0,T.length-1]}},G.prototype.by=function(h,v){var k;if(v===void 0)return k=this,function(O){return k.by(h,O)};var T=this.getUniqueIndex(h,!0).get(v);return this.cloneObjects?P(T,this.cloneMethod):T},G.prototype.findOne=function(h){h=h||{};var v=this.chain().find(h,!0).data();return Array.isArray(v)&&v.length===0?null:this.cloneObjects?P(v[0],this.cloneMethod):v[0]},G.prototype.chain=function(h,v){var k=new ke(this);return typeof h>"u"?k:k.transform(h,v)},G.prototype.find=function(h){return this.chain().find(h).data()},G.prototype.findOneUnindexed=function(h,v){for(var k=this.data.length,T;k--;)if(a.getIn(this.data[k],h,!0)===v)return T=this.data[k],T;return null},G.prototype.startTransaction=function(){if(this.transactional){this.cachedData=P(this.data,this.cloneMethod),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices,this.cachedDirtyIds=this.dirtyIds;for(var h=0;h<this.DynamicViews.length;h++)this.DynamicViews[h].startTransaction()}},G.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedDirtyIds=null;for(var h=0;h<this.DynamicViews.length;h++)this.DynamicViews[h].commit()}},G.prototype.rollback=function(){if(this.transactional){this.cachedData!==null&&this.cachedIndex!==null&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex,this.dirtyIds=this.cachedDirtyIds);for(var h=0;h<this.DynamicViews.length;h++)this.DynamicViews[h].rollback()}},G.prototype.async=function(h,v){setTimeout(function(){if(typeof h=="function")h(),v();else throw new TypeError("Argument passed for async execution is not a function")},0)},G.prototype.where=function(h){return this.chain().where(h).data()},G.prototype.mapReduce=function(h,v){try{return v(this.data.map(h))}catch(k){throw k}},G.prototype.eqJoin=function(h,v,k,T,O){return new ke(this).eqJoin(h,v,k,T,O)},G.prototype.stages={},G.prototype.getStage=function(h){return this.stages[h]||(this.stages[h]={}),this.stages[h]},G.prototype.commitLog=[],G.prototype.stage=function(h,v){var k=JSON.parse(JSON.stringify(v));return this.getStage(h)[v.$loki]=k,k},G.prototype.commitStage=function(h,v){var k=this.getStage(h),T,O=new Date().getTime();for(T in k)this.update(k[T]),this.commitLog.push({timestamp:O,message:v,data:JSON.parse(JSON.stringify(k[T]))});this.stages[h]={}},G.prototype.no_op=function(){},G.prototype.extract=function(h){var v=0,k=this.data.length,T=Ae(h),O=[];for(v;v<k;v+=1)O.push(Fe(this.data[v],h,T));return O},G.prototype.max=function(h){return Math.max.apply(null,this.extract(h))},G.prototype.min=function(h){return Math.min.apply(null,this.extract(h))},G.prototype.maxRecord=function(h){var v=0,k=this.data.length,T=Ae(h),O={index:0,value:void 0},z;for(v;v<k;v+=1)z!==void 0?z<Fe(this.data[v],h,T)&&(z=Fe(this.data[v],h,T),O.index=this.data[v].$loki):(z=Fe(this.data[v],h,T),O.index=this.data[v].$loki);return O.value=z,O},G.prototype.minRecord=function(h){var v=0,k=this.data.length,T=Ae(h),O={index:0,value:void 0},z;for(v;v<k;v+=1)z!==void 0?z>Fe(this.data[v],h,T)&&(z=Fe(this.data[v],h,T),O.index=this.data[v].$loki):(z=Fe(this.data[v],h,T),O.index=this.data[v].$loki);return O.value=z,O},G.prototype.extractNumerical=function(h){return this.extract(h).map(Te).filter(Number).filter(function(v){return!isNaN(v)})},G.prototype.avg=function(h){return Qe(this.extractNumerical(h))},G.prototype.stdDev=function(h){return nt(this.extractNumerical(h))},G.prototype.mode=function(h){var v={},k=this.extract(h);k.forEach(function(te){v[te]?v[te]+=1:v[te]=1});var T,O,z;for(O in v)T?T<v[O]&&(z=O):(z=O,T=v[O]);return z},G.prototype.median=function(h){var v=this.extractNumerical(h);v.sort(ze);var k=Math.floor(v.length/2);return v.length%2?v[k]:(v[k-1]+v[k])/2};function Ae(h){return h.indexOf(".")!==-1}function Te(h){return parseFloat(h,10)}function qe(h,v){return h+v}function ze(h,v){return h-v}function Qe(h){return h.reduce(qe,0)/h.length}function nt(h){var v=Qe(h),k=h.map(function(z){var te=z-v,ie=te*te;return ie}),T=Qe(k),O=Math.sqrt(T);return O}function Fe(h,v,k){if(k===!1)return h[v];for(var T=v.split("."),O=h;T.length>0;)O=O[T.shift()];return O}function He(h,v,k){for(var T=0,O=h.length,z,te;T<O;){if(te=T+O>>1,z=k.apply(null,[v,h[te]]),z===0)return{found:!0,index:te};z<0?O=te:T=te+1}return{found:!1,index:O}}function $e(h){return function(v,k){return He(v,k,h)}}function Me(){}Me.prototype={keys:[],values:[],sort:function(h,v){return h<v?-1:h>v?1:0},setSort:function(h){this.bs=new $e(h)},bs:function(){return new $e(this.sort)},set:function(h,v){var k=this.bs(this.keys,h);k.found?this.values[k.index]=v:(this.keys.splice(k.index,0,h),this.values.splice(k.index,0,v))},get:function(h){return this.values[He(this.keys,h,this.sort).index]}};function fe(h){this.field=h,this.keyMap=Object.create(null),this.lokiMap=Object.create(null)}fe.prototype.keyMap={},fe.prototype.lokiMap={},fe.prototype.set=function(h){var v=h[this.field];if(v!==null&&typeof v<"u"){if(this.keyMap[v])throw new Error("Duplicate key for property "+this.field+": "+v);this.keyMap[v]=h,this.lokiMap[h.$loki]=v}},fe.prototype.get=function(h){return this.keyMap[h]},fe.prototype.byId=function(h){return this.keyMap[this.lokiMap[h]]},fe.prototype.update=function(h,v){if(this.lokiMap[h.$loki]!==v[this.field]){var k=this.lokiMap[h.$loki];this.set(v),this.keyMap[k]=void 0}else this.keyMap[h[this.field]]=v},fe.prototype.remove=function(h){var v=this.keyMap[h];if(v!==null&&typeof v<"u")this.keyMap[h]=void 0,this.lokiMap[v.$loki]=void 0;else throw new Error("Key is not in unique index: "+this.field)},fe.prototype.clear=function(){this.keyMap=Object.create(null),this.lokiMap=Object.create(null)};function pt(h){this.index=Object.create(null),this.field=h}return pt.prototype={set:function(v,k){this.index[v]?this.index[v].push(k):this.index[v]=[k]},remove:function(v,k){var T=this.index[v];for(var O in T)T[O]==k&&T.splice(O,1);T.length<1&&(this.index[v]=void 0)},get:function(v){return this.index[v]},clear:function(v){this.index={}}},p.deepFreeze=r,p.freeze=i,p.unFreeze=s,p.LokiOps=R,p.Collection=G,p.DynamicView=Q,p.Resultset=ke,p.KeyValueStore=Me,p.LokiMemoryAdapter=Z,p.LokiPartitioningAdapter=J,p.LokiLocalStorageAdapter=me,p.LokiFsAdapter=ce,p.persistenceAdapters={fs:ce,localStorage:me},p.aeq=f,p.lt=b,p.gt=m,p.Comparators=c,p}()})})(wx);var aO=wx.exports;const lO=jr(aO);function Fs(e){return Array.isArray?Array.isArray(e):kx(e)==="[object Array]"}const cO=1/0;function uO(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-cO?"-0":t}function fO(e){return e==null?"":uO(e)}function rs(e){return typeof e=="string"}function _x(e){return typeof e=="number"}function hO(e){return e===!0||e===!1||dO(e)&&kx(e)=="[object Boolean]"}function xx(e){return typeof e=="object"}function dO(e){return xx(e)&&e!==null}function ei(e){return e!=null}function Zp(e){return!e.trim().length}function kx(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const pO="Incorrect 'index' type",gO=e=>`Invalid value for key ${e}`,yO=e=>`Pattern length exceeds max of ${e}.`,mO=e=>`Missing ${e} property in key`,vO=e=>`Property 'weight' in key '${e}' must be a positive integer`,J1=Object.prototype.hasOwnProperty;class bO{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Sx(r);n+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Sx(e){let t=null,n=null,r=null,i=1,s=null;if(rs(e)||Fs(e))r=e,t=X1(e),n=Hg(e);else{if(!J1.call(e,"name"))throw new Error(mO("name"));const a=e.name;if(r=a,J1.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(vO(a));t=X1(a),n=Hg(a),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function X1(e){return Fs(e)?e:e.split(".")}function Hg(e){return Fs(e)?e.join("."):e}function wO(e,t){let n=[],r=!1;const i=(s,a,c)=>{if(ei(s))if(!a[c])n.push(s);else{let f=a[c];const b=s[f];if(!ei(b))return;if(c===a.length-1&&(rs(b)||_x(b)||hO(b)))n.push(fO(b));else if(Fs(b)){r=!0;for(let m=0,w=b.length;m<w;m+=1)i(b[m],a,c+1)}else a.length&&i(b,a,c+1)}};return i(e,rs(t)?t.split("."):t,0),r?n:n[0]}const _O={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},xO={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},kO={location:0,threshold:.6,distance:100},SO={useExtendedSearch:!1,getFn:wO,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Nt={...xO,..._O,...kO,...SO};const EO=/[^ ]+/g;function AO(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(EO).length;if(n.has(s))return n.get(s);const a=1/Math.pow(s,.5*e),c=parseFloat(Math.round(a*r)/r);return n.set(s,c),c},clear(){n.clear()}}}class Tm{constructor({getFn:t=Nt.getFn,fieldNormWeight:n=Nt.fieldNormWeight}={}){this.norm=AO(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,rs(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();rs(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ei(t)||Zp(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let a=i.getFn?i.getFn(t):this.getFn(t,i.path);if(ei(a)){if(Fs(a)){let c=[];const f=[{nestedArrIndex:-1,value:a}];for(;f.length;){const{nestedArrIndex:b,value:m}=f.pop();if(ei(m))if(rs(m)&&!Zp(m)){let w={v:m,i:b,n:this.norm.get(m)};c.push(w)}else Fs(m)&&m.forEach((w,_)=>{f.push({nestedArrIndex:_,value:w})})}r.$[s]=c}else if(rs(a)&&!Zp(a)){let c={v:a,n:this.norm.get(a)};r.$[s]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Ex(e,t,{getFn:n=Nt.getFn,fieldNormWeight:r=Nt.fieldNormWeight}={}){const i=new Tm({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Sx)),i.setSources(t),i.create(),i}function CO(e,{getFn:t=Nt.getFn,fieldNormWeight:n=Nt.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new Tm({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function _f(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Nt.distance,ignoreLocation:s=Nt.ignoreLocation}={}){const a=t/e.length;if(s)return a;const c=Math.abs(r-n);return i?a+c/i:c?1:a}function TO(e=[],t=Nt.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let a=e.length;s<a;s+=1){let c=e[s];c&&r===-1?r=s:!c&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const ia=32;function IO(e,t,n,{location:r=Nt.location,distance:i=Nt.distance,threshold:s=Nt.threshold,findAllMatches:a=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,includeMatches:f=Nt.includeMatches,ignoreLocation:b=Nt.ignoreLocation}={}){if(t.length>ia)throw new Error(yO(ia));const m=t.length,w=e.length,_=Math.max(0,Math.min(r,w));let A=s,I=_;const C=c>1||f,R=C?Array(w):[];let $;for(;($=e.indexOf(t,I))>-1;){let p=_f(t,{currentLocation:$,expectedLocation:_,distance:i,ignoreLocation:b});if(A=Math.min(p,A),I=$+m,C){let Z=0;for(;Z<m;)R[$+Z]=1,Z+=1}}I=-1;let L=[],P=1,N=m+w;const M=1<<m-1;for(let p=0;p<m;p+=1){let Z=0,J=N;for(;Z<J;)_f(t,{errors:p,currentLocation:_+J,expectedLocation:_,distance:i,ignoreLocation:b})<=A?Z=J:N=J,J=Math.floor((N-Z)/2+Z);N=J;let ce=Math.max(1,_-J+1),me=a?w:Math.min(_+J,w)+m,ke=Array(me+2);ke[me+1]=(1<<p)-1;for(let Q=me;Q>=ce;Q-=1){let G=Q-1,Ae=n[e.charAt(G)];if(C&&(R[G]=+!!Ae),ke[Q]=(ke[Q+1]<<1|1)&Ae,p&&(ke[Q]|=(L[Q+1]|L[Q])<<1|1|L[Q+1]),ke[Q]&M&&(P=_f(t,{errors:p,currentLocation:G,expectedLocation:_,distance:i,ignoreLocation:b}),P<=A)){if(A=P,I=G,I<=_)break;ce=Math.max(1,2*_-I)}}if(_f(t,{errors:p+1,currentLocation:_,expectedLocation:_,distance:i,ignoreLocation:b})>A)break;L=ke}const U={isMatch:I>=0,score:Math.max(.001,P)};if(C){const p=TO(R,c);p.length?f&&(U.indices=p):U.isMatch=!1}return U}function $O(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Ax{constructor(t,{location:n=Nt.location,threshold:r=Nt.threshold,distance:i=Nt.distance,includeMatches:s=Nt.includeMatches,findAllMatches:a=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,isCaseSensitive:f=Nt.isCaseSensitive,ignoreLocation:b=Nt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:b},this.pattern=f?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const m=(_,A)=>{this.chunks.push({pattern:_,alphabet:$O(_),startIndex:A})},w=this.pattern.length;if(w>ia){let _=0;const A=w%ia,I=w-A;for(;_<I;)m(this.pattern.substr(_,ia),_),_+=ia;if(A){const C=w-ia;m(this.pattern.substr(C),C)}}else m(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let I={isMatch:!0,score:0};return r&&(I.indices=[[0,t.length-1]]),I}const{location:i,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,ignoreLocation:b}=this.options;let m=[],w=0,_=!1;this.chunks.forEach(({pattern:I,alphabet:C,startIndex:R})=>{const{isMatch:$,score:L,indices:P}=IO(t,I,C,{location:i+R,distance:s,threshold:a,findAllMatches:c,minMatchCharLength:f,includeMatches:r,ignoreLocation:b});$&&(_=!0),w+=L,$&&P&&(m=[...m,...P])});let A={isMatch:_,score:_?w/this.chunks.length:1};return _&&r&&(A.indices=m),A}}class Co{constructor(t){this.pattern=t}static isMultiMatch(t){return Q1(t,this.multiRegex)}static isSingleMatch(t){return Q1(t,this.singleRegex)}search(){}}function Q1(e,t){const n=e.match(t);return n?n[1]:null}class PO extends Co{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class OO extends Co{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class NO extends Co{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class RO extends Co{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class MO extends Co{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class DO extends Co{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Cx extends Co{constructor(t,{location:n=Nt.location,threshold:r=Nt.threshold,distance:i=Nt.distance,includeMatches:s=Nt.includeMatches,findAllMatches:a=Nt.findAllMatches,minMatchCharLength:c=Nt.minMatchCharLength,isCaseSensitive:f=Nt.isCaseSensitive,ignoreLocation:b=Nt.ignoreLocation}={}){super(t),this._bitapSearch=new Ax(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:b})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Tx extends Co{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const qg=[PO,Tx,NO,RO,DO,MO,OO,Cx],eb=qg.length,BO=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,LO="|";function FO(e,t={}){return e.split(LO).map(n=>{let r=n.trim().split(BO).filter(s=>s&&!!s.trim()),i=[];for(let s=0,a=r.length;s<a;s+=1){const c=r[s];let f=!1,b=-1;for(;!f&&++b<eb;){const m=qg[b];let w=m.isMultiMatch(c);w&&(i.push(new m(w,t)),f=!0)}if(!f)for(b=-1;++b<eb;){const m=qg[b];let w=m.isSingleMatch(c);if(w){i.push(new m(w,t));break}}}return i})}const UO=new Set([Cx.type,Tx.type]);class jO{constructor(t,{isCaseSensitive:n=Nt.isCaseSensitive,includeMatches:r=Nt.includeMatches,minMatchCharLength:i=Nt.minMatchCharLength,ignoreLocation:s=Nt.ignoreLocation,findAllMatches:a=Nt.findAllMatches,location:c=Nt.location,threshold:f=Nt.threshold,distance:b=Nt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:a,ignoreLocation:s,location:c,threshold:f,distance:b},this.pattern=n?t:t.toLowerCase(),this.query=FO(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,a=[],c=0;for(let f=0,b=n.length;f<b;f+=1){const m=n[f];a.length=0,s=0;for(let w=0,_=m.length;w<_;w+=1){const A=m[w],{isMatch:I,indices:C,score:R}=A.search(t);if(I){if(s+=1,c+=R,r){const $=A.constructor.type;UO.has($)?a=[...a,...C]:a.push(C)}}else{c=0,s=0,a.length=0;break}}if(s){let w={isMatch:!0,score:c/s};return r&&(w.indices=a),w}}return{isMatch:!1,score:1}}}const Kg=[];function zO(...e){Kg.push(...e)}function Wg(e,t){for(let n=0,r=Kg.length;n<r;n+=1){let i=Kg[n];if(i.condition(e,t))return new i(e,t)}return new Ax(e,t)}const wh={AND:"$and",OR:"$or"},Vg={PATH:"$path",PATTERN:"$val"},Gg=e=>!!(e[wh.AND]||e[wh.OR]),HO=e=>!!e[Vg.PATH],qO=e=>!Fs(e)&&xx(e)&&!Gg(e),tb=e=>({[wh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ix(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const a=HO(i);if(!a&&s.length>1&&!Gg(i))return r(tb(i));if(qO(i)){const f=a?i[Vg.PATH]:s[0],b=a?i[Vg.PATTERN]:i[f];if(!rs(b))throw new Error(gO(f));const m={keyId:Hg(f),pattern:b};return n&&(m.searcher=Wg(b,t)),m}let c={children:[],operator:s[0]};return s.forEach(f=>{const b=i[f];Fs(b)&&b.forEach(m=>{c.children.push(r(m))})}),c};return Gg(e)||(e=tb(e)),r(e)}function KO(e,{ignoreFieldNorm:t=Nt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:a})=>{const c=i?i.weight:null;r*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(t?1:s))}),n.score=r})}function WO(e,t){const n=e.matches;t.matches=[],ei(n)&&n.forEach(r=>{if(!ei(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let a={indices:i,value:s};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),t.matches.push(a)})}function VO(e,t){t.score=e.score}function GO(e,t,{includeMatches:n=Nt.includeMatches,includeScore:r=Nt.includeScore}={}){const i=[];return n&&i.push(WO),r&&i.push(VO),e.map(s=>{const{idx:a}=s,c={item:t[a],refIndex:a};return i.length&&i.forEach(f=>{f(s,c)}),c})}class Pl{constructor(t,n={},r){this.options={...Nt,...n},this.options.useExtendedSearch,this._keyStore=new bO(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Tm))throw new Error(pO);this._myIndex=n||Ex(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ei(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:a,ignoreFieldNorm:c}=this.options;let f=rs(t)?rs(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return KO(f,{ignoreFieldNorm:c}),s&&f.sort(a),_x(n)&&n>-1&&(f=f.slice(0,n)),GO(f,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=Wg(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:a,n:c})=>{if(!ei(s))return;const{isMatch:f,score:b,indices:m}=n.searchIn(s);f&&i.push({item:s,idx:a,matches:[{score:b,value:s,norm:c,indices:m}]})}),i}_searchLogical(t){const n=Ix(t,this.options),r=(c,f,b)=>{if(!c.children){const{keyId:w,searcher:_}=c,A=this._findMatches({key:this._keyStore.get(w),value:this._myIndex.getValueForItemAtKeyId(f,w),searcher:_});return A&&A.length?[{idx:b,item:f,matches:A}]:[]}const m=[];for(let w=0,_=c.children.length;w<_;w+=1){const A=c.children[w],I=r(A,f,b);if(I.length)m.push(...I);else if(c.operator===wh.AND)return[]}return m},i=this._myIndex.records,s={},a=[];return i.forEach(({$:c,i:f})=>{if(ei(c)){let b=r(n,c,f);b.length&&(s[f]||(s[f]={idx:f,item:c,matches:[]},a.push(s[f])),b.forEach(({matches:m})=>{s[f].matches.push(...m)}))}}),a}_searchObjectList(t){const n=Wg(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:a,i:c})=>{if(!ei(a))return;let f=[];r.forEach((b,m)=>{f.push(...this._findMatches({key:b,value:a[m],searcher:n}))}),f.length&&s.push({idx:c,item:a,matches:f})}),s}_findMatches({key:t,value:n,searcher:r}){if(!ei(n))return[];let i=[];if(Fs(n))n.forEach(({v:s,i:a,n:c})=>{if(!ei(s))return;const{isMatch:f,score:b,indices:m}=r.searchIn(s);f&&i.push({score:b,key:t,value:s,idx:a,norm:c,indices:m})});else{const{v:s,n:a}=n,{isMatch:c,score:f,indices:b}=r.searchIn(s);c&&i.push({score:f,key:t,value:s,norm:a,indices:b})}return i}}Pl.version="6.6.2";Pl.createIndex=Ex;Pl.parseIndex=CO;Pl.config=Nt;Pl.parseQuery=Ix;zO(jO);const YO={keys:["name","display_name"],includeScore:!0,includeMatches:!0,threshold:.3},nb=Cc.throttle(()=>{Pe.get("searchIndexUpdated").put(!0)},2e3),$x={index:new Pl([],YO),keys:new Set,add(e){this.keys.has(e.key)||(this.keys.add(e.key),this.index.add(e),nb())},remove(e){this.keys.delete(e),this.index.remove(t=>t.key===e),nb()},search(e){return this.index.search(e)}};class ZO{constructor(){xe(this,"_data",new Map)}upsert(t,n){var s;const r=this._data.get(t),i=(r==null?void 0:r.relays)||new Set;return(s=n.relays)==null||s.forEach(a=>i.add(this._normalizeURL(a))),this._data.set(t,{relays:i}),this}get(t){if(t)return this._data.get(t)}getRelays(t){var n;return t?Array.from(((n=this.get(t))==null?void 0:n.relays)||[]):[]}_normalizeURL(t){return t.trim().replace(/\/$/,"")}}const bn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fn=Object.keys,hr=Array.isArray;function Tr(e,t){return typeof t!="object"||Fn(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||bn.Promise||(bn.Promise=Promise);const Xc=Object.getPrototypeOf,JO={}.hasOwnProperty;function ri(e,t){return JO.call(e,t)}function kl(e,t){typeof t=="function"&&(t=t(Xc(e))),(typeof Reflect>"u"?Fn:Reflect.ownKeys)(t).forEach(n=>{Ds(e,n,t[n])})}const Px=Object.defineProperty;function Ds(e,t,n,r){Px(e,t,Tr(n&&ri(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function hl(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Ds(e.prototype,"constructor",e),{extend:kl.bind(null,e.prototype)}}}}const XO=Object.getOwnPropertyDescriptor;function Im(e,t){let n;return XO(e,t)||(n=Xc(e))&&Im(n,t)}const QO=[].slice;function _h(e,t,n){return QO.call(e,t,n)}function Ox(e,t){return t(e)}function Tc(e){if(!e)throw new Error("Assertion Failed")}function Nx(e){bn.setImmediate?setImmediate(e):setTimeout(e,0)}function Rx(e,t){return e.reduce((n,r,i)=>{var s=t(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Bs(e,t){if(ri(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var s=Bs(e,t[r]);n.push(s)}return n}var a=t.indexOf(".");if(a!==-1){var c=e[t.substr(0,a)];return c===void 0?void 0:Bs(c,t.substr(a+1))}}function Fi(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Tc(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)Fi(e,t[r],n[r])}else{var s=t.indexOf(".");if(s!==-1){var a=t.substr(0,s),c=t.substr(s+1);if(c==="")n===void 0?hr(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var f=e[a];f&&ri(e,a)||(f=e[a]={}),Fi(f,c,n)}}else n===void 0?hr(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Mx(e){var t={};for(var n in e)ri(e,n)&&(t[n]=e[n]);return t}const eN=[].concat;function Dx(e){return eN.apply([],e)}const Bx="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Dx([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>bn[e]),tN=Bx.map(e=>bn[e]);Rx(Bx,e=>[e,!0]);let lo=null;function wu(e){lo=typeof WeakMap<"u"&&new WeakMap;const t=Yg(e);return lo=null,t}function Yg(e){if(!e||typeof e!="object")return e;let t=lo&&lo.get(e);if(t)return t;if(hr(e)){t=[],lo&&lo.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Yg(e[n]))}else if(tN.indexOf(e.constructor)>=0)t=e;else{const s=Xc(e);for(var i in t=s===Object.prototype?{}:Object.create(s),lo&&lo.set(e,t),e)ri(e,i)&&(t[i]=Yg(e[i]))}return t}const{toString:nN}={};function Zg(e){return nN.call(e).slice(8,-1)}const Jg=typeof Symbol<"u"?Symbol.iterator:"@@iterator",rN=typeof Jg=="symbol"?function(e){var t;return e!=null&&(t=e[Jg])&&t.apply(e)}:function(){return null},rl={};function $s(e){var t,n,r,i;if(arguments.length===1){if(hr(e))return e.slice();if(this===rl&&typeof e=="string")return[e];if(i=rN(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const $m=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var us=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lx(e,t){us=e,Fx=t}var Fx=()=>!0;const iN=!new Error("").stack;function ka(){if(iN)try{throw ka.arguments,new Error}catch(e){return e}return new Error}function Xg(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Fx).map(r=>`
`+r).join("")):""}var Ux=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pm=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ux),sN={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function dl(e,t){this._e=ka(),this.name=e,this.message=t}function jx(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function xh(e,t,n,r){this._e=ka(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=jx(e,t)}function Mc(e,t){this._e=ka(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=jx(e,t)}hl(dl).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Xg(this._e,2))}},toString:function(){return this.name+": "+this.message}}),hl(xh).from(dl),hl(Mc).from(dl);var Om=Pm.reduce((e,t)=>(e[t]=t+"Error",e),{});const oN=dl;var $t=Pm.reduce((e,t)=>{var n=t+"Error";function r(i,s){this._e=ka(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=sN[t]||n,this.inner=null)}return hl(r).from(oN),e[t]=r,e},{});$t.Syntax=SyntaxError,$t.Type=TypeError,$t.Range=RangeError;var rb=Ux.reduce((e,t)=>(e[t+"Error"]=$t[t],e),{}),jf=Pm.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=$t[t]),e),{});function dn(){}function Qc(e){return e}function aN(e,t){return e==null||e===Qc?t:function(n){return t(e(n))}}function ba(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function lN(e,t){return e===dn?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ba(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ba(i,this.onerror):i),s!==void 0?s:n}}function cN(e,t){return e===dn?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ba(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ba(r,this.onerror):r)}}function uN(e,t){return e===dn?t:function(n){var r=e.apply(this,arguments);Tr(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ba(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ba(s,this.onerror):s),r===void 0?a===void 0?void 0:a:Tr(r,a)}}function fN(e,t){return e===dn?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Nm(e,t){return e===dn?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}jf.ModifyError=xh,jf.DexieError=dl,jf.BulkError=Mc;var eu={};const zx=100,[Qg,kh,ey]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Xc(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Xc(t),e]})(),Hx=kh&&kh.then,zf=Qg&&Qg.constructor,Rm=!!ey;var ty=!1,hN=ey?()=>{ey.then(xf)}:bn.setImmediate?setImmediate.bind(null,xf):bn.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{xf(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(xf,0)},Dc=function(e,t){Ic.push([e,t]),Sh&&(hN(),Sh=!1)},ny=!0,Sh=!0,da=[],Hf=[],ry=null,iy=Qc,pl={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ob,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{ob(e[0],e[1])}catch{}})}},_t=pl,Ic=[],pa=0,qf=[];function dt(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=dn,this._lib=!1;var t=this._PSD=_t;if(us&&(this._stackHolder=ka(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==eu)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&oy(this,this._value))}this._state=null,this._value=null,++t.ref,Kx(this,e)}const sy={get:function(){var e=_t,t=Eh;function n(r,i){var s=!e.global&&(e!==_t||t!==Eh);const a=s&&!Us();var c=new dt((f,b)=>{Mm(this,new qx(Ah(r,e,s,a),Ah(i,e,s,a),f,b,e))});return us&&Gx(c,this),c}return n.prototype=eu,n},set:function(e){Ds(this,"then",e&&e.prototype===eu?sy:{get:function(){return e},set:sy.set})}};function qx(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function Kx(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&_u();n&&typeof n.then=="function"?Kx(e,(i,s)=>{n instanceof dt?n._then(i,s):n.then(i,s)}):(e._state=!0,e._value=n,Wx(e)),r&&xu()}},oy.bind(null,e))}catch(n){oy(e,n)}}function oy(e,t){if(Hf.push(t),e._state===null){var n=e._lib&&_u();t=iy(t),e._state=!1,e._value=t,us&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,s){try{r.apply(null,s)}catch(a){i&&i(a)}}(()=>{var r=Im(t,"stack");t._promise=e,Ds(t,"stack",{get:()=>ty?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){da.some(i=>i._value===r._value)||da.push(r)}(e),Wx(e),n&&xu()}}function Wx(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Mm(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),pa===0&&(++pa,Dc(()=>{--pa==0&&Dm()},[]))}function Mm(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++pa,Dc(dN,[n,e,t])}else e._listeners.push(t)}function dN(e,t,n){try{ry=t;var r,i=t._value;t._state?r=e(i):(Hf.length&&(Hf=[]),r=e(i),Hf.indexOf(i)===-1&&function(s){for(var a=da.length;a;)if(da[--a]._value===s._value)return void da.splice(a,1)}(t)),n.resolve(r)}catch(s){n.reject(s)}finally{ry=null,--pa==0&&Dm(),--n.psd.ref||n.psd.finalize()}}function Vx(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,s,a=e._value;a!=null?(i=a.name||"Error",s=a.message||a,r=Xg(a,0)):(i=a,s=""),t.push(i+(s?": "+s:"")+r)}return us&&((r=Xg(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&Vx(e._prev,t,n)),t}function Gx(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function xf(){_u()&&xu()}function _u(){var e=ny;return ny=!1,Sh=!1,e}function xu(){var e,t,n;do for(;Ic.length>0;)for(e=Ic,Ic=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ic.length>0);ny=!0,Sh=!0}function Dm(){var e=da;da=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=qf.slice(0),n=t.length;n;)t[--n]()}function kf(e){return new dt(eu,!1,e)}function xn(e,t){var n=_t;return function(){var r=_u(),i=_t;try{return xo(n,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{xo(i,!1),r&&xu()}}}kl(dt.prototype,{then:sy,_then:function(e,t){Mm(this,new qx(null,null,e,t,_t))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):kf(r)):this.then(null,r=>r&&r.name===t?n(r):kf(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),kf(t)))},stack:{get:function(){if(this._stack)return this._stack;try{ty=!0;var e=Vx(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{ty=!1}}},timeout:function(e,t){return e<1/0?new dt((n,r)=>{var i=setTimeout(()=>r(new $t.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ds(dt.prototype,Symbol.toStringTag,"Dexie.Promise"),pl.env=Yx(),kl(dt,{all:function(){var e=$s.apply(null,arguments).map(Sf);return new dt(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,s)=>dt.resolve(i).then(a=>{e[s]=a,--r||t(e)},n))})},resolve:e=>{if(e instanceof dt)return e;if(e&&typeof e.then=="function")return new dt((n,r)=>{e.then(n,r)});var t=new dt(eu,!0,e);return Gx(t,ry),t},reject:kf,race:function(){var e=$s.apply(null,arguments).map(Sf);return new dt((t,n)=>{e.map(r=>dt.resolve(r).then(t,n))})},PSD:{get:()=>_t,set:e=>_t=e},totalEchoes:{get:()=>Eh},newPSD:_o,usePSD:Nl,scheduler:{get:()=>Dc,set:e=>{Dc=e}},rejectionMapper:{get:()=>iy,set:e=>{iy=e}},follow:(e,t)=>new dt((n,r)=>_o((i,s)=>{var a=_t;a.unhandleds=[],a.onunhandled=s,a.finalize=ba(function(){(function(c){function f(){c(),qf.splice(qf.indexOf(f),1)}qf.push(f),++pa,Dc(()=>{--pa==0&&Dm()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},a.finalize),e()},t,n,r))}),zf&&(zf.allSettled&&Ds(dt,"allSettled",function(){const e=$s.apply(null,arguments).map(Sf);return new dt(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,s)=>dt.resolve(i).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||t(r)))})}),zf.any&&typeof AggregateError<"u"&&Ds(dt,"any",function(){const e=$s.apply(null,arguments).map(Sf);return new dt((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((s,a)=>dt.resolve(s).then(c=>t(c),c=>{i[a]=c,--r||n(new AggregateError(i))}))})}));const fr={awaits:0,echoes:0,id:0};var pN=0,Kf=[],Jp=0,Eh=0,gN=0;function _o(e,t,n,r){var i=_t,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++gN;var a=pl.env;s.env=Rm?{Promise:dt,PromiseProp:{value:dt,configurable:!0,writable:!0},all:dt.all,race:dt.race,allSettled:dt.allSettled,any:dt.any,resolve:dt.resolve,reject:dt.reject,nthen:ib(a.nthen,s),gthen:ib(a.gthen,s)}:{},t&&Tr(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=Nl(s,e,n,r);return s.ref===0&&s.finalize(),c}function Ol(){return fr.id||(fr.id=++pN),++fr.awaits,fr.echoes+=zx,fr.id}function Us(){return!!fr.awaits&&(--fr.awaits==0&&(fr.id=0),fr.echoes=fr.awaits*zx,!0)}function Sf(e){return fr.echoes&&e&&e.constructor===zf?(Ol(),e.then(t=>(Us(),t),t=>(Us(),Vn(t)))):e}function yN(e){++Eh,fr.echoes&&--fr.echoes!=0||(fr.echoes=fr.id=0),Kf.push(_t),xo(e,!0)}function mN(){var e=Kf[Kf.length-1];Kf.pop(),xo(e,!1)}function xo(e,t){var n=_t;if((t?!fr.echoes||Jp++&&e===_t:!Jp||--Jp&&e===_t)||Zx(t?yN.bind(null,e):mN),e!==_t&&(_t=e,n===pl&&(pl.env=Yx()),Rm)){var r=pl.env.Promise,i=e.env;kh.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(bn,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Yx(){var e=bn.Promise;return Rm?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(bn,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:kh.then,gthen:e.prototype.then}:{}}function Nl(e,t,n,r,i){var s=_t;try{return xo(e,!0),t(n,r,i)}finally{xo(s,!1)}}function Zx(e){Hx.call(Qg,e)}function Ah(e,t,n,r){return typeof e!="function"?e:function(){var i=_t;n&&Ol(),xo(t,!0);try{return e.apply(this,arguments)}finally{xo(i,!1),r&&Zx(Us)}}}function ib(e,t){return function(n,r){return e.call(this,Ah(n,t),Ah(r,t))}}(""+Hx).indexOf("[native code]")===-1&&(Ol=Us=dn);const sb="unhandledrejection";function ob(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(bn.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(sb,!0,!0),Tr(r,i)):bn.CustomEvent&&Tr(r=new CustomEvent(sb,{detail:i}),i),r&&bn.dispatchEvent&&(dispatchEvent(r),!bn.PromiseRejectionEvent&&bn.onunhandledrejection))try{bn.onunhandledrejection(r)}catch{}us&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Vn=dt.reject;function ay(e,t,n,r){if(e.idbdb&&(e._state.openComplete||_t.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===Om.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>ay(e,t,n,r))):Vn(s)}return i._promise(t,(s,a)=>_o(()=>(_t.trans=i,r(s,a,i)))).then(s=>i._completion.then(()=>s))}if(e._state.openComplete)return Vn(new $t.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Vn(new $t.DatabaseClosed);e.open().catch(dn)}return e._state.dbReadyPromise.then(()=>ay(e,t,n,r))}const ab="3.2.4",la=String.fromCharCode(65535),ly=-1/0,Ts="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Jx="String expected.",Bc=[],hd=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vN=hd,bN=hd,Xx=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),dd="__dbnames",Xp="readonly",Qp="readwrite";function wa(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Qx={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ef(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=wu(t))[e],t)}class wN{_trans(t,n,r){const i=this._tx||_t.trans,s=this.name;function a(f,b,m){if(!m.schema[s])throw new $t.NotFound("Table "+s+" not part of transaction");return n(m.idbtrans,m)}const c=_u();try{return i&&i.db===this.db?i===_t.trans?i._promise(t,a,r):_o(()=>i._promise(t,a,r),{trans:i,transless:_t.transless||_t}):ay(this.db,t,[this.name],a)}finally{c&&xu()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(hr(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=Fn(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(b=>b.compound&&n.every(m=>b.keyPath.indexOf(m)>=0)&&b.keyPath.every(m=>n.indexOf(m)>=0))[0];if(r&&this.db._maxKey!==la)return this.where(r.name).equals(r.keyPath.map(b=>t[b]));!r&&us&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function a(b,m){try{return s.cmp(b,m)===0}catch{return!1}}const[c,f]=n.reduce(([b,m],w)=>{const _=i[w],A=t[w];return[b||_,b||!_?wa(m,_&&_.multi?I=>{const C=Bs(I,w);return hr(C)&&C.some(R=>a(A,R))}:I=>a(A,Bs(I,w))):m]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(f):r?this.filter(f):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,hr(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var s in r)if(ri(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Tr(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=Ef(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?dt.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Fi(t,i,a)}catch{}return a})}update(t,n){if(typeof t!="object"||hr(t))return this.where(":id").equals(t).modify(n);{const r=Bs(t,this.schema.primKey.keyPath);if(r===void 0)return Vn(new $t.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Fn(n).forEach(i=>{Fi(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=t;return i&&r&&(s=Ef(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?dt.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Fi(t,i,a)}catch{}return a})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?dt.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Qx})).then(t=>t.numFailures?dt.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:c,keyPath:f}=this.schema.primKey;if(f&&i)throw new $t.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new $t.InvalidArgument("Arguments objects and keys must have the same length");const b=t.length;let m=f&&c?t.map(Ef(f)):t;return this.core.mutate({trans:a,type:"add",keys:i,values:m,wantResults:s}).then(({numFailures:w,results:_,lastResult:A,failures:I})=>{if(w===0)return s?_:A;throw new Mc(`${this.name}.bulkAdd(): ${w} of ${b} operations failed`,I)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:c,keyPath:f}=this.schema.primKey;if(f&&i)throw new $t.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new $t.InvalidArgument("Arguments objects and keys must have the same length");const b=t.length;let m=f&&c?t.map(Ef(f)):t;return this.core.mutate({trans:a,type:"put",keys:i,values:m,wantResults:s}).then(({numFailures:w,results:_,lastResult:A,failures:I})=>{if(w===0)return s?_:A;throw new Mc(`${this.name}.bulkPut(): ${w} of ${b} operations failed`,I)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Mc(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Lc(e){var t={},n=function(a,c){if(c){for(var f=arguments.length,b=new Array(f-1);--f;)b[f-1]=arguments[f];return t[a].subscribe.apply(null,b),e}if(typeof a=="string")return t[a]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(a,c,f){if(typeof a!="object"){var b;c||(c=fN),f||(f=dn);var m={subscribers:[],fire:f,subscribe:function(w){m.subscribers.indexOf(w)===-1&&(m.subscribers.push(w),m.fire=c(m.fire,w))},unsubscribe:function(w){m.subscribers=m.subscribers.filter(function(_){return _!==w}),m.fire=m.subscribers.reduce(c,f)}};return t[a]=n[a]=m,m}Fn(b=a).forEach(function(w){var _=b[w];if(hr(_))s(w,b[w][0],b[w][1]);else{if(_!=="asap")throw new $t.InvalidArgument("Invalid event config");var A=s(w,Qc,function(){for(var I=arguments.length,C=new Array(I);I--;)C[I]=arguments[I];A.subscribers.forEach(function(R){Nx(function(){R.apply(null,C)})})})}})}}function xc(e,t){return hl(t).from({prototype:e}),t}function el(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function eg(e,t){e.filter=wa(e.filter,t)}function tg(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>wa(r(),t()):t,e.justLimit=n&&!r}function Wf(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new $t.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function lb(e,t,n){const r=Wf(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Af(e,t,n,r){const i=e.replayFilter?wa(e.filter,e.replayFilter()):e.filter;if(e.or){const s={},a=(c,f,b)=>{if(!i||i(f,b,_=>f.stop(_),_=>f.fail(_))){var m=f.primaryKey,w=""+m;w==="[object ArrayBuffer]"&&(w=""+new Uint8Array(m)),ri(s,w)||(s[w]=!0,t(c,f,b))}};return Promise.all([e.or._iterate(a,n),cb(lb(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return cb(lb(e,r,n),wa(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function cb(e,t,n,r){var i=xn(r?(s,a,c)=>n(r(s),a,c):n);return e.then(s=>{if(s)return s.start(()=>{var a=()=>s.continue();t&&!t(s,c=>a=c,c=>{s.stop(c),a=dn},c=>{s.fail(c),a=dn})||i(s.value,s,c=>a=c),a()})})}function Sr(e,t){try{const n=ub(e),r=ub(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,s){const a=i.length,c=s.length,f=a<c?a:c;for(let b=0;b<f;++b)if(i[b]!==s[b])return i[b]<s[b]?-1:1;return a===c?0:a<c?-1:1}(fb(e),fb(t));case"Array":return function(i,s){const a=i.length,c=s.length,f=a<c?a:c;for(let b=0;b<f;++b){const m=Sr(i[b],s[b]);if(m!==0)return m}return a===c?0:a<c?-1:1}(e,t)}}catch{}return NaN}function ub(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Zg(e);return n==="ArrayBuffer"?"binary":n}function fb(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class _N{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Vn.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Vn.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=wa(n.algorithm,t)}_iterate(t,n){return Af(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Tr(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>Af(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(el(r,!0))return i.count({trans:n,query:{index:Wf(r,i.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return Af(r,()=>(++s,!1),n,i).then(()=>s)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],s=r.length-1;function a(b,m){return m?a(b[r[m]],m-1):b[i]}var c=this._ctx.dir==="next"?1:-1;function f(b,m){var w=a(b,s),_=a(m,s);return w<_?-c:w>_?c:0}return this.toArray(function(b){return b.sort(f)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&el(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Wf(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>i?a.map(i):a)}{const i=[];return Af(r,s=>i.push(s),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,el(n)?tg(n,()=>{var r=t;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):tg(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),tg(this._ctx,()=>{var n=t;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(t,n){return eg(this._ctx,function(r,i,s){return!t(r.value)||(i(s),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return eg(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=wa(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&el(n,!0)&&n.limit>0)return this._read(i=>{var s=Wf(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return eg(this._ctx,function(i){var s=i.primaryKey.toString(),a=ri(r,s);return r[s]=!0,!a}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var s=Fn(t),a=s.length;i=function(C){for(var R=!1,$=0;$<a;++$){var L=s[$],P=t[L];Bs(C,L)!==P&&(Fi(C,L,P),R=!0)}return R}}const c=n.table.core,{outbound:f,extractKey:b}=c.schema.primaryKey,m=this.db._options.modifyChunkSize||200,w=[];let _=0;const A=[],I=(C,R)=>{const{failures:$,numFailures:L}=R;_+=C-L;for(let P of Fn($))w.push($[P])};return this.clone().primaryKeys().then(C=>{const R=$=>{const L=Math.min(m,C.length-$);return c.getMany({trans:r,keys:C.slice($,$+L),cache:"immutable"}).then(P=>{const N=[],M=[],U=f?[]:null,p=[];for(let J=0;J<L;++J){const ce=P[J],me={value:wu(ce),primKey:C[$+J]};i.call(me,me.value,me)!==!1&&(me.value==null?p.push(C[$+J]):f||Sr(b(ce),b(me.value))===0?(M.push(me.value),f&&U.push(C[$+J])):(p.push(C[$+J]),N.push(me.value)))}const Z=el(n)&&n.limit===1/0&&(typeof t!="function"||t===ng)&&{index:n.index,range:n.range};return Promise.resolve(N.length>0&&c.mutate({trans:r,type:"add",values:N}).then(J=>{for(let ce in J.failures)p.splice(parseInt(ce),1);I(N.length,J)})).then(()=>(M.length>0||Z&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:U,values:M,criteria:Z,changeSpec:typeof t!="function"&&t}).then(J=>I(M.length,J))).then(()=>(p.length>0||Z&&t===ng)&&c.mutate({trans:r,type:"delete",keys:p,criteria:Z}).then(J=>I(p.length,J))).then(()=>C.length>$+L&&R($+m))})};return R(0).then(()=>{if(w.length>0)throw new xh("Error modifying one or more objects",w,_,A);return C.length})})})}delete(){var t=this._ctx,n=t.range;return el(t)&&(t.isPrimKey&&!bN||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,s=n;return t.table.core.count({trans:r,query:{index:i,range:s}}).then(a=>t.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:c,lastResult:f,results:b,numFailures:m})=>{if(m)throw new xh("Could not delete some values",Object.keys(c).map(w=>c[w]),a-m);return a-m}))}):this.modify(ng)}}const ng=(e,t)=>t.value=null;function xN(e,t){return e<t?-1:e===t?0:1}function kN(e,t){return e>t?-1:e===t?0:1}function Zr(e,t,n){var r=e instanceof t5?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function tl(e){return new e.Collection(e,()=>e5("")).limit(0)}function SN(e,t,n,r,i,s){for(var a=Math.min(e.length,r.length),c=-1,f=0;f<a;++f){var b=t[f];if(b!==r[f])return i(e[f],n[f])<0?e.substr(0,f)+n[f]+n.substr(f+1):i(e[f],r[f])<0?e.substr(0,f)+r[f]+n.substr(f+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[f],b)<0&&(c=f)}return a<r.length&&s==="next"?e+n.substr(e.length):a<e.length&&s==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function Cf(e,t,n,r){var i,s,a,c,f,b,m,w=n.length;if(!n.every(C=>typeof C=="string"))return Zr(e,Jx);function _(C){i=function($){return $==="next"?L=>L.toUpperCase():L=>L.toLowerCase()}(C),s=function($){return $==="next"?L=>L.toLowerCase():L=>L.toUpperCase()}(C),a=C==="next"?xN:kN;var R=n.map(function($){return{lower:s($),upper:i($)}}).sort(function($,L){return a($.lower,L.lower)});c=R.map(function($){return $.upper}),f=R.map(function($){return $.lower}),b=C,m=C==="next"?"":r}_("next");var A=new e.Collection(e,()=>oo(c[0],f[w-1]+r));A._ondirectionchange=function(C){_(C)};var I=0;return A._addAlgorithm(function(C,R,$){var L=C.key;if(typeof L!="string")return!1;var P=s(L);if(t(P,f,I))return!0;for(var N=null,M=I;M<w;++M){var U=SN(L,P,c[M],f[M],a,b);U===null&&N===null?I=M+1:(N===null||a(N,U)>0)&&(N=U)}return R(N!==null?function(){C.continue(N+m)}:$),!1}),A}function oo(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function e5(e){return{type:1,lower:e,upper:e}}class t5{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?tl(this):new this.Collection(this,()=>oo(t,n,!r,!i))}catch{return Zr(this,Ts)}}equals(t){return t==null?Zr(this,Ts):new this.Collection(this,()=>e5(t))}above(t){return t==null?Zr(this,Ts):new this.Collection(this,()=>oo(t,void 0,!0))}aboveOrEqual(t){return t==null?Zr(this,Ts):new this.Collection(this,()=>oo(t,void 0,!1))}below(t){return t==null?Zr(this,Ts):new this.Collection(this,()=>oo(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Zr(this,Ts):new this.Collection(this,()=>oo(void 0,t))}startsWith(t){return typeof t!="string"?Zr(this,Jx):this.between(t,t+la,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Cf(this,(n,r)=>n.indexOf(r[0])===0,[t],la)}equalsIgnoreCase(t){return Cf(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=$s.apply(rl,arguments);return t.length===0?tl(this):Cf(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=$s.apply(rl,arguments);return t.length===0?tl(this):Cf(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,la)}anyOf(){const t=$s.apply(rl,arguments);let n=this._cmp;try{t.sort(n)}catch{return Zr(this,Ts)}if(t.length===0)return tl(this);const r=new this.Collection(this,()=>oo(t[0],t[t.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((s,a,c)=>{const f=s.key;for(;n(f,t[i])>0;)if(++i,i===t.length)return a(c),!1;return n(f,t[i])===0||(a(()=>{s.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[ly,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=$s.apply(rl,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Zr(this,Ts)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[ly,i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,s=this._descending,a=this._min,c=this._max;if(t.length===0)return tl(this);if(!t.every(L=>L[0]!==void 0&&L[1]!==void 0&&i(L[0],L[1])<=0))return Zr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$t.InvalidArgument);const f=!n||n.includeLowers!==!1,b=n&&n.includeUppers===!0;let m,w=i;function _(L,P){return w(L[0],P[0])}try{m=t.reduce(function(L,P){let N=0,M=L.length;for(;N<M;++N){const U=L[N];if(r(P[0],U[1])<0&&r(P[1],U[0])>0){U[0]=a(U[0],P[0]),U[1]=c(U[1],P[1]);break}}return N===M&&L.push(P),L},[]),m.sort(_)}catch{return Zr(this,Ts)}let A=0;const I=b?L=>i(L,m[A][1])>0:L=>i(L,m[A][1])>=0,C=f?L=>s(L,m[A][0])>0:L=>s(L,m[A][0])>=0;let R=I;const $=new this.Collection(this,()=>oo(m[0][0],m[m.length-1][1],!f,!b));return $._ondirectionchange=L=>{L==="next"?(R=I,w=i):(R=C,w=s),m.sort(_)},$._addAlgorithm((L,P,N)=>{for(var M=L.key;R(M);)if(++A,A===m.length)return P(N),!1;return!!function(U){return!I(U)&&!C(U)}(M)||(this._cmp(M,m[A][1])===0||this._cmp(M,m[A][0])===0||P(()=>{w===i?L.continue(m[A][0]):L.continue(m[A][1])}),!1)}),$}startsWithAnyOf(){const t=$s.apply(rl,arguments);return t.every(n=>typeof n=="string")?t.length===0?tl(this):this.inAnyRange(t.map(n=>[n,n+la])):Zr(this,"startsWithAnyOf() only works with strings")}}function ts(e){return xn(function(t){return tu(t),e(t.target.error),!1})}function tu(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const nu="storagemutated",fo="x-storagemutated-1",ko=Lc(null,nu);class EN{_lock(){return Tc(!_t.global),++this._reculock,this._reculock!==1||_t.global||(_t.lockOwnerFor=this),this}_unlock(){if(Tc(!_t.global),--this._reculock==0)for(_t.global||(_t.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Nl(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&_t.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Tc(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new $t.DatabaseClosed(r);case"MissingAPIError":throw new $t.MissingAPI(r.message,r);default:throw new $t.OpenFailed(r)}if(!this.active)throw new $t.TransactionInactive;return Tc(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=xn(i=>{tu(i),this._reject(t.error)}),t.onabort=xn(i=>{tu(i),this.active&&this._reject(new $t.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=xn(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&ko.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Vn(new $t.ReadOnly("Transaction is readonly"));if(!this.active)return Vn(new $t.TransactionInactive);if(this._locked())return new dt((s,a)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(s,a)},_t])});if(r)return _o(()=>{var s=new dt((a,c)=>{this._lock();const f=n(a,c,this);f&&f.then&&f.then(a,c)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new dt((s,a)=>{var c=n(s,a,this);c&&c.then&&c.then(s,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=dt.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new dt((a,c)=>{r.then(f=>n._waitingQueue.push(xn(a.bind(null,f))),f=>n._waitingQueue.push(xn(c.bind(null,f)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $t.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(ri(n,t))return n[t];const r=this.schema[t];if(!r)throw new $t.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function cy(e,t,n,r,i,s,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+n5(t)}}function n5(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function r5(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Rx(n,r=>[r.name,r])}}let ru=e=>{try{return e.only([[]]),ru=()=>[[]],[[]]}catch{return ru=()=>la,la}};function uy(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>Bs(r,t)}(e):t=>Bs(t,e)}function hb(e){return[].slice.call(e)}let AN=0;function Fc(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function CN(e,t,n){function r(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:b,upper:m,lowerOpen:w,upperOpen:_}=f;return b===void 0?m===void 0?null:t.upperBound(m,!!_):m===void 0?t.lowerBound(b,!!w):t.bound(b,m,!!w,!!_)}const{schema:i,hasGetAll:s}=function(f,b){const m=hb(f.objectStoreNames);return{schema:{name:f.name,tables:m.map(w=>b.objectStore(w)).map(w=>{const{keyPath:_,autoIncrement:A}=w,I=hr(_),C=_==null,R={},$={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C,compound:I,keyPath:_,autoIncrement:A,unique:!0,extractKey:uy(_)},indexes:hb(w.indexNames).map(L=>w.index(L)).map(L=>{const{name:P,unique:N,multiEntry:M,keyPath:U}=L,p={name:P,compound:hr(U),keyPath:U,unique:N,multiEntry:M,extractKey:uy(U)};return R[Fc(U)]=p,p}),getIndexByKeyPath:L=>R[Fc(L)]};return R[":id"]=$.primaryKey,_!=null&&(R[Fc(_)]=$.primaryKey),$})},hasGetAll:m.length>0&&"getAll"in b.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),a=i.tables.map(f=>function(b){const m=b.name;return{name:m,schema:b,mutate:function({trans:w,type:_,keys:A,values:I,range:C}){return new Promise((R,$)=>{R=xn(R);const L=w.objectStore(m),P=L.keyPath==null,N=_==="put"||_==="add";if(!N&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);const{length:M}=A||I||{length:1};if(A&&I&&A.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(M===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});let U;const p=[],Z=[];let J=0;const ce=ke=>{++J,tu(ke)};if(_==="deleteRange"){if(C.type===4)return R({numFailures:J,failures:Z,results:[],lastResult:void 0});C.type===3?p.push(U=L.clear()):p.push(U=L.delete(r(C)))}else{const[ke,we]=N?P?[I,A]:[I,null]:[A,null];if(N)for(let Q=0;Q<M;++Q)p.push(U=we&&we[Q]!==void 0?L[_](ke[Q],we[Q]):L[_](ke[Q])),U.onerror=ce;else for(let Q=0;Q<M;++Q)p.push(U=L[_](ke[Q])),U.onerror=ce}const me=ke=>{const we=ke.target.result;p.forEach((Q,G)=>Q.error!=null&&(Z[G]=Q.error)),R({numFailures:J,failures:Z,results:_==="delete"?A:p.map(Q=>Q.result),lastResult:we})};U.onerror=ke=>{ce(ke),me(ke)},U.onsuccess=me})},getMany:({trans:w,keys:_})=>new Promise((A,I)=>{A=xn(A);const C=w.objectStore(m),R=_.length,$=new Array(R);let L,P=0,N=0;const M=p=>{const Z=p.target;$[Z._pos]=Z.result,++N===P&&A($)},U=ts(I);for(let p=0;p<R;++p)_[p]!=null&&(L=C.get(_[p]),L._pos=p,L.onsuccess=M,L.onerror=U,++P);P===0&&A($)}),get:({trans:w,key:_})=>new Promise((A,I)=>{A=xn(A);const C=w.objectStore(m).get(_);C.onsuccess=R=>A(R.target.result),C.onerror=ts(I)}),query:function(w){return _=>new Promise((A,I)=>{A=xn(A);const{trans:C,values:R,limit:$,query:L}=_,P=$===1/0?void 0:$,{index:N,range:M}=L,U=C.objectStore(m),p=N.isPrimaryKey?U:U.index(N.name),Z=r(M);if($===0)return A({result:[]});if(w){const J=R?p.getAll(Z,P):p.getAllKeys(Z,P);J.onsuccess=ce=>A({result:ce.target.result}),J.onerror=ts(I)}else{let J=0;const ce=R||!("openKeyCursor"in p)?p.openCursor(Z):p.openKeyCursor(Z),me=[];ce.onsuccess=ke=>{const we=ce.result;return we?(me.push(R?we.value:we.primaryKey),++J===$?A({result:me}):void we.continue()):A({result:me})},ce.onerror=ts(I)}})}(s),openCursor:function({trans:w,values:_,query:A,reverse:I,unique:C}){return new Promise((R,$)=>{R=xn(R);const{index:L,range:P}=A,N=w.objectStore(m),M=L.isPrimaryKey?N:N.index(L.name),U=I?C?"prevunique":"prev":C?"nextunique":"next",p=_||!("openKeyCursor"in M)?M.openCursor(r(P),U):M.openKeyCursor(r(P),U);p.onerror=ts($),p.onsuccess=xn(Z=>{const J=p.result;if(!J)return void R(null);J.___id=++AN,J.done=!1;const ce=J.continue.bind(J);let me=J.continuePrimaryKey;me&&(me=me.bind(J));const ke=J.advance.bind(J),we=()=>{throw new Error("Cursor not stopped")};J.trans=w,J.stop=J.continue=J.continuePrimaryKey=J.advance=()=>{throw new Error("Cursor not started")},J.fail=xn($),J.next=function(){let Q=1;return this.start(()=>Q--?this.continue():this.stop()).then(()=>this)},J.start=Q=>{const G=new Promise((Te,qe)=>{Te=xn(Te),p.onerror=ts(qe),J.fail=qe,J.stop=ze=>{J.stop=J.continue=J.continuePrimaryKey=J.advance=we,Te(ze)}}),Ae=()=>{if(p.result)try{Q()}catch(Te){J.fail(Te)}else J.done=!0,J.start=()=>{throw new Error("Cursor behind last entry")},J.stop()};return p.onsuccess=xn(Te=>{p.onsuccess=Ae,Ae()}),J.continue=ce,J.continuePrimaryKey=me,J.advance=ke,Ae(),G},R(J)},$)})},count({query:w,trans:_}){const{index:A,range:I}=w;return new Promise((C,R)=>{const $=_.objectStore(m),L=A.isPrimaryKey?$:$.index(A.name),P=r(I),N=P?L.count(P):L.count();N.onsuccess=xn(M=>C(M.target.result)),N.onerror=ts(R)})}}}(f)),c={};return a.forEach(f=>c[f.name]=f),{stack:"dbcore",transaction:e.transaction.bind(e),table(f){if(!c[f])throw new Error(`Table '${f}' not found`);return c[f]},MIN_KEY:-1/0,MAX_KEY:ru(t),schema:i}}function fy({_novip:e},t){const n=t.db,r=function(i,s,{IDBKeyRange:a,indexedDB:c},f){return{dbcore:function(m,w){return w.reduce((_,{create:A})=>({..._,...A(_)}),m)}(CN(s,a,f),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const s=i.name;e.core.schema.tables.some(a=>a.name===s)&&(i.core=e.core.table(s),e[s]instanceof e.Table&&(e[s].core=i.core))})}function Ch({_novip:e},t,n,r){n.forEach(i=>{const s=r[i];t.forEach(a=>{const c=Im(a,i);(!c||"value"in c&&c.value===void 0)&&(a===e.Transaction.prototype||a instanceof e.Transaction?Ds(a,i,{get(){return this.table(i)},set(f){Px(this,i,{value:f,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new e.Table(i,s))})})}function hy({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function TN(e,t){return e._cfg.version-t._cfg.version}function IN(e,t,n,r){const i=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);const a=s._reject.bind(s),c=_t.transless||_t;_o(()=>{_t.trans=s,_t.transless=c,t===0?(Fn(i).forEach(f=>{rg(n,f,i[f].primKey,i[f].indexes)}),fy(e,n),dt.follow(()=>e.on.populate.fire(s)).catch(a)):function({_novip:f},b,m,w){const _=[],A=f._versions;let I=f._dbSchema=py(f,f.idbdb,w),C=!1;const R=A.filter(L=>L._cfg.version>=b);function $(){return _.length?dt.resolve(_.shift()(m.idbtrans)).then($):dt.resolve()}return R.forEach(L=>{_.push(()=>{const P=I,N=L._cfg.dbschema;gy(f,P,w),gy(f,N,w),I=f._dbSchema=N;const M=i5(P,N);M.add.forEach(p=>{rg(w,p[0],p[1].primKey,p[1].indexes)}),M.change.forEach(p=>{if(p.recreate)throw new $t.Upgrade("Not yet support for changing primary key");{const Z=w.objectStore(p.name);p.add.forEach(J=>dy(Z,J)),p.change.forEach(J=>{Z.deleteIndex(J.name),dy(Z,J)}),p.del.forEach(J=>Z.deleteIndex(J))}});const U=L._cfg.contentUpgrade;if(U&&L._cfg.version>b){fy(f,w),m._memoizedTables={},C=!0;let p=Mx(N);M.del.forEach(me=>{p[me]=P[me]}),hy(f,[f.Transaction.prototype]),Ch(f,[f.Transaction.prototype],Fn(p),p),m.schema=p;const Z=$m(U);let J;Z&&Ol();const ce=dt.follow(()=>{if(J=U(m),J&&Z){var me=Us.bind(null,null);J.then(me,me)}});return J&&typeof J.then=="function"?dt.resolve(J):ce.then(()=>J)}}),_.push(P=>{(!C||!vN)&&function(N,M){[].slice.call(M.db.objectStoreNames).forEach(U=>N[U]==null&&M.db.deleteObjectStore(U))}(L._cfg.dbschema,P),hy(f,[f.Transaction.prototype]),Ch(f,[f.Transaction.prototype],f._storeNames,f._dbSchema),m.schema=f._dbSchema})}),$().then(()=>{var L,P;P=w,Fn(L=I).forEach(N=>{P.db.objectStoreNames.contains(N)||rg(P,N,L[N].primKey,L[N].indexes)})})}(e,t,s,n).catch(a)})}function i5(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],s=t[r];if(i){const a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!hd)a.recreate=!0,n.change.push(a);else{const c=i.idxByName,f=s.idxByName;let b;for(b in c)f[b]||a.del.push(b);for(b in f){const m=c[b],w=f[b];m?m.src!==w.src&&a.change.push(w):a.add.push(w)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,s])}return n}function rg(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>dy(i,s)),i}function dy(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function py(e,t,n){const r={};return _h(t.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let a=s.keyPath;const c=cy(n5(a),a||"",!1,!1,!!s.autoIncrement,a&&typeof a!="string",!0),f=[];for(let m=0;m<s.indexNames.length;++m){const w=s.index(s.indexNames[m]);a=w.keyPath;var b=cy(w.name,a,!!w.unique,!!w.multiEntry,!1,a&&typeof a!="string",!1);f.push(b)}r[i]=r5(i,c,f)}),r}function gy({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],a=n.objectStore(s);e._hasGetAll="getAll"in a;for(let c=0;c<a.indexNames.length;++c){const f=a.indexNames[c],b=a.index(f).keyPath,m=typeof b=="string"?b:"["+_h(b).join("+")+"]";if(t[s]){const w=t[s].idxByName[m];w&&(w.name=f,delete t[s].idxByName[m],t[s].idxByName[f]=w)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&bn.WorkerGlobalScope&&bn instanceof bn.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class $N{_parseStoresSpec(t,n){Fn(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((a,c)=>{const f=(a=a.trim()).replace(/([&*]|\+\+)/g,""),b=/^\[/.test(f)?f.match(/^\[(.*)\]$/)[1].split("+"):f;return cy(f,b||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),hr(b),c===0)}),s=i.shift();if(s.multi)throw new $t.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new $t.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new $t.Schema("Index must have a name and cannot be an empty string")}),n[r]=r5(r,s,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Tr(this._cfg.storesSource,t):t;const r=n._versions,i={};let s={};return r.forEach(a=>{Tr(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,hy(n,[n._allTables,n,n.Transaction.prototype]),Ch(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Fn(s),s),n._storeNames=Fn(s),this}upgrade(t){return this._cfg.contentUpgrade=Nm(this._cfg.contentUpgrade||dn,t),this}}function Bm(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ga(dd,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Lm(e){return e&&typeof e.databases=="function"}function yy(e){return _o(function(){return _t.letThrough=!0,e()})}function PN(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function ON(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Vn(t.dbOpenError):e);us&&(t.openCanceller._stackHolder=ka()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new $t.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,a=null,c=!1;return dt.race([r,(typeof navigator>"u"?dt.resolve():PN()).then(()=>new dt((f,b)=>{if(i(),!n)throw new $t.MissingAPI;const m=e.name,w=t.autoSchema?n.open(m):n.open(m,Math.round(10*e.verno));if(!w)throw new $t.MissingAPI;w.onerror=ts(b),w.onblocked=xn(e._fireOnBlocked),w.onupgradeneeded=xn(_=>{if(a=w.transaction,t.autoSchema&&!e._options.allowEmptyDB){w.onerror=tu,a.abort(),w.result.close();const I=n.deleteDatabase(m);I.onsuccess=I.onerror=xn(()=>{b(new $t.NoSuchDatabase(`Database ${m} doesnt exist`))})}else{a.onerror=ts(b);var A=_.oldVersion>Math.pow(2,62)?0:_.oldVersion;c=A<1,e._novip.idbdb=w.result,IN(e,A/10,a,b)}},b),w.onsuccess=xn(()=>{a=null;const _=e._novip.idbdb=w.result,A=_h(_.objectStoreNames);if(A.length>0)try{const C=_.transaction((I=A).length===1?I[0]:I,"readonly");t.autoSchema?function({_novip:R},$,L){R.verno=$.version/10;const P=R._dbSchema=py(0,$,L);R._storeNames=_h($.objectStoreNames,0),Ch(R,[R._allTables],Fn(P),P)}(e,_,C):(gy(e,e._dbSchema,C),function(R,$){const L=i5(py(0,R.idbdb,$),R._dbSchema);return!(L.add.length||L.change.some(P=>P.add.length||P.change.length))}(e,C)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fy(e,C)}catch{}var I;Bc.push(e),_.onversionchange=xn(C=>{t.vcFired=!0,e.on("versionchange").fire(C)}),_.onclose=xn(C=>{e.on("close").fire(C)}),c&&function({indexedDB:C,IDBKeyRange:R},$){!Lm(C)&&$!==dd&&Bm(C,R).put({name:$}).catch(dn)}(e._deps,m),f()},b)}))]).then(()=>(i(),t.onReadyBeingFired=[],dt.resolve(yy(()=>e.on.ready.fire(e.vip))).then(function f(){if(t.onReadyBeingFired.length>0){let b=t.onReadyBeingFired.reduce(Nm,dn);return t.onReadyBeingFired=[],dt.resolve(yy(()=>b(e.vip))).then(f)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(f=>{t.dbOpenError=f;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),Vn(f)}).finally(()=>{t.openComplete=!0,s()})}function my(e){var t=s=>e.next(s),n=i(t),r=i(s=>e.throw(s));function i(s){return a=>{var c=s(a),f=c.value;return c.done?f:f&&typeof f.then=="function"?f.then(n,r):hr(f)?Promise.all(f).then(n,r):n(f)}}return i(t)()}function NN(e,t,n){var r=arguments.length;if(r<2)throw new $t.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,Dx(i),n]}function s5(e,t,n,r,i){return dt.resolve().then(()=>{const s=_t.transless||_t,a=e._createTransaction(t,n,e._dbSchema,r),c={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(w){return w.name===Om.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>s5(e,t,n,null,i))):Vn(w)}const f=$m(i);let b;f&&Ol();const m=dt.follow(()=>{if(b=i.call(a,a),b)if(f){var w=Us.bind(null,null);b.then(w,w)}else typeof b.next=="function"&&typeof b.throw=="function"&&(b=my(b))},c);return(b&&typeof b.then=="function"?dt.resolve(b).then(w=>a.active?w:Vn(new $t.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):m.then(()=>b)).then(w=>(r&&a._resolve(),a._completion.then(()=>w))).catch(w=>(a._reject(w),Vn(w)))})}function Tf(e,t,n){const r=hr(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const RN={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},s=[];function a(m,w,_){const A=Fc(m),I=i[A]=i[A]||[],C=m==null?0:typeof m=="string"?1:m.length,R=w>0,$={..._,isVirtual:R,keyTail:w,keyLength:C,extractKey:uy(m),unique:!R&&_.unique};return I.push($),$.isPrimaryKey||s.push($),C>1&&a(C===2?m[0]:m.slice(0,C-1),w+1,_),I.sort((L,P)=>L.keyTail-P.keyTail),$}const c=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const m of r.indexes)a(m.keyPath,0,m);function f(m){const w=m.query.index;return w.isVirtual?{...m,query:{index:w,range:(_=m.query.range,A=w.keyTail,{type:_.type===1?2:_.type,lower:Tf(_.lower,_.lowerOpen?e.MAX_KEY:e.MIN_KEY,A),lowerOpen:!0,upper:Tf(_.upper,_.upperOpen?e.MIN_KEY:e.MAX_KEY,A),upperOpen:!0})}}:m;var _,A}return{...n,schema:{...r,primaryKey:c,indexes:s,getIndexByKeyPath:function(m){const w=i[Fc(m)];return w&&w[0]}},count:m=>n.count(f(m)),query:m=>n.query(f(m)),openCursor(m){const{keyTail:w,isVirtual:_,keyLength:A}=m.query.index;return _?n.openCursor(f(m)).then(I=>I&&function(C){return Object.create(C,{continue:{value:function($){$!=null?C.continue(Tf($,m.reverse?e.MAX_KEY:e.MIN_KEY,w)):m.unique?C.continue(C.key.slice(0,A).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,w)):C.continue()}},continuePrimaryKey:{value($,L){C.continuePrimaryKey(Tf($,e.MAX_KEY,w),L)}},primaryKey:{get:()=>C.primaryKey},key:{get(){const $=C.key;return A===1?$[0]:$.slice(0,A)}},value:{get:()=>C.value}})}(I)):n.openCursor(m)}}}}}};function Fm(e,t,n,r){return n=n||{},r=r||"",Fn(e).forEach(i=>{if(ri(t,i)){var s=e[i],a=t[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){const c=Zg(s);c!==Zg(a)?n[r+i]=t[i]:c==="Object"?Fm(s,a,n,r+i+"."):s!==a&&(n[r+i]=t[i])}else s!==a&&(n[r+i]=t[i])}else n[r+i]=void 0}),Fn(t).forEach(i=>{ri(e,i)||(n[r+i]=t[i])}),n}const MN={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(s){const a=_t.trans,{deleting:c,creating:f,updating:b}=a.table(t).hook;switch(s.type){case"add":if(f.fire===dn)break;return a._promise("readwrite",()=>m(s),!0);case"put":if(f.fire===dn&&b.fire===dn)break;return a._promise("readwrite",()=>m(s),!0);case"delete":if(c.fire===dn)break;return a._promise("readwrite",()=>m(s),!0);case"deleteRange":if(c.fire===dn)break;return a._promise("readwrite",()=>function(_){return w(_.trans,_.range,1e4)}(s),!0)}return n.mutate(s);function m(_){const A=_t.trans,I=_.keys||function(C,R){return R.type==="delete"?R.keys:R.keys||R.values.map(C.extractKey)}(r,_);if(!I)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?{..._,keys:I}:{..._}).type!=="delete"&&(_.values=[..._.values]),_.keys&&(_.keys=[..._.keys]),function(C,R,$){return R.type==="add"?Promise.resolve([]):C.getMany({trans:R.trans,keys:$,cache:"immutable"})}(n,_,I).then(C=>{const R=I.map(($,L)=>{const P=C[L],N={onerror:null,onsuccess:null};if(_.type==="delete")c.fire.call(N,$,P,A);else if(_.type==="add"||P===void 0){const M=f.fire.call(N,$,_.values[L],A);$==null&&M!=null&&($=M,_.keys[L]=$,r.outbound||Fi(_.values[L],r.keyPath,$))}else{const M=Fm(P,_.values[L]),U=b.fire.call(N,M,$,P,A);if(U){const p=_.values[L];Object.keys(U).forEach(Z=>{ri(p,Z)?p[Z]=U[Z]:Fi(p,Z,U[Z])})}}return N});return n.mutate(_).then(({failures:$,results:L,numFailures:P,lastResult:N})=>{for(let M=0;M<I.length;++M){const U=L?L[M]:I[M],p=R[M];U==null?p.onerror&&p.onerror($[M]):p.onsuccess&&p.onsuccess(_.type==="put"&&C[M]?_.values[M]:U)}return{failures:$,results:L,numFailures:P,lastResult:N}}).catch($=>(R.forEach(L=>L.onerror&&L.onerror($)),Promise.reject($)))})}function w(_,A,I){return n.query({trans:_,values:!1,query:{index:r,range:A},limit:I}).then(({result:C})=>m({type:"delete",keys:C,trans:_}).then(R=>R.numFailures>0?Promise.reject(R.failures[0]):C.length<I?{failures:[],numFailures:0,lastResult:void 0}:w(_,{...A,lower:C[C.length-1],lowerOpen:!0},I)))}}}}})};function o5(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,s=0;i<t.keys.length&&s<e.length;++i)Sr(t.keys[i],e[s])===0&&(r.push(n?wu(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch{return null}}const DN={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=o5(r.keys,r.trans._cache,r.cache==="clone");return i?dt.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?wu(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Um(e){return!("from"in e)}const Is=function(e,t){if(!this){const n=new Is;return e&&"d"in e&&Tr(n,e),n}Tr(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function iu(e,t,n){const r=Sr(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Um(e))return Tr(e,{from:t,to:n,d:1});const i=e.l,s=e.r;if(Sr(n,e.from)<0)return i?iu(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},db(e);if(Sr(t,e.to)>0)return s?iu(s,t,n):e.r={from:t,to:n,d:1,l:null,r:null},db(e);Sr(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),Sr(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Th(e,i),s&&a&&Th(e,s)}function Th(e,t){Um(t)||function n(r,{from:i,to:s,l:a,r:c}){iu(r,i,s),a&&n(r,a),c&&n(r,c)}(e,t)}function BN(e,t){const n=vy(t);let r=n.next();if(r.done)return!1;let i=r.value;const s=vy(e);let a=s.next(i.from),c=a.value;for(;!r.done&&!a.done;){if(Sr(c.from,i.to)<=0&&Sr(c.to,i.from)>=0)return!0;Sr(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(a=s.next(i.from)).value}return!1}function vy(e){let t=Um(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Sr(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Sr(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function db(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",a={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],a[i]=c[s],e[s]=a,a.d=pb(a)}e.d=pb(e)}function pb({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}kl(Is.prototype,{add(e){return Th(this,e),this},addKey(e){return iu(this,e,e),this},addKeys(e){return e.forEach(t=>iu(this,t,t)),this},[Jg](){return vy(this)}});const LN={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Is(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:a}=s,{extractKey:c,outbound:f}=a,b={...i,mutate:_=>{const A=_.trans,I=A.mutatedParts||(A.mutatedParts={}),C=U=>{const p=`idb://${t}/${r}/${U}`;return I[p]||(I[p]=new Is)},R=C(""),$=C(":dels"),{type:L}=_;let[P,N]=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[[],_.values]:[];const M=_.trans._cache;return i.mutate(_).then(U=>{if(hr(P)){L!=="delete"&&(P=U.results),R.addKeys(P);const p=o5(P,M);p||L==="add"||$.addKeys(P),(p||N)&&function(Z,J,ce,me){function ke(we){const Q=Z(we.name||"");function G(Te){return Te!=null?we.extractKey(Te):null}const Ae=Te=>we.multiEntry&&hr(Te)?Te.forEach(qe=>Q.addKey(qe)):Q.addKey(Te);(ce||me).forEach((Te,qe)=>{const ze=ce&&G(ce[qe]),Qe=me&&G(me[qe]);Sr(ze,Qe)!==0&&(ze!=null&&Ae(ze),Qe!=null&&Ae(Qe))})}J.indexes.forEach(ke)}(C,s,p,N)}else if(P){const p={from:P.lower,to:P.upper};$.add(p),R.add(p)}else R.add(n),$.add(n),s.indexes.forEach(p=>C(p.name).add(n));return U})}},m=({query:{index:_,range:A}})=>{var I,C;return[_,new Is((I=A.lower)!==null&&I!==void 0?I:e.MIN_KEY,(C=A.upper)!==null&&C!==void 0?C:e.MAX_KEY)]},w={get:_=>[a,new Is(_.key)],getMany:_=>[a,new Is().addKeys(_.keys)],count:m,query:m,openCursor:m};return Fn(w).forEach(_=>{b[_]=function(A){const{subscr:I}=_t;if(I){const C=N=>{const M=`idb://${t}/${r}/${N}`;return I[M]||(I[M]=new Is)},R=C(""),$=C(":dels"),[L,P]=w[_](A);if(C(L.name||"").add(P),!L.isPrimaryKey){if(_!=="count"){const N=_==="query"&&f&&A.values&&i.query({...A,values:!1});return i[_].apply(this,arguments).then(M=>{if(_==="query"){if(f&&A.values)return N.then(({result:p})=>(R.addKeys(p),M));const U=A.values?M.result.map(c):M.result;A.values?R.addKeys(U):$.addKeys(U)}else if(_==="openCursor"){const U=M,p=A.values;return U&&Object.create(U,{key:{get:()=>($.addKey(U.primaryKey),U.key)},primaryKey:{get(){const Z=U.primaryKey;return $.addKey(Z),Z}},value:{get:()=>(p&&R.addKey(U.primaryKey),U.value)}})}return M})}$.add(n)}}return i[_].apply(this,arguments)}}),b}}}};class ga{constructor(t,n){this._middlewares={},this.verno=0;const r=ga.dependencies;this._options=n={addons:ga.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:dn,dbReadyPromise:null,cancelOpen:dn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;s.dbReadyPromise=new dt(c=>{s.dbReadyResolve=c}),s.openCanceller=new dt((c,f)=>{s.cancelOpen=f}),this._state=s,this.name=t,this.on=Lc(this,"populate","blocked","versionchange","close",{ready:[Nm,dn]}),this.on.ready.subscribe=Ox(this.on.ready.subscribe,c=>(f,b)=>{ga.vip(()=>{const m=this._state;if(m.openComplete)m.dbOpenError||dt.resolve().then(f),b&&c(f);else if(m.onReadyBeingFired)m.onReadyBeingFired.push(f),b&&c(f);else{c(f);const w=this;b||c(function _(){w.on.ready.unsubscribe(f),w.on.ready.unsubscribe(_)})}})}),this.Collection=(a=this,xc(_N.prototype,function(c,f){this.db=a;let b=Qx,m=null;if(f)try{b=f()}catch(I){m=I}const w=c._ctx,_=w.table,A=_.hook.reading.fire;this._ctx={table:_,index:w.index,isPrimKey:!w.index||_.schema.primKey.keyPath&&w.index===_.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:w.or,valueMapper:A!==Qc?A:null}})),this.Table=function(c){return xc(wN.prototype,function(f,b,m){this.db=c,this._tx=m,this.name=f,this.schema=b,this.hook=c._allTables[f]?c._allTables[f].hook:Lc(null,{creating:[lN,dn],reading:[aN,Qc],updating:[uN,dn],deleting:[cN,dn]})})}(this),this.Transaction=function(c){return xc(EN.prototype,function(f,b,m,w,_){this.db=c,this.mode=f,this.storeNames=b,this.schema=m,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=Lc(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new dt((A,I)=>{this._resolve=A,this._reject=I}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},A=>{var I=this.active;return this.active=!1,this.on.error.fire(A),this.parent?this.parent._reject(A):I&&this.idbtrans&&this.idbtrans.abort(),Vn(A)})})}(this),this.Version=function(c){return xc($N.prototype,function(f){this.db=c,this._cfg={version:f,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return xc(t5.prototype,function(f,b,m){this.db=c,this._ctx={table:f,index:b===":id"?null:b,or:m};const w=c._deps.indexedDB;if(!w)throw new $t.MissingAPI;this._cmp=this._ascending=w.cmp.bind(w),this._descending=(_,A)=>w.cmp(A,_),this._max=(_,A)=>w.cmp(_,A)>0?_:A,this._min=(_,A)=>w.cmp(_,A)<0?_:A,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=ru(n.IDBKeyRange),this._createTransaction=(c,f,b,m)=>new this.Transaction(c,f,b,this._options.chromeTransactionDurability,m),this._fireOnBlocked=c=>{this.on("blocked").fire(c),Bc.filter(f=>f.name===this.name&&f!==this&&!f._state.vcFired).map(f=>f.on("versionchange").fire(c))},this.use(RN),this.use(MN),this.use(LN),this.use(DN),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new $t.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new $t.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(TN),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||_t.letThrough||this._vip)?t():new dt((n,r)=>{if(this._state.openComplete)return r(new $t.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new $t.DatabaseClosed);this.open().catch(dn)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const s=this._middlewares[t]||(this._middlewares[t]=[]);return s.push({stack:t,create:n,level:r??10,name:i}),s.sort((a,c)=>a.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return ON(this)}_close(){const t=this._state,n=Bc.indexOf(this);if(n>=0&&Bc.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new dt(r=>{t.dbReadyResolve=r}),t.openCanceller=new dt((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new $t.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new dt((r,i)=>{const s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=xn(()=>{(function({indexedDB:c,IDBKeyRange:f},b){!Lm(c)&&b!==dd&&Bm(c,f).delete(b).catch(dn)})(this._deps,this.name),r()}),a.onerror=ts(i),a.onblocked=this._fireOnBlocked};if(t)throw new $t.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Fn(this._allTables).map(t=>this._allTables[t])}transaction(){const t=NN.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=_t.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const s=t.indexOf("?")!==-1;let a,c;t=t.replace("!","").replace("?","");try{if(c=n.map(b=>{var m=b instanceof this.Table?b.name:b;if(typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),t=="r"||t===Xp)a=Xp;else{if(t!="rw"&&t!=Qp)throw new $t.InvalidArgument("Invalid transaction mode: "+t);a=Qp}if(i){if(i.mode===Xp&&a===Qp){if(!s)throw new $t.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(b=>{if(i&&i.storeNames.indexOf(b)===-1){if(!s)throw new $t.SubTransaction("Table "+b+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(b){return i?i._promise(null,(m,w)=>{w(b)}):Vn(b)}const f=s5.bind(null,this,a,c,i,r);return i?i._promise(a,f,"lock"):_t.trans?Nl(_t.transless,()=>this._whenReady(f)):this._whenReady(f)}table(t){if(!ri(this._allTables,t))throw new $t.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const FN=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class UN{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[FN](){return this}}function a5(e,t){return Fn(t).forEach(n=>{Th(e[n]||(e[n]=new Is),t[n])}),e}function jN(e){let t,n=!1;const r=new UN(i=>{const s=$m(e);let a=!1,c={},f={};const b={get closed(){return a},unsubscribe:()=>{a=!0,ko.storagemutated.unsubscribe(A)}};i.start&&i.start(b);let m=!1,w=!1;function _(){return Fn(f).some(C=>c[C]&&BN(c[C],f[C]))}const A=C=>{a5(c,C),_()&&I()},I=()=>{if(m||a)return;c={};const C={},R=function($){s&&Ol();const L=()=>_o(e,{subscr:$,trans:null}),P=_t.trans?Nl(_t.transless,L):L();return s&&P.then(Us,Us),P}(C);w||(ko(nu,A),w=!0),m=!0,Promise.resolve(R).then($=>{n=!0,t=$,m=!1,a||(_()?I():(c={},f=C,i.next&&i.next($)))},$=>{m=!1,n=!1,i.error&&i.error($),b.unsubscribe()})};return I(),b});return r.hasValue=()=>n,r.getValue=()=>t,r}let by;try{by={indexedDB:bn.indexedDB||bn.mozIndexedDB||bn.webkitIndexedDB||bn.msIndexedDB,IDBKeyRange:bn.IDBKeyRange||bn.webkitIDBKeyRange}}catch{by={indexedDB:null,IDBKeyRange:null}}const Jo=ga;function Vf(e){let t=Os;try{Os=!0,ko.storagemutated.fire(e)}finally{Os=t}}kl(Jo,{...jf,delete:e=>new Jo(e,{addons:[]}).delete(),exists:e=>new Jo(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Lm(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==dd)):Bm(t,n).toCollection().primaryKeys()}(Jo.dependencies).then(e)}catch{return Vn(new $t.MissingAPI)}},defineClass:()=>function(e){Tr(this,e)},ignoreTransaction:e=>_t.trans?Nl(_t.transless,e):e(),vip:yy,async:function(e){return function(){try{var t=my(e.apply(this,arguments));return t&&typeof t.then=="function"?t:dt.resolve(t)}catch(n){return Vn(n)}}},spawn:function(e,t,n){try{var r=my(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:dt.resolve(r)}catch(i){return Vn(i)}},currentTransaction:{get:()=>_t.trans||null},waitFor:function(e,t){const n=dt.resolve(typeof e=="function"?Jo.ignoreTransaction(e):e).timeout(t||6e4);return _t.trans?_t.trans.waitFor(n):n},Promise:dt,debug:{get:()=>us,set:e=>{Lx(e,e==="dexie"?()=>!0:Xx)}},derive:hl,extend:Tr,props:kl,override:Ox,Events:Lc,on:ko,liveQuery:jN,extendObservabilitySet:a5,getByKeyPath:Bs,setByKeyPath:Fi,delByKeyPath:function(e,t){typeof t=="string"?Fi(e,t,void 0):"length"in t&&[].map.call(t,function(n){Fi(e,n,void 0)})},shallowClone:Mx,deepClone:wu,getObjectDiff:Fm,cmp:Sr,asap:Nx,minKey:ly,addons:[],connections:Bc,errnames:Om,dependencies:by,semVer:ab,version:ab.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Jo.maxKey=ru(Jo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ko(nu,e=>{if(!Os){let t;hd?(t=document.createEvent("CustomEvent"),t.initCustomEvent(fo,!0,!0,e)):t=new CustomEvent(fo,{detail:e}),Os=!0,dispatchEvent(t),Os=!1}}),addEventListener(fo,({detail:e})=>{Os||Vf(e)}));let Os=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(fo);typeof e.unref=="function"&&e.unref(),ko(nu,t=>{Os||e.postMessage(t)}),e.onmessage=t=>{t.data&&Vf(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){ko(nu,t=>{try{Os||(typeof localStorage<"u"&&localStorage.setItem(fo,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:fo,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===fo){const n=JSON.parse(t.newValue);n&&Vf(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===fo&&Vf(t.changedParts)})}dt.rejectionMapper=function(e,t){if(!e||e instanceof dl||e instanceof TypeError||e instanceof SyntaxError||!e.name||!rb[e.name])return e;var n=new rb[e.name](t||e.message,e);return"stack"in e&&Ds(n,"stack",{get:function(){return this.inner.stack}}),n},Lx(us,Xx);class zN extends ga{constructor(){super("iris");xe(this,"events");this.version(2).stores({events:"id, pubkey, kind, created_at"})}}const Ni=new zN,Ns={db:Ni,subscribedEventIds:new Set,subscribedAuthors:new Set,seenFilters:new Set,saveQueue:[],clear(){return Ni.delete()},save:dr.throttle(e=>{const t=e.saveQueue;e.saveQueue=[],Ni.events.bulkAdd(t).catch(()=>{})},500),saveEvent(e){this.saveQueue.push(e),this.save(this)},init(){const e=ye.getPubKey();Ni.events.where({pubkey:e}).each(t=>{De.handle(t,!1,!1)}).then(()=>Ni.events.where({kind:3}).each(t=>{De.handle(t,!1,!1)})).then(()=>Ni.events.where({kind:0}).each(t=>{De.handle(t,!1,!1)})).then(()=>Ni.events.where({kind:4}).each(t=>{De.handle(t,!1,!1)})).then(()=>Ni.events.orderBy("created_at").reverse().filter(t=>t.kind===1).limit(5e3).each(t=>{De.handle(t,!1,!1)}))},subscribeToAuthors:dr.throttle(e=>{const t=Array.from(Ns.subscribedAuthors.values());Ns.subscribedAuthors.clear(),Ni.events.where("pubkey").anyOf(t).limit(e||1e3).each(n=>{De.handle(n,!1,!1)})},1e3),subscribeToEventIds:dr.throttle(()=>{const e=Array.from(Ns.subscribedEventIds.values());Ns.subscribedEventIds.clear(),Ni.events.where("id").anyOf(e).each(t=>{De.handle(t,!1,!1)})},1e3),subscribe(e){var n,r;if(!e||e["#e"]||e["#p"])return;let t=Ni.events;if((n=e.ids)!=null&&n.length){e.ids.forEach(i=>{this.subscribedEventIds.add(i)}),this.subscribeToEventIds();return}else if((r=e.authors)!=null&&r.length){e.authors.forEach(i=>{this.subscribedAuthors.add(i)}),this.subscribeToAuthors();return}else{const i=JSON.stringify(e);if(this.seenFilters.has(i))return;this.seenFilters.add(i),e.kinds&&(t=t.where?t.where("kind").anyOf(e.kinds):t.and(s=>{var a;return(a=e.kinds)==null?void 0:a.includes(s.kind)})),e.limit&&(t=t.limit(e.limit))}t.each(i=>{De.handle(i,!1,!1)})}};var wy={exports:{}};(function(e,t){const{hasOwnProperty:n}=Object.prototype,r=R();r.configure=R,r.stringify=r,r.default=r,t.stringify=r,t.configure=R,e.exports=r;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function s($){return $.length<5e3&&!i.test($)?`"${$}"`:JSON.stringify($)}function a($){if($.length>200)return $.sort();for(let L=1;L<$.length;L++){const P=$[L];let N=L;for(;N!==0&&$[N-1]>P;)$[N]=$[N-1],N--;$[N]=P}return $}const c=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function f($){return c.call($)!==void 0&&$.length!==0}function b($,L,P){$.length<P&&(P=$.length);const N=L===","?"":" ";let M=`"0":${N}${$[0]}`;for(let U=1;U<P;U++)M+=`${L}"${U}":${N}${$[U]}`;return M}function m($){if(n.call($,"circularValue")){const L=$.circularValue;if(typeof L=="string")return`"${L}"`;if(L==null)return L;if(L===Error||L===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function w($,L){let P;if(n.call($,L)&&(P=$[L],typeof P!="boolean"))throw new TypeError(`The "${L}" argument must be of type boolean`);return P===void 0?!0:P}function _($,L){let P;if(n.call($,L)){if(P=$[L],typeof P!="number")throw new TypeError(`The "${L}" argument must be of type number`);if(!Number.isInteger(P))throw new TypeError(`The "${L}" argument must be an integer`);if(P<1)throw new RangeError(`The "${L}" argument must be >= 1`)}return P===void 0?1/0:P}function A($){return $===1?"1 item":`${$} items`}function I($){const L=new Set;for(const P of $)(typeof P=="string"||typeof P=="number")&&L.add(String(P));return L}function C($){if(n.call($,"strict")){const L=$.strict;if(typeof L!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(L)return P=>{let N=`Object can not safely be stringified. Received type ${typeof P}`;throw typeof P!="function"&&(N+=` (${P.toString()})`),new Error(N)}}}function R($){$={...$};const L=C($);L&&($.bigint===void 0&&($.bigint=!1),"circularValue"in $||($.circularValue=Error));const P=m($),N=w($,"bigint"),M=w($,"deterministic"),U=_($,"maximumDepth"),p=_($,"maximumBreadth");function Z(we,Q,G,Ae,Te,qe){let ze=Q[we];switch(typeof ze=="object"&&ze!==null&&typeof ze.toJSON=="function"&&(ze=ze.toJSON(we)),ze=Ae.call(Q,we,ze),typeof ze){case"string":return s(ze);case"object":{if(ze===null)return"null";if(G.indexOf(ze)!==-1)return P;let Qe="",nt=",";const Fe=qe;if(Array.isArray(ze)){if(ze.length===0)return"[]";if(U<G.length+1)return'"[Array]"';G.push(ze),Te!==""&&(qe+=Te,Qe+=`
${qe}`,nt=`,
${qe}`);const h=Math.min(ze.length,p);let v=0;for(;v<h-1;v++){const T=Z(String(v),ze,G,Ae,Te,qe);Qe+=T!==void 0?T:"null",Qe+=nt}const k=Z(String(v),ze,G,Ae,Te,qe);if(Qe+=k!==void 0?k:"null",ze.length-1>p){const T=ze.length-p-1;Qe+=`${nt}"... ${A(T)} not stringified"`}return Te!==""&&(Qe+=`
${Fe}`),G.pop(),`[${Qe}]`}let He=Object.keys(ze);const $e=He.length;if($e===0)return"{}";if(U<G.length+1)return'"[Object]"';let Me="",fe="";Te!==""&&(qe+=Te,nt=`,
${qe}`,Me=" ");const pt=Math.min($e,p);M&&!f(ze)&&(He=a(He)),G.push(ze);for(let h=0;h<pt;h++){const v=He[h],k=Z(v,ze,G,Ae,Te,qe);k!==void 0&&(Qe+=`${fe}${s(v)}:${Me}${k}`,fe=nt)}if($e>p){const h=$e-p;Qe+=`${fe}"...":${Me}"${A(h)} not stringified"`,fe=nt}return Te!==""&&fe.length>1&&(Qe=`
${qe}${Qe}
${Fe}`),G.pop(),`{${Qe}}`}case"number":return isFinite(ze)?String(ze):L?L(ze):"null";case"boolean":return ze===!0?"true":"false";case"undefined":return;case"bigint":if(N)return String(ze);default:return L?L(ze):void 0}}function J(we,Q,G,Ae,Te,qe){switch(typeof Q=="object"&&Q!==null&&typeof Q.toJSON=="function"&&(Q=Q.toJSON(we)),typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(G.indexOf(Q)!==-1)return P;const ze=qe;let Qe="",nt=",";if(Array.isArray(Q)){if(Q.length===0)return"[]";if(U<G.length+1)return'"[Array]"';G.push(Q),Te!==""&&(qe+=Te,Qe+=`
${qe}`,nt=`,
${qe}`);const $e=Math.min(Q.length,p);let Me=0;for(;Me<$e-1;Me++){const pt=J(String(Me),Q[Me],G,Ae,Te,qe);Qe+=pt!==void 0?pt:"null",Qe+=nt}const fe=J(String(Me),Q[Me],G,Ae,Te,qe);if(Qe+=fe!==void 0?fe:"null",Q.length-1>p){const pt=Q.length-p-1;Qe+=`${nt}"... ${A(pt)} not stringified"`}return Te!==""&&(Qe+=`
${ze}`),G.pop(),`[${Qe}]`}G.push(Q);let Fe="";Te!==""&&(qe+=Te,nt=`,
${qe}`,Fe=" ");let He="";for(const $e of Ae){const Me=J($e,Q[$e],G,Ae,Te,qe);Me!==void 0&&(Qe+=`${He}${s($e)}:${Fe}${Me}`,He=nt)}return Te!==""&&He.length>1&&(Qe=`
${qe}${Qe}
${ze}`),G.pop(),`{${Qe}}`}case"number":return isFinite(Q)?String(Q):L?L(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(N)return String(Q);default:return L?L(Q):void 0}}function ce(we,Q,G,Ae,Te){switch(typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(typeof Q.toJSON=="function"){if(Q=Q.toJSON(we),typeof Q!="object")return ce(we,Q,G,Ae,Te);if(Q===null)return"null"}if(G.indexOf(Q)!==-1)return P;const qe=Te;if(Array.isArray(Q)){if(Q.length===0)return"[]";if(U<G.length+1)return'"[Array]"';G.push(Q),Te+=Ae;let Me=`
${Te}`;const fe=`,
${Te}`,pt=Math.min(Q.length,p);let h=0;for(;h<pt-1;h++){const k=ce(String(h),Q[h],G,Ae,Te);Me+=k!==void 0?k:"null",Me+=fe}const v=ce(String(h),Q[h],G,Ae,Te);if(Me+=v!==void 0?v:"null",Q.length-1>p){const k=Q.length-p-1;Me+=`${fe}"... ${A(k)} not stringified"`}return Me+=`
${qe}`,G.pop(),`[${Me}]`}let ze=Object.keys(Q);const Qe=ze.length;if(Qe===0)return"{}";if(U<G.length+1)return'"[Object]"';Te+=Ae;const nt=`,
${Te}`;let Fe="",He="",$e=Math.min(Qe,p);f(Q)&&(Fe+=b(Q,nt,p),ze=ze.slice(Q.length),$e-=Q.length,He=nt),M&&(ze=a(ze)),G.push(Q);for(let Me=0;Me<$e;Me++){const fe=ze[Me],pt=ce(fe,Q[fe],G,Ae,Te);pt!==void 0&&(Fe+=`${He}${s(fe)}: ${pt}`,He=nt)}if(Qe>p){const Me=Qe-p;Fe+=`${He}"...": "${A(Me)} not stringified"`,He=nt}return He!==""&&(Fe=`
${Te}${Fe}
${qe}`),G.pop(),`{${Fe}}`}case"number":return isFinite(Q)?String(Q):L?L(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(N)return String(Q);default:return L?L(Q):void 0}}function me(we,Q,G){switch(typeof Q){case"string":return s(Q);case"object":{if(Q===null)return"null";if(typeof Q.toJSON=="function"){if(Q=Q.toJSON(we),typeof Q!="object")return me(we,Q,G);if(Q===null)return"null"}if(G.indexOf(Q)!==-1)return P;let Ae="";if(Array.isArray(Q)){if(Q.length===0)return"[]";if(U<G.length+1)return'"[Array]"';G.push(Q);const nt=Math.min(Q.length,p);let Fe=0;for(;Fe<nt-1;Fe++){const $e=me(String(Fe),Q[Fe],G);Ae+=$e!==void 0?$e:"null",Ae+=","}const He=me(String(Fe),Q[Fe],G);if(Ae+=He!==void 0?He:"null",Q.length-1>p){const $e=Q.length-p-1;Ae+=`,"... ${A($e)} not stringified"`}return G.pop(),`[${Ae}]`}let Te=Object.keys(Q);const qe=Te.length;if(qe===0)return"{}";if(U<G.length+1)return'"[Object]"';let ze="",Qe=Math.min(qe,p);f(Q)&&(Ae+=b(Q,",",p),Te=Te.slice(Q.length),Qe-=Q.length,ze=","),M&&(Te=a(Te)),G.push(Q);for(let nt=0;nt<Qe;nt++){const Fe=Te[nt],He=me(Fe,Q[Fe],G);He!==void 0&&(Ae+=`${ze}${s(Fe)}:${He}`,ze=",")}if(qe>p){const nt=qe-p;Ae+=`${ze}"...":"${A(nt)} not stringified"`}return G.pop(),`{${Ae}}`}case"number":return isFinite(Q)?String(Q):L?L(Q):"null";case"boolean":return Q===!0?"true":"false";case"undefined":return;case"bigint":if(N)return String(Q);default:return L?L(Q):void 0}}function ke(we,Q,G){if(arguments.length>1){let Ae="";if(typeof G=="number"?Ae=" ".repeat(Math.min(G,10)):typeof G=="string"&&(Ae=G.slice(0,10)),Q!=null){if(typeof Q=="function")return Z("",{"":we},[],Q,Ae,"");if(Array.isArray(Q))return J("",we,[],I(Q),Ae,"")}if(Ae.length!==0)return ce("",we,[],Ae,"")}return me("",we,[])}return ke}})(wy,wy.exports);var HN=wy.exports;const l5=jr(HN);l5.configure;const qN=l5;var il=null;typeof WebSocket<"u"?il=WebSocket:typeof MozWebSocket<"u"?il=MozWebSocket:typeof global<"u"?il=global.WebSocket||global.MozWebSocket:typeof window<"u"?il=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(il=self.WebSocket||self.MozWebSocket);const KN=il;function ig(e,t){let n={...e};return delete n[t],t+qN(n)}function Gf(e){let t=[],n=new Map,r=[];for(let i of e){let s=!1;for(let a in i)if(i[a]&&(["ids","authors","kinds"].includes(a)||a.startsWith("#"))){if(i[a].length===0){s=!0;break}let c=ig(i,a),f=n.get(c);if(f!==void 0){let b=t[f];for(let m in b)if(m!==a){let w=ig(b,m);n.delete(w)}if(t[f][a]instanceof Set)for(let m of i[a])t[f][a].add(m);else t[f][a]=new Set(t[f][a].concat(i[a])),r.push([f,a]);s=!0;break}}if(!s){for(let a in i)if(i[a]&&(["ids","authors","kinds"].includes(a)||a.startsWith("#"))){let c=ig(i,a);n.set(c,t.length)}t.push({...i})}}for(let[i,s]of r)t[i][s]=Array.from(t[i][s]);return t}function WN(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function VN(e){let t=e.indexOf('"EVENT"')+7,n=e.slice(t),r=n.indexOf('"')+1,i=n.slice(r);return i.slice(0,i.indexOf('"'))}function GN(e,t,n){return new YN(e,t,n).relayInit()}var Bh,c5,Lh,u5,Fh,f5,Uh,h5,jh,d5,zh,p5,Lw,YN=(Lw=class{constructor(e,t,n){Nn(this,Bh);Nn(this,Lh);Nn(this,Fh);Nn(this,Uh);Nn(this,jh);Nn(this,zh);xe(this,"url");xe(this,"alreadyHaveEvent");xe(this,"logging",!1);xe(this,"autoReconnect");xe(this,"ws");xe(this,"sendOnConnect",[]);xe(this,"openSubs",{});xe(this,"closedByClient",!1);xe(this,"listeners",{connect:[],disconnect:[],error:[],notice:[],auth:[]});xe(this,"subListeners",{});xe(this,"pubListeners",{});xe(this,"incomingMessageQueue",[]);xe(this,"handleNextInterval");xe(this,"resolveClose");xe(this,"reconnectTimeout",0);this.url=e,this.alreadyHaveEvent=t,this.autoReconnect=n}async trySend(e){var n;const t=JSON.stringify(e);this.connected?(n=this.ws)==null||n.send(t):this.sendOnConnect.push(t)}async connectRelay(){return new Promise((e,t)=>{try{const n=new KN(this.url);this.ws=n}catch(n){t(n);return}this.ws.onopen=qn(this,zh,p5).bind(this,e),this.ws.onerror=n=>{this.listeners.error.forEach(r=>r()),t(n)},this.ws.onclose=qn(this,Lh,u5).bind(this),this.ws.onmessage=qn(this,Uh,h5).bind(this)})}async connect(){var e,t;(e=this.ws)!=null&&e.readyState&&this.ws.readyState<2||(((t=this.ws)==null?void 0:t.readyState)===2&&this.ws.close(),this.ws=void 0,await this.connectRelay())}relayInit(){const e=this;return{url:e.url,sub:e.sub.bind(e),on:e.on.bind(e),off:e.off.bind(e),auth:e.auth.bind(e),publish:e.publish.bind(e),connect:e.connect.bind(e),close(){return e.close()},get status(){return e.status},relay:e}}get status(){var e;return((e=this.ws)==null?void 0:e.readyState)??3}get connected(){var e;return((e=this.ws)==null?void 0:e.readyState)===1}close(){var e;return this.closedByClient=!0,(e=this.ws)==null||e.close(),new Promise(t=>{this.resolveClose=t})}on(e,t){var n;this.listeners[e].push(t),e==="connect"&&((n=this.ws)==null?void 0:n.readyState)===1&&t()}off(e,t){const n=this.listeners[e].indexOf(t);n!==-1&&this.listeners[e].splice(n,1)}publish(e){return this._publish(e,"EVENT")}auth(e){return this._publish(e,"AUTH")}_publish(e,t){const n=this;if(!e.id)throw new Error(`event ${e} has no id`);const r=e.id;let i=!1,s=!1;n.trySend([t,e]).then(()=>{i=!0,s&&(a(),s=!1)}).catch(()=>{});const a=()=>{const c=this.sub([{ids:[r]}],{id:`monitor-${r.slice(0,5)}`}),f=setTimeout(()=>{var b;(((b=n.pubListeners[r])==null?void 0:b.failed)||[]).forEach(m=>m("event not seen after 5 seconds")),c.unsub()},5e3);c.on("event",()=>{var b;clearTimeout(f),(((b=n.pubListeners[r])==null?void 0:b.seen)||[]).forEach(m=>m())})};return{on:(c,f)=>{n.pubListeners[r]=n.pubListeners[r]||{ok:[],seen:[],failed:[]},n.pubListeners[r][c].push(f),c==="seen"&&(i?a():s=!0)},off:(c,f)=>{const b=n.pubListeners[r];if(!b)return;const m=b[c].indexOf(f);m>=0&&b[c].splice(m,1)}}}sub(e,t={}){const n=this,r=t.id||Math.random().toString().slice(2),i=t.skipVerification||!1;return n.openSubs[r]={id:r,filters:e,skipVerification:i},n.connected&&(this.logging&&console.log("REQ2",this.url,r,...e),n.trySend(["REQ",r,...e])),{sub:(s,a={})=>this.sub(s||e,{skipVerification:a.skipVerification||i,id:r}),unsub:()=>{delete n.openSubs[r],delete n.subListeners[r],n.connected&&(n.logging&&console.log("CLOSE",this.url,r),n.trySend(["CLOSE",r]))},on:(s,a)=>{n.subListeners[r]=n.subListeners[r]||{event:[],eose:[]},n.subListeners[r][s].push(a)},off:(s,a)=>{const c=n.subListeners[r];if(!c)return;const f=c[s].indexOf(a);f>=0&&c[s].splice(f,1)}}}},Bh=new WeakSet,c5=function(){if(this.incomingMessageQueue.length===0){clearInterval(this.handleNextInterval),this.handleNextInterval=null;return}qn(this,jh,d5).call(this,{data:this.incomingMessageQueue.shift()})},Lh=new WeakSet,u5=async function(){this.closedByClient?(this.listeners.disconnect.forEach(e=>e()),this.resolveClose&&this.resolveClose()):this.autoReconnect&&qn(this,Fh,f5).call(this)},Fh=new WeakSet,f5=function(){setTimeout(()=>{this.reconnectTimeout=Math.max(2e3,this.reconnectTimeout*3),console.log(this.url,"reconnecting after "+this.reconnectTimeout/1e3+"s"),this.connect()},this.reconnectTimeout)},Uh=new WeakSet,h5=async function(e){this.incomingMessageQueue.push(e.data),this.handleNextInterval||(this.handleNextInterval=setInterval(()=>qn(this,Bh,c5).call(this),0))},jh=new WeakSet,d5=async function(e){var s,a,c,f,b,m,w;let t,n=e.data.toString();if(!n)return;let r=WN(n,"id"),i=(s=this.alreadyHaveEvent)==null?void 0:s.call(this,r);if(i){const _=this.subListeners[VN(n)];return _?_.event.forEach(A=>A(i)):void 0}try{t=JSON.parse(n)}catch{t=e.data}if(t.length>=1)switch(t[0]){case"EVENT":if(this.logging&&console.log(t),t.length!==3)return;const _=t[1],A=t[2];if(!this.openSubs[_]||(a=this.openSubs[_].eventIds)!=null&&a.has(r))return;(c=this.openSubs[_].eventIds)==null||c.add(r),vm(A)&&this.openSubs[_]&&(this.openSubs[_].skipVerification||bm(A))&&K$(this.openSubs[_].filters,A)&&(this.openSubs[_],(((f=this.subListeners[_])==null?void 0:f.event)||[]).forEach(R=>R(A)));return;case"EOSE":{if(t.length!==2)return;const R=t[1];this.logging&&console.log("EOSE",this.url,R),(((b=this.subListeners[R])==null?void 0:b.eose)||[]).forEach($=>$());return}case"OK":{if(t.length<3)return;const R=t[1],$=t[2],L=t[3]||"";$?(m=this.pubListeners[R])==null||m.ok.forEach(P=>P()):(w=this.pubListeners[R])==null||w.failed.forEach(P=>P(L));return}case"NOTICE":if(t.length!==2)return;const I=t[1];this.listeners.notice.forEach(R=>R(I));return;case"AUTH":if(t.length!==2)return;const C=t[1];this.listeners.auth.forEach(R=>R(C));return}},zh=new WeakSet,p5=function(e){var t;if(this.resolveClose){this.resolveClose();return}for(const n in this.openSubs)this.logging&&console.log("REQ",this.url,n,...this.openSubs[n].filters),this.trySend(["REQ",n,...this.openSubs[n].filters]);for(const n of this.sendOnConnect)this.logging&&console.log("(Relay msg)",this.url,n),(t=this.ws)==null||t.send(n);this.sendOnConnect=[],this.listeners.connect.forEach(n=>n()),e()},Lw),Hh,g5,qh,y5,Fy,JN,Kh,m5,Wh,v5,Vh,b5,Fw,ZN=(Fw=class{constructor(){Nn(this,Hh);Nn(this,qh);Nn(this,Fy);Nn(this,Kh);Nn(this,Wh);Nn(this,Vh);xe(this,"eventsById",new Map);xe(this,"metadataByPubKey",new Map);xe(this,"contactsByPubKey",new Map);xe(this,"authorsKindsByPubKey",new Map);xe(this,"eventsByTags",new Map)}addEvent(e){this.getEventById(e.id)||(this.eventsById.set(e.id,e),e.kind===Kn.Metadata&&this.metadataByPubKey.set(e.pubkey,e),e.kind===Kn.Contacts&&this.contactsByPubKey.set(e.pubkey,e),qn(this,Hh,g5).call(this,e),qn(this,qh,y5).call(this,e))}getEventById(e){return this.eventsById.get(e)}hasEventById(e){return this.eventsById.has(e)}getCachedEventsWithUpdatedFilters(e,t){const n=new Set,r=[];for(const i of e){const s=qn(this,Vh,b5).call(this,i)||qn(this,Kh,m5).call(this,i)||qn(this,Wh,v5).call(this,i)||{filter:i,events:[]};for(const a of s.events)n.add(a);r.push(s.filter)}return{filters:r,events:[...n]}}},Hh=new WeakSet,g5=function(e){const t=this.authorsKindsByPubKey.get(e.pubkey);if(!t)this.authorsKindsByPubKey.set(e.pubkey,new Map([[e.kind,[e]]]));else{const n=t.get(e.kind);n?e.kind===Kn.Metadata||e.kind===Kn.Contacts?e.created_at>n[0].created_at&&(n[0]=e):n.push(e):t.set(e.kind,[e])}},qh=new WeakSet,y5=function(e){for(const t of e.tags){let n=t[0]+":"+t[1];const r=this.eventsByTags.get(n);r?r.push(e):this.eventsByTags.set(n,[e])}},Fy=new WeakSet,JN=function(e){if(e.noCache||!e.authors||!e.kinds||e.kinds.find(r=>r!==Kn.Contacts&&r!==Kn.Metadata)!==void 0)return;const t=[],n=new Set;for(const r of e.authors){let i;if(e.kinds.includes(Kn.Contacts)&&(i=this.contactsByPubKey.get(r),!i)){t.push(r);continue}let s;if(e.kinds.includes(Kn.Metadata)&&(s=this.metadataByPubKey.get(r),!s)){t.push(r);continue}i&&n.add(i),s&&n.add(s)}return{filter:{...e,authors:t},events:n}},Kh=new WeakSet,m5=function(e){if(e.noCache||!e.authors)return;const t=new Set;for(const n of e.authors)if(e.kinds){const r=this.authorsKindsByPubKey.get(n);if(r)for(const i of e.kinds){const s=r.get(i);if(s)for(const a of s)t.add(a)}}else{const r=this.authorsKindsByPubKey.get(n);if(r)for(const i of r.values())for(const s of i)t.add(s)}return{filter:e,events:t}},Wh=new WeakSet,v5=function(e){if(e.noCache)return;const t=new Set;for(const n in e){if(n[0]!=="#")continue;let r=n.slice(1)+":"+e[n][0];const i=this.eventsByTags.get(r);if(i)for(const s of i)t.add(s)}return{filter:e,events:t}},Vh=new WeakSet,b5=function(e){if(!e.ids)return;const t=new Set,n=[];for(const r of e.ids){const i=this.getEventById(r);i?t.add(i):n.push(r)}return{filter:{...e,ids:n},events:t}},Fw),w5=class{constructor(e,t,n){xe(this,"pubkey");xe(this,"relayPool");xe(this,"relays");this.pubkey=n,this.relayPool=e,this.relays=t}metaData(e,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Kn.Metadata]}],this.relays,e,t)}subscribe(e,t,n){return this.relayPool.subscribeEventObject(e.map(r=>({authors:[this.pubkey],...r})),this.relays,t,n)}followsPubkeys(e,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Kn.Contacts]}],this.relays,n=>{let r=[];for(const i of n.tags)i[0]==="p"&&r.push(i[1]);e(r)},t)}follows(e,t){return this.relayPool.subscribeEventObject([{authors:[this.pubkey],kinds:[Kn.Contacts]}],this.relays,n=>{let r=[];for(const i of n.tags)if(i[0]==="p"){let s=this.relays;i[1]&&(s=[i[1],...this.relays||[]]),r.push(new w5(this.relayPool,s,i[1]))}e(r)},t)}secondFollows(e,t,n=!0){return this.followsPubkeys(r=>{let i=new Map;for(const s of r)this.relayPool.subscribeEventObject([{authors:[s],kinds:[Kn.Contacts]}],this.relays,a=>{let c=1/a.tags.length;for(const f of a.tags)if(f[0]==="p"){let b=i.get(f[1]);b?b+=c:b=c,i.set(f[1],b)}if(n)for(const f of r)i.delete(f);e(Array.from(i.entries()).sort((f,b)=>b[1]-f[1]))},t)},t)}allEvents(e,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],limit:t}],this.relays,e,n)}referenced(e,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],limit:t}],this.relays,e,n)}followers(e,t=100,n){return this.relayPool.subscribe([{"#p":[this.pubkey],kinds:[Kn.Contacts],limit:t}],this.relays,e,n)}sentAndRecievedDMs(e,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[Kn.EncryptedDirectMessage],limit:t},{"#p":[this.pubkey],kinds:[Kn.EncryptedDirectMessage],limit:t}],this.relays,e,n)}text(e,t=100,n){return this.relayPool.subscribe([{authors:[this.pubkey],kinds:[Kn.Text],limit:t}],this.relays,e,n)}},_y=class{constructor(e,t,n){xe(this,"id");xe(this,"kind");xe(this,"pubkey");xe(this,"tags");xe(this,"created_at");xe(this,"content");xe(this,"relayPool");xe(this,"relays");xe(this,"sig");this.id=e.id,this.kind=e.kind,this.pubkey=e.pubkey,this.tags=e.tags,this.created_at=e.created_at,this.content=e.content,this.relayPool=t,this.relays=n,this.sig=e.sig}referencedAuthors(){const e=[];for(const t of this.tags)t[0]==="p"&&e.push(new w5(this.relayPool,void 0,t[1]));return e}referencedEvents(e){const t=[];for(const n of this.tags)if(n[0]==="e"){let r=this.relays;n[2]&&(r=[n[2],...r||[]]),t.push(this.relayPool.getEventById(n[1],r,e).then(i=>new _y(i,this.relayPool,this.relays)))}return t}thread(e,t){let n=this.relays,r=[];for(const i of this.tags)i[0]==="e"&&(i[2]&&(n=[i[2],...n||[]]),r.push(i[1]));return this.relayPool.subscribe([{ids:r},{"#e":r}],n,e,t)}};function XN(e){let t=new Set;return(n,r,i)=>{t.has(n.id)||(t.add(n.id),e(n,r,i))}}function QN(e){let t=new Map;return(n,r,i)=>{if(n.kind===Kn.Metadata||n.kind===Kn.Contacts){let s=n.pubkey+" "+n.kind;if((t.get(s)||0)>n.created_at)return;t.set(s,n.created_at)}e(n,r,i)}}function eR(e,t){return(n,r,i)=>{for(let s of t)if(yu(s,n)){e(n,r,i);break}}}var tR=class{constructor(e){xe(this,"subs",[]);xe(this,"events",[]);xe(this,"onunsub");this.onunsub=e}event(...e){this.events.push(e),this.subs.forEach(t=>t(...e))}sub(e){return this.events.forEach(t=>e(...t)),this.subs.push(e),()=>{var t;this.subs=this.subs.filter(n=>n!==e),this.subs.length===0&&((t=this.onunsub)==null||t.call(this),this.onunsub=void 0)}}},nR=e=>[...new Set(e)];function rR(e,t,n,r={},i){let s=[];if(i){const c=i.getCachedEventsWithUpdatedFilters(e,t);e=c.filters,s=c.events}if(r.logAllEvents){const c=n;n=(f,b,m)=>{c(f,b,m)}}r.allowDuplicateEvents||(n=XN(n)),r.allowOlderEvents||(n=QN(n));for(const c of s)n(c,!1,void 0);e=Gf(e),n=eR(n,e),t=nR(t);const a=iR(e,t);return[n,a]}function iR(e,t){const n=new Map,r=[];for(const i of e){const s=i.relay;if(s){const a=n.get(s);a?a.push(gb(i)):n.set(s,[gb(i)])}else r.push(i)}if(r.length>0)for(const i of t){const s=n.get(i);s?n.set(i,s.concat(r)):n.set(i,r)}return n}function gb(e){return e={...e},delete e.relay,e}function sR(e,t){const n=new Map,r=[];let i=0,s={unsubcb:()=>{},unsuboneosecb:()=>{}},a=()=>{};for(const[f,b,m,w,_]of e){if(!m.unsubcb)continue;for(const[I,C]of b){const R=n.get(I);R?n.set(I,R.concat(C)):n.set(I,C)}let A=(I,C,R)=>{m.unsubcb&&f(I,C,R)};if(t&&_){const I=new tR(a);r.push((R,$,L)=>{I.event(R,$,L)});let C=I.sub(A);t.set(_,I),m.unsubcb=()=>{m.unsubcb=void 0,C(),w||i--}}else r.push(A),m.unsubcb=()=>{m.unsubcb=void 0,w||i--};w||i++}i===0&&setTimeout(()=>{},0);const c=(f,b,m)=>{for(const w of r)w(f,b,m)};return e.length=0,[c,n,s]}var sg=class{constructor(e,t,n,r){xe(this,"data");xe(this,"promises");xe(this,"relays");xe(this,"kind");xe(this,"relayPool");xe(this,"useps");this.data=new Map,this.promises=new Map,this.kind=e,this.relayPool=t,this.relays=n||["wss://us.rbr.bio","wss://eu.rbr.bio"],this.useps=r||!1}async get(e){let t=this.data.get(e);if(t)return Promise.resolve(t);const n=this.promises.get(e);return n||new Promise((r,i)=>{let s=0;const a=this.useps?{kinds:[this.kind],"#p":[e]}:{kinds:[this.kind],authors:[e]},c=this.relayPool.logSubscriptions;this.relayPool.logSubscriptions=!1,this.relayPool.subscribe([a],this.relays,f=>{this.data.set(e,f),this.promises.delete(e),r(f)},void 0,f=>{this.relays.includes(f)&&s++,s===this.relays.length&&(this.promises.delete(e),i(`Can't find data2 for ${e} with kind ${this.kind} on RelayInfoServers ${this.relays.join(",")}, ${s} tries`))},{dontSendOtherFilters:!0}),this.relayPool.logSubscriptions=c})}},yb=e=>[...new Set(e)];function oR(e){if(e)return JSON.parse(e)}var Gh,_5,Yh,x5,Zh,k5,Jh,S5,Xh,E5,Qh,A5,Uw,aR=(Uw=class{constructor(e,t={}){Nn(this,Gh);Nn(this,Yh);Nn(this,Zh);Nn(this,Jh);Nn(this,Xh);Nn(this,Qh);xe(this,"relayByUrl",new Map);xe(this,"noticecbs",[]);xe(this,"errorcbs",[]);xe(this,"authcbs",[]);xe(this,"eventCache");xe(this,"minMaxDelayms",1/0);xe(this,"filtersToSubscribe",[]);xe(this,"timer");xe(this,"externalGetEventById");xe(this,"logSubscriptions",!1);xe(this,"autoReconnect",!1);xe(this,"startTime",new Date().getTime());xe(this,"deleteSignatures");xe(this,"subscriptionCache");xe(this,"skipVerification");xe(this,"writeRelays");xe(this,"metadataCache");xe(this,"contactListCache");xe(this,"logErrorsAndNotices");xe(this,"errorsAndNoticesInterval");xe(this,"errorsAndNotices",[]);if(this.externalGetEventById=t.externalGetEventById,this.logSubscriptions=t.logSubscriptions,this.autoReconnect=t.autoReconnect,this.deleteSignatures=t.deleteSignatures,this.skipVerification=t.skipVerification,this.writeRelays=new sg(10003,this,void 0,!0),this.metadataCache=new sg(0,this),this.contactListCache=new sg(3,this),t.useEventCache&&(this.eventCache=new ZN),t.subscriptionCache&&(this.subscriptionCache=new Map),e)for(const n of yb(e))this.addOrGetRelay(n);this.logErrorsAndNotices=t.logErrorsAndNotices||!0,this.onnotice((n,r)=>{this.errorsAndNotices.push({type:"notice",url:n,msg:r,time:Date.now()-this.startTime})}),this.onerror((n,r)=>{this.errorsAndNotices.push({type:"error",url:n,msg:r,time:Date.now()-this.startTime})}),this.errorsAndNoticesInterval=setInterval(()=>qn(this,Gh,_5).call(this),1e3*10)}addOrGetRelay(e){const t=this.relayByUrl.get(e);if(t)return t;const n=GN(e,this.externalGetEventById?this.externalGetEventById:this.eventCache?r=>{var i;return(i=this.eventCache)==null?void 0:i.getEventById(r)}:void 0,this.autoReconnect);return this.relayByUrl.set(e,n),n.connect().then(r=>{n==null||n.on("notice",i=>{this.noticecbs.forEach(s=>s(e,i))}),n==null||n.on("auth",i=>{this.authcbs.forEach(s=>s(n,i))})},r=>{this.errorcbs.forEach(i=>i(e,r))}),n}async close(){const e=[];for(const t of this.relayByUrl.values())e.push(t.close());return this.relayByUrl.clear(),clearInterval(this.errorsAndNoticesInterval),Promise.all(e)}removeRelay(e){const t=this.relayByUrl.get(e);t&&(t.close(),this.relayByUrl.delete(e))}sendSubscriptions(e,t){clearTimeout(this.timer),this.timer=void 0;let n=this.minMaxDelayms;this.minMaxDelayms=1/0;const[r,i,s]=sR(t||this.filtersToSubscribe,this.subscriptionCache);return qn(this,Jh,S5).call(this,i,r,e,s,n)}subscribeEventObject(e,t,n,r,i,s={}){return this.subscribe(e,t,(a,c,f)=>n(new _y(a,this,t),c,f))}subscribe(e,t,n,r,i,s={}){var w;if(r!==void 0&&i)throw new Error("maxDelayms and onEose cannot be used together");if(t===void 0){const _=qn(this,Qh,A5).call(this,e,n,r,i,s);return()=>{_.then(A=>{A()})}}let a;if(s.unsubscribeOnEose&&!i){a=JSON.stringify([e,t]);const _=(w=this.subscriptionCache)==null?void 0:w.get(a);if(_)return _.sub(n)}const[c,f]=rR(e,t,n,s,this.eventCache);let b={unsubcb:()=>{}};r===void 0&&i&&this.filtersToSubscribe.length>0&&!s.dontSendOtherFilters&&this.sendSubscriptions();const m=[c,f,b,s.unsubscribeOnEose,a,r];return s.dontSendOtherFilters?this.sendSubscriptions(i,[m]):(this.filtersToSubscribe.push(m),r===void 0?this.sendSubscriptions(i):(qn(this,Xh,E5).call(this,r),()=>{var _;(_=b.unsubcb)==null||_.call(b),delete b.unsubcb}))}async getEventObjectById(e,t,n){return this.getEventById(e,t,n).then(r=>new _y(r,this,t))}async getEventById(e,t,n){return new Promise((r,i)=>{this.subscribe([{ids:[e]}],t,s=>{r(s)},n,void 0)})}publish(e,t){for(const n of yb(t))this.addOrGetRelay(n).publish(e)}onnotice(e){this.noticecbs.push(e)}onerror(e){this.relayByUrl.forEach((t,n)=>t.on("error",r=>e(n,r))),this.errorcbs.push(e)}ondisconnect(e){this.relayByUrl.forEach((t,n)=>t.on("disconnect",r=>e(n,r)))}onauth(e){this.authcbs.push(e)}getRelayStatuses(){return Array.from(this.relayByUrl.entries()).map(([e,t])=>[e,t.status]).sort()}setWriteRelaysForPubKey(e,t,n){const r={created_at:n,pubkey:"",id:"",sig:"",content:JSON.stringify(t),kind:10003,tags:[["p",e]]};this.writeRelays.data.set(e,r)}setCachedMetadata(e,t){this.metadataCache.data.set(e,t)}setCachedContactList(e,t){this.contactListCache.data.set(e,t)}subscribeReferencedEvents(e,t,n,r,i={}){let s=[],a=[];for(const c of e.tags){if(c[0]==="p"){const f=c[1];if(f.length!==64){console.log("bad pubkey",f,c);continue}a.push(f)}if(c[0]==="e"){const f=c[1];s.push(f)}}return s.length===0?()=>{}:a.length===0?i.defaultRelays?this.subscribe([{ids:s}],i.defaultRelays,t,n,r,i):(console.error("No authors for ids in event",e),()=>{}):(this.logSubscriptions,this.subscribe([{ids:s,authors:a}],void 0,t,n,r,i))}fetchAndCacheMetadata(e){return this.metadataCache.get(e).catch(t=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching metadata for ${e}: ${t}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching metadata for ${e}: ${t}`)})}fetchAndCacheContactList(e){return this.contactListCache.get(e).catch(t=>{throw this.errorsAndNotices.push({type:"error",msg:`Error fetching contact list for ${e}: ${t}`,time:Date.now()-this.startTime,url:""}),new Error(`Error fetching contact list for ${e}: ${t}`)})}subscribeReferencedEventsAndPrefetchMetadata(e,t,n,r,i={}){for(const s of e.tags)if(s[0]==="p"){const a=s[1];if(a.length!==64){console.log("bad pubkey",a,s);continue}this.fetchAndCacheMetadata(a).catch(c=>{this.errorsAndNotices.push({type:"error",url:"",msg:`Error fetching metadata for ${a}: ${c}`,time:Date.now()-this.startTime})})}return this.subscribeReferencedEvents(e,t,n,r,i)}reconnect(){this.relayByUrl.forEach(e=>{e.connect().catch(t=>{this.errorsAndNotices.push({type:"error",msg:`Error reconnecting to ${e.url}: ${t}`,time:Date.now()-this.startTime,url:e.url})})})}},Gh=new WeakSet,_5=function(){if(this.errorsAndNotices.length){if(!this.logErrorsAndNotices){this.errorsAndNotices=[];return}this.errorsAndNotices.length>5?console.groupCollapsed("RelayPool errors and notices with "+this.errorsAndNotices.length+" entries"):console.group("RelayPool errors and notices"),console.table(this.errorsAndNotices.map(e=>({...e,msg:e.msg}))),console.groupEnd(),this.errorsAndNotices=[]}},Yh=new WeakSet,x5=function(e,t,n,r,i){const s=Gf(t);if(s.length===0)return;const c=this.addOrGetRelay(e).sub(s,{skipVerification:this.skipVerification,eventIds:i});let f=!1,b=1/0;return c.on("event",m=>{var _;m.created_at<b&&(b=m.created_at);let w=m;this.deleteSignatures||(w.sig=m.sig),(_=this.eventCache)==null||_.addEvent(w),n(w,f,e)}),c.on("eose",()=>{r==null||r(e,b),f=!0}),c},Zh=new WeakSet,k5=function(e){const t=new Map;for(const[n,r]of e){const i=Gf(Gf(r));i.length>0&&t.set(n,i)}return t},Jh=new WeakSet,S5=function(e,t,n,r={},i){var b,m;if(e.size===0)return()=>{};if(e=qn(this,Zh,k5).call(this,e),this.logSubscriptions){console.group("RelayPool subscribeRelays"),console.log("at time",new Date().getTime()-this.startTime,"ms, minMaxDelayms=",i);const w={};for(const[_,A]of e){let I=0;for(const C of A){const R={...C};R.authors&&(R.authors=R.authors.join(),R["authors.length"]=(b=C==null?void 0:C.authors)==null?void 0:b.length),R.kinds&&(R.kinds=R.kinds.join()),R.ids&&(R.ids=R.ids.join(),R["ids.length"]=(m=C==null?void 0:C.ids)==null?void 0:m.length),R["#e"]&&(R["#e"]=R["#e"].join(),R["#e.length"]=C["#e"].length),R["#p"]&&(R["#p"]=R["#p"].join(),R["#p.length"]=C["#p"].length),w[_+" "+I]=R,I++}}Object.keys(w).length>3&&console.groupCollapsed(Object.keys(w).length+" filters to "+e.size+" relays"),console.table(w),Object.keys(w).length>3&&console.groupEnd(),console.groupEnd()}const s=[];let a=!1,c=[];r.unsuboneosecb=()=>{a=!0,c.forEach(w=>w.unsub())};for(const[w,_]of e){let A={};const I=($,L)=>{var P;n&&n($,L),a?(P=A.sub)==null||P.unsub():A.sub&&c.push(A.sub)},C=new Set,R=qn(this,Yh,x5).call(this,w,_,t,I,C);R&&(A.sub=R,s.push(R))}const f=()=>s.forEach(w=>w.unsub());return r.unsubcb=()=>{f(),delete r.unsubcb},f},Xh=new WeakSet,E5=function(e){this.minMaxDelayms>e&&(this.minMaxDelayms=e),clearTimeout(this.timer),this.timer=void 0,this.minMaxDelayms!==1/0&&(this.timer=setTimeout(()=>{this.sendSubscriptions()},this.minMaxDelayms))},Qh=new WeakSet,A5=async function(e,t,n,r,i={}){var w;const s=new Set;for(const _ of e)if(_.authors)for(const A of _.authors)s.add(A);else if(!i.defaultRelays)throw new Error("Authors must be specified if no relays are subscribed and no default relays are specified.");const a=[],c=[];for(const _ of s)a.push((w=this.writeRelays)==null?void 0:w.get(_).then(A=>oR(A==null?void 0:A.content)).catch(()=>(i==null?void 0:i.defaultRelays)||[])),c.push(_);const f=new Set;let b=0;for(const _ of a){const A=c[b];b+=1;let I=await _;if(!Array.isArray(I)){console.error("Couldn't load relays for author ",A);continue}for(let C of I)f.add(C)}let m=Array.from(f);return m.length===0&&i.defaultRelays&&(m=i.defaultRelays),this.subscribe(e,m,t,n,r,i)},Uw);let kc={};const og=["wss://eden.nostr.land","wss://nostr.fmt.wiz.biz","wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nos.lol","wss://relay.snort.social","wss://relay.current.fyi"],mb=["wss://relay.nostr.band"],$n={relays:new Map,searchRelays:new Map,writeRelaysByUser:new Map,filtersBySubscriptionName:new Map,subscribedEventTags:new Set,subscribedProfiles:new Set,subscribedKeywords:new Set,subscriptionsByName:new Map,newAuthors:new Set,DEFAULT_RELAYS:og,init(){this.relays=new Map(og.map(e=>[e,{enabled:!0,url:e}])),this.searchRelays=new Map(mb.map(e=>[e,{enabled:!0,url:e}])),this.manage()},enabledRelays(e){return Array.from((e||this.relays).values()).filter(t=>t.enabled).map(t=>t.url)},getSubscriptionIdForName(e){return Pt.arrayToHex(ni(e)).slice(0,8)},getUrlsFromFollowEvent(e){const t=new Map;if(e.content)try{const n=JSON.parse(e.content);for(const r in n)try{const i=new URL(r).toString().replace(/\/$/,"");t.set(i,n[r])}catch{console.log("invalid relay url",r,e)}}catch{console.log("failed to parse relay urls",e)}return t},getPopularRelays:function(){console.log("getPopularRelays");const e=new Map;return De.db.find({kind:3}).forEach(n=>{if(n.content)try{const r=JSON.parse(n.content);for(const i in r)try{const s=new URL(i).toString().replace(/\/$/,""),a=e.get(s)||0;e.set(s,a+1)}catch{console.log("invalid relay url",i,n)}}catch{console.log("failed to parse relay urls",n)}}),Array.from(e.entries()).filter(([n])=>!this.relays.has(n)).sort((n,r)=>r[1]-n[1]).map(n=>({url:n[0],users:n[1]}))},getConnectedRelayCount:function(){var t;let e=0;for(const n of this.relays.keys())((t=Ft.relayPool.relayByUrl.get(n))==null?void 0:t.status)===1&&e++;return e},getUserRelays(e){let t=new Map;if(typeof e!="string")return console.log("getUserRelays: invalid user",e),[];const n=De.db.findOne({kind:3,pubkey:e});return n&&(t=this.getUrlsFromFollowEvent(n)),Array.from(t.entries())},manage:function(){Pe.get("relays").put({}),Pe.get("relays").on(e=>{if(e){kc=e;for(const t of this.relays.keys())if(kc[t]===null)this.remove(t);else if(kc[t]&&kc[t].enabled===!1){const n=this.relays.get(t);n&&(n.enabled=!1,this.relays.set(t,n),Ft.relayPool.removeRelay(t))}for(const[t,n]of Object.entries(kc))if(n)this.relays.has(t)||(this.relays.set(t,{url:t,enabled:!!n.enabled}),n.enabled&&Ft.relayPool.addOrGetRelay(t));else{this.relays.has(t)&&this.remove(t);continue}}})},add(e){if(this.relays.has(e))return;const t={enabled:!0,url:e};this.relays.set(e,t),Ft.relayPool.addOrGetRelay(e)},remove(e){try{Ft.relayPool.removeRelay(e)}catch(t){console.log("error closing relay",t)}this.relays.delete(e)},disable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!1,url:e}),Ft.relayPool.removeRelay(e))},enable(e){this.relays.has(e)&&(this.relays.set(e,{enabled:!0,url:e}),Ft.relayPool.addOrGetRelay(e))},restoreDefaults(){this.relays.clear();for(const t of og)this.add(t);this.saveToContacts();for(const t of mb)this.relays.has(t)||this.add(t);const e={};for(const[t,n]of this.relays.entries())e[t]={enabled:n.enabled,url:t};Pe.get("relays").put(e)},saveToContacts(){const e={};for(const i of this.relays.keys())e[i]={read:!0,write:!0};const t=De.db.findOne({kind:3,pubkey:ye.getPubKey()}),r={kind:3,content:JSON.stringify(e),tags:(t==null?void 0:t.tags)||[]};De.publish(r)},updateLastSeen:dr.throttle(e=>{const t=Math.floor(Date.now()/1e3);Pe.get("relays").get(e).get("lastSeen").put(t)},5*1e3,{leading:!0}),groupFilter(e){var t;return e.authors&&((t=e.kinds)==null?void 0:t.length)===1&&e.kinds[0]===0?(e.authors.forEach(n=>{this.subscribedProfiles.add(n)}),{name:"profiles",groupedFilter:{authors:Array.from(this.subscribedProfiles.values()),kinds:[0]}}):e.authors?(e.authors=Array.from(this.subscribedProfiles.values()),{name:"authors",groupedFilter:{authors:Array.from(this.subscribedProfiles.values())}}):e.ids?{name:"ids",groupedFilter:{ids:Array.from(Ft.subscribedEventIds.values())}}:e["#e"]?(e["#e"].forEach(n=>{this.subscribedEventTags.add(n)}),{name:"eventsByTag",groupedFilter:{"#e":Array.from(this.subscribedEventTags.values())}}):{name:JSON.stringify(e),groupedFilter:e}}};window.location.pathname!=="/"&&$n.init();const{authenticate:lR}=dx;let vb=0,Ih={logSubscriptions:!1,indexed03:!0};const yo=new aR($n.enabledRelays(),{useEventCache:!1,autoReconnect:!0,externalGetEventById:e=>De.seen.has(e)&&{sig:"",id:"",kind:0,tags:[],content:"",created_at:0,pubkey:""}||void 0});yo.onnotice((e,t)=>{console.log("notice",t," from relay ",e)});const cR=(e,t)=>new URL(e).host===new URL(t).host;yo.onauth(async(e,t)=>{if($n.enabledRelays().some(n=>cR(n,e.url)))try{await lR({relay:e,challenge:t,sign:De.sign})}catch(n){console.log("error: authenticate to relay:",n),yo.removeRelay(e.url),$n.disable(e.url)}});Pe.get("dev").on(e=>{Ih=e,yo.logSubscriptions=Ih.logSubscriptions});let C5=0;Pe.get("lastOpened").once(e=>{C5=e,Pe.get("lastOpened").put(Math.floor(Date.now()/1e3))});let bb=Date.now();const T5=()=>{Date.now()-bb>60*1e3*1&&(bb=Date.now(),yo.reconnect())};document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&T5()});document.addEventListener("online",()=>{T5()});const uR={subscriptions:new Map,subscribedEventIds:new Set,subscribedAuthors:new Set,relayPool:yo,log:dr.throttle((...e)=>{console.log(...e)},1e3),subscribe:function(e,t,n=!1,r=!0){let i;if(t&&(i=vb++,this.subscriptions.set(++vb,{filter:e,callback:t})),this.log("subscriptions",this.subscriptions.size,"subscribedEventIds",this.subscribedEventIds.size,"subscribedAuthors",this.subscribedAuthors.size),e.authors&&e.authors.forEach(a=>{this.subscribedAuthors.add(a)}),t&&De.find(e,t),e.ids){if(e.ids=e.ids.filter(a=>!De.seen.has(a)),!e.ids.length)return()=>{};e.ids.forEach(a=>{this.subscribedEventIds.add(a)})}Ih.indexedDbLoad!==!1&&Ns.subscribe(e);const s=this.subscribeRelayPool(e,n,r);return()=>{s==null||s(),i&&this.subscriptions.delete(i)}},publish(e){const t=Array.from($n.enabledRelays());yo.publish(e,t)},handle(e){var t;for(const n of this.subscriptions.values())n.filter&&yu(n.filter,e)&&((t=n.callback)==null||t.call(n,e))},subscribeRelayPool(e,t,n){var s,a;let r;e.keywords?r=Array.from($n.searchRelays.keys()):(n||((s=e.authors)==null?void 0:s.length)!==1)&&(r=$n.enabledRelays()),Ih.indexed03!==!1&&((a=e.kinds)!=null&&a.every(c=>c===0||c===3))&&(r=["wss://us.rbr.bio","wss://eu.rbr.bio"]),t&&(e.since=C5);const i=$n.enabledRelays();return yo.subscribe([e],r,(c,f,b)=>{setTimeout(()=>{De.handle(c),b&&De.handleEventMetadata({url:b,event:c})},0)},n?100:0,void 0,{defaultRelays:i})}},Ft=uR,rt={followDistanceByUser:new Map,usersByFollowDistance:new Map,profiles:new Map,followedByUser:new Map,followersByUser:new Map,blockedUsers:new Set,flaggedUsers:new Set,setFollowed:function(e,t=!0){typeof e=="string"&&(e=[e]);const n=ye.getPubKey();e.forEach(s=>{s=ye.toNostrHexAddress(s)||"",t&&s&&s!==n?this.addFollower(s,n):this.removeFollower(s,n)});const r=De.db.findOne({kind:3,pubkey:n}),i={kind:3,content:(r==null?void 0:r.content)||"",tags:Array.from(this.followedByUser.get(n)||[]).map(s=>["p",s])};De.publish(i)},setBlocked:function(e,t=!0){e=ye.toNostrHexAddress(e)||"";const n=ye.getPubKey();t?(this.blockedUsers.add(e),this.removeFollower(e,n),De.directMessagesByUser.delete(e)):this.blockedUsers.delete(e)},addUserByFollowDistance(e,t){var n,r;if(this.usersByFollowDistance.has(e)||this.usersByFollowDistance.set(e,new Set),e<=2){let i;i=Ft.subscribe({authors:[t],kinds:[0]},()=>i==null?void 0:i(),!0)}(n=this.usersByFollowDistance.get(e))==null||n.add(t);for(const i of this.usersByFollowDistance.keys())i>e&&((r=this.usersByFollowDistance.get(i))==null||r.delete(t))},addFollower:function(e,t){var i,s,a,c;e.startsWith("npub")&&(console.error("addFollower: followedUser is not a hex address",e),e=ye.toNostrHexAddress(e)||""),t.startsWith("npub")&&(console.error("addFollower: follower is not a hex address",t),t=ye.toNostrHexAddress(t)||""),this.followersByUser.has(e)||this.followersByUser.set(e,new Set),(i=this.followersByUser.get(e))==null||i.add(t),this.followedByUser.has(t)||this.followedByUser.set(t,new Set);const n=ye.getPubKey();let r;if(t===n)e===n?r=0:(r=1,this.addUserByFollowDistance(r,e)),this.followDistanceByUser.set(e,r);else{const f=this.followDistanceByUser.get(e),b=this.followDistanceByUser.get(t);r=b&&b+1,(!f||r<f)&&(this.followDistanceByUser.set(e,r),this.addUserByFollowDistance(r,e))}(s=this.followedByUser.get(t))==null||s.add(e),e===n&&((a=this.followersByUser.get(e))==null?void 0:a.size)===1&&Pe.get("hasNostrFollowers").put(!0),(c=this.followedByUser.get(n))!=null&&c.has(t)&&(Ft.subscribedAuthors.has(e)||setTimeout(()=>{Ft.subscribe({authors:[e]},void 0,!0)},0))},removeFollower:function(e,t){var i,s,a;(i=this.followersByUser.get(e))==null||i.delete(t),(s=this.followedByUser.get(t))==null||s.delete(e);let n=1e3;for(const c of this.followersByUser.get(e)||[]){const f=(this.followDistanceByUser.get(c)||1/0)+1;f&&f<n&&(n=f)}n===1e3?this.followDistanceByUser.delete(e):this.followDistanceByUser.set(e,n),(this.blockedUsers.has(e)||((a=this.followersByUser.get(e))==null?void 0:a.size)===0)&&(this.followDistanceByUser.delete(e),this.followersByUser.delete(e),Ft.subscribedAuthors.delete(e)),$h.saveEvents()},followerCount:function(e){var t;return((t=this.followersByUser.get(e))==null?void 0:t.size)??0},followedByFriendsCount:function(e){var r;let t=0;const n=ye.getPubKey();for(const i of this.followersByUser.get(e)??[])(r=this.followedByUser.get(n))!=null&&r.has(i)&&t++;return t},block:async function(e,t){t?this.blockedUsers.add(e):this.blockedUsers.delete(e);let n=JSON.stringify(Array.from(this.blockedUsers));n=await ye.encrypt(n),De.publish({kind:16462,content:n})},flag:function(e,t){t?this.flaggedUsers.add(e):this.flaggedUsers.delete(e),De.publish({kind:16463,content:JSON.stringify(Array.from(this.flaggedUsers))})},getBlockedUsers(e){const t=()=>{e==null||e(this.blockedUsers)};t();const n=ye.getPubKey();return Ft.subscribe({kinds:[16462],authors:[n]},t)},getFlaggedUsers(e){const t=()=>{e==null||e(this.flaggedUsers)};t();const n=ye.getPubKey();return Ft.subscribe({kinds:[16463],authors:[n]},t)},getFollowedByUser:function(e,t){const n=()=>{t==null||t(this.followedByUser.get(e)??new Set)};return this.followedByUser.has(e)&&n(),Ft.subscribe({kinds:[3],authors:[e]},n)},getFollowersByUser:function(e,t){const n=()=>{t==null||t(this.followersByUser.get(e)??new Set)};return this.followersByUser.has(e)&&n(),Ft.subscribe({kinds:[3],"#p":[e]},n)},getProfile(e,t,n=!1){const r=()=>{t==null||t(this.profiles.get(e),e)},i=this.profiles.get(e);return i?(r(),n&&i.nip05&&!i.nip05valid&&ye.verifyNip05Address(i.nip05,e).then(s=>{console.log("NIP05 address is valid?",s,i.nip05,e),i.nip05valid=s,this.profiles.set(e,i),r()})):fetch(`https://api.iris.to/profile/${e}`).then(s=>{s.status===200&&s.json().then(a=>{De.handle(a),r()})}),Ft.subscribe({kinds:[0],authors:[e]},r,!1)},setMetadata(e){const t={kind:0,content:JSON.stringify(e)};De.publish(t)}};let Xo;const fR=()=>Xo||(Xo=De.db.addDynamicView("latest_by_follows",{persist:!0}),Xo.applyFind({kind:1}),Xo.applySimpleSort("created_at",{desc:!0}),Xo.applyWhere(e=>(rt.followDistanceByUser.get(e.pubkey)||1/0)<=1),Xo);let nl;const hR=()=>nl||(nl=De.db.addDynamicView("latest_by_everyone",{persist:!0}),nl.applyFind({kind:1}),nl.applySimpleSort("created_at",{desc:!0}),nl),$h={loaded:!1,saveEvents:dr.throttle(()=>{const e=fR().data().slice(0,50),t=hR().data().slice(0,50),n=De.notifications.eventIds.map(s=>De.db.by("id",s)).slice(0,50);let r=[];for(const s of De.directMessagesByUser.values())s.eventIds.forEach(a=>{r.push(De.db.by("id",a))});r=r.slice(0,100);const i=Array.from(De.keyValueEvents.values()).slice(0,50);In.setItem("latestMsgs",e),In.setItem("latestMsgsByEveryone",t),In.setItem("notificationEvents",n),In.setItem("dms",r),In.setItem("keyValueEvents",i),console.log("saved latestMsgs",e.length),console.log("saved latestMsgsByEveryone",t.length)},5e3),saveProfilesAndFollows:dr.debounce(()=>{const e=ye.getPubKey(),t=[De.db.find({kind:0,pubkey:e}),...De.db.find({kind:0})],n=De.db.find({kind:3}).filter(s=>{var a;return s.pubkey===e||((a=rt.followedByUser.get(e))==null?void 0:a.has(s.pubkey))}),r=[De.db.findOne({kind:3,pubkey:e})];let i=0;for(const s of n.map(a=>[JSON.stringify(a).length,a]).sort((a,c)=>a[0]-c[0]))i+s[0]<5e5&&(i+=s[0],r.push(s[1]));In.setItem("profileEvents",t.slice(0,50)),In.setItem("followEvents",r.slice(0,50))},5e3),loadEvents:async function(){const e=await In.getItem("latestMsgs"),t=await In.getItem("latestMsgsByEveryone"),n=await In.getItem("followEvents"),r=await In.getItem("profileEvents"),i=await In.getItem("notificationEvents"),s=await In.getItem("dms"),a=await In.getItem("keyValueEvents");this.loaded=!0,Array.isArray(n)&&n.forEach(c=>De.handle(c)),Array.isArray(r)&&r.forEach(c=>De.handle(c)),Array.isArray(e)&&e.forEach(c=>{De.handle(c)}),Array.isArray(t)&&t.forEach(c=>{De.handle(c)}),Array.isArray(i)&&i.forEach(c=>{De.handle(c)}),Array.isArray(s)&&s.forEach(c=>{De.handle(c)}),Array.isArray(a)&&a.forEach(c=>{De.handle(c)})}},dR={async checkExistingAccount(e){if(!["iris.to","beta.iris.to","localhost"].includes(window.location.hostname))return;const t=await fetch(`https://api.iris.to/user/find?public_key=${e}`);if(t.status===200){const r=await t.json();console.log("existingIrisToAddress",r),Pe.get("existingIrisToAddress").put(r);const i=setTimeout(()=>{r!=null&&r.confirmed||Pe.get("showNoIrisToAddress").put(!0)},1e3);return Pe.get("showNoIrisToAddress").on(s=>{s&&clearTimeout(i)}),{existing:r}}const n=setTimeout(()=>{Pe.get("showNoIrisToAddress").put(!0)},2e3);Pe.get("showNoIrisToAddress").on(r=>{r||clearTimeout(n)})},setAsPrimary(e){const t=e+"@iris.to",n=setTimeout(()=>{rt.setMetadata({nip05:t})},2e3);rt.getProfile(ye.getPubKey(),r=>{r&&(clearTimeout(n),r.nip05!==t&&(r.nip05=t,rt.setMetadata(r)))})},async enableReserved(e){const t=ye.getPubKey(),n={content:`iris.to/${e}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=De.getEventHash(n),n.sig=await ye.sign(n);const r=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(Pe.get("showNoIrisToAddress").put(!1),Pe.get("existingIrisToAddress").put({confirmed:!0,name:e}),r.status===200)return{error:null,existing:{confirmed:!0,name:e}};r.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))},async declineReserved(e){if(!confirm(`Are you sure you want to decline iris.to/${e}?`))return;const t=ye.getPubKey(),n={content:`decline iris.to/${e}`,kind:1,tags:[],pubkey:t,created_at:Math.floor(Date.now()/1e3)};n.id=De.getEventHash(n),n.sig=await ye.sign(n);const r=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.status===200)return Pe.get("showNoIrisToAddress").put(!1),Pe.get("existingIrisToAddress").put(null),{confirmSuccess:!1,error:null,existing:null};r.json().then(i=>({error:i.message||"error"})).catch(()=>({error:"error"}))}},wb=3e4;function I5(e){var t,n;return(n=(t=e.tags)==null?void 0:t.find(([r])=>r==="d"))==null?void 0:n[1]}function pR(e){var t;return(t=e["#d"])==null?void 0:t[0]}class gR{constructor(){xe(this,"eventsByPathAndAuthor",new Map)}set(t){const n=I5(t);if(!n)return!1;this.eventsByPathAndAuthor.has(n)||this.eventsByPathAndAuthor.set(n,new Map);let r=this.eventsByPathAndAuthor.get(n);r||(r=new Map,this.eventsByPathAndAuthor.set(n,r));const i=r==null?void 0:r.get(t.pubkey);return i&&i.created_at>t.created_at?!1:(r.set(t.pubkey,t),!0)}get(t,n){const r=pR(t);if(!r)throw new Error(`filter has no #d tag: ${JSON.stringify(t)}`);const i=this.eventsByPathAndAuthor.get(r);if(i)for(const[s,a]of i)(!t.authors||t.authors.indexOf(s)!==-1)&&n(a)}}class _b{constructor(t,n,r,i,s,a){xe(this,"store");xe(this,"listeners");xe(this,"publish");xe(this,"subscribe");xe(this,"unsubscribe");xe(this,"filter");xe(this,"encrypt");xe(this,"decrypt");this.publish=t,this.subscribe=n,this.unsubscribe=r,this.filter=i,this.encrypt=s,this.decrypt=a,this.store=new gR,this.listeners=new Map}async publishSetEvent(t,n){let r;if(this.encrypt){const i=JSON.stringify(n);if(r=await this.encrypt(i),i===r)throw new Error(`Encryption failed: ${i} === ${r}`)}else r=JSON.stringify(n);return this.publish({kind:wb,tags:[["d",t]],content:r,created_at:Math.floor(Date.now()/1e3)})}async set(t,n){try{const r=await this.publishSetEvent(t,n);if(r)return this.store.set(r)&&this.notifyListeners(r),!0}catch(r){console.error(r)}return!1}async getEventValue(t){let n=this.decrypt?await this.decrypt(t.content):t.content;try{n=JSON.parse(n)}catch{throw new Error(`Failed to parse event content: ${n}`)}return n}get(t,n,r={}){r=Object.assign({},r,this.filter,{"#d":[t],kinds:[wb]});const i=this.addListener(r,n);return this.store.get(r,s=>this.callbackFromEvent(s,n)),this.subscribe([r],async s=>{this.store.set(s)&&this.notifyListeners(s)}),i}addListener(t,n){const r=Math.random().toString(36).substr(2,9),i={filter:t,callback:n,off:()=>{this.listeners.delete(r),i.subscription&&this.unsubscribe(i.subscription)}};return this.listeners.set(r,i),i}removeListener(t){const n=this.listeners.get(t);n&&n.off()}callbackFromEvent(t,n){const r=I5(t);if(!r)throw new Error(`event has no d tag: ${JSON.stringify(t)}`);this.getEventValue(t).then(i=>{n(i,r,t)})}async notifyListeners(t){for(const n of this.listeners.values())yu(n.filter,t)&&this.callbackFromEvent(t,n.callback)}}try{localStorage.setItem("gunPeers",JSON.stringify({}))}catch{}const Ui={public:void 0,private:void 0,async logOut(){var e;if(Lt("/"),navigator.serviceWorker){const t=await navigator.serviceWorker.getRegistration();t&&t.pushManager&&((e=t.active)==null||e.postMessage({key:null}),await t.pushManager.getSubscription())}Ns.clear(),localStorage.clear(),In.clear().then(()=>{location.reload()})},unsubscribe(...e){},onLoggedIn(){const e=ye.getPubKey();rt.followDistanceByUser.set(e,0),rt.followersByUser.set(e,new Set),rt.usersByFollowDistance.set(0,new Set([e]));const t=(i,s)=>{var f;const c=(f=i[0]["#d"])==null?void 0:f[0];if(c){const b=De.keyValueEvents.get(c);b&&s(b)}return Ft.subscribe(i[0],s,!0),"0"};Pe.get("globalFilter").once(i=>{i||Pe.get("globalFilter").put(De.DEFAULT_GLOBAL_FILTER)}),this.private=new _b((...i)=>De.publish(...i),t,(...i)=>this.unsubscribe(...i),{authors:[e]},(...i)=>ye.encrypt(...i),(...i)=>ye.decrypt(...i)),this.public=new _b((...i)=>De.publish(...i),t,(...i)=>this.unsubscribe(...i),{authors:[e]}),this.public.get("notifications/lastOpened",i=>{i!==De.notificationsSeenTime&&(De.notificationsSeenTime=i,De.updateUnseenNotificationCount())}),this.public.get("settings/colorScheme",i=>{if(i==="light"){document.documentElement.setAttribute("data-theme","light");return}else if(i==="default"&&window.matchMedia("(prefers-color-scheme: light)").matches){document.documentElement.setAttribute("data-theme","light");return}document.documentElement.setAttribute("data-theme","dark")}),$n.init(),$h.loadEvents();const n=setTimeout(()=>{dR.checkExistingAccount(e)},1e3);rt.getProfile(e,async i=>{i&&i.nip05&&i.nip05.endsWith("@iris.to")&&(Pe.get("showNoIrisToAddress").put(!1),Pe.get("existingIrisToAddress").get("name").put(i.nip05.replace("@iris.to","")),clearTimeout(n))});const r=rt.getFollowersByUser(e,i=>{i!=null&&i.size?(Pe.get("noFollowers").put(!1),r()):Pe.get("noFollowers").put(!0)});window.location.pathname==="/"&&Pe.get("lastOpenedFeed").once(i=>{Lt("/"+(i||"following")),setTimeout(()=>{Lt("/"+(i||"following"))},100),setTimeout(()=>{Lt("/"+(i||"following"))},500)}),setTimeout(()=>{Ft.subscribe({authors:[e]},void 0,!0),Ft.subscribe({"#p":[e],kinds:[1,3,6,7,9735]},void 0,!0),De.getDirectMessages()},200),setInterval(()=>{console.log("handled msgs per second",Math.round(De.handledMsgsPerSecond/5)),De.handledMsgsPerSecond=0},5e3)},init:function(e){ye.getOrCreate(e),Pe.get("loggedIn").on(()=>this.onLoggedIn())}},l0=class{constructor(t,n=!0){xe(this,"events");xe(this,"eventIdSet");xe(this,"maxSize");xe(this,"descending");xe(this,"subscriptions");this.events=[],this.eventIdSet=new Set,this.maxSize=t,this.descending=n,this.subscriptions=new Map}get size(){return this.events.length}first(){var t;return(t=this.events[0])==null?void 0:t.id}has(t){return this.eventIdSet.has(t)}add(t){if(!t||!t.id||!t.created_at)throw new Error("Invalid event");if(this.eventIdSet.has(t.id))return!1;if(this.events.length<this.maxSize)this.events.push({id:t.id,created_at:t.created_at});else if(t.created_at>this.events[this.events.length-1].created_at)this.eventIdSet.delete(this.events[this.events.length-1].id),this.events[this.events.length-1]={id:t.id,created_at:t.created_at},this.eventIdSet.add(t.id);else return!1;return this.eventIdSet.add(t.id),this.events.sort((n,r)=>this.descending?r.created_at-n.created_at:n.created_at-r.created_at),this.subscriptions.forEach(n=>n(this.eventIds)),!0}delete(t){if(!this.eventIdSet.delete(t))return!1;const r=this.events.findIndex(i=>i.id===t);return r===-1?!1:(this.events.splice(r,1),this.subscriptions.forEach(i=>i(this.eventIds)),!0)}get eventIds(){return this.events.map(t=>t.id)}values(){return this.events.map(t=>t.id)}subscribe(t){const n=l0.subscriptionId++;return this.subscriptions.set(n,t),t(this.eventIds),()=>this.subscriptions.delete(n)}};let ca=l0;xe(ca,"subscriptionId",0);const yR=Date.now()/1e3,mR=500,vR=1e3,bR=new lO("iris"),wR=bR.addCollection("events",{indices:["created_at","pubkey","kind"],unique:["id"]});let $c;Pe.get("mutedNotes").on(e=>{$c=e});const xy={maxFollowDistance:4,minFollowersAtMaxDistance:5};let Pc=xy;Pe.get("globalFilter").on(e=>{Pc=e});let ky={};Pe.get("dev").on(e=>{ky=e});const Lr={DEFAULT_GLOBAL_FILTER:xy,getEventHash:Zc,db:wR,eventsMetaDb:new ZO,seen:new Set,deletedEvents:new Set,directMessagesByUser:new Map,latestNotificationByTargetAndKind:new Map,notifications:new ca(mR),zapsByNote:new Map,keyValueEvents:new Map,threadRepliesByMessageId:new Map,directRepliesByMessageId:new Map,likesByMessageId:new Map,repostsByMessageId:new Map,handledMsgsPerSecond:0,decryptedMessages:new Map,futureEventIds:new ca(100,!1),futureEventTimeout:null,notificationsSeenTime:0,myBlockEvent:null,myFlagEvent:null,handleNote(e){var s,a,c;this.db.by("id",e.id)||this.insert(e);const n=this.isRepost(e),r=!n&&this.getNoteReplyingTo(e),i=ye.getPubKey();if(r&&!n){this.directRepliesByMessageId.has(r)||this.directRepliesByMessageId.set(r,new Set),(s=this.directRepliesByMessageId.get(r))==null||s.add(e.id);const f=e.tags.filter(b=>b[0]==="e").map(b=>b[1]).slice(0,2);for(const b of f)e.created_at>yR||e.pubkey===i||(a=rt.followedByUser.get(i))!=null&&a.has(e.pubkey),this.threadRepliesByMessageId.has(b)||this.threadRepliesByMessageId.set(b,new Set),(c=this.threadRepliesByMessageId.get(b))==null||c.add(e.id)}},getRepostedEventId(e){var n,r,i;let t=(r=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"&&s[3]==="mention"))==null?void 0:r[1];return t||(t=(i=e.tags.slice().reverse().find(s=>s[0]==="e"))==null?void 0:i[1],t)},getOriginalPostEventId(e){return Lr.isRepost(e)?Lr.getRepostedEventId(e):e.id},getNoteReplyingTo:function(e){if(e.kind===1)return this.getEventReplyingTo(e)},getEventReplyingTo:function(e){var r,i;const t=(r=e.tags)==null?void 0:r.filter(s=>s[0]==="e"&&s[3]!=="mention");if(t.length===1)return t[0][1];const n=(i=e.tags)==null?void 0:i.find(s=>s[0]==="e"&&s[3]==="reply");if(n)return n[1];if(t.length>1)return t[1][1]},handleRepost(e){var n,r;const t=this.getRepostedEventId(e);t&&(this.repostsByMessageId.has(t)||this.repostsByMessageId.set(t,new Set),(n=this.repostsByMessageId.get(t))!=null&&n.has(e.pubkey)||((r=this.repostsByMessageId.get(t))==null||r.add(e.pubkey),this.handleNote(e)))},handleReaction(e){var n,r,i;const t=(r=(n=e.tags)==null?void 0:n.reverse().find(s=>s[0]==="e"))==null?void 0:r[1];t&&(this.likesByMessageId.has(t)||this.likesByMessageId.set(t,new Set),(i=this.likesByMessageId.get(t))==null||i.add(e.pubkey),this.insert(e))},handleFollow(e){var r,i,s,a,c;const t=Lr.db.findOne({kind:3,pubkey:e.pubkey});if(t&&t.created_at>=e.created_at)return;t&&this.db.findAndRemove({kind:3,pubkey:e.pubkey}),this.insert(e);const n=ye.getPubKey();if((e.pubkey===n||(r=rt.followedByUser.get(n))!=null&&r.has(e.pubkey))&&$h.loaded&&$h.saveProfilesAndFollows(),e.tags){for(const f of e.tags)if(Array.isArray(f)&&f[0]==="p"){const b=f[1];b.length===64&&/^[0-9a-f]+$/.test(b)&&rt.addFollower(f[1],e.pubkey)}}if(rt.followedByUser.has(e.pubkey))for(const f of rt.followedByUser.get(e.pubkey)||[])(!e.tags||!((i=e.tags)!=null&&i.find(b=>b[0]==="p"&&b[1]===f)))&&rt.removeFollower(f,e.pubkey);if(e.pubkey===n&&((s=e.tags)!=null&&s.length)&&(((a=rt.followedByUser.get(n))==null?void 0:a.size)||0)>10&&Pe.get("showFollowSuggestions").put(!1),e.pubkey===n&&((c=e.content)!=null&&c.length))try{const f=JSON.parse(e.content),b=Object.keys(f);if(b.length){console.log("setting relays from your contacs list",b);for(const m of $n.relays.keys())b.includes(m)||$n.remove(m);for(const m of b)$n.add(m)}}catch{console.log("failed to parse your relays list",e)}},async handleBlockList(e){var n;if((((n=this.myBlockEvent)==null?void 0:n.created_at)||-1/0)>e.created_at)return;this.myBlockEvent=e;const t=ye.getPubKey();if(e.pubkey===t){let r;try{r=await ye.decrypt(e.content);const i=JSON.parse(r);rt.blockedUsers=new Set(i)}catch{console.log("failed to parse your block list",r,e)}}},handleFlagList(e){var n;if((((n=this.myFlagEvent)==null?void 0:n.created_at)||0)>e.created_at)return;const t=ye.getPubKey();if(e.pubkey===t)try{const r=JSON.parse(e.content);rt.flaggedUsers=new Set(r)}catch{console.log("failed to parse your flagged users list",e)}},insert(e){try{delete e.$loki,this.db.insert(e)}catch{}},handleMetadata(e){var t;if((t=e.content)!=null&&t.length)try{const n=rt.profiles.get(e.pubkey);if((n==null?void 0:n.created_at)>=e.created_at)return!1;n&&this.db.findAndRemove({pubkey:e.pubkey,kind:0}),this.insert(e);const r=JSON.parse(e.content);if(e.pubkey===ye.getPubKey()&&r.deleted){Ui.logOut();return}r.created_at=e.created_at,delete r.nip05valid,rt.profiles.set(e.pubkey,r);const i=ye.toNostrBech32Address(e.pubkey,"npub");$x.add({key:i,name:r.name,display_name:r.display_name,followers:rt.followersByUser.get(e.pubkey)??new Set})}catch(n){console.log("error parsing nostr profile",n,e)}},handleDelete(e){var r,i;const t=(i=(r=e.tags)==null?void 0:r.find(s=>s[0]==="e"))==null?void 0:i[1],n=ye.getPubKey();if(t){const s=this.db.by("id",t);s&&[e.pubkey,n].includes(s.pubkey)&&this.db.findAndRemove({id:t})}},handleZap(e){var n,r,i;this.insert(e);const t=(r=(n=e.tags)==null?void 0:n.find(s=>s[0]==="e"))==null?void 0:r[1];t&&(this.zapsByNote.has(t)||this.zapsByNote.set(t,new ca(vR)),(i=this.zapsByNote.get(t))==null||i.add(e))},handleDirectMessage(e){var r,i,s,a;const t=ye.getPubKey();let n=e.pubkey;if(e.pubkey===t)n=((i=(r=e.tags)==null?void 0:r.find(c=>c[0]==="p"))==null?void 0:i[1])||n;else if(!((s=e.tags)==null?void 0:s.some(f=>f[0]==="p"&&f[1]===t)))return;this.insert(e),this.directMessagesByUser.has(n)||this.directMessagesByUser.set(n,new ca(500)),(a=this.directMessagesByUser.get(n))==null||a.add(e)},handleKeyValue(e){var n,r;if(e.pubkey!==ye.getPubKey())return;const t=(r=(n=e.tags)==null?void 0:n.find(i=>i[0]==="d"))==null?void 0:r[1];if(t){const i=this.keyValueEvents.get(t);if(((i==null?void 0:i.created_at)||-1/0)>=e.created_at)return;this.keyValueEvents.set(t,e)}},isRepost(e){var n;if(e.kind===6)return!0;const t=(n=e.tags)==null?void 0:n.findIndex(r=>r[0]==="e"&&r[3]==="mention");return e.kind===1&&e.content===`#[${t}]`},acceptEvent(e){var t,n,r;if(Pc.maxFollowDistance&&ye.getPubKey()&&!Ft.subscribedAuthors.has(e.pubkey)&&!Ft.subscribedEventIds.has(e.id))if(rt.followDistanceByUser.has(e.pubkey)){const i=rt.followDistanceByUser.get(e.pubkey);if(i&&i>Pc.maxFollowDistance||i===Pc.maxFollowDistance&&(((t=rt.followersByUser.get(e.pubkey))==null?void 0:t.size)||0)<(Pc.minFollowersAtMaxDistance||xy.minFollowersAtMaxDistance))return!1}else{const i=((n=Lr.likesByMessageId.get(e.id))==null?void 0:n.size)||0,s=((r=Lr.repostsByMessageId.get(e.id))==null?void 0:r.size)||0;if(!(e.kind===1&&(i>0||s>0)))return!1}return!0},find(e,t){const n={};e.authors&&(n.pubkey={$in:e.authors}),e.kinds&&(n.kind={$in:e.kinds}),this.db.chain().find(n).where(r=>yu(e,r)).simplesort("created_at",{desc:!0}).limit(e.limit||1/0).data().forEach(r=>{t(r)})},handle(e,t=!1,n=!0){var r;if(!e||!t&&this.seen.has(e.id)||!t&&!this.acceptEvent(e)||rt.blockedUsers.has(e.pubkey)&&e.kind!==0||this.deletedEvents.has(e.id))return!1;if(e.created_at>Date.now()/1e3)return this.futureEventIds.add(e),this.futureEventIds.has(e.id)&&this.insert(e),this.futureEventIds.first()===e.id&&this.handleNextFutureEvent(),!1;switch(this.seen.add(e.id),this.handledMsgsPerSecond++,Ft.subscribedEventIds.delete(e.id),e.kind){case 0:if(this.handleMetadata(e)===!1)return!1;break;case 1:this.maybeAddNotification(e),this.isRepost(e)?this.handleRepost(e):this.handleNote(e);break;case 4:this.handleDirectMessage(e);break;case 5:this.handleDelete(e);break;case 3:if(((r=Lr.db.findOne({kind:3,pubkey:e.pubkey}))==null?void 0:r.created_at)>=e.created_at)return!1;this.maybeAddNotification(e),this.handleFollow(e);break;case 6:this.maybeAddNotification(e),this.handleRepost(e);break;case 7:this.maybeAddNotification(e),this.handleReaction(e);break;case 9735:this.maybeAddNotification(e),this.handleZap(e);break;case 16462:this.handleBlockList(e);break;case 16463:this.handleFlagList(e);break;case 3e4:this.handleKeyValue(e);break}if(n){const i=rt.followDistanceByUser.get(e.pubkey)||1/0;i<=1?ky.indexedDbSave!==!1&&Ns.saveEvent(e):i<=4&&[0,3,4].includes(e.kind)&&ky.indexedDbSave!==!1&&Ns.saveEvent(e)}return Ft.handle(e),!0},handleEventMetadata({url:e,event:t}){const n=this.getOriginalPostEventId(t);n&&this.eventsMetaDb.upsert(n,{relays:new Set([e])})},handleNextFutureEvent(){if(this.futureEventIds.size===0)return;clearTimeout(this.futureEventTimeout);const e=this.futureEventIds.first(),t=this.db.by("id",e);t&&(this.futureEventTimeout=setTimeout(()=>{this.futureEventIds.delete(t.id),this.handle(t,!0),this.handleNextFutureEvent()},(t.created_at-Date.now()/1e3)*1e3))},isMuted(e){let t=!1;if($c&&(t=$c[e.id],!t)){for(const n of e.tags)if(n[0]==="e"&&$c[n[1]]&&(t=$c[n[1]],t))return!0}return t},getEventRoot(e){var n,r,i,s;const t=(r=(n=e==null?void 0:e.tags)==null?void 0:n.find(a=>a[0]==="e"&&a[3]==="root"))==null?void 0:r[1];return t||((s=(i=e==null?void 0:e.tags)==null?void 0:i.find(a=>a[0]==="e"))==null?void 0:s[1])},maybeAddNotification(e){var n,r;if(((n=e.tags)==null?void 0:n.filter(i=>i[0]==="p").length)>10)return;const t=ye.getPubKey();if(e.pubkey!==t&&((r=e.tags)!=null&&r.some(i=>i[0]==="p"&&i[1]===t))){if(e.kind===3){const i=rt.followedByUser.get(e.pubkey);if(!i||i.has(t))return}if(!this.isMuted(e)){this.insert(e);const i=this.getEventRoot(e)||this.getEventReplyingTo(e)||e.id,s=`${e.kind}-${i}`,a=this.latestNotificationByTargetAndKind.get(s),c=a&&this.db.by("id",a);(!a||c.created_at<e.created_at)&&(a&&this.notifications.delete(a),this.notifications.add(e),this.latestNotificationByTargetAndKind.set(s,e.id)),this.updateUnseenNotificationCount()}}},updateUnseenNotificationCount:dr.debounce(()=>{if(!Lr.notificationsSeenTime)return;let e=0;for(const t of Lr.notifications.eventIds){const n=Lr.db.by("id",t);if((n==null?void 0:n.created_at)>Lr.notificationsSeenTime)e++;else break}console.log("notificationsSeenTime",Lr.notificationsSeenTime,"count",e),Pe.get("unseenNotificationCount").put(e)},1e3),publish:async function(e){var n;if(delete e.$loki,delete e.meta,e.sig||await this.sign(e),!(e.id&&e.sig))throw console.error("Invalid event",e),new Error("Invalid event");Ft.publish(e),console.log("publishing event",e),this.handle(e);const t=(n=e.tags)==null?void 0:n.filter(r=>r[0]==="e").reverse().slice(0,10);for(const r of t||[]){const i=this.db.by("id",r[1]);i&&(delete i.meta,delete i.$loki,Ft.publish(i))}return e},async sign(e){return e.tags||(e.tags=[]),e.content=e.content||"",e.created_at=e.created_at||Math.floor(Date.now()/1e3),e.pubkey=ye.getPubKey(),e.id=Zc(e),e.sig=await ye.sign(e),e},getZappingUser(e){var i,s,a;const t=(a=(s=(i=Lr.db.by("id",e))==null?void 0:i.tags)==null?void 0:s.find(c=>c[0]==="description"))==null?void 0:a[1];if(!t)return null;let n;try{n=JSON.parse(t)}catch{return null}return ye.toNostrBech32Address(n.pubkey,"npub")},getRepliesAndReactions(e,t){const n=()=>{var r;t==null||t(this.directRepliesByMessageId.get(e)??new Set,this.likesByMessageId.get(e)??new Set,((r=this.threadRepliesByMessageId.get(e))==null?void 0:r.size)??0,this.repostsByMessageId.get(e)??new Set,this.zapsByNote.get(e)??new Set)};return n(),Ft.subscribe({"#e":[e],kinds:[1,6,7,9735]},n,!1)},getEventById(e,t=!1,n){const r=this.db.by("id",e);if(n&&r){n(r);return}if(t){const i=setTimeout(()=>{Ft.subscribe({ids:[e]},s=>n==null?void 0:n(s))},300);fetch(`https://api.iris.to/event/${e}`).then(s=>{s.status===200&&s.json().then(a=>{a&&a.id===e&&(clearTimeout(i),Lr.handle(a,!0),n==null||n(a))})})}else Ft.subscribe({ids:[e]},n,!1)},getDirectMessagesByUser(e,t){const n=()=>{var a;t==null||t(((a=this.directMessagesByUser.get(e))==null?void 0:a.eventIds)??[])};this.directMessagesByUser.has(e)&&n();const r=ye.getPubKey(),i=Ft.subscribe({kinds:[4],"#p":[e],authors:[r]},n),s=Ft.subscribe({kinds:[4],"#p":[r],authors:[e]},n);return()=>{i(),s()}},getDirectMessages(){const e=Ft.subscribe({kinds:[4],"#p":[ye.getPubKey()]}),t=Ft.subscribe({kinds:[4],authors:[ye.getPubKey()]});return()=>{e(),t()}}},De=Lr,_R="modulepreload",xR=function(e){return"/"+e},xb={},jm=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=xR(s),s in xb)return;xb[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let m=i.length-1;m>=0;m--){const w=i[m];if(w.href===s&&(!a||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const b=document.createElement("link");if(b.rel=a?"stylesheet":_R,a||(b.as="script",b.crossOrigin=""),b.href=s,document.head.appendChild(b),a)return new Promise((m,w)=>{b.addEventListener("load",m),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},kR={about:"About",account:"Account",add:"Add",alternatively:"Alternatively",appearance:"Appearance",application_security_warning:"The application is an unaudited proof-of-concept implementation, so don't use it for security critical purposes.",autoplay_videos:"Autoplay videos",back:"Back",backup:"Backup",block:"Block",blocked:"Blocked",blocked_users:"Blocked Users",color_scheme:"Appearance",connected_relays:"Connected Relays",copied:"Copied",copy:"Copy",copy_link:"Copy Link",copy_note_ID:"Copy Note ID",copy_raw_data:"Copy Raw Data",copy_user_ID:"Copy User ID",dark:"Dark",delete:"Delete",dm_privacy_warning:"Nostr private messages are encrypted, but everyone can see who you're chatting with",done:"Done",download:"Download",edit_profile:"Edit Profile",embeds:"Embeds",event_detail:"Event Detail",everyone:"Everyone",follow_all:"Follow All",follow_btn:"Follow",follow_someone_info:"Follow someone to see content from their network! Suggestions:",followers:"Followers",following:"Following",following_btn:"Following",follows:"Follows",follows_you:"Follows you",friday:"Friday",friends_following:"Friends following",get_notified_new_messages:"Get notified of new messages",give_your_profile_link_to_someone:"give your profile link to someone",global_feed:"Global",install_lightning_wallet_prompt:"Please install a lightning wallet such as getalby.com (desktop) or walletofsatoshi.com (mobile)!",language:"Language",light:"Light",likes:"Likes",load:"Load","loaded_and_published_{n}_events":"Loaded and published {n} events",log_out:"Log out",logout_confirmation_info:"You <b>cannot log in again</b> unless you have saved a copy of your private key.",looking_up_message:"Looking up message...",media:"Media",messages:"Messages",monday:"Monday",network:"Network",new_relay_url:"New relay URL",new_user_go:"Go",no_followers_yet:"Share your profile link so others can follow you:",no_followers_yet_info:"Your posts, replies and likes are only shown to your followers and their network.",no_notifications_yet:"No notifications yet",none:"None",nostr_extension_login:"Nostr extension login",note_to_self:"Note to Self",now:"now",otherwise_cant_log_in_again:"Otherwise you can't log in back to this account.",paste_event_json:"Paste event JSON here",paste_private_key:"Paste a private key",peers:"Peers",playback:"Playback",post:"Post",posts:"Posts",private_key:"Private key",private_key_login:"Private key access",private_key_not_present_good:"Not present. Good!",private_key_warning:"<b>DANGER!</b> Private key <b>gives access to your account</b>. Don't give or show your private key to anyone else!",profile:"Profile",public_key:"Public key",remove:"Remove",remove_attachment:"Remove attachment",replies:"Replies",replying_to:"Replying to",report_public:"Report (public)",reported:"Reported",reposted:"reposted",resend_to_relays:"Resend to relays",restore_defaults:"Restore defaults","restored_{n}_follows":"Restored {n} follows",saturday:"Saturday",save:"Save",save_backup_of_privkey_first:"Save a backup of your private key first!",save_relays_publicly:"Save relays publicly",search:"Search",search_posts:"Search posts",send_message:"Message",seen_on:"Seen on:",settings:"Settings",show_attachment:"Show Attachment",show_files:"Show files",show_more:"Show more",show_n_new_messages:"Show {n} new messages",show_qr_code:"Show QR code",show_thread:"Show thread",sunday:"Sunday",switch_account:"Switch account",system_default:"System default",thursday:"Thursday",tip_lightning:"Tip",today:"today",translate:"Translate",tuesday:"Tuesday",turn_on_desktop_notifications:"Turn on desktop notifications",type_a_message:"Type a message",typing:"Typing...",unblock:"Unblock",unfollow_btn:"Unfollow",iris_api_source:"Event found by Iris API.",unreport:"Unreport",video_call:"Video call",view_as:"View as",wednesday:"Wednesday",whats_on_your_mind:"What's on your mind?",whats_your_name:"What's your name?",write_your_reply:"Write your reply",yesterday:"yesterday",you:"You",your_events:"Your events (can be slow to download)"},su={en:"English","zh-cn":"","zh-tw":"",es:"Espaol",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",ja:"",ko:"",ar:"",id:"Indonesia","pt-BR":"Portugus (Brasil)",tr:"Trke",vt:"Ting Vit",bn:"",th:"",hi:"",fa:"",ur:"",pl:"Polski",hu:"Magyar",nl:"Nederlands",he:"",sv:"Svenska",fi:"Suomi","cs-CZ":"etina",bg:"",as:"",sk:"Slovenina",lt:"Lietuvi","el-GR":""};let al=Object.keys(su),is,Yf,$5;is=localStorage.getItem("language")||navigator.language||"en";if(al.indexOf(is)===-1){const e=is.slice(0,2);is="en";for(let t=0;t<al.length;t++)if(al[t].slice(0,2)===e){is=al[t];break}}$5=jm(()=>import(`./${is}.mjs`),[]).then(e=>{Yf=e.default,is!=="en"&&(Yf={...kR,...Yf})}).catch(e=>{console.error("failed to load translation",e)});function SR(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function de(e,t){const r=(e&&(Yf[e]||SR(e.replace(/_/g," ")))).split(/(<b>.*?<\/b>|<a>.*?<\/a>)/),i=[];return r.forEach(s=>{s.startsWith("<b>")?i.push(ft("b",{key:i.length},s.slice(3,-4))):s.startsWith("<a>")?i.push(ft("a",{key:i.length,...t},s.slice(3,-4))):i.push(s)}),i.length===1?i[0]:i}var P5={exports:{}},an={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er=typeof Symbol=="function"&&Symbol.for,zm=er?Symbol.for("react.element"):60103,Hm=er?Symbol.for("react.portal"):60106,pd=er?Symbol.for("react.fragment"):60107,gd=er?Symbol.for("react.strict_mode"):60108,yd=er?Symbol.for("react.profiler"):60114,md=er?Symbol.for("react.provider"):60109,vd=er?Symbol.for("react.context"):60110,qm=er?Symbol.for("react.async_mode"):60111,bd=er?Symbol.for("react.concurrent_mode"):60111,wd=er?Symbol.for("react.forward_ref"):60112,_d=er?Symbol.for("react.suspense"):60113,ER=er?Symbol.for("react.suspense_list"):60120,xd=er?Symbol.for("react.memo"):60115,kd=er?Symbol.for("react.lazy"):60116,AR=er?Symbol.for("react.block"):60121,CR=er?Symbol.for("react.fundamental"):60117,TR=er?Symbol.for("react.responder"):60118,IR=er?Symbol.for("react.scope"):60119;function ii(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zm:switch(e=e.type,e){case qm:case bd:case pd:case yd:case gd:case _d:return e;default:switch(e=e&&e.$$typeof,e){case vd:case wd:case kd:case xd:case md:return e;default:return t}}case Hm:return t}}}function O5(e){return ii(e)===bd}an.AsyncMode=qm;an.ConcurrentMode=bd;an.ContextConsumer=vd;an.ContextProvider=md;an.Element=zm;an.ForwardRef=wd;an.Fragment=pd;an.Lazy=kd;an.Memo=xd;an.Portal=Hm;an.Profiler=yd;an.StrictMode=gd;an.Suspense=_d;an.isAsyncMode=function(e){return O5(e)||ii(e)===qm};an.isConcurrentMode=O5;an.isContextConsumer=function(e){return ii(e)===vd};an.isContextProvider=function(e){return ii(e)===md};an.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zm};an.isForwardRef=function(e){return ii(e)===wd};an.isFragment=function(e){return ii(e)===pd};an.isLazy=function(e){return ii(e)===kd};an.isMemo=function(e){return ii(e)===xd};an.isPortal=function(e){return ii(e)===Hm};an.isProfiler=function(e){return ii(e)===yd};an.isStrictMode=function(e){return ii(e)===gd};an.isSuspense=function(e){return ii(e)===_d};an.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===pd||e===bd||e===yd||e===gd||e===_d||e===ER||typeof e=="object"&&e!==null&&(e.$$typeof===kd||e.$$typeof===xd||e.$$typeof===md||e.$$typeof===vd||e.$$typeof===wd||e.$$typeof===CR||e.$$typeof===TR||e.$$typeof===IR||e.$$typeof===AR)};an.typeOf=ii;P5.exports=an;var Km=P5.exports;function $R(e){function t(Fe,He,$e,Me,fe){for(var pt=0,h=0,v=0,k=0,T,O,z=0,te=0,ie,pe=ie=T=0,_e=0,je=0,tt=0,Je=0,et=$e.length,yt=et-1,St,ot="",Ke="",gt="",gn="",mn;_e<et;){if(O=$e.charCodeAt(_e),_e===yt&&h+k+v+pt!==0&&(h!==0&&(O=h===47?10:47),k=v=pt=0,et++,yt++),h+k+v+pt===0){if(_e===yt&&(0<je&&(ot=ot.replace(_,"")),0<ot.trim().length)){switch(O){case 32:case 9:case 59:case 13:case 10:break;default:ot+=$e.charAt(_e)}O=59}switch(O){case 123:for(ot=ot.trim(),T=ot.charCodeAt(0),ie=1,Je=++_e;_e<et;){switch(O=$e.charCodeAt(_e)){case 123:ie++;break;case 125:ie--;break;case 47:switch(O=$e.charCodeAt(_e+1)){case 42:case 47:e:{for(pe=_e+1;pe<yt;++pe)switch($e.charCodeAt(pe)){case 47:if(O===42&&$e.charCodeAt(pe-1)===42&&_e+2!==pe){_e=pe+1;break e}break;case 10:if(O===47){_e=pe+1;break e}}_e=pe}}break;case 91:O++;case 40:O++;case 34:case 39:for(;_e++<yt&&$e.charCodeAt(_e)!==O;);}if(ie===0)break;_e++}switch(ie=$e.substring(Je,_e),T===0&&(T=(ot=ot.replace(w,"").trim()).charCodeAt(0)),T){case 64:switch(0<je&&(ot=ot.replace(_,"")),O=ot.charCodeAt(1),O){case 100:case 109:case 115:case 45:je=He;break;default:je=Ae}if(ie=t(He,je,ie,O,fe+1),Je=ie.length,0<qe&&(je=n(Ae,ot,tt),mn=c(3,ie,je,He,we,ke,Je,O,fe,Me),ot=je.join(""),mn!==void 0&&(Je=(ie=mn.trim()).length)===0&&(O=0,ie="")),0<Je)switch(O){case 115:ot=ot.replace(U,a);case 100:case 109:case 45:ie=ot+"{"+ie+"}";break;case 107:ot=ot.replace(L,"$1 $2"),ie=ot+"{"+ie+"}",ie=G===1||G===2&&s("@"+ie,3)?"@-webkit-"+ie+"@"+ie:"@"+ie;break;default:ie=ot+ie,Me===112&&(ie=(Ke+=ie,""))}else ie="";break;default:ie=t(He,n(He,ot,tt),ie,Me,fe+1)}gt+=ie,ie=tt=je=pe=T=0,ot="",O=$e.charCodeAt(++_e);break;case 125:case 59:if(ot=(0<je?ot.replace(_,""):ot).trim(),1<(Je=ot.length))switch(pe===0&&(T=ot.charCodeAt(0),T===45||96<T&&123>T)&&(Je=(ot=ot.replace(" ",":")).length),0<qe&&(mn=c(1,ot,He,Fe,we,ke,Ke.length,Me,fe,Me))!==void 0&&(Je=(ot=mn.trim()).length)===0&&(ot="\0\0"),T=ot.charCodeAt(0),O=ot.charCodeAt(1),T){case 0:break;case 64:if(O===105||O===99){gn+=ot+$e.charAt(_e);break}default:ot.charCodeAt(Je-1)!==58&&(Ke+=i(ot,T,O,ot.charCodeAt(2)))}tt=je=pe=T=0,ot="",O=$e.charCodeAt(++_e)}}switch(O){case 13:case 10:h===47?h=0:1+T===0&&Me!==107&&0<ot.length&&(je=1,ot+="\0"),0<qe*Qe&&c(0,ot,He,Fe,we,ke,Ke.length,Me,fe,Me),ke=1,we++;break;case 59:case 125:if(h+k+v+pt===0){ke++;break}default:switch(ke++,St=$e.charAt(_e),O){case 9:case 32:if(k+pt+h===0)switch(z){case 44:case 58:case 9:case 32:St="";break;default:O!==32&&(St=" ")}break;case 0:St="\\0";break;case 12:St="\\f";break;case 11:St="\\v";break;case 38:k+h+pt===0&&(je=tt=1,St="\f"+St);break;case 108:if(k+h+pt+Q===0&&0<pe)switch(_e-pe){case 2:z===112&&$e.charCodeAt(_e-3)===58&&(Q=z);case 8:te===111&&(Q=te)}break;case 58:k+h+pt===0&&(pe=_e);break;case 44:h+v+k+pt===0&&(je=1,St+="\r");break;case 34:case 39:h===0&&(k=k===O?0:k===0?O:k);break;case 91:k+h+v===0&&pt++;break;case 93:k+h+v===0&&pt--;break;case 41:k+h+pt===0&&v--;break;case 40:if(k+h+pt===0){if(T===0)switch(2*z+3*te){case 533:break;default:T=1}v++}break;case 64:h+v+k+pt+pe+ie===0&&(ie=1);break;case 42:case 47:if(!(0<k+pt+v))switch(h){case 0:switch(2*O+3*$e.charCodeAt(_e+1)){case 235:h=47;break;case 220:Je=_e,h=42}break;case 42:O===47&&z===42&&Je+2!==_e&&($e.charCodeAt(Je+2)===33&&(Ke+=$e.substring(Je,_e+1)),St="",h=0)}}h===0&&(ot+=St)}te=z,z=O,_e++}if(Je=Ke.length,0<Je){if(je=He,0<qe&&(mn=c(2,Ke,je,Fe,we,ke,Je,Me,fe,Me),mn!==void 0&&(Ke=mn).length===0))return gn+Ke+gt;if(Ke=je.join(",")+"{"+Ke+"}",G*Q!==0){switch(G!==2||s(Ke,2)||(Q=0),Q){case 111:Ke=Ke.replace(N,":-moz-$1")+Ke;break;case 112:Ke=Ke.replace(P,"::-webkit-input-$1")+Ke.replace(P,"::-moz-$1")+Ke.replace(P,":-ms-input-$1")+Ke}Q=0}}return gn+Ke+gt}function n(Fe,He,$e){var Me=He.trim().split(R);He=Me;var fe=Me.length,pt=Fe.length;switch(pt){case 0:case 1:var h=0;for(Fe=pt===0?"":Fe[0]+" ";h<fe;++h)He[h]=r(Fe,He[h],$e).trim();break;default:var v=h=0;for(He=[];h<fe;++h)for(var k=0;k<pt;++k)He[v++]=r(Fe[k]+" ",Me[h],$e).trim()}return He}function r(Fe,He,$e){var Me=He.charCodeAt(0);switch(33>Me&&(Me=(He=He.trim()).charCodeAt(0)),Me){case 38:return He.replace($,"$1"+Fe.trim());case 58:return Fe.trim()+He.replace($,"$1"+Fe.trim());default:if(0<1*$e&&0<He.indexOf("\f"))return He.replace($,(Fe.charCodeAt(0)===58?"":"$1")+Fe.trim())}return Fe+He}function i(Fe,He,$e,Me){var fe=Fe+";",pt=2*He+3*$e+4*Me;if(pt===944){Fe=fe.indexOf(":",9)+1;var h=fe.substring(Fe,fe.length-1).trim();return h=fe.substring(0,Fe).trim()+h+";",G===1||G===2&&s(h,1)?"-webkit-"+h+h:h}if(G===0||G===2&&!s(fe,1))return fe;switch(pt){case 1015:return fe.charCodeAt(10)===97?"-webkit-"+fe+fe:fe;case 951:return fe.charCodeAt(3)===116?"-webkit-"+fe+fe:fe;case 963:return fe.charCodeAt(5)===110?"-webkit-"+fe+fe:fe;case 1009:if(fe.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+fe+fe;case 978:return"-webkit-"+fe+"-moz-"+fe+fe;case 1019:case 983:return"-webkit-"+fe+"-moz-"+fe+"-ms-"+fe+fe;case 883:if(fe.charCodeAt(8)===45)return"-webkit-"+fe+fe;if(0<fe.indexOf("image-set(",11))return fe.replace(me,"$1-webkit-$2")+fe;break;case 932:if(fe.charCodeAt(4)===45)switch(fe.charCodeAt(5)){case 103:return"-webkit-box-"+fe.replace("-grow","")+"-webkit-"+fe+"-ms-"+fe.replace("grow","positive")+fe;case 115:return"-webkit-"+fe+"-ms-"+fe.replace("shrink","negative")+fe;case 98:return"-webkit-"+fe+"-ms-"+fe.replace("basis","preferred-size")+fe}return"-webkit-"+fe+"-ms-"+fe+fe;case 964:return"-webkit-"+fe+"-ms-flex-"+fe+fe;case 1023:if(fe.charCodeAt(8)!==99)break;return h=fe.substring(fe.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+h+"-webkit-"+fe+"-ms-flex-pack"+h+fe;case 1005:return I.test(fe)?fe.replace(A,":-webkit-")+fe.replace(A,":-moz-")+fe:fe;case 1e3:switch(h=fe.substring(13).trim(),He=h.indexOf("-")+1,h.charCodeAt(0)+h.charCodeAt(He)){case 226:h=fe.replace(M,"tb");break;case 232:h=fe.replace(M,"tb-rl");break;case 220:h=fe.replace(M,"lr");break;default:return fe}return"-webkit-"+fe+"-ms-"+h+fe;case 1017:if(fe.indexOf("sticky",9)===-1)break;case 975:switch(He=(fe=Fe).length-10,h=(fe.charCodeAt(He)===33?fe.substring(0,He):fe).substring(Fe.indexOf(":",7)+1).trim(),pt=h.charCodeAt(0)+(h.charCodeAt(7)|0)){case 203:if(111>h.charCodeAt(8))break;case 115:fe=fe.replace(h,"-webkit-"+h)+";"+fe;break;case 207:case 102:fe=fe.replace(h,"-webkit-"+(102<pt?"inline-":"")+"box")+";"+fe.replace(h,"-webkit-"+h)+";"+fe.replace(h,"-ms-"+h+"box")+";"+fe}return fe+";";case 938:if(fe.charCodeAt(5)===45)switch(fe.charCodeAt(6)){case 105:return h=fe.replace("-items",""),"-webkit-"+fe+"-webkit-box-"+h+"-ms-flex-"+h+fe;case 115:return"-webkit-"+fe+"-ms-flex-item-"+fe.replace(Z,"")+fe;default:return"-webkit-"+fe+"-ms-flex-line-pack"+fe.replace("align-content","").replace(Z,"")+fe}break;case 973:case 989:if(fe.charCodeAt(3)!==45||fe.charCodeAt(4)===122)break;case 931:case 953:if(ce.test(Fe)===!0)return(h=Fe.substring(Fe.indexOf(":")+1)).charCodeAt(0)===115?i(Fe.replace("stretch","fill-available"),He,$e,Me).replace(":fill-available",":stretch"):fe.replace(h,"-webkit-"+h)+fe.replace(h,"-moz-"+h.replace("fill-",""))+fe;break;case 962:if(fe="-webkit-"+fe+(fe.charCodeAt(5)===102?"-ms-"+fe:"")+fe,$e+Me===211&&fe.charCodeAt(13)===105&&0<fe.indexOf("transform",10))return fe.substring(0,fe.indexOf(";",27)+1).replace(C,"$1-webkit-$2")+fe}return fe}function s(Fe,He){var $e=Fe.indexOf(He===1?":":"{"),Me=Fe.substring(0,He!==3?$e:10);return $e=Fe.substring($e+1,Fe.length-1),ze(He!==2?Me:Me.replace(J,"$1"),$e,He)}function a(Fe,He){var $e=i(He,He.charCodeAt(0),He.charCodeAt(1),He.charCodeAt(2));return $e!==He+";"?$e.replace(p," or ($1)").substring(4):"("+He+")"}function c(Fe,He,$e,Me,fe,pt,h,v,k,T){for(var O=0,z=He,te;O<qe;++O)switch(te=Te[O].call(m,Fe,z,$e,Me,fe,pt,h,v,k,T)){case void 0:case!1:case!0:case null:break;default:z=te}if(z!==He)return z}function f(Fe){switch(Fe){case void 0:case null:qe=Te.length=0;break;default:if(typeof Fe=="function")Te[qe++]=Fe;else if(typeof Fe=="object")for(var He=0,$e=Fe.length;He<$e;++He)f(Fe[He]);else Qe=!!Fe|0}return f}function b(Fe){return Fe=Fe.prefix,Fe!==void 0&&(ze=null,Fe?typeof Fe!="function"?G=1:(G=2,ze=Fe):G=0),b}function m(Fe,He){var $e=Fe;if(33>$e.charCodeAt(0)&&($e=$e.trim()),nt=$e,$e=[nt],0<qe){var Me=c(-1,He,$e,$e,we,ke,0,0,0,0);Me!==void 0&&typeof Me=="string"&&(He=Me)}var fe=t(Ae,$e,He,0,0);return 0<qe&&(Me=c(-2,fe,$e,$e,we,ke,fe.length,0,0,0),Me!==void 0&&(fe=Me)),nt="",Q=0,ke=we=1,fe}var w=/^\0+/g,_=/[\0\r\f]/g,A=/: */g,I=/zoo|gra/,C=/([,: ])(transform)/g,R=/,\r+?/g,$=/([\t\r\n ])*\f?&/g,L=/@(k\w+)\s*(\S*)\s*/,P=/::(place)/g,N=/:(read-only)/g,M=/[svh]\w+-[tblr]{2}/,U=/\(\s*(.*)\s*\)/g,p=/([\s\S]*?);/g,Z=/-self|flex-/g,J=/[^]*?(:[rp][el]a[\w-]+)[^]*/,ce=/stretch|:\s*\w+\-(?:conte|avail)/,me=/([^-])(image-set\()/,ke=1,we=1,Q=0,G=1,Ae=[],Te=[],qe=0,ze=null,Qe=0,nt="";return m.use=f,m.set=b,e!==void 0&&b(e),m}var PR={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function OR(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var NR=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kb=OR(function(e){return NR.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Wm=Km,RR={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},MR={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},DR={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},N5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vm={};Vm[Wm.ForwardRef]=DR;Vm[Wm.Memo]=N5;function Sb(e){return Wm.isMemo(e)?N5:Vm[e.$$typeof]||RR}var BR=Object.defineProperty,LR=Object.getOwnPropertyNames,Eb=Object.getOwnPropertySymbols,FR=Object.getOwnPropertyDescriptor,UR=Object.getPrototypeOf,Ab=Object.prototype;function R5(e,t,n){if(typeof t!="string"){if(Ab){var r=UR(t);r&&r!==Ab&&R5(e,r,n)}var i=LR(t);Eb&&(i=i.concat(Eb(t)));for(var s=Sb(e),a=Sb(t),c=0;c<i.length;++c){var f=i[c];if(!MR[f]&&!(n&&n[f])&&!(a&&a[f])&&!(s&&s[f])){var b=FR(t,f);try{BR(e,f,b)}catch{}}}}return e}var jR=R5;const zR=jr(jR);function Rs(){return(Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Cb=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},Sy=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!Km.typeOf(e)},Ph=Object.freeze([]),mo=Object.freeze({});function ou(e){return typeof e=="function"}function Tb(e){return e.displayName||e.name||"Component"}function Gm(e){return e&&typeof e.styledComponentId=="string"}var Sl=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Ym=typeof window<"u"&&"HTMLElement"in window,HR=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY));function ku(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var qR=function(){function e(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var t=e.prototype;return t.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},t.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,a=s;n>=a;)(a<<=1)<0&&ku(16,""+n);this.groupSizes=new Uint32Array(a),this.groupSizes.set(i),this.length=a;for(var c=s;c<a;c++)this.groupSizes[c]=0}for(var f=this.indexOfGroup(n+1),b=0,m=r.length;b<m;b++)this.tag.insertRule(f,r[b])&&(this.groupSizes[n]++,f++)},t.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var a=i;a<s;a++)this.tag.deleteRule(i)}},t.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),a=s+i,c=s;c<a;c++)r+=this.tag.getRule(c)+`/*!sc*/
`;return r},e}(),Zf=new Map,Oh=new Map,Uc=1,If=function(e){if(Zf.has(e))return Zf.get(e);for(;Oh.has(Uc);)Uc++;var t=Uc++;return Zf.set(e,t),Oh.set(t,e),t},KR=function(e){return Oh.get(e)},WR=function(e,t){t>=Uc&&(Uc=t+1),Zf.set(e,t),Oh.set(t,e)},VR="style["+Sl+'][data-styled-version="5.3.11"]',GR=new RegExp("^"+Sl+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),YR=function(e,t,n){for(var r,i=n.split(","),s=0,a=i.length;s<a;s++)(r=i[s])&&e.registerName(t,r)},ZR=function(e,t){for(var n=(t.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var a=n[i].trim();if(a){var c=a.match(GR);if(c){var f=0|parseInt(c[1],10),b=c[2];f!==0&&(WR(b,f),YR(e,b,c[3]),e.getTag().insertRules(f,r)),r.length=0}else r.push(a)}}},JR=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},M5=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(c){for(var f=c.childNodes,b=f.length;b>=0;b--){var m=f[b];if(m&&m.nodeType===1&&m.hasAttribute(Sl))return m}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Sl,"active"),r.setAttribute("data-styled-version","5.3.11");var a=JR();return a&&r.setAttribute("nonce",a),n.insertBefore(r,s),r},XR=function(){function e(n){var r=this.element=M5(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,a=0,c=s.length;a<c;a++){var f=s[a];if(f.ownerNode===i)return f}ku(17)}(r),this.length=0}var t=e.prototype;return t.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},t.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},t.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},e}(),QR=function(){function e(n){var r=this.element=M5(n);this.nodes=r.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},t.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},t.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},e}(),eM=function(){function e(n){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},t.deleteRule=function(n){this.rules.splice(n,1),this.length--},t.getRule=function(n){return n<this.length?this.rules[n]:""},e}(),Ib=Ym,tM={isServer:!Ym,useCSSOMInjection:!HR},D5=function(){function e(n,r,i){n===void 0&&(n=mo),r===void 0&&(r={}),this.options=Rs({},tM,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&Ym&&Ib&&(Ib=!1,function(s){for(var a=document.querySelectorAll(VR),c=0,f=a.length;c<f;c++){var b=a[c];b&&b.getAttribute(Sl)!=="active"&&(ZR(s,b),b.parentNode&&b.parentNode.removeChild(b))}}(this))}e.registerId=function(n){return If(n)};var t=e.prototype;return t.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new e(Rs({},this.options,{},n),this.gs,r&&this.names||void 0)},t.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,a=r.target,n=i?new eM(a):s?new XR(a):new QR(a),new qR(n)));var n,r,i,s,a},t.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},t.registerName=function(n,r){if(If(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},t.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(If(n),i)},t.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},t.clearRules=function(n){this.getTag().clearGroup(If(n)),this.clearNames(n)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",a=0;a<i;a++){var c=KR(a);if(c!==void 0){var f=n.names.get(c),b=r.getGroup(a);if(f&&b&&f.size){var m=Sl+".g"+a+'[id="'+c+'"]',w="";f!==void 0&&f.forEach(function(_){_.length>0&&(w+=_+",")}),s+=""+b+m+'{content:"'+w+`"}/*!sc*/
`}}}return s}(this)},e}(),nM=/(a)(d)/gi,$b=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ey(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=$b(t%52)+n;return($b(t%52)+n).replace(nM,"$1-$2")}var ll=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},B5=function(e){return ll(5381,e)};function rM(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(ou(n)&&!Gm(n))return!1}return!0}var iM=B5("5.3.11"),sM=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&rM(t),this.componentId=n,this.baseHash=ll(iM,n),this.baseStyle=r,D5.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(t,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var a=El(this.rules,t,n,r).join(""),c=Ey(ll(this.baseHash,a)>>>0);if(!n.hasNameForId(i,c)){var f=r(a,"."+c,void 0,i);n.insertRules(i,c,f)}s.push(c),this.staticRulesId=c}else{for(var b=this.rules.length,m=ll(this.baseHash,r.hash),w="",_=0;_<b;_++){var A=this.rules[_];if(typeof A=="string")w+=A;else if(A){var I=El(A,t,n,r),C=Array.isArray(I)?I.join(""):I;m=ll(m,C+_),w+=C}}if(w){var R=Ey(m>>>0);if(!n.hasNameForId(i,R)){var $=r(w,"."+R,void 0,i);n.insertRules(i,R,$)}s.push(R)}}return s.join(" ")},e}(),oM=/^\s*\/\/.*$/gm,aM=[":","[",".","#"];function lM(e){var t,n,r,i,s=e===void 0?mo:e,a=s.options,c=a===void 0?mo:a,f=s.plugins,b=f===void 0?Ph:f,m=new $R(c),w=[],_=function(C){function R($){if($)try{C($+"}")}catch{}}return function($,L,P,N,M,U,p,Z,J,ce){switch($){case 1:if(J===0&&L.charCodeAt(0)===64)return C(L+";"),"";break;case 2:if(Z===0)return L+"/*|*/";break;case 3:switch(Z){case 102:case 112:return C(P[0]+L),"";default:return L+(ce===0?"/*|*/":"")}case-2:L.split("/*|*/}").forEach(R)}}}(function(C){w.push(C)}),A=function(C,R,$){return R===0&&aM.indexOf($[n.length])!==-1||$.match(i)?C:"."+t};function I(C,R,$,L){L===void 0&&(L="&");var P=C.replace(oM,""),N=R&&$?$+" "+R+" { "+P+" }":P;return t=L,n=R,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),m($||!R?"":R,N)}return m.use([].concat(b,[function(C,R,$){C===2&&$.length&&$[0].lastIndexOf(n)>0&&($[0]=$[0].replace(r,A))},_,function(C){if(C===-2){var R=w;return w=[],R}}])),I.hash=b.length?b.reduce(function(C,R){return R.name||ku(15),ll(C,R.name)},5381).toString():"",I}var L5=ss.createContext();L5.Consumer;var F5=ss.createContext(),cM=(F5.Consumer,new D5),Ay=lM();function uM(){return Al(L5)||cM}function fM(){return Al(F5)||Ay}var U5=function(){function e(t,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Ay);var a=r.name+s.hash;i.hasNameForId(r.id,a)||i.insertRules(r.id,a,s(r.rules,a,"@keyframes"))},this.toString=function(){return ku(12,String(r.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=n}return e.prototype.getName=function(t){return t===void 0&&(t=Ay),this.name+t.hash},e}(),hM=/([A-Z])/,dM=/([A-Z])/g,pM=/^ms-/,gM=function(e){return"-"+e.toLowerCase()};function Pb(e){return hM.test(e)?e.replace(dM,gM).replace(pM,"-ms-"):e}var Ob=function(e){return e==null||e===!1||e===""};function El(e,t,n,r){if(Array.isArray(e)){for(var i,s=[],a=0,c=e.length;a<c;a+=1)(i=El(e[a],t,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(Ob(e))return"";if(Gm(e))return"."+e.styledComponentId;if(ou(e)){if(typeof(b=e)!="function"||b.prototype&&b.prototype.isReactComponent||!t)return e;var f=e(t);return El(f,t,n,r)}var b;return e instanceof U5?n?(e.inject(n,r),e.getName(r)):e:Sy(e)?function m(w,_){var A,I,C=[];for(var R in w)w.hasOwnProperty(R)&&!Ob(w[R])&&(Array.isArray(w[R])&&w[R].isCss||ou(w[R])?C.push(Pb(R)+":",w[R],";"):Sy(w[R])?C.push.apply(C,m(w[R],R)):C.push(Pb(R)+": "+(A=R,(I=w[R])==null||typeof I=="boolean"||I===""?"":typeof I!="number"||I===0||A in PR||A.startsWith("--")?String(I).trim():I+"px")+";"));return _?[_+" {"].concat(C,["}"]):C}(e):e.toString()}var Nb=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Zm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ou(e)||Sy(e)?Nb(El(Cb(Ph,[e].concat(n)))):n.length===0&&e.length===1&&typeof e[0]=="string"?e:Nb(El(Cb(e,n)))}var yM=function(e,t,n){return n===void 0&&(n=mo),e.theme!==n.theme&&e.theme||t||n.theme},mM=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,vM=/(^-|-$)/g;function ag(e){return e.replace(mM,"-").replace(vM,"")}var j5=function(e){return Ey(B5(e)>>>0)};function $f(e){return typeof e=="string"&&!0}var Cy=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},bM=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"};function wM(e,t,n){var r=e[n];Cy(t)&&Cy(r)?z5(r,t):e[n]=t}function z5(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var a=s[i];if(Cy(a))for(var c in a)bM(c)&&wM(e,a[c],c)}return e}var H5=ss.createContext();H5.Consumer;var lg={};function q5(e,t,n){var r=Gm(e),i=!$f(e),s=t.attrs,a=s===void 0?Ph:s,c=t.componentId,f=c===void 0?function(L,P){var N=typeof L!="string"?"sc":ag(L);lg[N]=(lg[N]||0)+1;var M=N+"-"+j5("5.3.11"+N+lg[N]);return P?P+"-"+M:M}(t.displayName,t.parentComponentId):c,b=t.displayName,m=b===void 0?function(L){return $f(L)?"styled."+L:"Styled("+Tb(L)+")"}(e):b,w=t.displayName&&t.componentId?ag(t.displayName)+"-"+t.componentId:t.componentId||f,_=r&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,A=t.shouldForwardProp;r&&e.shouldForwardProp&&(A=t.shouldForwardProp?function(L,P,N){return e.shouldForwardProp(L,P,N)&&t.shouldForwardProp(L,P,N)}:e.shouldForwardProp);var I,C=new sM(n,w,r?e.componentStyle:void 0),R=C.isStatic&&a.length===0,$=function(L,P){return function(N,M,U,p){var Z=N.attrs,J=N.componentStyle,ce=N.defaultProps,me=N.foldedComponentIds,ke=N.shouldForwardProp,we=N.styledComponentId,Q=N.target,G=function(Me,fe,pt){Me===void 0&&(Me=mo);var h=Rs({},fe,{theme:Me}),v={};return pt.forEach(function(k){var T,O,z,te=k;for(T in ou(te)&&(te=te(h)),te)h[T]=v[T]=T==="className"?(O=v[T],z=te[T],O&&z?O+" "+z:O||z):te[T]}),[h,v]}(yM(M,Al(H5),ce)||mo,M,Z),Ae=G[0],Te=G[1],qe=function(Me,fe,pt,h){var v=uM(),k=fM(),T=fe?Me.generateAndInjectStyles(mo,v,k):Me.generateAndInjectStyles(pt,v,k);return T}(J,p,Ae),ze=U,Qe=Te.$as||M.$as||Te.as||M.as||Q,nt=$f(Qe),Fe=Te!==M?Rs({},M,{},Te):M,He={};for(var $e in Fe)$e[0]!=="$"&&$e!=="as"&&($e==="forwardedAs"?He.as=Fe[$e]:(ke?ke($e,kb,Qe):!nt||kb($e))&&(He[$e]=Fe[$e]));return M.style&&Te.style!==M.style&&(He.style=Rs({},M.style,{},Te.style)),He.className=Array.prototype.concat(me,we,qe!==we?qe:null,M.className,Te.className).filter(Boolean).join(" "),He.ref=ze,ft(Qe,He)}(I,L,P,R)};return $.displayName=m,(I=ss.forwardRef($)).attrs=_,I.componentStyle=C,I.displayName=m,I.shouldForwardProp=A,I.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Ph,I.styledComponentId=w,I.target=r?e.target:e,I.withComponent=function(L){var P=t.componentId,N=function(U,p){if(U==null)return{};var Z,J,ce={},me=Object.keys(U);for(J=0;J<me.length;J++)Z=me[J],p.indexOf(Z)>=0||(ce[Z]=U[Z]);return ce}(t,["componentId"]),M=P&&P+"-"+($f(L)?L:ag(Tb(L)));return q5(L,Rs({},N,{attrs:_,componentId:M}),n)},Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(L){this._foldedDefaultProps=r?z5({},e.defaultProps,L):L}}),Object.defineProperty(I,"toString",{value:function(){return"."+I.styledComponentId}}),i&&zR(I,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),I}var Ty=function(e){return function t(n,r,i){if(i===void 0&&(i=mo),!Km.isValidElementType(r))return ku(1,String(r));var s=function(){return n(r,i,Zm.apply(void 0,arguments))};return s.withConfig=function(a){return t(n,r,Rs({},i,{},a))},s.attrs=function(a){return t(n,r,Rs({},i,{attrs:Array.prototype.concat(i.attrs,a).filter(Boolean)}))},s}(q5,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Ty[e]=Ty(e)});function _M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Zm.apply(void 0,[e].concat(n)).join(""),s=j5(i);return new U5(s,i)}const hn=Ty,Rb=["canidae","felidae","cat","cattle","dog","donkey","goat","horse","pig","rabbit","aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","capybara","cardinal","caribou","carp","cat","catshark","caterpillar","catfish","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","cicada","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragonfly","dragon","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","gamefowl","galliform","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","urial","vicuna","viper","vole","vulture","wallaby","walrus","wasp","warbler","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra","alpaca","cat","cattle","chicken","dog","donkey","ferret","gayal","goldfish","guppy","horse","koi","llama","sheep","yak","unicorn"],Mb=["average","big","colossal","fat","giant","gigantic","great","huge","immense","large","little","long","mammoth","massive","miniature","petite","puny","short","small","tall","tiny","boiling","breezy","broken","bumpy","chilly","cold","cool","creepy","crooked","cuddly","curly","damaged","damp","dirty","dry","dusty","filthy","flaky","fluffy","wet","broad","chubby","crooked","curved","deep","flat","high","hollow","low","narrow","round","shallow","skinny","square","steep","straight","wide","ancient","brief","early","fast","late","long","modern","old","quick","rapid","short","slow","swift","young","abundant","empty","few","heavy","light","many","numerous","Sound","cooing","deafening","faint","harsh","hissing","hushed","husky","loud","melodic","moaning","mute","noisy","purring","quiet","raspy","resonant","screeching","shrill","silent","soft","squealing","thundering","voiceless","whispering","bitter","delicious","fresh","juicy","ripe","rotten","salty","sour","spicy","stale","sticky","strong","sweet","tasteless","tasty","thirsty","fluttering","fuzzy","greasy","grubby","hard","hot","icy","loose","melted","plastic","prickly","rainy","rough","scattered","shaggy","shaky","sharp","shivering","silky","slimy","slippery","smooth","soft","solid","steady","sticky","tender","tight","uneven","weak","wet","wooden","afraid","angry","annoyed","anxious","arrogant","ashamed","awful","bad","bewildered","bored","combative","condemned","confused","creepy","cruel","dangerous","defeated","defiant","depressed","disgusted","disturbed","eerie","embarrassed","envious","evil","fierce","foolish","frantic","frightened","grieving","helpless","homeless","hungry","hurt","ill","jealous","lonely","mysterious","naughty","nervous","obnoxious","outrageous","panicky","repulsive","scary","scornful","selfish","sore","tense","terrible","thoughtless","tired","troubled","upset","uptight","weary","wicked","worried","agreeable","amused","brave","calm","charming","cheerful","comfortable","cooperative","courageous","delightful","determined","eager","elated","enchanting","encouraging","energetic","enthusiastic","excited","exuberant","fair","faithful","fantastic","fine","friendly","funny","gentle","glorious","good","happy","healthy","helpful","hilarious","jolly","joyous","kind","lively","lovely","lucky","obedient","perfect","pleasant","proud","relieved","silly","smiling","splendid","successful","thoughtful","victorious","vivacious","witty","wonderful","zealous","zany","other","good","new","old","great","high","small","different","large","local","social","important","long","young","national","british","right","early","possible","big","little","political","able","late","general","full","far","low","public","available","bad","main","sure","clear","major","economic","only","likely","real","black","particular","international","special","difficult","certain","open","whole","white","free","short","easy","strong","european","central","similar","human","common","necessary","single","personal","hard","private","poor","financial","wide","foreign","simple","recent","concerned","american","various","close","fine","english","wrong","present","royal","natural","individual","nice","french","nihilist","solipsist","materialist","surrealist","heroic","awesome","hedonist","absurd","current","modern","labour","legal","happy","final","red","normal","serious","previous","total","prime","significant","industrial","sorry","dead","specific","appropriate","top","soviet","basic","military","original","successful","aware","hon","popular","heavy","professional","direct","dark","cold","ready","green","useful","effective","western","traditional","scottish","german","independent","deep","interesting","considerable","involved","physical","hot","existing","responsible","complete","medical","blue","extra","past","male","interested","fair","essential","beautiful","civil","primary","obvious","future","environmental","positive","senior","nuclear","annual","relevant","huge","rich","commercial","safe","regional","practical","official","separate","key","chief","regular","due","additional","active","powerful","complex","standard","impossible","light","warm","middle","fresh","sexual","front","domestic","actual","united","technical","ordinary","cheap","strange","internal","excellent","quiet","soft","potential","northern","religious","quick","very","famous","cultural","proper","broad","joint","formal","limited","conservative","lovely","usual","ltd","unable","rural","initial","substantial","bright","average","leading","reasonable","immediate","suitable","equal","detailed","working","overall","female","afraid","democratic","growing","sufficient","scientific","eastern","correct","inc","irish","expensive","educational","mental","dangerous","critical","increased","familiar","unlikely","double","perfect","slow","tiny","dry","historical","thin","daily","southern","increasing","wild","alone","urban","empty","married","narrow","liberal","supposed","upper","apparent","tall","busy","bloody","prepared","russian","moral","careful","clean","attractive","japanese","vital","thick","alternative","fast","ancient","elderly","rare","external","capable","brief","wonderful","grand","typical","entire","grey","constant","vast","surprised","ideal","terrible","academic","funny","minor","pleased","severe","ill","corporate","negative","permanent","weak","brown","fundamental","odd","crucial","inner","used","criminal","contemporary","sharp","sick","near","roman","massive","unique","secondary","parliamentary","african","unknown","subsequent","angry","alive","guilty","lucky","enormous","well","yellow","unusual","net","tough","dear","extensive","glad","remaining","agricultural","alright","healthy","italian","principal","tired","efficient","comfortable","chinese","relative","friendly","conventional","willing","sudden","proposed","voluntary","slight","valuable","dramatic","golden","temporary","federal","keen","flat","silent","indian","worried","pale","statutory","welsh","dependent","firm","wet","competitive","armed","radical","outside","acceptable","sensitive","living","pure","global","emotional","sad","secret","rapid","adequate","fixed","sweet","administrative","wooden","remarkable","comprehensive","surprising","solid","rough","mere","mass","brilliant","maximum","absolute","electronic","visual","electric","cool","spanish","literary","continuing","supreme","chemical","genuine","exciting","written","advanced","extreme","classical","fit","favourite","widespread","confident","straight","proud","numerous","opposite","distinct","mad","helpful","given","disabled","consistent","anxious","nervous","awful","stable","constitutional","satisfied","conscious","developing","strategic","holy","smooth","dominant","remote","theoretical","outstanding","pink","pretty","clinical","minimum","honest","impressive","related","residential","extraordinary","plain","visible","accurate","distant","still","greek","complicated","musical","precise","gentle","broken","live","silly","fat","tight","monetary","round","psychological","violent","unemployed","inevitable","junior","sensible","grateful","pleasant","dirty","structural","welcome","deaf","above","continuous","blind","overseas","mean","entitled","delighted","loose","occasional","evident","desperate","fellow","universal","square","steady","classic","equivalent","intellectual","victorian","level","ultimate","creative","lost","medieval","clever","linguistic","convinced","judicial","raw","sophisticated","asleep","vulnerable","illegal","outer","revolutionary","bitter","changing","australian","native","imperial","strict","wise","informal","flexible","collective","frequent","experimental","spiritual","intense","rational","generous","inadequate","prominent","logical","bare","historic","modest","dutch","acute","electrical","valid","weekly","gross","automatic","loud","reliable","mutual","liable","multiple","ruling","curious","sole","managing","pregnant","latin","nearby","exact","underlying","identical","satisfactory","marginal","distinctive","electoral","urgent","presidential","controversial","everyday","encouraging","organic","continued","expected","statistical","desirable","innocent","improved","exclusive","marked","experienced","unexpected","superb","sheer","disappointed","frightened","gastric","romantic","naked","reluctant","magnificent","convenient","established","closed","uncertain","artificial","diplomatic","tremendous","marine","mechanical","retail","institutional","mixed","required","biological","known","functional","straightforward","superior","digital","spectacular","unhappy","confused","unfair","aggressive","spare","painful","abstract","asian","associated","legislative","monthly","intelligent","hungry","explicit","nasty","just","faint","coloured","ridiculous","amazing","comparable","successive","realistic","back","decent","decentralized","bitcoin","cypherpunk","unnecessary","flying","random","influential","dull","genetic","neat","marvellous","crazy","damp","giant","secure","bottom","skilled","subtle","elegant","brave","lesser","parallel","steep","intensive","casual","tropical","lonely","partial","preliminary","concrete","alleged","assistant","vertical","upset","delicate","mild","occupational","excessive","progressive","exceptional","integrated","striking","continental","okay","harsh","combined","fierce","handsome","characteristic","chronic","compulsory","interim","objective","splendid","magic","systematic","obliged","payable","fun","horrible","primitive","fascinating","ideological","metropolitan","surrounding","estimated","peaceful","premier","operational","technological","kind","advisory","hostile","precious","accessible","determined","excited","impressed","provincial","smart","endless","isolated","drunk","geographical","like","dynamic","boring","forthcoming","unfortunate","definite","super","notable","indirect","stiff","wealthy","awkward","lively","neutral","artistic","content","mature","colonial","ambitious","evil","magnetic","verbal","legitimate","sympathetic","empirical","head","shallow","vague","naval","depressed","shared","added","shocked","mid","worthwhile","qualified","missing","blank","absent","favourable","polish","israeli","developed","profound","representative","enthusiastic","dreadful","rigid","reduced","cruel","coastal","peculiar","swiss","crude","extended","selected","eager","canadian","bold","relaxed","corresponding","running","planned","applicable","immense","allied","comparative","uncomfortable","conservation","productive","beneficial","bored","charming","minimal","mobile","turkish","orange","rear","passive","suspicious","overwhelming","fatal","resulting","symbolic","registered","neighbouring","calm","irrelevant","patient","compact","profitable","rival","loyal","moderate","distinguished","interior","noble","insufficient","eligible","mysterious","varying","managerial","molecular","olympic","linear","prospective","printed","parental","diverse","elaborate","furious","fiscal","burning","useless","semantic","embarrassed","inherent","philosophical","deliberate","awake","variable","promising","unpleasant","varied","sacred","selective","inclined","tender","hidden","worthy","intermediate","sound","protective","fortunate","slim","defensive","divine","stuck","driving","invisible","misleading","circular","mathematical","inappropriate","liquid","persistent","solar","doubtful","manual","architectural","intact","incredible","devoted","prior","tragic","respectable","optimistic","convincing","unacceptable","decisive","competent","spatial","respective","binding","relieved","nursing","toxic","select","redundant","integral","then","probable","amateur","fond","passing","specified","territorial","horizontal","inland","cognitive","regulatory","miserable","resident","polite","scared","gothic","civilian","instant","lengthy","adverse","korean","unconscious","anonymous","aesthetic","orthodox","static","unaware","costly","fantastic","foolish","fashionable","causal","compatible","wee","implicit","dual","ok","cheerful","subjective","forward","surviving","exotic","purple","cautious","visiting","aggregate","ethical","teenage","dying","disastrous","delicious","confidential","underground","thorough","grim","autonomous","atomic","frozen","colourful","injured","uniform","ashamed","glorious","wicked","coherent","rising","shy","novel","balanced","delightful","arbitrary","adjacent","worrying","weird","unchanged","rolling","evolutionary","intimate","sporting","disciplinary","formidable","lexical","noisy","gradual","accused","homeless","supporting","coming","renewed","excess","retired","rubber","chosen","outdoor","embarrassing","preferred","bizarre","appalling","agreed","imaginative","governing","accepted","vocational","mighty","puzzled","worldwide","organisational","sunny","eldest","eventual","spontaneous","vivid","rude","faithful","ministerial","innovative","controlled","conceptual","unwilling","civic","meaningful","alive","brainy","breakable","busy","careful","cautious","clever","concerned","crazy","curious","dead","different","difficult","doubtful","easy","famous","fragile","helpful","helpless","important","impossible","innocent","inquisitive","modern","open","outstanding","poor","powerful","puzzled","real","rich","shy","sleepy","super","tame","uninterested","wandering","wild","wrong","adorable","alert","average","beautiful","blonde","bloody","blushing","bright","clean","clear","cloudy","colorful","crowded","cute","dark","drab","distinct","dull","elegant","fancy","filthy","glamorous","gleaming","graceful","grotesque","homely","light","misty","motionless","muddy","plain","poised","quaint","shiny","smoggy","sparkling","spotless","stormy","strange","ugly","unsightly","unusual","bad","better","beautiful","big","black","blue","bright","clumsy","crazy","dizzy","dull","fat","frail","friendly","funny","great","green","gigantic","gorgeous","grumpy","handsome","happy","horrible","itchy","jittery","jolly","kind","long","lazy","magnificent","magenta","many","mighty","mushy","nasty","new","nice","nosy","nutty","nutritious","odd","orange","ordinary","pretty","precious","prickly","purple","quaint","quiet","quick","quickest","rainy","rare","ratty","red","roasted","robust","round","sad","scary","scrawny","short","silly","stingy","strange","striped","spotty","tart","tall","tame","tan","tender","testy","tricky","tough","ugly","ugliest","vast","watery","wasteful","wonderful","yellow","yummy","zany"];function Db(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}function xM(e){if(!e)throw new Error("No seed provided");const t=ni(e),n=Mb[t[0]%Mb.length],r=Rb[t[1]%Rb.length];return`${Db(n)} ${Db(r)}`}function kM(e){var i;const t=ye.getPubKey(),n=ye.toNostrHexAddress(e.pub);if(n===t)return d("span",{class:"badge first tooltip",children:[un.checkmark,d("span",{class:"tooltiptext right",children:de("you")})]});if(!n)return null;if((i=rt.followedByUser.get(t))==null?void 0:i.has(n))return d("span",{class:"badge first tooltip",children:[un.checkmark,d("span",{class:"tooltiptext right",children:de("following")})]});{const s=rt.followedByFriendsCount(n);if(s>0){const a=s>10?"second":"third";return d("span",{class:`badge ${a} tooltip`,children:[un.checkmark,d("span",{class:"tooltiptext right",children:[s," ",de("friends_following")]})]})}else return null}}const SM=e=>{var _,A;if(!e.pub)return console.error("Name component requires a pub",e),null;const t=ye.toNostrHexAddress(e.pub)||"";let n="",r,i=!1;const s=rt.profiles.get(t);s&&(n=((_=s.name)==null?void 0:_.trim().slice(0,100))||"",r=(A=s.display_name)==null?void 0:A.trim().slice(0,100)),n||(n=xM(ye.toNostrBech32Address(e.pub,"npub")||e.pub),i=!0);const[a,c]=It(n),[f,b]=It(r),[m,w]=It(i);return on(()=>{if(t)return rt.getProfile(t,I=>{var C,R;I&&(c(((C=I.name)==null?void 0:C.trim().slice(0,100))||""),b(((R=I.display_name)==null?void 0:R.trim().slice(0,100))||""),w(!(I.name||I.display_name)))})},[e.pub]),d(ut,{children:[d("span",{className:`display-name ${m?"generated":""}`,children:a||f||e.placeholder}),e.hideBadge?"":d(kM,{pub:e.pub})]})},kn=fu(SM),Ms=hn.button`
  background: var(--button-bg);
  color: var(--button-color);
  border: var(--button-border);
  font-weight: bold;
  cursor: pointer;
  transition: all 0.25s ease;
  width: ${e=>e.width||"auto"};

  ${e=>e.small&&`
    padding: 5px 20px;
  `}

  &:hover,
  &:focus,
  &:active {
    background: var(--button-bg-hover);
    color: var(--button-color-hover);
  }
`,Zt=hn(Ms)`
  background: var(--button-primary-bg);
  color: var(--button-primary-color);
  border: var(--button-primary-border);

  &:hover,
  &:focus,
  &:active {
    background: var(--button-primary-bg-hover);
    color: var(--button-primary-color-hover);
  }
`;class Jm extends fn{constructor(){super();xe(this,"key");xe(this,"cls");xe(this,"actionDone");xe(this,"action");xe(this,"activeClass");xe(this,"hoverAction");this.cls="block",this.key="blocked",this.activeClass="blocked",this.action=de("block"),this.actionDone=de("blocked"),this.hoverAction=de("unblock")}onClick(n){n.preventDefault();const r=!this.state[this.key],i=ye.toNostrHexAddress(this.props.id);i&&rt.block(i,r)}componentDidMount(){rt.getBlockedUsers(n=>{const r=n==null?void 0:n.has(ye.toNostrHexAddress(this.props.id));this.setState({blocked:r})})}render(){return d(Zt,{className:`${this.cls||this.key} ${this.state[this.key]?this.activeClass:""}`,onClick:n=>this.onClick(n),children:[d("span",{className:"nonhover",children:[de(this.state[this.key]?this.actionDone:this.action)," ",this.props.showName?d(kn,{pub:this.props.id,hideBadge:!0}):""]}),d("span",{className:"hover",children:de(this.hoverAction)})]})}}const Ur=({copyStr:e,text:t})=>{const[n,r]=It(!1),[i,s]=It(void 0),[a,c]=It(void 0),f=(w,_)=>{if(w.target===null)return;Pt.copyToClipboard(_);const A=w.target,I=A.offsetWidth;I!==void 0&&(s(i||I+1),A.style.width=`${i}px`,r(!0),a!==void 0&&clearTimeout(a),c(setTimeout(()=>r(!1),2e3)))},b=w=>{w.preventDefault();const _=typeof e=="function"?e():e;f(w,_)};on(()=>()=>{a&&clearTimeout(a)},[a]);const m=n?de("copied"):t||de("copy");return d(Zt,{className:"copy-button",onClick:w=>b(w),children:m})};let Rl=class extends fn{constructor(){super();xe(this,"key");xe(this,"cls");xe(this,"actionDone");xe(this,"action");xe(this,"activeClass");xe(this,"hoverAction");this.key="follow",this.activeClass="following",this.action=de("follow_btn"),this.actionDone=de("following_btn"),this.hoverAction=de("unfollow_btn")}onClick(n){n.preventDefault();const r=!this.state[this.key],i=ye.toNostrHexAddress(this.props.id);if(i){if(this.key==="follow"){rt.setFollowed(i,r);return}this.key==="block"&&rt.setBlocked(i,r)}}componentDidMount(){if(this.key==="follow"){rt.getFollowedByUser(ye.getPubKey(),n=>{const r=ye.toNostrHexAddress(this.props.id),i=r&&(n==null?void 0:n.has(r));this.setState({follow:i})});return}}render(){return d(Ms,{className:`${this.cls||this.key} ${this.state[this.key]?this.activeClass:""}`,onClick:n=>this.onClick(n),children:[d("span",{className:"nonhover",children:de(this.state[this.key]?this.actionDone:this.action)}),d("span",{className:"hover",children:de(this.hoverAction)})]})}};const K5=({children:e})=>{const[t,n]=It(!1),r=(i,s)=>{i.type==="click"&&i.target!==null&&!i.target.classList.contains("dropbtn")||(i.stopPropagation(),i.preventDefault(),n(s))};return on(()=>{const i=s=>{s.target&&!s.target.classList.contains("dropbtn")&&n(!1)};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]),d("div",{class:"dropdown",onClick:i=>r(i,!t),onMouseEnter:i=>r(i,!0),onMouseLeave:i=>r(i,!1),children:[d("div",{class:"dropbtn",children:""}),t?d("div",{class:"dropdown-content",children:e}):""]})},EM=hn.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  justify-content: ${e=>e.centerVertically?"center":e.justifyContent||"flex-start"};
  align-items: center;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 20px 0;
`,AM=hn.div`
  width: ${e=>e.width||"auto"};
  height: ${e=>e.height||"auto"};
  max-height: calc(100% - 40px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
`,To=({width:e,height:t,centerVertically:n,showContainer:r,children:i,onClose:s})=>{const a=m=>{m.key==="Escape"&&(s==null||s())},c=m=>{m.stopPropagation(),s==null||s()},f=m=>{m.stopPropagation()};on(()=>(window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}),[a]);const b=r?d("div",{class:"msg",style:{width:"600px","max-width":"calc(100vw - 40px)"},onClick:m=>f(m),children:d("div",{class:"msg-content",style:{padding:"30px"},children:i})}):i;return d(EM,{centerVertically:n,onClick:c,children:d(AM,{width:e,height:t,children:b})})},CM=hn.div`
  display: flex;
  flex-direction: column;

  & ul > li {
    font-size: large;
  }
  & ul > li:not(:last-child) {
    margin-bottom: 0.5rem;
  }
`,TM=hn.pre`
  overflow: auto;
  background-color: hsl(0, 0%, 16%);
  [data-theme="light"] & {
    background-color: hsl(0, 0%, 88%);
  }
  max-height: 400px;
  border-radius: 4px;
  padding: 0.7rem;
  font-family: monospace;
`,IM=({event:e})=>{const[t,n]=It(null);on(()=>{if(!(e!=null&&e.id))return;const i=De.getOriginalPostEventId(e),s=i&&De.eventsMetaDb.get(i);s&&n(s)},[e]);const r=Array.from((t==null?void 0:t.relays)||[]);return d(CM,{children:[d("h2",{children:de("event_detail")}),d("p",{children:de("seen_on")}),r.length===0?d("p",{children:de("iris_api_source")}):d("ul",{children:r.map(i=>d("li",{children:i}))}),d(TM,{children:d("code",{children:JSON.stringify({...e,meta:void 0,$loki:void 0},null,2)})})]})},$M=hn.div`
  text-align: left;
  max-width: 100%;
  user-select: text;
`,W5=e=>{const{event:t,id:n}=e,[r]=It(!1),[i,s]=It(!1),a=()=>s(!1),c=I=>{},f=I=>{if(I.preventDefault(),confirm("Delete message?")){const C=ye.toNostrHexAddress(n);C&&De.publish({kind:5,content:"deleted",tags:[["e",C]]})}},b=I=>{I.preventDefault(),Pe.get("mutedNotes").get(e.id).put(!r)},m=I=>{if(I.preventDefault(),confirm("Publicly report and hide message?")){const C=ye.toNostrHexAddress(e.id);C&&e.event&&De.publish({kind:5,content:"reported",tags:[["e",C],["p",e.event.pubkey]]})}},w=I=>{I.preventDefault(),e.event&&Pt.translateText(e.event.content).then(C=>{var R;(R=e.onTranslate)==null||R.call(e,C)})},_=I=>{I.preventDefault();const C=ye.toNostrHexAddress(n);if(C){const R=De.db.by("id",C);R&&(console.log("broadcasting",C,R),De.publish(R))}},A=`https://iris.to/${ye.toNostrBech32Address(n,"note")}`;return d("div",{className:"msg-menu-btn",children:[d(K5,{children:[d(Ur,{text:de("copy_link"),copyStr:A},`${n}copy_link`),d(Ur,{text:de("copy_note_ID"),copyStr:ye.toNostrBech32Address(n,"note")||""},`${n}copy_id`),d("a",{href:"#",onClick:b,children:de(r?"unmute_notifications":"mute_notifications")}),t?d(ut,{children:[d("a",{href:"#",onClick:_,children:de("resend_to_relays")}),d("a",{href:"#",onClick:w,children:de("translate")}),d(Ur,{text:de("copy_raw_data"),copyStr:JSON.stringify(t,null,2)},`${n}copyRaw`),t.pubkey===ye.getPubKey()?d("a",{href:"#",onClick:f,children:de("delete")}):d(ut,{children:[d("a",{href:"#",onClick:m,children:de("report_public")}),d(Rl,{id:t==null?void 0:t.pubkey}),d("span",{onClick:c,children:d(Jm,{id:t==null?void 0:t.pubkey,showName:!0})})]}),d("a",{href:"#",onClick:I=>{I.preventDefault(),s(!0)},children:de("event_detail")})]}):d(ut,{})]}),t&&i&&d(To,{showContainer:!0,onClose:a,children:d($M,{children:[d(IM,{event:t}),d(Zt,{onClick:a,children:de("done")})]})})]})};function PM(e){var r;const n=((r=e.event.tags)==null?void 0:r.some(i=>i[0]==="p"&&i[1]===ye.getPubKey()))?"started following you":"updated their following list";return d("div",{className:"msg",children:d("div",{className:"msg-content",children:d("div",{style:{display:"flex",alignItems:"center"},children:[d("i",{className:"repost-btn reposted",style:{marginRight:15},children:un.newFollower}),d("a",{href:`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`,children:d(kn,{pub:e.event.pubkey})}),d("span",{className:"mar-left5",children:[" ",n]})]})})})}const OM=(e,t)=>{var r;const n=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>n.closest(i))||(r=window.getSelection())!=null&&r.toString()||(e.stopPropagation(),Lt(`/${ye.toNostrBech32Address(t,"note")}`))};function NM(e){var b;const[t,n]=It([]),r=De.getEventReplyingTo(e.event),i=De.db.by("id",r),s=(i==null?void 0:i.pubkey)===ye.getPubKey(),a=(b=i==null?void 0:i.tags)==null?void 0:b.find(m=>m[0]==="p"&&m[1]===ye.getPubKey()),c=s?"liked your note":a?"liked a note where you were mentioned":"liked a note";if(on(()=>{if(r)return De.getRepliesAndReactions(r,(m,w)=>{n(Array.from(w))})},[r]),!r)return null;const f=`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`;return d("div",{className:"msg",children:d("div",{className:"msg-content",onClick:m=>OM(m,r),children:d("div",{style:{display:"flex",flex:1,"flex-direction":"column"},children:[d("div",{style:{display:"flex",alignItems:"center"},children:[d("i",{className:"like-btn liked",style:{marginRight:15},children:d(Yy,{width:24})}),d("div",{children:[d("a",{href:f,style:{marginRight:5},children:d(kn,{pub:e.event.pubkey})}),t.length>1&&d(ut,{children:[" and ",t.length-1," others "]})," ",c]})]}),d(ki,{id:r,fullWidth:!1},r+e.event.id)]})})},e.event.id)}var V5={exports:{}},cg={exports:{}};/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/var Bb;function RM(){return Bb||(Bb=1,function(e){(function(){function t(a,c){for(var f=2;f<arguments.length;f++)for(var b=0;b<arguments[f].length;b++)a[c++]=arguments[f].charAt(b)}function n(a){return String.fromCharCode(a>>8&255,a&255)}function r(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function i(a){return String.fromCharCode(a&255,a>>8&255)}var s=function(a,c,f){this.width=a,this.height=c,this.depth=f,this.pix_size=c*(a+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=4+4+13+4,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=4+4+3*f+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=4+4+f+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=4+4+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=4+4+4,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var b=new Array,m=0;m<this.buffer_size;m++)this.buffer[m]="\0";t(this.buffer,this.ihdr_offs,r(this.ihdr_size-12),"IHDR",r(a),r(c),"\b"),t(this.buffer,this.plte_offs,r(this.plte_size-12),"PLTE"),t(this.buffer,this.trns_offs,r(this.trns_size-12),"tRNS"),t(this.buffer,this.idat_offs,r(this.idat_size-12),"IDAT"),t(this.buffer,this.iend_offs,r(this.iend_size-12),"IEND");var w=8+112<<8|192;w+=31-w%31,t(this.buffer,this.idat_offs+8,n(w));for(var m=0;(m<<16)-1<this.pix_size;m++){var _,A;m+65535<this.pix_size?(_=65535,A="\0"):(_=this.pix_size-(m<<16)-m,A=""),t(this.buffer,this.idat_offs+8+2+(m<<16)+(m<<2),A,i(_),i(~_))}for(var m=0;m<256;m++){for(var I=m,C=0;C<8;C++)I&1?I=-306674912^I>>1&2147483647:I=I>>1&2147483647;b[m]=I}this.index=function(R,$){var L=$*(this.width+1)+R+1,P=this.idat_offs+8+2+5*Math.floor(L/65535+1)+L;return P},this.color=function(R,$,L,P){P=P>=0?P:255;var N=((P<<8|R)<<8|$)<<8|L;if(typeof this.palette[N]>"u"){if(this.pindex==this.depth)return"\0";var M=this.plte_offs+8+3*this.pindex;this.buffer[M+0]=String.fromCharCode(R),this.buffer[M+1]=String.fromCharCode($),this.buffer[M+2]=String.fromCharCode(L),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(P),this.palette[N]=String.fromCharCode(this.pindex++)}return this.palette[N]},this.getBase64=function(){var R=this.getDump(),$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",L,P,N,M,U,p,Z,J=R.length,ce=0,me="";do L=R.charCodeAt(ce),M=L>>2,P=R.charCodeAt(ce+1),U=(L&3)<<4|P>>4,N=R.charCodeAt(ce+2),J<ce+2?p=64:p=(P&15)<<2|N>>6,J<ce+3?Z=64:Z=N&63,me+=$.charAt(M)+$.charAt(U)+$.charAt(p)+$.charAt(Z);while((ce+=3)<J);return me},this.getDump=function(){for(var R=65521,$=5552,L=1,P=0,N=$,M=0;M<this.height;M++)for(var U=-1;U<this.width;U++)L+=this.buffer[this.index(U,M)].charCodeAt(0),P+=L,(N-=1)==0&&(L%=R,P%=R,N=$);L%=R,P%=R,t(this.buffer,this.idat_offs+this.idat_size-8,r(P<<16|L));function p(Z,J,ce){for(var me=-1,ke=4;ke<ce-4;ke+=1)me=b[(me^Z[J+ke].charCodeAt(0))&255]^me>>8&16777215;t(Z,J+ce-4,r(me^-1))}return p(this.buffer,this.ihdr_offs,this.ihdr_size),p(this.buffer,this.plte_offs,this.plte_size),p(this.buffer,this.trns_offs,this.trns_size),p(this.buffer,this.idat_offs,this.idat_size),p(this.buffer,this.iend_offs,this.iend_size),`PNG\r

`+this.buffer.join("")}};e.exports=s})()}(cg)),cg.exports}(function(e){(function(){var t;t=RM();var n=function(i,s){if(typeof i!="string"||i.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options=typeof s=="object"?s:this.defaults,typeof arguments[1]=="number"&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=i,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=this.options.margin!==void 0?this.options.margin:this.defaults.margin;var a=parseInt(this.hash.substr(-7),16)/268435455,c=this.options.saturation||this.defaults.saturation,f=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(a,c,f)};n.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new r(this.size,this.foreground,this.background):new t(this.size,this.size,256)},render:function(){var i=this.image(),s=this.size,a=Math.floor(s*this.margin),c=Math.floor((s-a*2)/5),f=Math.floor((s-c*5)/2),b=i.color.apply(i,this.background),m=i.color.apply(i,this.foreground),w,_;for(w=0;w<15;w++)_=parseInt(this.hash.charAt(w),16)%2?b:m,w<5?this.rectangle(2*c+f,w*c+f,c,c,_,i):w<10?(this.rectangle(1*c+f,(w-5)*c+f,c,c,_,i),this.rectangle(3*c+f,(w-5)*c+f,c,c,_,i)):w<15&&(this.rectangle(0*c+f,(w-10)*c+f,c,c,_,i),this.rectangle(4*c+f,(w-10)*c+f,c,c,_,i));return i},rectangle:function(i,s,a,c,f,b){if(this.isSvg())b.rectangles.push({x:i,y:s,w:a,h:c,color:f});else{var m,w;for(m=i;m<i+a;m++)for(w=s;w<s+c;w++)b.buffer[b.index(m,w)]=f}},hsl2rgb:function(i,s,a){return i*=6,s=[a+=s*=a<.5?a:1-a,a-i%1*s*2,a-=s*=2,a,a+i%1*s,a+s],[s[~~i%6]*255,s[(i|16)%6]*255,s[(i|8)%6]*255]},toString:function(i){return i?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var r=function(i,s,a){this.size=i,this.foreground=this.color.apply(this,s),this.background=this.color.apply(this,a),this.rectangles=[]};r.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(i,s,a,c){var f=[i,s,a].map(Math.round);return f.push(c>=0&&c<=255?c/255:1),"rgba("+f.join(",")+")"},getDump:function(){var i,s,a,c=this.foreground,f=this.background,b=this.size*.005;for(s="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+f+";'><g style='fill:"+c+"; stroke:"+c+"; stroke-width:"+b+";'>",i=0;i<this.rectangles.length;i++)a=this.rectangles[i],a.color!=f&&(s+="<rect  x='"+a.x+"' y='"+a.y+"' width='"+a.w+"' height='"+a.h+"'/>");return s+="</g></svg>",s},getBase64:function(){if(typeof btoa=="function")return btoa(this.getDump());if(Buffer)return new Buffer(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},e.exports=n})()})(V5);var MM=V5.exports;const DM=jr(MM),BM=["data:image","https://imgur.com/","https://i.imgur.com/","https://imgproxy.iris.to/"],G5=e=>BM.some(t=>e.startsWith(t)),LM=e=>{let t=e.onError,n=e.src,r=!1;if(e.src&&!e.src.startsWith("data:image")&&(!G5(e.src)||e.width)){const a=e.src;if(e.width){const f=e.width*2;n=`https://imgproxy.iris.to/insecure/rs:${e.square?"fill":"fit"}:${f}:${f}/plain/${a}`}else n=`https://imgproxy.iris.to/insecure/plain/${a}`;const c=e.onError;t=()=>{r?(console.log("original source failed too",a),c&&c()):(console.log("image proxy failed",n,"trying original source",a),r=!0,s(a))}}const[i,s]=It(n);return d("img",{src:i,onError:t,onClick:e.onClick,className:e.class,style:e.style,width:e.width,height:e.width,alt:e.alt})},js=LM,FM=hn.div`
  max-width: ${e=>e.width}px;
  max-height: ${e=>e.width}px;
  display: inline-block;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  position: relative;
  user-select: none;
`;class ti extends fn{constructor(){super(...arguments);xe(this,"activityTimeout");xe(this,"unsub")}updateIdenticon(){const n=ni(this.props.str),r=Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join(""),i=new DM(r,{width:this.props.width,format:"svg"});this.setState({identicon:`data:image/svg+xml;base64,${i.toString()}`})}componentDidMount(){const n=this.props.str;if(!n)return;this.updateIdenticon();const r=ye.toNostrHexAddress(n);r&&(this.unsub=rt.getProfile(r,i=>{i&&this.setState({picture:i.picture,name:i.name})})),this.setState({activity:null})}componentWillUnmount(){var n;super.componentWillUnmount(),this.activityTimeout!==void 0&&clearTimeout(this.activityTimeout),(n=this.unsub)==null||n.call(this)}render(){const n=this.props.width,r=["online","active"].indexOf(this.state.activity??"")>-1?this.state.activity:"",i=this.state.picture&&!this.state.hasError&&!this.props.hidePicture&&!rt.blockedUsers.has(this.props.str),s=i?"has-picture":"",a=this.props.showTooltip?"tooltip":"";return d(FM,{width:n,onClick:this.props.onClick,style:{cursor:this.props.onClick?"pointer":void 0},className:`identicon-container ${s} ${a} ${r}`,children:[d("div",{class:"identicon",children:i?d(js,{src:this.state.picture,width:n,square:!0,style:{objectFit:"cover"},onError:()=>this.setState({hasError:!0})}):d("img",{width:n,style:"max-width:100%",src:this.state.identicon||""})}),this.props.showTooltip&&this.state.name?d("span",{class:"tooltiptext",children:this.state.name}):""]})}}const UM=hn.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 20px;
`,jM=e=>{var t;return d(To,{centerVertically:((t=e.images)==null?void 0:t.length)===1,onClose:e.onClose,children:d(UM,{children:e.images.map(n=>d("p",{children:d(js,{style:{maxHeight:"90vh",maxWidth:"90vw"},src:n})}))})})};var Y5=function(e,t,n,r){var i;t[0]=0;for(var s=1;s<t.length;s++){var a=t[s++],c=t[s]?(t[0]|=a?1:2,n[t[s++]]):t[++s];a===3?r[0]=c:a===4?r[1]=Object.assign(r[1]||{},c):a===5?(r[1]=r[1]||{})[t[++s]]=c:a===6?r[1][t[++s]]+=c+"":a?(i=e.apply(c,Y5(e,c,n,["",null])),r.push(i),c[0]?t[0]|=2:(t[s-2]=0,t[s]=i)):r.push(c)}return r},Lb=new Map;function zM(e){var t=Lb.get(this);return t||(t=new Map,Lb.set(this,t)),(t=Y5(this,t.get(e)||(t.set(e,t=function(n){for(var r,i,s=1,a="",c="",f=[0],b=function(_){s===1&&(_||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?f.push(0,_,a):s===3&&(_||a)?(f.push(3,_,a),s=2):s===2&&a==="..."&&_?f.push(4,_,0):s===2&&a&&!_?f.push(5,0,!0,a):s>=5&&((a||!_&&s===5)&&(f.push(s,0,a,i),s=6),_&&(f.push(s,_,0,i),s=6)),a=""},m=0;m<n.length;m++){m&&(s===1&&b(),b(m));for(var w=0;w<n[m].length;w++)r=n[m][w],s===1?r==="<"?(b(),f=[f],s=3):a+=r:s===4?a==="--"&&r===">"?(s=1,a=""):a=r+a[0]:c?r===c?c="":a+=r:r==='"'||r==="'"?c=r:r===">"?(b(),s=1):s&&(r==="="?(s=5,i=a,a=""):r==="/"&&(s<5||n[m][w+1]===">")?(b(),s===3&&(f=f[0]),s=f,(f=f[0]).push(2,0,s),s=0):r===" "||r==="	"||r===`
`||r==="\r"?(b(),s=2):a+=r),s===3&&a==="!--"&&(s=4,f=f[0])}return b(),f}(e)),t),arguments,[])).length>1?t:t[0]}var Ct=zM.bind(ft);function HM(){this.__data__=[],this.size=0}var qM=HM;function KM(e,t){return e===t||e!==e&&t!==t}var Z5=KM,WM=Z5;function VM(e,t){for(var n=e.length;n--;)if(WM(e[n][0],t))return n;return-1}var Sd=VM,GM=Sd,YM=Array.prototype,ZM=YM.splice;function JM(e){var t=this.__data__,n=GM(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ZM.call(t,n,1),--this.size,!0}var XM=JM,QM=Sd;function e9(e){var t=this.__data__,n=QM(t,e);return n<0?void 0:t[n][1]}var t9=e9,n9=Sd;function r9(e){return n9(this.__data__,e)>-1}var i9=r9,s9=Sd;function o9(e,t){var n=this.__data__,r=s9(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a9=o9,l9=qM,c9=XM,u9=t9,f9=i9,h9=a9;function Ml(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ml.prototype.clear=l9;Ml.prototype.delete=c9;Ml.prototype.get=u9;Ml.prototype.has=f9;Ml.prototype.set=h9;var Ed=Ml,d9=Ed;function p9(){this.__data__=new d9,this.size=0}var g9=p9;function y9(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var m9=y9;function v9(e){return this.__data__.get(e)}var b9=v9;function w9(e){return this.__data__.has(e)}var _9=w9,x9=vu,k9=mu,S9="[object AsyncFunction]",E9="[object Function]",A9="[object GeneratorFunction]",C9="[object Proxy]";function T9(e){if(!k9(e))return!1;var t=x9(e);return t==E9||t==A9||t==S9||t==C9}var J5=T9,I9=cs,$9=I9["__core-js_shared__"],P9=$9,ug=P9,Fb=function(){var e=/[^.]+$/.exec(ug&&ug.keys&&ug.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function O9(e){return!!Fb&&Fb in e}var N9=O9,R9=Function.prototype,M9=R9.toString;function D9(e){if(e!=null){try{return M9.call(e)}catch{}try{return e+""}catch{}}return""}var X5=D9,B9=J5,L9=N9,F9=mu,U9=X5,j9=/[\\^$.*+?()[\]{}|]/g,z9=/^\[object .+?Constructor\]$/,H9=Function.prototype,q9=Object.prototype,K9=H9.toString,W9=q9.hasOwnProperty,V9=RegExp("^"+K9.call(W9).replace(j9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function G9(e){if(!F9(e)||L9(e))return!1;var t=B9(e)?V9:z9;return t.test(U9(e))}var Y9=G9;function Z9(e,t){return e==null?void 0:e[t]}var J9=Z9,X9=Y9,Q9=J9;function eD(e,t){var n=Q9(e,t);return X9(n)?n:void 0}var Dl=eD,tD=Dl,nD=cs,rD=tD(nD,"Map"),Xm=rD,iD=Dl,sD=iD(Object,"create"),Ad=sD,Ub=Ad;function oD(){this.__data__=Ub?Ub(null):{},this.size=0}var aD=oD;function lD(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cD=lD,uD=Ad,fD="__lodash_hash_undefined__",hD=Object.prototype,dD=hD.hasOwnProperty;function pD(e){var t=this.__data__;if(uD){var n=t[e];return n===fD?void 0:n}return dD.call(t,e)?t[e]:void 0}var gD=pD,yD=Ad,mD=Object.prototype,vD=mD.hasOwnProperty;function bD(e){var t=this.__data__;return yD?t[e]!==void 0:vD.call(t,e)}var wD=bD,_D=Ad,xD="__lodash_hash_undefined__";function kD(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_D&&t===void 0?xD:t,this}var SD=kD,ED=aD,AD=cD,CD=gD,TD=wD,ID=SD;function Bl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bl.prototype.clear=ED;Bl.prototype.delete=AD;Bl.prototype.get=CD;Bl.prototype.has=TD;Bl.prototype.set=ID;var $D=Bl,jb=$D,PD=Ed,OD=Xm;function ND(){this.size=0,this.__data__={hash:new jb,map:new(OD||PD),string:new jb}}var RD=ND;function MD(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var DD=MD,BD=DD;function LD(e,t){var n=e.__data__;return BD(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Cd=LD,FD=Cd;function UD(e){var t=FD(this,e).delete(e);return this.size-=t?1:0,t}var jD=UD,zD=Cd;function HD(e){return zD(this,e).get(e)}var qD=HD,KD=Cd;function WD(e){return KD(this,e).has(e)}var VD=WD,GD=Cd;function YD(e,t){var n=GD(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ZD=YD,JD=RD,XD=jD,QD=qD,eB=VD,tB=ZD;function Ll(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ll.prototype.clear=JD;Ll.prototype.delete=XD;Ll.prototype.get=QD;Ll.prototype.has=eB;Ll.prototype.set=tB;var Q5=Ll,nB=Ed,rB=Xm,iB=Q5,sB=200;function oB(e,t){var n=this.__data__;if(n instanceof nB){var r=n.__data__;if(!rB||r.length<sB-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new iB(r)}return n.set(e,t),this.size=n.size,this}var aB=oB,lB=Ed,cB=g9,uB=m9,fB=b9,hB=_9,dB=aB;function Fl(e){var t=this.__data__=new lB(e);this.size=t.size}Fl.prototype.clear=cB;Fl.prototype.delete=uB;Fl.prototype.get=fB;Fl.prototype.has=hB;Fl.prototype.set=dB;var pB=Fl,gB="__lodash_hash_undefined__";function yB(e){return this.__data__.set(e,gB),this}var mB=yB;function vB(e){return this.__data__.has(e)}var bB=vB,wB=Q5,_B=mB,xB=bB;function Nh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new wB;++t<n;)this.add(e[t])}Nh.prototype.add=Nh.prototype.push=_B;Nh.prototype.has=xB;var kB=Nh;function SB(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var EB=SB;function AB(e,t){return e.has(t)}var CB=AB,TB=kB,IB=EB,$B=CB,PB=1,OB=2;function NB(e,t,n,r,i,s){var a=n&PB,c=e.length,f=t.length;if(c!=f&&!(a&&f>c))return!1;var b=s.get(e),m=s.get(t);if(b&&m)return b==t&&m==e;var w=-1,_=!0,A=n&OB?new TB:void 0;for(s.set(e,t),s.set(t,e);++w<c;){var I=e[w],C=t[w];if(r)var R=a?r(C,I,w,t,e,s):r(I,C,w,e,t,s);if(R!==void 0){if(R)continue;_=!1;break}if(A){if(!IB(t,function($,L){if(!$B(A,L)&&(I===$||i(I,$,n,r,s)))return A.push(L)})){_=!1;break}}else if(!(I===C||i(I,C,n,r,s))){_=!1;break}}return s.delete(e),s.delete(t),_}var ek=NB,RB=cs,MB=RB.Uint8Array,DB=MB;function BB(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var LB=BB;function FB(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var UB=FB,zb=Am,Hb=DB,jB=Z5,zB=ek,HB=LB,qB=UB,KB=1,WB=2,VB="[object Boolean]",GB="[object Date]",YB="[object Error]",ZB="[object Map]",JB="[object Number]",XB="[object RegExp]",QB="[object Set]",eL="[object String]",tL="[object Symbol]",nL="[object ArrayBuffer]",rL="[object DataView]",qb=zb?zb.prototype:void 0,fg=qb?qb.valueOf:void 0;function iL(e,t,n,r,i,s,a){switch(n){case rL:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nL:return!(e.byteLength!=t.byteLength||!s(new Hb(e),new Hb(t)));case VB:case GB:case JB:return jB(+e,+t);case YB:return e.name==t.name&&e.message==t.message;case XB:case eL:return e==t+"";case ZB:var c=HB;case QB:var f=r&KB;if(c||(c=qB),e.size!=t.size&&!f)return!1;var b=a.get(e);if(b)return b==t;r|=WB,a.set(e,t);var m=zB(c(e),c(t),r,i,s,a);return a.delete(e),m;case tL:if(fg)return fg.call(e)==fg.call(t)}return!1}var sL=iL;function oL(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var aL=oL,lL=Array.isArray,Qm=lL,cL=aL,uL=Qm;function fL(e,t,n){var r=t(e);return uL(e)?r:cL(r,n(e))}var hL=fL;function dL(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}var pL=dL;function gL(){return[]}var yL=gL,mL=pL,vL=yL,bL=Object.prototype,wL=bL.propertyIsEnumerable,Kb=Object.getOwnPropertySymbols,_L=Kb?function(e){return e==null?[]:(e=Object(e),mL(Kb(e),function(t){return wL.call(e,t)}))}:vL,xL=_L;function kL(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var SL=kL,EL=vu,AL=bu,CL="[object Arguments]";function TL(e){return AL(e)&&EL(e)==CL}var IL=TL,Wb=IL,$L=bu,tk=Object.prototype,PL=tk.hasOwnProperty,OL=tk.propertyIsEnumerable,NL=Wb(function(){return arguments}())?Wb:function(e){return $L(e)&&PL.call(e,"callee")&&!OL.call(e,"callee")},RL=NL,Rh={exports:{}};function ML(){return!1}var DL=ML;Rh.exports;(function(e,t){var n=cs,r=DL,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,c=a?n.Buffer:void 0,f=c?c.isBuffer:void 0,b=f||r;e.exports=b})(Rh,Rh.exports);var nk=Rh.exports,BL=9007199254740991,LL=/^(?:0|[1-9]\d*)$/;function FL(e,t){var n=typeof e;return t=t??BL,!!t&&(n=="number"||n!="symbol"&&LL.test(e))&&e>-1&&e%1==0&&e<t}var UL=FL,jL=9007199254740991;function zL(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jL}var rk=zL,HL=vu,qL=rk,KL=bu,WL="[object Arguments]",VL="[object Array]",GL="[object Boolean]",YL="[object Date]",ZL="[object Error]",JL="[object Function]",XL="[object Map]",QL="[object Number]",eF="[object Object]",tF="[object RegExp]",nF="[object Set]",rF="[object String]",iF="[object WeakMap]",sF="[object ArrayBuffer]",oF="[object DataView]",aF="[object Float32Array]",lF="[object Float64Array]",cF="[object Int8Array]",uF="[object Int16Array]",fF="[object Int32Array]",hF="[object Uint8Array]",dF="[object Uint8ClampedArray]",pF="[object Uint16Array]",gF="[object Uint32Array]",vn={};vn[aF]=vn[lF]=vn[cF]=vn[uF]=vn[fF]=vn[hF]=vn[dF]=vn[pF]=vn[gF]=!0;vn[WL]=vn[VL]=vn[sF]=vn[GL]=vn[oF]=vn[YL]=vn[ZL]=vn[JL]=vn[XL]=vn[QL]=vn[eF]=vn[tF]=vn[nF]=vn[rF]=vn[iF]=!1;function yF(e){return KL(e)&&qL(e.length)&&!!vn[HL(e)]}var mF=yF;function vF(e){return function(t){return e(t)}}var bF=vF,Mh={exports:{}};Mh.exports;(function(e,t){var n=vx,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,c=function(){try{var f=i&&i.require&&i.require("util").types;return f||a&&a.binding&&a.binding("util")}catch{}}();e.exports=c})(Mh,Mh.exports);var wF=Mh.exports,_F=mF,xF=bF,Vb=wF,Gb=Vb&&Vb.isTypedArray,kF=Gb?xF(Gb):_F,ik=kF,SF=SL,EF=RL,AF=Qm,CF=nk,TF=UL,IF=ik,$F=Object.prototype,PF=$F.hasOwnProperty;function OF(e,t){var n=AF(e),r=!n&&EF(e),i=!n&&!r&&CF(e),s=!n&&!r&&!i&&IF(e),a=n||r||i||s,c=a?SF(e.length,String):[],f=c.length;for(var b in e)(t||PF.call(e,b))&&!(a&&(b=="length"||i&&(b=="offset"||b=="parent")||s&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||TF(b,f)))&&c.push(b);return c}var NF=OF,RF=Object.prototype;function MF(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||RF;return e===n}var DF=MF;function BF(e,t){return function(n){return e(t(n))}}var LF=BF,FF=LF,UF=FF(Object.keys,Object),jF=UF,zF=DF,HF=jF,qF=Object.prototype,KF=qF.hasOwnProperty;function WF(e){if(!zF(e))return HF(e);var t=[];for(var n in Object(e))KF.call(e,n)&&n!="constructor"&&t.push(n);return t}var VF=WF,GF=J5,YF=rk;function ZF(e){return e!=null&&YF(e.length)&&!GF(e)}var JF=ZF,XF=NF,QF=VF,eU=JF;function tU(e){return eU(e)?XF(e):QF(e)}var nU=tU,rU=hL,iU=xL,sU=nU;function oU(e){return rU(e,sU,iU)}var aU=oU,Yb=aU,lU=1,cU=Object.prototype,uU=cU.hasOwnProperty;function fU(e,t,n,r,i,s){var a=n&lU,c=Yb(e),f=c.length,b=Yb(t),m=b.length;if(f!=m&&!a)return!1;for(var w=f;w--;){var _=c[w];if(!(a?_ in t:uU.call(t,_)))return!1}var A=s.get(e),I=s.get(t);if(A&&I)return A==t&&I==e;var C=!0;s.set(e,t),s.set(t,e);for(var R=a;++w<f;){_=c[w];var $=e[_],L=t[_];if(r)var P=a?r(L,$,_,t,e,s):r($,L,_,e,t,s);if(!(P===void 0?$===L||i($,L,n,r,s):P)){C=!1;break}R||(R=_=="constructor")}if(C&&!R){var N=e.constructor,M=t.constructor;N!=M&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof M=="function"&&M instanceof M)&&(C=!1)}return s.delete(e),s.delete(t),C}var hU=fU,dU=Dl,pU=cs,gU=dU(pU,"DataView"),yU=gU,mU=Dl,vU=cs,bU=mU(vU,"Promise"),wU=bU,_U=Dl,xU=cs,kU=_U(xU,"Set"),SU=kU,EU=Dl,AU=cs,CU=EU(AU,"WeakMap"),TU=CU,Iy=yU,$y=Xm,Py=wU,Oy=SU,Ny=TU,sk=vu,Ul=X5,Zb="[object Map]",IU="[object Object]",Jb="[object Promise]",Xb="[object Set]",Qb="[object WeakMap]",ew="[object DataView]",$U=Ul(Iy),PU=Ul($y),OU=Ul(Py),NU=Ul(Oy),RU=Ul(Ny),Qo=sk;(Iy&&Qo(new Iy(new ArrayBuffer(1)))!=ew||$y&&Qo(new $y)!=Zb||Py&&Qo(Py.resolve())!=Jb||Oy&&Qo(new Oy)!=Xb||Ny&&Qo(new Ny)!=Qb)&&(Qo=function(e){var t=sk(e),n=t==IU?e.constructor:void 0,r=n?Ul(n):"";if(r)switch(r){case $U:return ew;case PU:return Zb;case OU:return Jb;case NU:return Xb;case RU:return Qb}return t});var MU=Qo,hg=pB,DU=ek,BU=sL,LU=hU,tw=MU,nw=Qm,rw=nk,FU=ik,UU=1,iw="[object Arguments]",sw="[object Array]",Pf="[object Object]",jU=Object.prototype,ow=jU.hasOwnProperty;function zU(e,t,n,r,i,s){var a=nw(e),c=nw(t),f=a?sw:tw(e),b=c?sw:tw(t);f=f==iw?Pf:f,b=b==iw?Pf:b;var m=f==Pf,w=b==Pf,_=f==b;if(_&&rw(e)){if(!rw(t))return!1;a=!0,m=!1}if(_&&!m)return s||(s=new hg),a||FU(e)?DU(e,t,n,r,i,s):BU(e,t,f,n,r,i,s);if(!(n&UU)){var A=m&&ow.call(e,"__wrapped__"),I=w&&ow.call(t,"__wrapped__");if(A||I){var C=A?e.value():e,R=I?t.value():t;return s||(s=new hg),i(C,R,n,r,s)}}return _?(s||(s=new hg),LU(e,t,n,r,i,s)):!1}var HU=zU,qU=HU,aw=bu;function ok(e,t,n,r,i){return e===t?!0:e==null||t==null||!aw(e)&&!aw(t)?e!==e&&t!==t:qU(e,t,n,r,ok,i)}var KU=ok,WU=KU;function VU(e,t){return WU(e,t)}var GU=VU;const Ry=jr(GU),YU=5;class ak extends fn{constructor(){super();xe(this,"searchFromServer",dr.debounce(n=>{fetch(`https://rbr.bio/search/${n}.json`).then(r=>{r.json().then(i=>{i&&Array.isArray(i)&&i.forEach(s=>{De.handle(s[1])})})})},500));this.state={results:[],query:"",showFollowSuggestions:!0,offsetLeft:0,selected:-1}}onInput(){this.search()}onKeyUp(n){if(n.keyCode===38||n.keyCode===40){n.preventDefault();const r=this.state.selected;let i=n.keyCode===40?r+1:r-1;i=Math.max(-1,Math.min(this.state.results.length-1,i)),this.setState({selected:i})}}close(){Tt(this.base).find("input").val(""),this.setState({results:[],query:""})}componentDidMount(){Pe.get("showFollowSuggestions").on(this.inject()),Pe.get("searchIndexUpdated").on(this.sub(()=>this.search())),Pe.get("activeRoute").on(this.sub(()=>{this.close()})),this.adjustResultsPosition(),this.search(),Tt(document).off("keydown").on("keydown",n=>{var r;n.key==="Tab"&&((r=document.activeElement)==null?void 0:r.tagName)==="BODY"?(n.preventDefault(),Tt(this.base).find("input").focus()):n.key==="Escape"&&(this.close(),Tt(this.base).find("input").blur())})}componentDidUpdate(n,r){this.adjustResultsPosition(),n.focus!==this.props.focus&&Tt(this.base).find("input:visible").focus(),n.query!==this.props.query&&this.search(),this.state.selected>=0&&!Ry(this.state.results.slice(0,this.state.selected+1),r.results.slice(0,this.state.selected+1))&&this.setState({selected:-1})}componentWillUnmount(){Tt(document).off("keyup")}adjustResultsPosition(){const n=Tt(this.base).find("input");n.length&&this.setState({offsetLeft:n[0].offsetLeft})}onSubmit(n){n.preventDefault();const r=Tt(this.base).find("input");r.val(""),r.trigger("blur");const i=Tt(this.base).find(".result.selected");i.length&&i[0].click()}preventUpDownDefault(n){(n.keyCode===38||n.keyCode===40)&&n.preventDefault()}search(){let n=this.props.query||Tt(this.base).find("input").first().val()||"";if(n=n.toString().trim().toLowerCase(),!n){this.close();return}if(n.match(/nsec1[a-zA-Z0-9]{30,65}/gi)){Tt(this.base).find("input").first().val("");return}if(this.props.onSelect){if(n.match(/.+@.+\..+/)&&ye.getPubKeyByNip05Address(n).then(a=>{var c,f;a&&n===String(this.props.query||Tt(this.base).find("input").first().val())&&((f=(c=this.props).onSelect)==null||f.call(c,{key:a}))}),n.startsWith("https://iris.to/")){const a=n.replace("https://iris.to","");Lt(a);return}const r=n.match(/note[a-zA-Z0-9]{59,60}/gi);if(r){Lt("/"+r[0]);return}const i=n.match(/npub[a-zA-Z0-9]{59,60}/gi);if(i){Lt("/"+i[0]);return}const s=n.split("/profile/");if(s.length>1)return this.props.onSelect({key:s[1]});if(ye.toNostrHexAddress(n))return this.props.onSelect({key:n})}if(this.searchFromServer(n),n){const r=$x.search(n).slice(0,YU);this.setState({results:r,query:n})}else this.setState({results:[],query:n})}onClick(n,r){this.props.onSelect&&(n.preventDefault(),n.stopPropagation(),this.props.onSelect(r)),this.close()}onResultFocus(n,r){this.setState({selected:r})}render(){return d("div",{class:`search-box ${this.props.class}`,children:[this.props.resultsOnly?"":d("form",{onSubmit:n=>this.onSubmit(n),children:d("label",{children:d("input",{type:"text",onKeyPress:n=>this.preventUpDownDefault(n),onKeyDown:n=>this.preventUpDownDefault(n),onKeyUp:n=>this.onKeyUp(n),placeholder:de("search"),tabIndex:1,onInput:()=>this.onInput()})})}),d("div",{onKeyUp:n=>this.onKeyUp(n),class:"search-box-results",style:"left: ${this.state.offsetLeft || ''}",children:[this.state.query&&!this.props.resultsOnly?d("a",{onFocus:n=>this.onResultFocus(n,-1),tabIndex:2,className:"result "+(this.state.selected===-1?"selected":""),href:`/search/${encodeURIComponent(this.state.query)}`,children:[d("div",{class:"identicon-container",children:d("div",{style:"font-size: 1.5em; width: 40px",children:""})}),d("div",{children:[d("span",{children:this.state.query}),d("br",{}),d("small",{children:de("search_posts")})]})]}):"",this.state.results.map((n,r)=>{const i=n.item;let s="";i.followers&&(i.followDistance===0?s=de("you"):i.followDistance===1?s=de("following"):s=`${i.followers.size} ${de("followers")}`);const a=ye.toNostrBech32Address(i.key,"npub");return d("a",{onFocus:c=>this.onResultFocus(c,r),tabIndex:2,className:"result "+(r===this.state.selected?"selected":""),href:`/${a}`,onClick:c=>this.onClick(c,i),children:[i.picture?d("div",{class:"identicon-container",children:d(js,{src:i.picture,class:"round-borders",width:40})}):d(ti,{str:a,width:40},`${a}ic`),d("div",{children:[d(kn,{pub:i.key},i.key+"searchResult"),d("br",{}),d("small",{children:s})]})]})})]})]})}}const e0=(e,t)=>t.indexOf(e.name.slice(-4))!==-1,dg=e=>e0(e,["webm",".mp4",".ogg"]),pg=e=>e0(e,[".mp3",".wav",".m4a"]),lw=e=>e0(e,[".jpg","jpeg",".gif",".png"]);class Su extends fn{constructor(){super(...arguments);xe(this,"coverRef",_a());xe(this,"state",{settings:{},player:{},activeFilePath:"",torrent:{},isAudioOpen:!1,showFiles:!1,torrenting:!1,hasNext:!1,splitPath:null,ogImageUrl:""});xe(this,"player");xe(this,"torrent");xe(this,"observer")}componentDidMount(){console.log("componentDidMount torrent"),Pe.get("player").on(this.sub(r=>{if(this.player=r,this.setState({player:r}),this.torrent&&this.player&&this.player.filePath!==this.state.activeFilePath){const i=this.getActiveFile(this.torrent);i&&this.openFile(i)}}));const n=this.props.showFiles;n&&this.setState({showFiles:n}),Pe.get("settings").on(this.inject()),(async()=>(this.props.standalone||await Pe.get("settings").get("enableWebtorrent").once())&&this.startTorrenting())()}componentWillUnmount(){super.componentWillUnmount(),this.observer&&this.observer.disconnect(),delete this.observer}onPlay(n){n.target.muted||Pe.get("player").get("paused").put(!0)}async startTorrenting(n){this.setState({torrenting:!0});const r=this.props.torrentId,{default:i}=await jm(()=>import("./index-305001f9.js").then(c=>c.i),[]),s=new i,a=s.get(r);a?this.onTorrent(a,n):s.add(r,(c,f)=>f&&!c&&this.onTorrent(f,n))}playAudio(n,r){r&&r.preventDefault(),Pe.get("player").put({torrentId:this.props.torrentId,filePath:n,paused:!1})}pauseAudio(n){n&&n.preventDefault(),Pe.get("player").put({paused:!0})}openFile(n,r){const i=this.base,s=dg(n),a=!s&&pg(n);if(this.state.activeFilePath===n.path){if(s){const A=i.querySelector("video");A&&A.play()}else a&&Pe.get("player").get("paused").put(!1);return}let c;s||(c=n.path.split("/")),this.setState({activeFilePath:n.path,splitPath:c,isAudioOpen:a});let f,b;r?(f=!0,b=!1):(f=s&&this.state.settings.autoplayVideos,b=f);const m=i==null?void 0:i.querySelector(".player");if(m&&(m.innerHTML=""),a&&r&&this.playAudio(n.path),a||n.appendTo(m,{autoplay:f,muted:b}),s&&this.props.autopause){const A=i.querySelector("video"),I=R=>{R.forEach($=>{$.isIntersecting?f&&(A==null||A.play()):A==null||A.pause()})},C={rootMargin:"0px",threshold:[.25,.75]};this.observer=new IntersectionObserver(I,C),this.observer.observe(A)}const w=i.querySelector(".info");w&&(w.style.display=s?"none":"block");const _=i.querySelector("video, audio");_&&(_.addEventListener("ended",()=>{const A=_.tagName==="VIDEO"?dg:pg;this.openNextFile(A)}),_.onplay=_.onvolumechange=this.onPlay)}getNextIndex(n){const r=this.state.torrent.files,i=r.findIndex(a=>a.path===this.state.activeFilePath);let s=r.findIndex((a,c)=>c>i&&n(a));return s===-1&&(s=r.findIndex(a=>n(a))),s===-1&&(s=i),s}openNextFile(n){const r=this.getNextIndex(n);this.openFile(this.state.torrent.files[r],!0)}getActiveFile(n){const r=this.player;let i;return r&&r.torrentId===this.props.torrentId&&(i=n.files.find(s=>s.path===r.filePath)),i}onTorrent(n,r){if(console.log("onTorrent",this.props.torrentId,n),!this.coverRef.current)return;this.torrent=n;const i=setInterval(()=>{if(!n.files){console.log("no files found in torrent:",n);return}clearInterval(i);const s=n.files.find(m=>dg(m)),a=n.files.find(m=>pg(m)),c=n.files.find(m=>lw(m)),f=this.getActiveFile(n)||s||a||c||n.files[0];this.setState({torrent:n,cover:c}),f&&this.openFile(f,r);let b=n.files.find(m=>lw(m)&&(m.name.indexOf("cover")>-1||m.name.indexOf("poster")>-1));b=b||c,b&&b.appendTo(this.coverRef.current)},1e3)}showFilesClicked(n){n.preventDefault(),this.setState({showFiles:!this.state.showFiles})}openTorrentClicked(n){n.preventDefault(),this.startTorrenting(!0)}renderLoadingTorrent(){const n=this.state,r=n.torrent,i=n.player,s=i&&i.torrentId===this.props.torrentId&&!i.paused;let a="";return n.isAudioOpen&&(a=s?d("a",{href:"#",onClick:c=>this.pauseAudio(c),children:un.pause}):d("a",{href:"#",onClick:c=>this.playAudio(n.activeFilePath,c),children:un.play})),d(ut,{children:[n.torrenting&&!n.torrent?d("p",{children:"Loading attachment..."}):null,d("div",{className:"cover",ref:this.coverRef,style:n.isAudioOpen?{}:{display:"none"}}),d("div",{className:"info",children:n.splitPath?n.splitPath.map((c,f)=>f===n.splitPath.length-1?(n.isAudioOpen&&(c=c.split(".").slice(0,-1).join(".")),d("p",{children:d("b",{children:c})})):d("p",{children:c})):null}),n.hasNext?d("b",{children:"prev"}):null,d("div",{className:"player",children:a}),n.hasNext?d("b",{children:"next"}):null,this.props.standalone||this.props.preview?d(ut,{children:[d("a",{href:this.props.torrentId,children:"Magnet link"}),r&&r.files?d("a",{href:"",style:{marginLeft:"30px"},onClick:c=>this.showFilesClicked(c),children:de(n.showFiles?"hide_files":"show_files")}):null]}):d("a",{href:`/torrent/${encodeURIComponent(this.props.torrentId)}`,children:de("show_files")}),n.showFiles&&r&&r.files?d(ut,{children:[d("p",{children:[de("peers"),": ",r.numPeers]}),d("div",{className:"flex-table details",children:r.files.map(c=>d("div",{onClick:()=>this.openFile(c,!0),className:`flex-row ${n.activeFilePath===c.path?"active":""}`,children:[d("div",{className:"flex-cell",children:c.name}),d("div",{className:"flex-cell no-flex",children:Pt.formatBytes(c.length)})]},c.path))})]}):null]})}renderMeta(){const n=this.state,r=n.splitPath&&n.splitPath[n.splitPath.length-1].split(".").slice(0,-1).join(".")||"File sharing",i=`${r} | Iris`,s="Shared files",a=n.isAudioOpen?"music:song":"video.movie";return d(va,{children:[d("title",{children:r}),d("meta",{name:"description",content:s}),d("meta",{property:"og:type",content:a}),d("meta",{property:"og:title",content:i}),d("meta",{property:"og:description",content:s}),n.ogImageUrl?d("meta",{property:"og:image",content:n.ogImageUrl}):null]})}render(){return d("div",{className:"torrent",children:[this.props.standalone?this.renderMeta():null,!this.state.settings.enableWebtorrent&&!this.state.settings.torrenting&&!this.props.standalone?d("a",{href:"",onClick:n=>this.openTorrentClicked(n),children:de("show_attachment")}):this.renderLoadingTorrent()]})}}const cw=/\B@[\u00BF-\u1FFF\u2C00-\uD7FF\w]*$/;class t0 extends fn{constructor(){super(...arguments);xe(this,"newMsgRef",_a())}componentDidMount(){const n=Tt(this.newMsgRef.current);if((!Pt.isMobile||this.props.forceAutofocusMobile==!0)&&this.props.autofocus!==!1&&n.focus(),!this.props.replyingTo)Pe.get("channels").get("public").get("msgDraft").once(r=>!n.val()&&n.val(r));else{const r=window.history.state;r&&r["replyTo"+this.props.replyingTo]&&n.val(r["replyTo"+this.props.replyingTo])}}onMsgFormSubmit(n){n.preventDefault(),this.submit()}async submit(){this.props.replyingTo||Pe.get("channels").get("public").get("msgDraft").put(null);const n=Tt(this.newMsgRef.current),r=n.val();if(!r.length)return;const i={text:r};this.props.replyingTo&&(i.replyingTo=this.props.replyingTo),this.state.attachments&&(i.attachments=this.state.attachments),await this.sendNostr(i),this.props.onSubmit&&this.props.onSubmit(i),this.setState({attachments:void 0,torrentId:void 0}),n.val(""),n.height(""),this.saveDraftToHistory()}setTextareaHeight(n){n.style.height="",n.style.height=`${n.scrollHeight}px`}onMsgTextPaste(n){const r=(n.clipboardData||window.clipboardData).getData("text"),s=/(magnet:\?xt=urn:btih:.*)/gi.exec(r);console.log("magnet match",s),s&&this.setState({torrentId:s[0]})}onKeyUp(n){[37,38,39,40].indexOf(n.keyCode)!=-1&&this.checkMention(n)}onKeyDown(n){(n.metaKey||n.ctrlKey)&&n.key==="Enter"&&this.submit()}saveDraftToHistory(){const n=Tt(this.newMsgRef.current).val(),i={...window.history.state};i["replyTo"+this.props.replyingTo]=n,window.history.replaceState(i,"")}onMsgTextInput(n){this.setTextareaHeight(n.target),this.props.replyingTo||Pe.get("channels").get("public").get("msgDraft").put(Tt(n.target).val()),this.checkMention(n),this.saveDraftToHistory()}attachFileClicked(n){n.stopPropagation(),n.preventDefault(),Tt(this.base).find(".attachment-input").click()}attachmentsChanged(n){const r=n.target.files||n.dataTransfer.files;if(r){for(let i=0;i<r.length;i++){const s=new FormData;s.append("fileToUpload",r[i]);const a=this.state.attachments||[];a[i]=a[i]||{type:r[i].type},Pt.getBase64(r[i]).then(c=>{a[i].data=c,this.setState({attachments:a})}),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:s}).then(async c=>{const f=await c.json();if(console.log("upload response",f),f){a[i].url=f,this.setState({attachments:a});const b=Tt(this.newMsgRef.current),m=b.val();m?b.val(m+`

`+f):b.val(f)}}).catch(c=>{console.error("upload error",c),a[i].error="upload failed",this.setState({attachments:a})})}Tt(n.target).val(null),Tt(this.newMsgRef.current).focus()}}onSelectMention(n){const r=Tt(this.base).find("textarea").get(0),i=r.selectionStart,s=[r.value.slice(0,i).replace(cw,"nostr:"),n.key,r.value.slice(i)].join("");r.value=`${s} `,r.focus(),r.selectionStart=r.selectionEnd=i+n.key.length}render(){const n=this.props.placeholder||(this.props.index==="media"?"type_a_message_or_paste_a_magnet_link":"type_a_message");return Ct`<form
      autocomplete="off"
      class="message-form ${this.props.class||""} public"
      onSubmit=${r=>this.onMsgFormSubmit(r)}
    >
      <input
        name="attachment-input"
        type="file"
        class="hidden attachment-input"
        accept="image/*, video/*, audio/*"
        multiple
        onChange=${r=>this.attachmentsChanged(r)}
      />
      <textarea
        onDragOver=${r=>{r.preventDefault(),r.stopPropagation()}}
        onDrop=${r=>{r.preventDefault(),r.stopPropagation(),this.attachmentsChanged(r)}}
        onKeyUp=${r=>this.onKeyUp(r)}
        onKeyDown=${r=>this.onKeyDown(r)}
        onPaste=${r=>this.onMsgTextPaste(r)}
        onInput=${r=>this.onMsgTextInput(r)}
        onFocus=${()=>this.setState({focused:!0})}
        ref=${this.newMsgRef}
        class="new-msg"
        type="text"
        placeholder="${de(n)}"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="sentences"
        spellcheck="off"
      />
      ${this.state.mentioning?Ct`
            <${ak}
              resultsOnly=${!0}
              query=${this.state.mentioning}
              onSelect=${r=>this.onSelectMention(r)}
            />
          `:""}
      ${this.props.waitForFocus&&!this.state.focused?"":Ct`
            <div>
              <button
                type="button"
                class="attach-file-btn"
                onClick=${r=>this.attachFileClicked(r)}
              >
                ${un.attach}
              </button>
              <button type="submit">
                <span>${de("post")} </span>
                <${hu} width="24" style="margin-top:5px" />
              </button>
            </div>
          `}

      <div class="attachment-preview">
        ${this.state.torrentId?Ct`
              <${Su} preview=${!0} torrentId=${this.state.torrentId} />
            `:""}
        ${this.state.attachments&&this.state.attachments.length?Ct`
              <p>
                <a
                  href=""
                  onClick=${r=>{r.preventDefault(),this.setState({attachments:void 0})}}
                  >${de("remove_attachment")}</a
                >
              </p>
            `:""}
        ${this.state.attachments&&this.state.attachments.map(r=>{var s,a,c;const i=Ct` ${r.error?Ct`<span class="error">${r.error}</span>`:r.url||"uploading..."}`;return(s=r.type)!=null&&s.startsWith("audio")?Ct`
              ${i}
              <audio controls>
                <source src=${r.data} />
              </audio>
            `:(a=r.type)!=null&&a.startsWith("video")?Ct`
              ${i}
              <video controls loop=${!0} autoplay=${!0} muted=${!0}>
                <source src=${r.data} />
              </video>
            `:(c=r.type)!=null&&c.startsWith("image")?Ct`${i} <${js} src=${r.data} /> `:"unknown attachment type"})}
      </div>
    </form>`}async sendNostr(n){var a,c,f,b;const r={kind:1,content:n.text};if(n.replyingTo){const m=ye.toNostrHexAddress(n.replyingTo);if(!m)throw new Error("invalid replyingTo");const w=await new Promise(A=>{De.getEventById(m,!0,I=>A(I))});r.tags=w.tags.filter(A=>A[0]==="p");let _=(a=w.tags)==null?void 0:a.find(A=>A[0]==="e"&&A[3]==="root");_||(_=(c=w.tags)==null?void 0:c.find(A=>A[0]==="e")),_?(r.tags.unshift(["e",m,"","reply"]),r.tags.unshift(["e",_[1],"","root"])):r.tags.unshift(["e",m,"","root"]),(f=r.tags)!=null&&f.find(A=>A[0]==="p"&&A[1]===w.pubkey)||r.tags.push(["p",w.pubkey])}function i(m,w){var A,I;const _=[...n.text.matchAll(m)].map(C=>C[0]).filter((C,R,$)=>$.indexOf(C)===R);if(_){r.tags=r.tags||[];for(const C of _){const R=(A=C.match(/npub[a-zA-Z0-9]{59,60}/))==null?void 0:A[0],$=R&&ye.toNostrHexAddress(R);if(!$)continue;const L=[w,$,"","mention"];(I=r.tags)!=null&&I.find(P=>P[0]===L[0]&&P[1]===L[1])||r.tags.push(L)}}}i(Pt.pubKeyRegex,"p"),i(Pt.noteRegex,"e");const s=[...n.text.matchAll(Pt.hashtagRegex)].map(m=>m[0].slice(1));if(s.length){r.tags=r.tags||[];for(const m of s)(b=r.tags)!=null&&b.find(w=>w[0]==="t"&&w[1]===m)||r.tags.push(["t",m])}return console.log("sending event",r),De.publish(r)}checkMention(n){const i=n.target.value.slice(0,n.target.selectionStart).match(cw);if(i){const s=i[0].slice(1);ye.toNostrHexAddress(s)||this.setState({mentioning:s})}else this.state.mentioning&&this.setState({mentioning:void 0})}}const{bech32:ns,hex:Di,utf8:ZU}=K2,uw={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},fw={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},hw={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},dw={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Of=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],JU={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},XU=BigInt("2100000000000000000"),pw=BigInt(1e11),My={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},lk={};for(let e=0,t=Object.keys(My);e<t.length;e++){const n=t[e],r=My[t[e]].toString();lk[r]=n}const QU={1:e=>Di.encode(ns.fromWordsUnsafe(e)),16:e=>Di.encode(ns.fromWordsUnsafe(e)),13:e=>ZU.encode(ns.fromWordsUnsafe(e)),19:e=>Di.encode(ns.fromWordsUnsafe(e)),23:e=>Di.encode(ns.fromWordsUnsafe(e)),27:e=>Di.encode(ns.fromWordsUnsafe(e)),6:Dh,24:Dh,3:tj,5:nj};function ej(e){return t=>({tagCode:parseInt(e),words:ns.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function Dh(e){return e.reverse().reduce((t,n,r)=>t+n*Math.pow(32,r),0)}function tj(e){const t=[];let n,r,i,s,a,c=ns.fromWordsUnsafe(e);for(;c.length>0;)n=Di.encode(c.slice(0,33)),r=Di.encode(c.slice(33,41)),i=parseInt(Di.encode(c.slice(41,45)),16),s=parseInt(Di.encode(c.slice(45,49)),16),a=parseInt(Di.encode(c.slice(49,51)),16),c=c.slice(51),t.push({pubkey:n,short_channel_id:r,fee_base_msat:i,fee_proportional_millionths:s,cltv_expiry_delta:a});return t}function nj(e){const t=e.slice().reverse().map(i=>[!!(i&1),!!(i&2),!!(i&4),!!(i&8),!!(i&16)]).reduce((i,s)=>i.concat(s),[]);for(;t.length<Of.length*2;)t.push(!1);const n={};Of.forEach((i,s)=>{let a;t[s*2]?a="required":t[s*2+1]?a="supported":a="unsupported",n[i]=a});const r=t.slice(Of.length*2);return n.extra_bits={start_bit:Of.length*2,bits:r,has_required:r.reduce((i,s,a)=>a%2!==0?i||!1:i||s,!1)},n}function ck(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),s=n?i*pw/JU[n]:i*pw;if(n==="p"&&i%BigInt(10)!==BigInt(0)||s>XU)throw new Error("Amount is outside of valid range");return t?s.toString():s}function rj(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const n=[],r=ns.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const i=r.prefix;let s=r.words,a=e.slice(i.length+1),c=s.slice(-104);s=s.slice(0,-104);let f=i.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(f&&!f[2]&&(f=i.match(/^ln(\S+)$/)),!f)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const b=f[1];let m;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");m=t}else switch(b){case uw.bech32:m=uw;break;case fw.bech32:m=fw;break;case hw.bech32:m=hw;break;case dw.bech32:m=dw;break}if(!m||m.bech32!==b)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:b,value:m});const w=f[2];let _;if(w){const N=f[3];_=ck(w+N,!0),n.push({name:"amount",letters:f[2]+f[3],value:_})}else _=null;n.push({name:"separator",letters:"1"});const A=Dh(s.slice(0,7));s=s.slice(7),n.push({name:"timestamp",letters:a.slice(0,7),value:A}),a=a.slice(7);let I,C,R,$;for(;s.length>0;){const N=s[0].toString();I=lk[N]||"unknown_tag",C=QU[N]||ej(N),s=s.slice(1),R=Dh(s.slice(0,2)),s=s.slice(2),$=s.slice(0,R),s=s.slice(R),n.push({name:I,tag:a[0],letters:a.slice(0,1+2+R),value:C($)}),a=a.slice(1+2+R)}n.push({name:"signature",letters:a.slice(0,104),value:Di.encode(ns.fromWordsUnsafe(c))}),a=a.slice(104),n.push({name:"checksum",letters:a});let L={paymentRequest:e,sections:n,get expiry(){let N=n.find(M=>M.name==="expiry");if(N)return P("timestamp")+N.value},get route_hints(){return n.filter(N=>N.name==="route_hint").map(N=>N.value)}};for(let N in My)N!=="route_hint"&&Object.defineProperty(L,N,{get(){return P(N)}});return L;function P(N){let M=n.find(U=>U.name===N);return M?M.value:void 0}}var ij={decode:rj,hrpToMillisat:ck};let au;const sj={USD:"$",EUR:"",JPY:"",SATS:""};let vo="USD";const gw=navigator.language,oj=["de","fr","it","es","pt","el","nl","ga","fi","sv","et","lv","lt","sk","sl","mt","hu","pl","cs","bg","ro"];oj.some(e=>gw.startsWith(e))?vo="EUR":gw.startsWith("ja")&&(vo="JPY");const uk=()=>{fetch("https://api.kraken.com/0/public/Ticker?pair=XBT"+vo).then(e=>{if(e.ok)return e.json();throw new Error("Failed to fetch data from Kraken API")}).then(e=>{var t,n,r;au=parseFloat((r=(n=(t=e==null?void 0:e.result)==null?void 0:t["XXBTZ"+vo])==null?void 0:n.c)==null?void 0:r[0]),console.log("lastBitcoinPrice",au,vo)}).catch(e=>{console.error("Error:",e)})};Pe.get("displayCurrency").on(e=>{vo=e,uk()});setTimeout(()=>{au||uk()},1e3);function aj(e){var t,n,r;try{const i=ij.decode(e),s=i.sections.find(C=>C.name==="amount"),a=s?Number(s.value):void 0,c=i.sections.find(C=>C.name==="timestamp"),f=c?Number(c.value):void 0,b=i.sections.find(C=>C.name==="expiry"),m=b?Number(b.value):void 0,w=(t=i.sections.find(C=>C.name==="description"))==null?void 0:t.value,_=new Uint8Array((n=i.sections.find(C=>C.name==="description_hash"))==null?void 0:n.value),A=new Uint8Array((r=i.sections.find(C=>C.name==="payment_hash"))==null?void 0:r.value),I={amount:a,expire:f&&m?f+m:void 0,timestamp:f,description:w,descriptionHash:_?cr(_):void 0,paymentHash:A?cr(A):void 0,expired:!1};return I.expire&&(I.expired=I.expire<new Date().getTime()/1e3),I}catch(i){console.error(i)}}function lj(e){return typeof e!="number"?"":e<1e3?e.toString():e<1e6?(e/1e3).toFixed(2)+"K":e<1e9?(e/1e6).toFixed(2)+"M":(e/1e9).toFixed(2)+"B"}function cj(e){let t;e>=1||e>=.01?t=2:t=4;const n=Math.pow(10,t);return e=Math.round(e*n)/n,e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:t})}function uj(e){if(au&&vo!=="SATS"){const t=e/1e8*au,n=cj(t);return sj[vo]+" "+n}else return lj(e)}const fj="payRequest";var Dy=(e=>(e[e.ServiceUnavailable=1]="ServiceUnavailable",e[e.InvalidLNURL=2]="InvalidLNURL",e))(Dy||{});class ea extends Error{constructor(n,r){super(r);xe(this,"code");this.code=n}}var ho,Fr,ed,fk;class hj{constructor(t){Nn(this,ed);Nn(this,ho,void 0);Nn(this,Fr,void 0);if(t=t.toLowerCase().trim(),t.startsWith("lnurl")){const n=Pt.bech32ToText(t);if(!n.startsWith("http"))throw new ea(2,"Not a url");Xa(this,ho,new URL(n))}else if(t.match(/[\w.-]+@[\w.-]/)){const[n,r]=t.split("@");Xa(this,ho,new URL(`https://${r}/.well-known/lnurlp/${n}`))}else if(t.startsWith("https:"))Xa(this,ho,new URL(t));else if(t.startsWith("lnurlp:")){const n=new URL(t);n.protocol="https:",Xa(this,ho,n)}else throw new ea(2,"Could not determine service url")}async load(){const t=await fetch(bi(this,ho).toString());t.ok&&(Xa(this,Fr,await t.json()),qn(this,ed,fk).call(this))}async getInvoice(t,n,r){var f,b,m;const i=new URL(Pt.unwrap((f=bi(this,Fr))==null?void 0:f.callback)),s=new Map;i.search.length>0&&i.search.slice(1).split("&").forEach(w=>{const _=w.split("=");s.set(_[0],_[1])}),s.set("amount",Math.floor(t*1e3).toString()),n&&((b=bi(this,Fr))!=null&&b.commentAllowed)&&s.set("comment",n),(m=bi(this,Fr))!=null&&m.nostrPubkey&&r&&s.set("nostr",JSON.stringify(r));const a=`${i.protocol}//${i.host}${i.pathname}`,c=[...s.entries()].map(w=>`${w[0]}=${encodeURIComponent(w[1])}`).join("&");try{const w=await fetch(`${a}?${c}`);if(w.ok){const _=await w.json();if(console.debug("[LNURL]: ",_),_.status==="ERROR")throw new Error(_.reason);return _}else throw new ea(1,`Failed to fetch invoice (${w.statusText})`)}catch{throw new ea(1,"Failed to load callback")}}get canZap(){var t;return!!((t=bi(this,Fr))!=null&&t.nostrPubkey)}get zapperPubkey(){var t;return(t=bi(this,Fr))==null?void 0:t.nostrPubkey}get maxCommentLength(){var t;return((t=bi(this,Fr))==null?void 0:t.commentAllowed)??0}get min(){var t;return((t=bi(this,Fr))==null?void 0:t.minSendable)??1e3}get max(){var t;return((t=bi(this,Fr))==null?void 0:t.maxSendable)??1e11}}ho=new WeakMap,Fr=new WeakMap,ed=new WeakSet,fk=function(){var t,n;if(((t=bi(this,Fr))==null?void 0:t.tag)!==fj)throw new ea(2,"Only LNURLp is supported");if(!((n=bi(this,Fr))!=null&&n.callback))throw new ea(2,"No callback url")};var sl;(function(){function e(P){this.mode=b.MODE_8BIT_BYTE,this.data=P,this.parsedData=[];for(var N=[],M=0,U=this.data.length;U>M;M++){var p=this.data.charCodeAt(M);p>65536?(N[0]=240|(1835008&p)>>>18,N[1]=128|(258048&p)>>>12,N[2]=128|(4032&p)>>>6,N[3]=128|63&p):p>2048?(N[0]=224|(61440&p)>>>12,N[1]=128|(4032&p)>>>6,N[2]=128|63&p):p>128?(N[0]=192|(1984&p)>>>6,N[1]=128|63&p):N[0]=p,this.parsedData=this.parsedData.concat(N)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(P,N){this.typeNumber=P,this.errorCorrectLevel=N,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function n(P,N){if(P.length==null)throw new Error(P.length+"/"+N);for(var M=0;M<P.length&&P[M]==0;)M++;this.num=new Array(P.length-M+N);for(var U=0;U<P.length-M;U++)this.num[U]=P[U+M]}function r(P,N){this.totalCount=P,this.dataCount=N}function i(){this.buffer=[],this.length=0}function s(){return typeof CanvasRenderingContext2D<"u"}function a(){var P=!1,N=navigator.userAgent,M;return/android/i.test(N)&&(P=!0,M=N.toString().match(/android ([0-9]\.[0-9])/i),M&&M[1]&&(P=parseFloat(M[1]))),P}function c(P,N){for(var M=1,U=f(P),p=0,Z=C.length;Z>=p;p++){var J=0;switch(N){case m.L:J=C[p][0];break;case m.M:J=C[p][1];break;case m.Q:J=C[p][2];break;case m.H:J=C[p][3]}if(J>=U)break;M++}if(M>C.length)throw new Error("Too long data");return M}function f(P){var N=encodeURI(P).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return N.length+(N.length!=P?3:0)}e.prototype={getLength:function(){return this.parsedData.length},write:function(P){for(var N=0,M=this.parsedData.length;M>N;N++)P.put(this.parsedData[N],8)}},t.prototype={addData:function(P){var N=new e(P);this.dataList.push(N),this.dataCache=null},isDark:function(P,N){if(0>P||this.moduleCount<=P||0>N||this.moduleCount<=N)throw new Error(P+","+N);return this.modules[P][N]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(P,N){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var M=0;M<this.moduleCount;M++){this.modules[M]=new Array(this.moduleCount);for(var U=0;U<this.moduleCount;U++)this.modules[M][U]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(P,N),this.typeNumber>=7&&this.setupTypeNumber(P),this.dataCache==null&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,N)},setupPositionProbePattern:function(P,N){for(var M=-1;7>=M;M++)if(!(-1>=P+M||this.moduleCount<=P+M))for(var U=-1;7>=U;U++)-1>=N+U||this.moduleCount<=N+U||(this.modules[P+M][N+U]=M>=0&&6>=M&&(U==0||U==6)||U>=0&&6>=U&&(M==0||M==6)||M>=2&&4>=M&&U>=2&&4>=U)},getBestMaskPattern:function(){for(var P=0,N=0,M=0;8>M;M++){this.makeImpl(!0,M);var U=_.getLostPoint(this);(M==0||P>U)&&(P=U,N=M)}return N},createMovieClip:function(P,N,M){var U=P.createEmptyMovieClip(N,M),p=1;this.make();for(var Z=0;Z<this.modules.length;Z++)for(var J=Z*p,ce=0;ce<this.modules[Z].length;ce++){var me=ce*p,ke=this.modules[Z][ce];ke&&(U.beginFill(0,100),U.moveTo(me,J),U.lineTo(me+p,J),U.lineTo(me+p,J+p),U.lineTo(me,J+p),U.endFill())}return U},setupTimingPattern:function(){for(var P=8;P<this.moduleCount-8;P++)this.modules[P][6]==null&&(this.modules[P][6]=P%2==0);for(var N=8;N<this.moduleCount-8;N++)this.modules[6][N]==null&&(this.modules[6][N]=N%2==0)},setupPositionAdjustPattern:function(){for(var P=_.getPatternPosition(this.typeNumber),N=0;N<P.length;N++)for(var M=0;M<P.length;M++){var U=P[N],p=P[M];if(this.modules[U][p]==null)for(var Z=-2;2>=Z;Z++)for(var J=-2;2>=J;J++)this.modules[U+Z][p+J]=Z==-2||Z==2||J==-2||J==2||Z==0&&J==0}},setupTypeNumber:function(P){for(var N=_.getBCHTypeNumber(this.typeNumber),M=0;18>M;M++){var U=!P&&(1&N>>M)==1;this.modules[Math.floor(M/3)][M%3+this.moduleCount-8-3]=U}for(var M=0;18>M;M++){var U=!P&&(1&N>>M)==1;this.modules[M%3+this.moduleCount-8-3][Math.floor(M/3)]=U}},setupTypeInfo:function(P,N){for(var M=this.errorCorrectLevel<<3|N,U=_.getBCHTypeInfo(M),p=0;15>p;p++){var Z=!P&&(1&U>>p)==1;6>p?this.modules[p][8]=Z:8>p?this.modules[p+1][8]=Z:this.modules[this.moduleCount-15+p][8]=Z}for(var p=0;15>p;p++){var Z=!P&&(1&U>>p)==1;8>p?this.modules[8][this.moduleCount-p-1]=Z:9>p?this.modules[8][15-p-1+1]=Z:this.modules[8][15-p-1]=Z}this.modules[this.moduleCount-8][8]=!P},mapData:function(P,N){for(var M=-1,U=this.moduleCount-1,p=7,Z=0,J=this.moduleCount-1;J>0;J-=2)for(J==6&&J--;;){for(var ce=0;2>ce;ce++)if(this.modules[U][J-ce]==null){var me=!1;Z<P.length&&(me=(1&P[Z]>>>p)==1);var ke=_.getMask(N,U,J-ce);ke&&(me=!me),this.modules[U][J-ce]=me,p--,p==-1&&(Z++,p=7)}if(U+=M,0>U||this.moduleCount<=U){U-=M,M=-M;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(P,N,M){for(var U=r.getRSBlocks(P,N),p=new i,Z=0;Z<M.length;Z++){var J=M[Z];p.put(J.mode,4),p.put(J.getLength(),_.getLengthInBits(J.mode,P)),J.write(p)}for(var ce=0,Z=0;Z<U.length;Z++)ce+=U[Z].dataCount;if(p.getLengthInBits()>8*ce)throw new Error("code length overflow. ("+p.getLengthInBits()+">"+8*ce+")");for(p.getLengthInBits()+4<=8*ce&&p.put(0,4);p.getLengthInBits()%8!=0;)p.putBit(!1);for(;!(p.getLengthInBits()>=8*ce||(p.put(t.PAD0,8),p.getLengthInBits()>=8*ce));)p.put(t.PAD1,8);return t.createBytes(p,U)},t.createBytes=function(P,N){for(var M=0,U=0,p=0,Z=new Array(N.length),J=new Array(N.length),ce=0;ce<N.length;ce++){var me=N[ce].dataCount,ke=N[ce].totalCount-me;U=Math.max(U,me),p=Math.max(p,ke),Z[ce]=new Array(me);for(var we=0;we<Z[ce].length;we++)Z[ce][we]=255&P.buffer[we+M];M+=me;var Q=_.getErrorCorrectPolynomial(ke),G=new n(Z[ce],Q.getLength()-1),Ae=G.mod(Q);J[ce]=new Array(Q.getLength()-1);for(var we=0;we<J[ce].length;we++){var Te=we+Ae.getLength()-J[ce].length;J[ce][we]=Te>=0?Ae.get(Te):0}}for(var qe=0,we=0;we<N.length;we++)qe+=N[we].totalCount;for(var ze=new Array(qe),Qe=0,we=0;U>we;we++)for(var ce=0;ce<N.length;ce++)we<Z[ce].length&&(ze[Qe++]=Z[ce][we]);for(var we=0;p>we;we++)for(var ce=0;ce<N.length;ce++)we<J[ce].length&&(ze[Qe++]=J[ce][we]);return ze};for(var b={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},m={L:1,M:0,Q:3,H:2},w={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},_={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(P){for(var N=P<<10;_.getBCHDigit(N)-_.getBCHDigit(_.G15)>=0;)N^=_.G15<<_.getBCHDigit(N)-_.getBCHDigit(_.G15);return(P<<10|N)^_.G15_MASK},getBCHTypeNumber:function(P){for(var N=P<<12;_.getBCHDigit(N)-_.getBCHDigit(_.G18)>=0;)N^=_.G18<<_.getBCHDigit(N)-_.getBCHDigit(_.G18);return P<<12|N},getBCHDigit:function(P){for(var N=0;P!=0;)N++,P>>>=1;return N},getPatternPosition:function(P){return _.PATTERN_POSITION_TABLE[P-1]},getMask:function(P,N,M){switch(P){case w.PATTERN000:return(N+M)%2==0;case w.PATTERN001:return N%2==0;case w.PATTERN010:return M%3==0;case w.PATTERN011:return(N+M)%3==0;case w.PATTERN100:return(Math.floor(N/2)+Math.floor(M/3))%2==0;case w.PATTERN101:return N*M%2+N*M%3==0;case w.PATTERN110:return(N*M%2+N*M%3)%2==0;case w.PATTERN111:return(N*M%3+(N+M)%2)%2==0;default:throw new Error("bad maskPattern:"+P)}},getErrorCorrectPolynomial:function(P){for(var N=new n([1],0),M=0;P>M;M++)N=N.multiply(new n([1,A.gexp(M)],0));return N},getLengthInBits:function(P,N){if(N>=1&&10>N)switch(P){case b.MODE_NUMBER:return 10;case b.MODE_ALPHA_NUM:return 9;case b.MODE_8BIT_BYTE:return 8;case b.MODE_KANJI:return 8;default:throw new Error("mode:"+P)}else if(27>N)switch(P){case b.MODE_NUMBER:return 12;case b.MODE_ALPHA_NUM:return 11;case b.MODE_8BIT_BYTE:return 16;case b.MODE_KANJI:return 10;default:throw new Error("mode:"+P)}else{if(!(41>N))throw new Error("type:"+N);switch(P){case b.MODE_NUMBER:return 14;case b.MODE_ALPHA_NUM:return 13;case b.MODE_8BIT_BYTE:return 16;case b.MODE_KANJI:return 12;default:throw new Error("mode:"+P)}}},getLostPoint:function(P){for(var N=P.getModuleCount(),M=0,U=0;N>U;U++)for(var p=0;N>p;p++){for(var Z=0,J=P.isDark(U,p),ce=-1;1>=ce;ce++)if(!(0>U+ce||U+ce>=N))for(var me=-1;1>=me;me++)0>p+me||p+me>=N||(ce!=0||me!=0)&&J==P.isDark(U+ce,p+me)&&Z++;Z>5&&(M+=3+Z-5)}for(var U=0;N-1>U;U++)for(var p=0;N-1>p;p++){var ke=0;P.isDark(U,p)&&ke++,P.isDark(U+1,p)&&ke++,P.isDark(U,p+1)&&ke++,P.isDark(U+1,p+1)&&ke++,(ke==0||ke==4)&&(M+=3)}for(var U=0;N>U;U++)for(var p=0;N-6>p;p++)P.isDark(U,p)&&!P.isDark(U,p+1)&&P.isDark(U,p+2)&&P.isDark(U,p+3)&&P.isDark(U,p+4)&&!P.isDark(U,p+5)&&P.isDark(U,p+6)&&(M+=40);for(var p=0;N>p;p++)for(var U=0;N-6>U;U++)P.isDark(U,p)&&!P.isDark(U+1,p)&&P.isDark(U+2,p)&&P.isDark(U+3,p)&&P.isDark(U+4,p)&&!P.isDark(U+5,p)&&P.isDark(U+6,p)&&(M+=40);for(var we=0,p=0;N>p;p++)for(var U=0;N>U;U++)P.isDark(U,p)&&we++;var Q=Math.abs(100*we/N/N-50)/5;return M+=10*Q}},A={glog:function(P){if(1>P)throw new Error("glog("+P+")");return A.LOG_TABLE[P]},gexp:function(P){for(;0>P;)P+=255;for(;P>=256;)P-=255;return A.EXP_TABLE[P]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},I=0;8>I;I++)A.EXP_TABLE[I]=1<<I;for(var I=8;256>I;I++)A.EXP_TABLE[I]=A.EXP_TABLE[I-4]^A.EXP_TABLE[I-5]^A.EXP_TABLE[I-6]^A.EXP_TABLE[I-8];for(var I=0;255>I;I++)A.LOG_TABLE[A.EXP_TABLE[I]]=I;n.prototype={get:function(P){return this.num[P]},getLength:function(){return this.num.length},multiply:function(P){for(var N=new Array(this.getLength()+P.getLength()-1),M=0;M<this.getLength();M++)for(var U=0;U<P.getLength();U++)N[M+U]^=A.gexp(A.glog(this.get(M))+A.glog(P.get(U)));return new n(N,0)},mod:function(P){if(this.getLength()-P.getLength()<0)return this;for(var N=A.glog(this.get(0))-A.glog(P.get(0)),M=new Array(this.getLength()),U=0;U<this.getLength();U++)M[U]=this.get(U);for(var U=0;U<P.getLength();U++)M[U]^=A.gexp(A.glog(P.get(U))+N);return new n(M,0).mod(P)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(P,N){var M=r.getRsBlockTable(P,N);if(M==null)throw new Error("bad rs block @ typeNumber:"+P+"/errorCorrectLevel:"+N);for(var U=M.length/3,p=[],Z=0;U>Z;Z++)for(var J=M[3*Z+0],ce=M[3*Z+1],me=M[3*Z+2],ke=0;J>ke;ke++)p.push(new r(ce,me));return p},r.getRsBlockTable=function(P,N){switch(N){case m.L:return r.RS_BLOCK_TABLE[4*(P-1)+0];case m.M:return r.RS_BLOCK_TABLE[4*(P-1)+1];case m.Q:return r.RS_BLOCK_TABLE[4*(P-1)+2];case m.H:return r.RS_BLOCK_TABLE[4*(P-1)+3];default:return}},i.prototype={get:function(P){var N=Math.floor(P/8);return(1&this.buffer[N]>>>7-P%8)==1},put:function(P,N){for(var M=0;N>M;M++)this.putBit((1&P>>>N-M-1)==1)},getLengthInBits:function(){return this.length},putBit:function(P){var N=Math.floor(this.length/8);this.buffer.length<=N&&this.buffer.push(0),P&&(this.buffer[N]|=128>>>this.length%8),this.length++}};var C=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],R=function(){var P=function(N,M){this._el=N,this._htOption=M};return P.prototype.draw=function(N){function M(we,Q){var G=document.createElementNS("http://www.w3.org/2000/svg",we);for(var Ae in Q)Q.hasOwnProperty(Ae)&&G.setAttribute(Ae,Q[Ae]);return G}var U=this._htOption,p=this._el,Z=N.getModuleCount();Math.floor(U.width/Z),Math.floor(U.height/Z),this.clear();var J=M("svg",{viewBox:"0 0 "+String(Z)+" "+String(Z),width:"100%",height:"100%",fill:U.colorLight});J.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),p.appendChild(J),J.appendChild(M("rect",{fill:U.colorDark,width:"1",height:"1",id:"template"}));for(var ce=0;Z>ce;ce++)for(var me=0;Z>me;me++)if(N.isDark(ce,me)){var ke=M("use",{x:String(ce),y:String(me)});ke.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),J.appendChild(ke)}},P.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},P}(),$=document.documentElement.tagName.toLowerCase()==="svg",L=$?R:s()?function(){function P(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function N(Z,J){var ce=this;if(ce._fFail=J,ce._fSuccess=Z,ce._bSupportDataURI===null){var me=document.createElement("img"),ke=function(){ce._bSupportDataURI=!1,ce._fFail&&_fFail.call(ce)},we=function(){ce._bSupportDataURI=!0,ce._fSuccess&&ce._fSuccess.call(ce)};return me.onabort=ke,me.onerror=ke,me.onload=we,me.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}ce._bSupportDataURI===!0&&ce._fSuccess?ce._fSuccess.call(ce):ce._bSupportDataURI===!1&&ce._fFail&&ce._fFail.call(ce)}if(this&&this._android&&this._android<=2.1){var M=1/window.devicePixelRatio,U=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(Z,J,ce,me,ke,we,Q,G){if("nodeName"in Z&&/img/i.test(Z.nodeName))for(var Ae=arguments.length-1;Ae>=1;Ae--)arguments[Ae]=arguments[Ae]*M;else typeof G>"u"&&(arguments[1]*=M,arguments[2]*=M,arguments[3]*=M,arguments[4]*=M);U.apply(this,arguments)}}var p=function(Z,J){this._bIsPainted=!1,this._android=a(),this._htOption=J,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=J.width,this._elCanvas.height=J.height,Z.appendChild(this._elCanvas),this._el=Z,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return p.prototype.draw=function(Z){var J=this._elImage,ce=this._oContext,me=this._htOption,ke=Z.getModuleCount(),we=me.width/ke,Q=me.height/ke,G=Math.round(we),Ae=Math.round(Q);J.style.display="none",this.clear();for(var Te=0;ke>Te;Te++)for(var qe=0;ke>qe;qe++){var ze=Z.isDark(Te,qe),Qe=qe*we,nt=Te*Q;ce.strokeStyle=ze?me.colorDark:me.colorLight,ce.lineWidth=1,ce.fillStyle=ze?me.colorDark:me.colorLight,ce.fillRect(Qe,nt,we,Q),ce.strokeRect(Math.floor(Qe)+.5,Math.floor(nt)+.5,G,Ae),ce.strokeRect(Math.ceil(Qe)-.5,Math.ceil(nt)-.5,G,Ae)}this._bIsPainted=!0},p.prototype.makeImage=function(){this._bIsPainted&&N.call(this,P)},p.prototype.isPainted=function(){return this._bIsPainted},p.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},p.prototype.round=function(Z){return Z&&Math.floor(1e3*Z)/1e3},p}():function(){var P=function(N,M){this._el=N,this._htOption=M};return P.prototype.draw=function(N){for(var M=this._htOption,U=this._el,p=N.getModuleCount(),Z=Math.floor(M.width/p),J=Math.floor(M.height/p),ce=['<table style="border:0;border-collapse:collapse;">'],me=0;p>me;me++){ce.push("<tr>");for(var ke=0;p>ke;ke++)ce.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+Z+"px;height:"+J+"px;background-color:"+(N.isDark(me,ke)?M.colorDark:M.colorLight)+';"></td>');ce.push("</tr>")}ce.push("</table>"),U.innerHTML=ce.join("");var we=U.childNodes[0],Q=(M.width-we.offsetWidth)/2,G=(M.height-we.offsetHeight)/2;Q>0&&G>0&&(we.style.margin=G+"px "+Q+"px")},P.prototype.clear=function(){this._el.innerHTML=""},P}();sl=function(P,N){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:m.H},typeof N=="string"&&(N={text:N}),N)for(var M in N)this._htOption[M]=N[M];typeof P=="string"&&(P=document.getElementById(P)),this._android=a(),this._el=P,this._oQRCode=null,this._oDrawing=new L(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},sl.prototype.makeCode=function(P){this._oQRCode=new t(c(P,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(P),this._oQRCode.make(),this._el.title=P,this._oDrawing.draw(this._oQRCode),this.makeImage()},sl.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},sl.prototype.clear=function(){this._oDrawing.clear()},sl.CorrectLevel=m})();const yw=sl;function hk(e){const t=_a();return on(()=>{t.current&&new yw(t.current,{text:e.data,width:e.width||300,height:e.width||300,colorDark:"#000000",colorLight:"#ffffff",correctLevel:yw.CorrectLevel.H})},[e.data]),d("div",{style:"border: 5px solid white; display: inline-block;",ref:t})}function dj(e,t){const n=[];let r=0,i=e.length/t;for(;i>0;)n.push(e.slice(r,r+t)),r+=t,i-=1;return n}const pj=hn.span`
  color: var(--text-color);
  display: inline-block;
  cursor: pointer;
  padding: 10px;
  border-radius: 100px;
  margin: 5px;
  border: 1px solid transparent;
  background: var(--body-bg);
  &.active {
    background: var(--notify);
  }
`,gj=hn.div`
  background-color: var(--msg-content-background);
  border-radius: 8px;
  padding: 30px;
  width: 400px;
  color: var(--text-color);
  position: relative;
`,yj=hn.div`
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  color: var(--text-color);
`;function mj(e){const t=e.onClose||(()=>{}),{note:n,recipient:r}=e,i=1e3,s=[i,5e3,1e4,2e4,5e4,1e5,1e6],a={1e3:"",5e3:"",1e4:"",2e4:"",5e4:"",1e5:"",1e6:""},[c,f]=It(),[b,m]=It(e.invoice),[w,_]=It(i),[A,I]=It(),[C,R]=It(),[$,L]=It(),[P,N]=It(),[M,U]=It(1),[p,Z]=It(!1),[J,ce]=It(!1),me=c?J&&M!==4||c.maxCommentLength>0:!1;on(()=>{Pe.get("defaultZapAmount").on($e=>{const Me=parseInt($e);_(Me),I(Me),console.log("defaultZapAmount",Me)})}),on(()=>{e.show&&(N(void 0),_(i),R(void 0),U(1),m(void 0),L(void 0))},[e.show]),on(()=>{$&&!$.url&&setTimeout(()=>{t()},1e3)},[$]),on(()=>{if(e.lnurl&&e.show)try{const $e=new hj(e.lnurl);f($e),$e.load().then(()=>{ce($e.canZap)}).catch(Me=>Ae(Me,"ln url error"))}catch($e){$e instanceof Error&&N($e.message)}},[e.lnurl,e.show]);const ke=vl(()=>{if(c){const $e=c.min/1e3,Me=c.max/1e3;return s.filter(fe=>fe>=$e&&fe<=Me)}return[]},[c]),we=vl(()=>dj(ke,3),[ke]),Q=$e=>{N(void 0),_($e)};async function G(){if(!w||!c)return null;let $e;if(r&&M!==4){let Me={created_at:Math.floor(Date.now()/1e3),kind:9734,pubkey:ye.getPubKey(),content:C||"",tags:[["e",n],["p",r],["relays",...$n.relays.keys()]]};const fe=De.getEventHash(Me);Me.id=fe;const pt=await ye.sign(Me);Me={...Me,sig:pt},console.log("loadInvoice",Me),Me&&($e=Me)}try{const Me=await c.getInvoice(w,C,$e);Me.pr&&(m(Me.pr),await qe(Me))}catch(Me){Ae(Me,"invoice fail")}}function Ae($e,Me){if(console.error("lnurl error",$e),$e instanceof ea)switch($e.code){case Dy.ServiceUnavailable:{N("messages.LNURLFail");return}case Dy.InvalidLNURL:{N("messages.InvalidLNURL");return}}N(Me)}function Te(){if(!c)return null;const $e=c.min/1e3,Me=c.max/1e3;return d("div",{className:"custom-amount flex",children:[d("input",{type:"number",min:$e,max:Me,className:"f-grow mr10",placeholder:"Custom",value:A,onChange:fe=>I(parseInt(fe.target.value))}),d("button",{className:"secondary",type:"button",disabled:!A,onClick:()=>Q(A??0),children:"Confirm"})]})}async function qe($e){var Me;try{if(window.webln){Z(!0),await window.webln.enable();const fe=await((Me=window.webln)==null?void 0:Me.sendPayment(($e==null?void 0:$e.pr)??""));console.log(fe),L(($e==null?void 0:$e.successAction)??{})}}catch(fe){console.warn(fe),fe instanceof Error&&N(fe.toString())}finally{Z(!1)}}function ze($e,Me){return d("div",{className:"amounts",children:Me.map(fe=>d(pj,{className:$e===fe?"active":"",onClick:()=>Q(fe),children:[a[fe]&&d(ut,{children:[a[fe],""]}),Pt.formatAmount(fe,0)]},fe))})}function Qe(){return!c||b?null:d(ut,{children:[d("h3",{children:"Zap amount in sats"}),we.map($e=>ze(w,$e)),Te(),d("div",{className:"flex",children:me&&d("input",{type:"text",placeholder:"Comment",style:"margin-bottom: 10px;margin-top: 10px;width:100%;",maxLength:J&&M!==4?250:c.maxCommentLength,onChange:$e=>R($e.target.value)})}),(w??0)>0&&d("div",{style:"margin-top: 10px;",children:d(Zt,{width:"100%",onClick:()=>G(),children:["Send ",Pt.formatAmount(w,0)," sats"]})})]})}function nt(){return $||!b?null:d(ut,{children:d("div",{className:"invoice",children:[e.notice&&d("b",{className:"error",children:e.notice}),p?d("h4",{children:"Paying"}):"",d("div",{className:"actions",children:b&&d(ut,{children:[d(hk,{data:b,link:`lightning:${b}`}),d("div",{style:"margin-top: 15px",children:[d(Ur,{copyStr:b,text:"Copy invoice"}),d("a",{className:"button",href:`lightning:${b}`,children:"Open wallet"})]})]})})]})})}function Fe(){return $?d("div",{className:"success-action",children:[d("p",{className:"paid",children:($==null?void 0:$.description)??"Paid"}),$.url&&d("p",{children:d("a",{href:$.url,rel:"noreferrer",target:"_blank",children:$.url})})]}):null}const He=c!=null&&c.canZap?"Send zap to ":"Send sats to ";return e.show??!1?d(To,{centerVertically:!0,onClose:t,children:d(gj,{children:d("div",{className:"lnurl-tip",onClick:$e=>$e.stopPropagation(),children:[d(yj,{className:"close",onClick:t,children:d(V_,{width:20,height:20})}),d("div",{className:"lnurl-header",children:d("h2",{children:[e.title||He,d(kn,{pub:r||""})]})}),Qe(),P&&d("p",{className:"error",children:P}),nt(),Fe()]})})}):null}const vj=hn.div`
  display: flex;
  align-items: flex-end;
  flex-direction: row;
  text-align: right;
  font-size: 14px;
  color: var(--text-time);

  a {
    flex: 1;
  }

  .msg.quote &,
  .msg.standalone & {
    margin-bottom: 12px;
  }
`,Nf=hn.span`
  flex: 3;
  margin-left: 5px;
  cursor: pointer;
  min-width: 2em;
  text-align: left;
  user-select: none;
  white-space: nowrap;

  &:not(:last-of-type) {
    margin-right: 5px;
  }

  ${e=>e.active?"color: var(--text-color)":""};
`,bj=e=>{const[t,n]=It({reposts:0,reposted:!1,likes:0,zappers:null,totalZapped:"",liked:!1,repostedBy:new Set,likedBy:new Set,replyCount:0,showLikes:!1,showZaps:!1,showReposts:!1,showZapModal:!1,lightning:void 0}),r=e.event;on(()=>{if(r){const $=De.getRepliesAndReactions(r.id,(...P)=>w(...P)),L=rt.getProfile(r.pubkey,P=>{if(!P)return;const N=P.lud16||P.lud06;n(M=>({...M,lightning:N}))});return()=>{$(),L()}}},[r]);function i(){e.standalone?Tt(document).find("textarea").focus():Lt(`/${ye.toNostrBech32Address(e.event.id,"note")}`)}function s($){$.preventDefault(),$.stopPropagation(),c(!t.liked)}function a($){if($.preventDefault(),$.stopPropagation(),!t.reposted){const L=e.event.pubkey,P=ye.toNostrHexAddress(e.event.id);P&&De.publish({kind:6,tags:[["e",P,"","mention"],["p",L]],content:""})}}function c($=!0){if($){const L=e.event.pubkey,P=ye.toNostrHexAddress(e.event.id);P&&De.publish({kind:7,content:"+",tags:[["e",P],["p",L]]})}}function f($){console.log("toggle likes"),$.stopPropagation(),n(L=>({...L,showLikes:!t.showLikes,showZaps:!1,showReposts:!1}))}function b($){$.stopPropagation(),n(L=>({...L,showReposts:!t.showReposts,showZaps:!1,showLikes:!1}))}function m($){$.stopPropagation(),n(L=>({...L,showZaps:!t.showZaps,showReposts:!1,showLikes:!1}))}function w($,L,P,N,M){const U=ye.getPubKey(),p=$&&Array.from($).sort((me,ke)=>{const we=De.db.by("id",me),Q=De.db.by("id",ke);return(we==null?void 0:we.pubkey)===U&&(Q==null?void 0:Q.pubkey)!==U?-1:(we==null?void 0:we.pubkey)!==U&&(Q==null?void 0:Q.pubkey)===U?1:(we==null?void 0:we.pubkey)===(r==null?void 0:r.pubkey)&&(Q==null?void 0:Q.pubkey)!==(r==null?void 0:r.pubkey)?-1:(we==null?void 0:we.pubkey)!==(r==null?void 0:r.pubkey)&&(Q==null?void 0:Q.pubkey)===(r==null?void 0:r.pubkey)?1:(we==null?void 0:we.created_at)-(Q==null?void 0:Q.created_at)}),Z=Array.from(M==null?void 0:M.values()).map(me=>De.db.by("id",me)),J=Z.map(me=>De.getZappingUser(me.id)).filter(me=>me!==null),ce=Z.reduce((me,ke)=>{const we=ke==null?void 0:ke.tags.find(Ae=>Ae[0]==="bolt11")[1];if(!we)return console.log("Invalid zap, missing bolt11 tag"),me;const Q=aj(we),G=((Q==null?void 0:Q.amount)||0)/1e3;return me+Number(G)},0);e.setReplies(p),n(me=>({...me,reposts:N.size,reposted:N.has(U),likes:L.size,totalZapped:ce&&uj(ce),zappers:J,liked:L.has(U),likedBy:L,repostedBy:N,replyCount:P}))}function _(){return d("div",{className:"likes",children:Array.from(t.likedBy).map($=>{const L=ye.toNostrBech32Address($,"npub");return d(ti,{showTooltip:!0,onClick:()=>Lt(`/${L}`),str:L,width:32})})})}function A(){const $=t;return d(vj,{children:[d("a",{className:"msg-btn reply-btn",onClick:()=>i(),children:un.reply}),d(Nf,{children:$.replyCount||""}),e.settings.showReposts?d(ut,{children:[d("a",{className:`msg-btn repost-btn ${$.reposted?"reposted":""}`,onClick:L=>a(L),children:d(z_,{width:24})}),d(Nf,{active:$.showReposts,onClick:L=>b(L),children:$.reposts||""})]}):"",e.settings.showLikes?d(ut,{children:[d("a",{className:`msg-btn like-btn ${$.liked?"liked":""}`,onClick:L=>s(L),children:$.liked?d(Yy,{width:24}):d(H_,{width:24})}),d(Nf,{active:$.showLikes,onClick:L=>f(L),children:$.likes||""})]}):"",e.settings.showZaps&&t.lightning?d(ut,{children:[d("a",{onClick:L=>{L.preventDefault(),L.stopPropagation(),n(P=>({...P,showZapModal:!0}))},className:"msg-btn zap-btn",children:un.lightning}),d(Nf,{active:$.showZaps,onClick:L=>m(L),children:$.totalZapped||""})]}):""]})}function I(){return d(mj,{show:!0,lnurl:t.lightning,note:e.event.id,recipient:e.event.pubkey,onClose:()=>n($=>({...$,showZapModal:!1}))})}function C(){return d("div",{className:"likes",children:(t.zappers||[]).map($=>d(ti,{showTooltip:!0,onClick:()=>Lt(`/${$}`),str:$,width:32}))})}function R(){return d("div",{className:"likes",children:Array.from(t.repostedBy).map($=>{const L=ye.toNostrBech32Address($,"npub");return d(ti,{showTooltip:!0,onClick:()=>Lt(`/${L}`),str:L,width:32})})})}return d(ut,{children:[A(),t.showLikes&&_(),t.showZaps&&C(),t.showReposts&&R(),t.lightning&&t.showZapModal&&I()]})},wj=fu(bj),gg=500,yg=8;let By=!0,dk=!0,pk=!0,gk=!0;Pe.get("settings").on(e=>{By=e.loadReactions!==!1,dk=e.showLikes!==!1,pk=e.showZaps!==!1,gk=e.showReposts!==!1});const mw=({event:e,meta:t,asInlineQuote:n,isReply:r,isQuote:i,isQuoting:s,showReplies:a,showRepliedMsg:c,standalone:f,fullWidth:b})=>{var z,te,ie;const[m,w]=It(!1),[_,A]=It(!1),[I,C]=It([]),[R,$]=It(""),[L,P]=It("");a=a||0,!f&&a&&I.length&&(i=!0),t.replyingTo&&c&&(s=!0),c===void 0&&(c=f),b===void 0&&(b=!r&&!s&&!i&&!n),on(()=>{if(f)return rt.getProfile(e.pubkey,pe=>{P((pe==null?void 0:pe.display_name)||(pe==null?void 0:pe.name)||"")})});let N=e.content||"";t=t||{};const M=[],U=N.match(/(https?:\/\/[^\s]+)/g);U&&U.forEach(pe=>{let _e;try{_e=new URL(pe)}catch{console.log("invalid url",pe);return}_e.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&M.push({type:"image",data:`${_e.href}`})});const p=f&&((z=M==null?void 0:M.find(pe=>pe.type==="image"))==null?void 0:z.data),Z=((te=e.content)==null?void 0:te.length)===2&&Pt.isEmoji(e.content),ce=`"${N.length>128?`${N.slice(0,128)}...`:N}"`;N=N.length>gg&&!m&&!f?`${N.slice(0,gg)}...`:N;const me=N.split(`
`);N=me.length>yg&&!m&&!f?`${me.slice(0,yg).join(`
`)}...`:N,N=Pt.highlightEverything(N.trim(),e,{showMentionedMessages:!n,onImageClick:pe=>qe(pe)});const ke=new Date(e.created_at*1e3),we=ke.toLocaleString(window.navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Q=ke.toLocaleTimeString(window.navigator.language,{timeStyle:"short"});let G=De.getEventRoot(e);G||(G=t.replyingTo);let Ae=[];((ie=e.tags)==null?void 0:ie.some(pe=>pe[0]==="e"))&&(Ae=e==null?void 0:e.tags.filter(pe=>pe[0]==="p").map(pe=>pe[1])),Ae=[...new Set(Ae)];function qe(pe){pe.preventDefault(),A(!0)}function ze(pe){var _e,je;if(!f&&!["A","BUTTON","TEXTAREA","IMG","INPUT"].find(tt=>pe.target.closest(tt))&&!((_e=window.getSelection())!=null&&_e.toString())){if(pe.stopPropagation(),pe.kind===7){const tt=(je=pe.tags)==null?void 0:je.reverse().find(Je=>Je[0]==="e")[1];return Lt(`/${tt}`)}Qe()}}function Qe(){Lt(`/${ye.toNostrBech32Address(e.id,"note")}`)}function nt(){return n?null:d(W5,{id:e.id,event:e,onTranslate:$})}function Fe(){return d("small",{className:"msg-replying-to",children:[de("replying_to")+" ",Ae.slice(0,3).map(pe=>d("a",{href:`/${ye.toNostrBech32Address(pe,"npub")}`,children:["@",d(kn,{pub:pe,hideBadge:!0})," "]})),(Ae==null?void 0:Ae.length)>3?"...":""]})}function He(){const pe=`${L||"User"} on Iris`;return d(va,{titleTemplate:"%s",children:[d("title",{children:`${pe}: ${ce}`}),d("meta",{name:"description",content:ce}),d("meta",{property:"og:type",content:"article"}),p?d("meta",{property:"og:image",content:p}):null,d("meta",{property:"og:title",content:pe}),d("meta",{property:"og:description",content:ce})]})}function $e(){const pe=M==null?void 0:M.map(_e=>_e.data);return d(jM,{images:pe,onClose:()=>A(!1)})}function Me(){return d("div",{style:{flexBasis:"100%",marginBottom:"12px"},children:d("a",{href:`/${ye.toNostrBech32Address(G||"","note")}`,children:de("show_thread")})})}function fe(){return d(ki,{id:t.replyingTo,isQuote:!0,showReplies:0},e.id+t.replyingTo)}function pt(){var pe;return(M==null?void 0:M.length)>1||((pe=e.content)==null?void 0:pe.length)>gg||e.content.split(`
`).length>yg}function h(){return d("div",{className:"msg-identicon",children:[e.pubkey?d("a",{href:`/${e.pubkey}`,children:d(ti,{str:ye.toNostrBech32Address(e.pubkey,"npub"),width:40})}):"",i&&!f&&d("div",{className:"line"})||""]})}function v(){return d("div",{className:"msg-sender",children:[d("div",{className:"msg-sender-link",children:[b&&h(),d("a",{href:`/${ye.toNostrBech32Address(e.pubkey,"npub")}`,className:"msgSenderName",children:d(kn,{pub:e.pubkey})}),d("div",{className:"time",children:[" ",d("a",{href:`/${ye.toNostrBech32Address(e.id,"note")}`,className:"tooltip",children:[ke&&Pt.getRelativeTimeText(ke),d("span",{className:"tooltiptext",children:[" ",we," ",Q," "]})]})]})]}),nt()]})}function k(){const pe=["msg"];return f&&pe.push("standalone"),i&&pe.push("quote"),s&&pe.push("quoting"),n&&pe.push("inline-quote"),b&&pe.push("full-width"),pe.join(" ")}function T(){return I.slice(0,a).map(pe=>d(ki,{id:pe,isReply:!0,isQuoting:!f,showReplies:1},pe))}function O(){return d(t0,{waitForFocus:!0,autofocus:!f,replyingTo:e.id,placeholder:de("write_your_reply")})}return d(ut,{children:[t.replyingTo&&c&&fe(),d("div",{className:k(),onClick:pe=>ze(pe),children:d("div",{className:"msg-content",onClick:pe=>ze(pe),children:[!f&&!r&&!s&&G&&Me(),!b&&h(),d("div",{className:"msg-main",children:[v(),(Ae==null?void 0:Ae.length)&&!s&&Fe()||null,f&&He(),t.torrentId&&d(Su,{torrentId:t.torrentId,autopause:!f}),(N==null?void 0:N.length)>0&&d("div",{className:`text ${Z&&"emoji-only"}`,children:[N,R&&d("p",{children:d("i",{children:R})})]}),!n&&!f&&pt()&&d("a",{onClick:pe=>{pe.preventDefault(),w(!m)},children:de(`show_${m?"less":"more"}`)}),t.url&&d("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url}),!n&&By&&d(wj,{settings:{showLikes:dk,showZaps:pk,showReposts:gk},standalone:f,event:e,setReplies:pe=>C(pe)},e.id+"reactions"),i&&!By&&d("div",{style:{marginBottom:"15px"}}),f&&O()]})]})},e.id+"note"),_&&$e(),T()]})},_j=hn.div`
  display: flex;
  width: 100%;
  height: 100%;
`,xj=hn.div`
  flex: 1;
  max-width: 70%;
  display: flex;
  background: var(--main-color);
  justify-content: center;

  @media (max-width: 625px) {
    max-width: 100%;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
`,kj=hn.div`
  flex: 1;
  max-width: 30%;
  overflow-y: auto;
  background: var(--msg-content-background);

  @media (max-width: 625px) {
    display: none;
  }
`,Sj=({event:e,onClose:t,attachment:n})=>d(To,{width:"90%",height:"90%",centerVertically:!0,onClose:t,children:d(_j,{children:[d(xj,{children:n.type==="image"?d(js,{src:n.url}):d("video",{loop:!0,autoPlay:!0,src:n.url,controls:!0,poster:`https://imgproxy.iris.to/thumbnail/428/${n.url}`})}),d(kj,{children:d(ki,{id:e.id,standalone:!0,showReplies:1/0})})]})}),Ej=_M`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`;function Aj({attachment:e}){return e.type==="video"?d("div",{style:{position:"absolute",top:"8px",right:"8px"},children:un.video}):d(ut,{})}const Cj=hn.a`
  position: relative;
  aspect-ratio: 1;
  color: white;
  background-size: cover;
  background-position: center;
  background-color: #ccc;
  background-image: url(${e=>{var t;return((t=e.attachment)==null?void 0:t.type)==="video"?`https://imgproxy.iris.to/thumbnail/428/${e.attachment.url}`:`https://imgproxy.iris.to/insecure/rs:fill:428:428/plain/${e.attachment.url}`}});
  & .dropdown {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
  }
  & .dropbtn {
    padding-top: 0px;
    margin-top: -5px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5);
    color: white;
    user-select: none;
  }
  &:hover {
    opacity: 0.8;
  }

  & svg {
    filter: drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.8));
  }

  opacity: ${e=>e.fadeIn?0:1};
  animation: ${e=>e.fadeIn?Zm`
          ${Ej} 0.5s ease-in-out forwards
        `:"none"};
`;function Tj(e){var a;const[t,n]=It(-1);if(e.event.kind!==1){const c=De.getEventReplyingTo(e.event);return d(ki,{id:c,renderAs:"NoteImage"})}const r=[],i=(a=e.event.content)==null?void 0:a.match(/(https?:\/\/[^\s]+)/g);i&&i.forEach(c=>{let f;try{f=new URL(c)}catch{console.log("invalid url",c);return}f.pathname.toLowerCase().match(/\.(jpg|jpeg|gif|png|webp)$/)&&r.push({type:"image",url:f.href}),f.pathname.toLowerCase().match(/\.(mp4|mkv|avi|flv|wmv|mov|webm)$/)&&r.push({type:"video",url:f.href})});const s=(c,f)=>{window.innerWidth>625&&(c.preventDefault(),c.stopPropagation(),n(f))};return d(ut,{children:r.map((c,f)=>d(ut,{children:[d(Cj,{href:`/${ye.toNostrBech32Address(e.event.id,"note")}`,onClick:b=>s(b,f),attachment:c,fadeIn:e.fadeIn,children:d(Aj,{attachment:c})},e.event.id+f),t===f&&d(Sj,{attachment:c,onClose:()=>n(-1),event:e.event})]}))})}const Ij=fu(Tj);function vw(e){var i;const[t,n]=It([]),r=De.getRepostedEventId(e.event)||"";return on(()=>{if(e.notification){const s=De.getRepliesAndReactions(r,(a,c,f,b)=>{n(Array.from(b))});return()=>s()}},[e.notification,r]),d("div",{className:"msg",children:d("div",{className:"msg-content",style:{padding:"12px 0 0 0"},children:[d("div",{style:{display:"flex",alignItems:"center",flexBasis:"100%",marginLeft:"15px"},children:d("small",{className:"reposted",children:[d("i",{children:d(z_,{width:24})}),d("a",{href:`/${ye.toNostrBech32Address(e.event.pubkey,"npub")}`,children:d(kn,{pub:(i=e.event)==null?void 0:i.pubkey,hideBadge:!0})}),d("span",{style:{marginLeft:"5px"},children:[t.length>1&&`and ${t.length-1} others`," ",de("reposted")]})]})}),d(ki,{id:r,fullWidth:e.fullWidth},r+e.event.id)]})})}const $j=(e,t)=>{var r;const n=e.target;["A","BUTTON","TEXTAREA","IMG","INPUT"].find(i=>n.closest(i))||(r=window.getSelection())!=null&&r.toString()||(e.stopPropagation(),Lt(`/${ye.toNostrBech32Address(t,"note")}`))};function Pj(e){var m;const[t,n]=It([]),r=De.getEventReplyingTo(e.event),i=De.db.by("id",r),s=(i==null?void 0:i.pubkey)===ye.getPubKey(),a=(m=i==null?void 0:i.tags)==null?void 0:m.find(w=>w[0]==="p"&&w[1]===ye.getPubKey()),c=s?"zapped your note":a?"zapped a note where you were mentioned":"zapped a note";on(()=>r?De.getRepliesAndReactions(r,(w,_,A,I,C)=>{n(Array.from(C.values()))}):()=>null,[r]);let f=null;try{f=De.getZappingUser(e.event.id)}catch(w){return console.error("no zapping user found for event",e.event.id,w),""}const b=`/${f}`;return d("div",{className:"msg",children:d("div",{className:"msg-content",onClick:w=>$j(w,r||""),children:d("div",{style:{display:"flex",flex:1,"flex-direction":"column"},children:[d("div",{style:{display:"flex",alignItems:"center"},children:[d("i",{className:"zap-btn zapped",style:{marginRight:"15px"},children:un.lightning}),d("div",{children:[d("a",{href:b,style:{marginRight:"5px"},children:d(kn,{pub:f||""})}),t.length>1&&d("span",{children:[" and ",t.length-1," others "]}),c]})]}),d(ki,{id:r,fullWidth:!1},r+e.event.id)]})})})}const Oj=e=>{const[t,n]=It({sortedReplies:[]}),r=[],i=sh(),s=sh(!1),a=m=>{if(clearTimeout(i.current),s.current)return;t.retrieving&&n(A=>({...A,retrieving:!1}));const w=De.getNoteReplyingTo(m),_={npub:ye.toNostrBech32Address(m.pubkey,"npub"),noteId:ye.toNostrBech32Address(m.id,"note"),time:m.created_at*1e3,isMine:ye.getPubKey()===m.pubkey,attachments:[],replyingTo:w};n(A=>({...A,event:m,meta:_}))};on(()=>{if(!e.id){console.log("error: no id",e);return}s.current=!1,n(w=>({prevState:w,meta:{id:e.id}}));const m=ye.toNostrHexAddress(e.id);return i.current=setTimeout(()=>{n(w=>({...w,retrieving:!0}))},1e3),m&&De.getEventById(m,!0,w=>a(w)),()=>{r.forEach(w=>{w()}),s.current=!0}},[]),on(()=>{e.standalone&&!t.msg&&t.msg&&setTimeout(()=>{window.prerenderReady=!0},1e3)});const c=()=>e.asInlineQuote?null:d(W5,{id:e.id||"",event:t.event}),f=()=>{var _;let m="msg";return e.standalone&&(m+=" standalone"),(e.isQuote||e.showReplies&&((_=t.sortedReplies)==null?void 0:_.length))&&(m+=" quote"),m};return e.id?t.event?rt.blockedUsers.has(t.event.pubkey)?e.standalone||e.isQuote?d("div",{className:"msg",children:d("div",{className:"msg-content",children:d("p",{style:{display:"flex",alignItems:"center"},children:[d("i",{style:{marginRight:"15px"},children:un.newFollower}),d("span",{children:" Message from a blocked user"})]})})}):null:(()=>{var w,_,A;let m=mw;if(t.event.kind===1){const I=(_=(w=t.event)==null?void 0:w.tags)==null?void 0:_.findIndex(C=>C[0]==="e"&&C[3]==="mention");((A=t.event)==null?void 0:A.content)===`#[${I}]`&&(m=vw)}else m={1:mw,3:PM,6:vw,7:NM,9735:Pj}[t.event.kind];return e.renderAs==="NoteImage"&&(m=Ij),m?d(m,{className:f(),event:t.event,meta:t.meta,fullWidth:e.fullWidth,fadeIn:!e.feedOpenedAt||e.feedOpenedAt<t.event.created_at,...e},e.id):(console.error("unknown event kind",t.event),null)})():d("div",{className:f(),children:d("div",{className:`msg-content retrieving ${t.retrieving?"visible":""}`,style:{display:"flex",alignItems:"center"},children:[d("div",{className:"text",children:de("looking_up_message")}),d("div",{children:c()})]})},e.id):(console.error("no id on event",e),null)},ki=Oj,bw=/([\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]+)/gu,ww=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/p\/|damus\.io\/)+((?:@)?npub[a-zA-Z0-9]{59,60})(?![\w/])/gi,mg=/(?:^|\s|nostr:|(?:https?:\/\/[\w./]+)|iris\.to\/|snort\.social\/e\/|damus\.io\/)+((?:@)?note[a-zA-Z0-9]{59,60})(?![\w/])/gi,Nj=/\bnostr:(n(?:event|profile)1\w+)\b/g,_w=/(#\w+)/g;let Tn={};Pe.get("settings").on(e=>Tn=e);let yk={};Pe.get("settings").put({});Pe.get("existingIrisToAddress").on(e=>yk=e);const Rj=navigator.userAgent.toLowerCase(),Mj=Rj.indexOf(" electron/")>-1,Pt={wtClient:void 0,formatAmount(e,t=2){return typeof e!="number"?"":e<1e3?e.toFixed(t):e<1e6?(e/1e3).toFixed(t)+"K":e<1e9?(e/1e6).toFixed(t)+"M":(e/1e9).toFixed(t)+"B"},isStandalone(){return navigator.standalone||window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://iris.to")},capitalize(e){return e===void 0?"":e.charAt(0).toUpperCase()+e.slice(1)},isEmoji(e){return e.match(bw)!==null},async translateText(e){const n=await(await fetch("https://translate.iris.to/translate",{method:"POST",body:JSON.stringify({q:e,source:"auto",target:is.split("-")[0],format:"text"}),headers:{"Content-Type":"application/json"}})).json();return n==null?void 0:n.translatedText},handleLightningLinkClick(e){e.preventDefault();const t=e.target.closest("A").href;t.startsWith("lightning:")&&window.open(t,"_self")},highlightEverything(e,t,n={showMentionedMessages:!0}){let r=cn(e,bw,(s,a)=>d("span",{className:"emoji",children:s},s+a));return n.showMentionedMessages&&(r=cn(r,mg,(s,a)=>d(ki,{id:ye.toNostrHexAddress(s)||"",asInlineQuote:!0},s+a))),Tn.enableTwitter!==!1&&(r=cn(r,/(?:^|\s)(?:@)?(https?:\/\/twitter.com\/\w+\/status\/\d+\S*)(?![\w/])/g,(a,c)=>d("iframe",{style:{"max-width":"350px",height:"450px","background-color":"white",display:"block"},scrolling:"no",height:250,width:550,src:`https://twitframe.com/show?url=${encodeURIComponent(a)}`},a+c))),Tn.enableVideos!==!1&&(r=cn(r,/(https?:\/\/\S+\.(?:mp4|mkv|avi|flv|wmv|mov|webm))\b/gi,(a,c)=>d("video",{src:a,poster:`https://imgproxy.iris.to/thumbnail/428/${a}`,muted:!this.isMobile&&Tn.autoplayVideos!==!1,autoPlay:!this.isMobile&&Tn.autoplayVideos!==!1,playsInline:!0,controls:!0,loop:!0,onLoadedData:f=>{!this.isMobile&&Tn.autoplayVideos&&f.target.play()}},a+c))),Tn.enableAudio!==!1&&(r=cn(r,/(https?:\/\/\S+\.(?:mp3|wav|ogg|flac))\b/gi,(a,c)=>d("audio",{src:a,controls:!0,loop:!0},a+c))),Tn.enableYoutube!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))([\w-]{11})(?:\S+)?/g,(a,c)=>d("iframe",{width:"650",height:"400",src:`https://www.youtube.com/embed/${a}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableInstagram!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:instagram\.com\/)((?:p|reel)\/[\w-]{11})(?:\S+)?/g,(a,c)=>d("iframe",{class:"instagram",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://instagram.com/${a}/embed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableSoundCloud!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(soundcloud\.com\/(?!live)[a-zA-Z0-9-_]+\/[a-zA-Z0-9-_]+)(?:\?.*)?/g,(a,c)=>(console.log("match: "+a),console.log("match 0: "+a[0]),console.log("match 1: "+a[1]),console.log("match 2: "+a[2]),d("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://w.soundcloud.com/player/?url=${a}`,frameBorder:"0",allow:"encrypted-media"},a+c)))),Tn.enableSpotify!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/track\/)([\w-]+)(?:\S+)?/g,(a,c)=>d("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/track/${a}?utm_source=oembed`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableSpotify!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/episode\/)([\w-]+)(?:\S+)?(?:t=(\d+))?/g,(a,c)=>d("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/episode/${a}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableSpotify!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/album\/)([\w-]+)(?:\S+)?/g,(a,c)=>d("iframe",{class:"audio",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/album/${a}`,frameBorder:"0",allow:"encrypted-media"},a+c))),Tn.enableSpotify!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:open\.spotify\.com\/playlist\/)([\w-]+)(?:\S+)?/g,(a,c)=>d("iframe",{class:"audio",scrolling:"no",width:"650",height:"380",style:{maxWidth:"100%"},src:`https://open.spotify.com/embed/playlist/${a}`,frameBorder:"0",allow:"encrypted-media"},a+c))),Tn.enableAppleMusic!==!1&&(r=cn(r,/(?:https?:\/\/)(?:.*?)(music\.apple\.com\/.*)/gi,(a,c)=>d("iframe",{class:"applemusic",scrolling:"no",width:"650",height:"150",style:{maxWidth:"100%"},src:`https://embed.music.apple.com/${a}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableAppleMusic!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(podcasts\.apple\.com\/.*)/g,(a,c)=>{console.log("embed url: "+a);const f=a.includes("?i=")?"applepodcast-small":"applepodcast-large";return d("iframe",{class:f,scrolling:"no",width:"650",height:"175",style:{maxWidth:"100%"},src:`https://embed.${a}`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c)})),Tn.enableTidal!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:tidal\.com(?:\/browse)?\/track\/)([\d]+)?/g,(a,c)=>d("iframe",{class:"audio",scrolling:"no",width:"650",height:"200",style:{maxWidth:"100%"},src:`https://embed.tidal.com/tracks/${a}?layout=gridify`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableTiktok!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?tiktok\.com\/.*?video\/(\d{1,19})/g,(a,c)=>d("iframe",{class:"tiktok",width:"605",height:"400",style:{maxWidth:"100%"},src:`https://www.tiktok.com/embed/v2/${a}`,frameBorder:"1",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableTwitch!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/videos\/)([\d]+)?/g,(a,c)=>d("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?video=${a}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableTwitch!==!1&&(r=cn(r,/(?:https?:\/\/)?(?:www\.)?(?:twitch\.tv\/)([\w-]+)?/g,(a,c)=>d("iframe",{class:"video",scrolling:"no",width:"650",height:"400",style:{maxWidth:"100%"},src:`https://player.twitch.tv/?channel=${a}&parent=${window.location.hostname}&autoplay=false`,frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0},a+c))),Tn.enableWavlake!==!1&&(r=cn(r,/https:\/\/(?:player\.)?wavlake\.com\/(?!feed\/|artists)(track\/[.a-zA-Z0-9-]+|album\/[.a-zA-Z0-9-]+|[.a-zA-Z0-9-]+)/i,(a,c)=>d("iframe",{height:"380",width:"100%",style:{maxWidth:"100%"},src:`https://embed.wavlake.com/${a}`,frameBorder:"0",loading:"lazy"},a+c))),Tn.enableTorrent!==!1&&(r=cn(r,/(magnet:\?xt=urn:btih:.*)/gi,(a,c)=>(console.log("magnet link",a),d(Su,{preview:!0,torrentId:a},a+c)))),Tn.enableImages!==!1&&(r=cn(r,/(https?:\/\/[^\s]*\.(?:jpg|jpeg|gif|png|webp))/gi,(a,c)=>d("div",{className:"img-container",children:d(js,{onClick:n.onImageClick,width:569,src:a},a+c)}))),r=this.highlightText(r,t,n),r=cn(r,/(lightning:[\w.-]+@[\w.-]+|lightning:\w+\?amount=\d+|(?:lightning:)?(?:lnurl|lnbc)[\da-z0-9]+)/gi,s=>(s.startsWith("lightning:")||(s=`lightning:${s}`),d("a",{href:s,onClick:a=>this.handleLightningLinkClick(a),children:" Pay with lightning"}))),r},isMobile:function(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||""),e}(),highlightText(e,t,n={}){return e=cn(e,ww,(r,i)=>{r=r.replace(/@/g,"");const s=`/${r}`;return d(ut,{children:[" ",d("a",{href:s,children:["@",d(kn,{pub:r,hideBadge:!0},r+i)]})]})}),e=cn(e,Nj,(r,i)=>{try{const{type:s,data:a}=vh.decode(r);if(s==="nprofile")return d(ut,{children:[" ",d("a",{href:`/${a.pubkey}`,children:["@",d(kn,{pub:a.pubkey,hideBadge:!0},r+i)]})]});if(s==="nevent")return d(ki,{id:a.id,asInlineQuote:!0},r+i)}catch(s){return console.log(s),r}}),e=cn(e,mg,r=>{r=r.replace(/@/g,"");const i=`/${r}`;return d(ut,{children:[" ",d("a",{href:i,children:r})]})}),e=cn(e,/((?:https?:\/\/\S*[^.?,)\s])|(?:iris\.to\/\S*[^.?,)\s]))/gi,(r,i)=>{const s=r.replace(/^(https:\/\/)?iris.to/,""),a=s!==r;return d("a",{target:"_blank",onClick:c=>{a&&(c.preventDefault(),Lt(s))},href:s,children:r.replace(/^https?:\/\//,"").replace(/\/$/,"")},r+i)}),t!=null&&t.tags&&(e=cn(e,/#\[(\d+)\]/g,(r,i)=>{const s=t.tags[parseInt(r,10)];if(s){const a=s[1].replace("@","");if(s[0]==="p"){const c=`/${ye.toNostrBech32Address(a,"npub")}`;return d("a",{href:c,children:["@",d(kn,{pub:a,hideBadge:!0},a+i)]})}else if(s[0]==="e")return n.showMentionedMessages?d(ki,{id:a,asInlineQuote:!0},a+i):d("a",{href:`/${ye.toNostrBech32Address(a,"note")}`,children:s[1]})}return r})),e=cn(e,_w,r=>d("a",{href:`/search/${encodeURIComponent(r)}`,children:r})),e},copyToClipboard(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e),!0;if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return console.warn("Copy to clipboard failed.",n),!1}finally{document.body.removeChild(t)}}return!1},showConsoleWarning(){const e="Stop!",t=`This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a feature or "hack" someone's account, it is a scam and will give them access to your account.`;if(window.chrome||window.safari){const n="font-family:helvetica; font-size:20px; ";[[e,`${n}font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;`],[t,n],["",""]].map(r=>{setTimeout(console.log.bind(console,`
%c${r[0]}`,r[1]))})}},formatTime(e){const t=e.toLocaleTimeString(void 0,{timeStyle:"short"}),n=t.split(":");return n.length===3?`${n[0]}:${n[1]}${n[2].slice(2)}`:t},formatDate(e){const t=e.toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),n=t.split(":");return n.length===3?`${n[0]}:${n[1]}${n[2].slice(2)}`:t},getUrlParameter(e){return new URLSearchParams(window.location.search).get(e)},getDaySeparatorText(e,t,n,r){if(n||(n=new Date,r=n.toLocaleDateString(void 0,{dateStyle:"short"})),t===r)return"today";const i=Math.round((n.getTime()-e.getTime())/(1e3*60*60*24));return i===0?"today":i===1?"yesterday":i<=5?e.toLocaleDateString(void 0,{weekday:"long"}):t},unwrap(e){if(e==null)throw new Error("missing value");return e},bech32ToText(e){try{const t=zg.decode(e,1e3),n=zg.fromWords(t.words);return new TextDecoder().decode(Uint8Array.from(n))}catch(t){return console.error("bech32ToText failed",t),""}},getRelativeTimeText(e){const t=new Date,n=Math.floor((t.getTime()-e.getTime())/1e3),r=60,i=60*r,s=24*i;return n<r?de("now"):n<i?Math.floor(n/r)+"m":n<s?Math.floor(n/i)+"h":e.getFullYear()===t.getFullYear()?e.toLocaleDateString(void 0,{month:"short",day:"numeric"}):e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})},formatBytes(e,t=2){if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(n));return`${parseFloat((e/Math.pow(n,s)).toFixed(r))} ${i[s]}`},download(e,t,n,r,i){r===null&&(r="utf-8");const s=document.createElement("a");s.href=i||`data:${n};charset=${r},${encodeURI(t)}`,s.target="_blank",s.download=e,s.click()},getBase64(e){const t=new FileReader;return t.readAsDataURL(e),new Promise((n,r)=>{t.onload=function(){n(t.result)},t.onerror=function(i){r(`Error: ${i}`)}})},scrollToMessageListBottom:Cm(()=>{Tt("#message-view")[0]&&Tt("#message-view").scrollTop(Tt("#message-view")[0].scrollHeight-Tt("#message-view")[0].clientHeight)},100),animateScrollTop:e=>{const t=Tt(e);t.css({overflow:"hidden"}),setTimeout(()=>{t.css({overflow:""}),t.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchstart",n=>{(n.which&&n.which>0||n.type==="mousedown"||n.type==="mousewheel"||n.type==="touchstart")&&t.stop(!0)}),t.stop().animate({scrollTop:0},{duration:400,queue:!1,always:()=>{t.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchstart")}})},10)},getMyProfileLink(){const e=yk.name||ye.toNostrBech32Address(ye.getPubKey(),"npub");return`${window.location.origin}/${e}`},arrayToHex(e){return Array.from(e,t=>("0"+(t&255).toString(16)).slice(-2)).join("")},isElectron:Mj,pubKeyRegex:ww,noteRegex:mg,hashtagRegex:_w},ye={key:void 0,windowNostrQueue:[],isProcessingQueue:!1,getPublicKey:mh,loginAsNewUser(e=!1){this.login(this.generateKey(),e)},login(e,t=!1){const n=!!this.key;this.key=e,localStorage.setItem("iris.myKey",JSON.stringify(e)),n&&location.reload(),Pe.get("loggedIn").put(!0),Pe.get("lastOpenedFeed").put("following"),t&&setTimeout(()=>{Lt("/following")}),Pe.get("showLoginModal").put(!1)},generateKey(){const e=B$();return{priv:e,rpub:mh(e)}},getOrCreate(e){let t=localStorage.getItem("iris.myKey");return t||(t=localStorage.getItem("chatKeyPair")),t?(this.key=JSON.parse(t),this.key.secp256k1&&(this.key=this.key.secp256k1,localStorage.setItem("iris.myKey",JSON.stringify(this.key))),console.log("loaded key from localStorage",this.key),Pe.get("loggedIn").put(!0),!0):e.autologin!==!1?(this.key=this.generateKey(),Pe.get("loggedIn").put(!0),!0):!1},getPubKey(){var e;return(e=this.key)==null?void 0:e.rpub},getPrivKey(){var e;return(e=this.key)==null?void 0:e.priv},encrypt:async function(e,t){const n=this.key;return t=t||n.rpub||"",n.priv?jg.encrypt(n.priv,t,e):window.nostr?new Promise(r=>{this.processWindowNostr({op:"encrypt",data:e,pub:t,callback:r})}):Promise.reject("no private key")},decrypt:async function(e,t){const n=this.key;return t=t||n.rpub||"",n.priv?jg.decrypt(n.priv,t,e):window.nostr?new Promise(r=>{this.processWindowNostr({op:"decrypt",data:e,pub:t,callback:r})}):Promise.reject("no private key")},sign:async function(e){const t=this.getPrivKey();return t?q$(e,t):window.nostr?new Promise(n=>{this.processWindowNostr({op:"sign",data:e,callback:n})}):Promise.reject("no private key")},processWindowNostr(e){this.windowNostrQueue.push(e),this.isProcessingQueue||this.processWindowNostrQueue()},async processWindowNostrQueue(){if(!this.windowNostrQueue.length){this.isProcessingQueue=!1;return}this.isProcessingQueue=!0;const{op:e,data:t,pub:n,callback:r}=this.windowNostrQueue[0];let i=Promise.resolve();e==="decrypt"?i=this.handlePromise(window.nostr.nip04.decrypt(n,t),r):e==="encrypt"?i=this.handlePromise(window.nostr.nip04.encrypt(n,t),r):e==="sign"&&(i=this.handlePromise(window.nostr.signEvent(t),s=>r(s&&s.sig))),await i,this.windowNostrQueue.shift(),this.processWindowNostrQueue()},handlePromise(e,t){return e.then(n=>{t(n)}).catch(n=>{console.error(n),t(null)})},async decryptMessage(e,t){var r;const n=De.decryptedMessages.get(e);if(n){t(n);return}try{const i=this.getPubKey(),s=De.db.by("id",e),a=s.pubkey===i?(r=s.tags)==null?void 0:r.find(f=>f[0]==="p")[1]:s.pubkey;if(!(s&&a))return;let c=await this.decrypt(s.content,a);c.content&&(c=c.content),De.decryptedMessages.set(e,c),t(c)}catch(i){console.error(i)}},async getPubKeyByNip05Address(e){try{const[t,n]=e.split("@"),r=`https://${n}/.well-known/nostr.json?name=${t}`;return(await(await fetch(r)).json()).names[t]||null}catch(t){return console.error(t),null}},async verifyNip05Address(e,t){try{const[n,r]=e.split("@"),i=`https://${r}/.well-known/nostr.json?name=${n}`,c=(await(await fetch(i)).json()).names;return c[n]===t||c[n.toLowerCase()]===t}catch{return!1}},toNostrBech32Address:function(e,t){if(!e)return null;if(!t)throw new Error("prefix is required");try{const r=Og(e);return t!==r.prefix?null:C1(t,r.data)}catch{}const n=e.match(/^[0-9a-fA-F]{64}$/);if(n!==null){const r=n[0].match(/.{1,2}/g);if(r!==null){const i=new Uint8Array(r.map(s=>parseInt(s,16)));return C1(t,i)}}return null},toNostrHexAddress(e){if(e.match(/^[0-9a-fA-F]{64}$/))return e;try{const{data:t}=Og(e);return Pt.arrayToHex(t)}catch{}return null}};class Dj extends fn{constructor(){super(),this.state={unseenMsgsTotal:0,activeRoute:"/"}}componentDidMount(){Pe.get("unseenMsgsTotal").on(this.inject()),Pe.get("activeRoute").on(this.sub(t=>{const n=t.replace("/chat/new","").replace("/chat/",""),r=n.length<t.length?n:null;this.setState({activeRoute:t,chatId:r})}))}handleFeedClick(t){t.preventDefault(),t.stopPropagation(),Pe.get("lastOpenedFeed").once(n=>{n!==this.state.activeRoute.replace("/","")?Lt("/"+(n||"")):(Pe.get("lastOpenedFeed").put(""),Lt("/"))})}render(){const t=ye.toNostrBech32Address(ye.getPubKey(),"npub");if(!t)return;const n=this.state.activeRoute;return this.state.chatId?"":d("footer",{class:"visible-xs-flex nav footer",children:d("div",{class:"header-content",onClick:()=>Pe.get("scrollUp").put(!0),children:[d("a",{href:"/",onClick:r=>this.handleFeedClick(r),class:`btn ${n==="/"?"active":""}`,children:n==="/"?d(K_,{width:24}):d(q_,{width:24})}),d("a",{href:"/chat",className:`btn ${n.indexOf("/chat")===0?"active":""}`,children:[this.state.unseenMsgsTotal?d("span",{className:"unseen unseen-total",children:this.state.unseenMsgsTotal}):"",n.indexOf("/chat")===0?d(W_,{width:24}):d(hu,{width:24})]}),d("a",{href:"/post/new",class:`btn ${n==="/post/new"?"active":""}`,children:n==="/post/new"?d(ZI,{width:24}):d(OI,{width:24})}),d("a",{href:`/${t}`,class:`${n===`/${t}`?"active":""} my-profile`,children:d(ti,{str:t,width:34})})]})})}}const Bj=(e,t)=>t.indexOf(e.slice(-4))!==-1,xw=e=>Bj(e.name,[".jpg","jpeg",".gif",".png"]);class Lj extends Er{constructor(){super(...arguments);xe(this,"torrentId");xe(this,"filePath");xe(this,"torrent")}componentDidMount(){Pe.get("player").on(n=>{const r=n&&n.torrentId,i=n&&n.filePath;r!==this.torrentId?(this.filePath=i,this.torrentId=r,this.setState({torrentId:r,isOpen:!!n,splitPath:i&&i.split("/")}),r&&this.startTorrenting()):i&&i!==this.filePath&&(this.filePath=i,this.setState({splitPath:i&&i.split("/")}),this.openFile())}),Pe.get("player").get("paused").on(n=>this.setPaused(n))}setPaused(n){const i=this.base.querySelector("audio");i&&(n?i.pause():i.play())}onTorrent(n){this.torrent=n;const r=n.files.find(c=>xw(c));let i=n.files.find(c=>xw(c)&&(c.name.indexOf("cover")>-1||c.name.indexOf("poster")>-1));i=i||r;const a=this.base.querySelector(".cover");a.innerHTML="",i&&a.appendChild(i.appendTo()),this.setState({isOpen:!0}),this.openFile()}openFile(){if(this.torrent){const n=this.torrent.files.find(a=>a.path===this.filePath),i=this.base.querySelector(".player");i.innerHTML="",n&&i.appendChild(n.appendTo({autoplay:!0,muted:!1}));const s=i.querySelector("audio");s&&(s.onpause=s.onplay=a=>{const c=a.target;Pe.get("player").get("paused").put(!!c.paused)})}}async startTorrenting(){const{default:n}=await jm(()=>import("./index-305001f9.js").then(s=>s.i),[]),r=new n,i=r.get(this.torrentId);i?this.onTorrent(i):r.add(this.torrentId,(s,a)=>this.onTorrent(a))}closeClicked(){this.setPaused(!0),Pe.get("player").put(null)}render(){const n=this.state;return d(ut,{children:d("div",{className:"media-player",style:{display:n.isOpen?"":"none"},children:[d("div",{className:"player"}),d("div",{className:"cover"}),d("a",{href:`/torrent/${encodeURIComponent(this.state.torrentId??"")}`,className:"info",children:n.splitPath?n.splitPath.map((r,i)=>{var s;return i===(((s=n.splitPath)==null?void 0:s.length)||0)-1?(r=r.split(".").slice(0,-1).join("."),d("p",{children:d("b",{children:r})})):d("p",{children:r})}):""}),d("div",{className:"close",onClick:()=>this.closeClicked(),children:un.close})]})})}}const mk="/assets/icon128-e988831c.png",n0=e=>{const t=`https://iris.to/${ye.toNostrBech32Address(e.pub,"npub")}`;return d(To,{centerVertically:!0,showContainer:!0,onClose:e.onClose,children:d("div",{style:{textAlign:"center",flex:1},children:[d(hk,{data:t}),d("p",{children:d(kn,{pub:e.pub})})]})})},Fj=[{url:"/",text:"home",icon:q_,activeIcon:K_},{url:"/chat",text:"messages",icon:hu,activeIcon:W_},{url:"/settings",text:"settings",icon:wI,activeIcon:LI},{url:"/about",text:"about",icon:CI,activeIcon:KI}];class Uj extends fn{constructor(){super(...arguments);xe(this,"state",{unseenMsgsTotal:0,activeRoute:"",showBetaFeatures:!1,showNewPostModal:!1,showQrModal:!1});xe(this,"menuLinkClicked",(n,r,i=!1)=>{((r==null?void 0:r.text)==="home"||i)&&this.openFeedClicked(n),Pe.get("toggleMenu").put(!1),Pe.get("scrollUp").put(!0)});xe(this,"openFeedClicked",n=>{n.preventDefault(),n.stopPropagation(),Pe.get("lastOpenedFeed").once(r=>{r!==this.state.activeRoute.replace("/","")?Lt("/"+(r||"")):(Pe.get("lastOpenedFeed").put(""),Lt("/"))})});xe(this,"renderNewPostModal",()=>this.state.showNewPostModal?d(To,{centerVertically:!0,showContainer:!0,onClose:()=>this.setState({showNewPostModal:!1}),children:d(t0,{onSubmit:()=>this.setState({showNewPostModal:!1}),placeholder:de("whats_on_your_mind"),autofocus:!0})}):"");xe(this,"renderQrModal",()=>this.state.showQrModal?d(n0,{pub:ye.getPubKey(),onClose:()=>this.setState({showQrModal:!1})}):"")}componentDidMount(){Pe.get("unseenMsgsTotal").on(this.inject()),Pe.get("activeRoute").on(this.inject())}render(){return d("div",{class:"application-list",children:[d("a",{tabIndex:3,href:"/",onClick:n=>this.menuLinkClicked(n,void 0,!0),class:"logo",children:[d("img",{src:mk,width:"30",height:"30"}),d("span",{style:"font-size: 1.8em",children:"iris"})]}),Fj.map(n=>{if(n.url&&(!n.beta||this.state.showBetaFeatures)){let r=this.state.activeRoute.startsWith(n.url);n.url==="/"&&(r=this.state.activeRoute.length<=1);const i=r?n.activeIcon:n.icon;return d("a",{onClick:s=>this.menuLinkClicked(s,n),className:r?"active":"",href:n.url,children:[d("span",{class:"icon",children:[n.text==="messages"&&this.state.unseenMsgsTotal?d("span",{class:"unseen unseen-total",children:this.state.unseenMsgsTotal}):"",d(i,{width:24})]}),d("span",{class:"text",children:de(n.text)})]})}}),d("div",{class:"menu-new-post",children:[d(Zt,{onClick:()=>this.setState({showNewPostModal:!this.state.showNewPostModal}),children:d("span",{class:"icon",children:un.post})}),d(Ms,{onClick:()=>this.setState({showQrModal:!this.state.showQrModal}),children:d("span",{class:"icon",children:un.QRcode})}),this.renderNewPostModal()," ",this.renderQrModal()]})]})}}var jj=["className","activeClass","activeClassName","path"];function Jf(e){var t=e.className,n=e.activeClass,r=e.activeClassName,i=e.path,s=function(m,w){if(m==null)return{};var _,A,I={},C=Object.keys(m);for(A=0;A<C.length;A++)w.indexOf(_=C[A])>=0||(I[_]=m[_]);return I}(e,jj),a=cI()[0],c=i&&a.path&&Tg(a.path,i,{})||Tg(a.url,s.href,{}),f=s.class||t||"",b=c&&(n||r)||"";return s.class=f+(f&&b&&" ")+b,ft(hI,s)}class Sa extends fn{constructor(){super();xe(this,"chatId",null);xe(this,"iv",null);this.state={latest:{}},this.escFunction=this.escFunction.bind(this)}escFunction(n){n.keyCode===27&&this.state.showMobileSearch&&this.setState({showMobileSearch:!1})}backButtonClicked(){window.history.back()}componentWillUnmount(){super.componentWillUnmount(),this.iv&&clearInterval(this.iv),document.removeEventListener("keydown",this.escFunction,!1)}componentDidMount(){document.addEventListener("keydown",this.escFunction,!1),Pe.get("showParticipants").on(this.inject()),Pe.get("unseenMsgsTotal").on(this.inject()),Pe.get("unseenNotificationCount").on(this.inject()),Pe.get("showConnectedRelays").on(this.inject()),Pe.get("activeRoute").on(this.sub(n=>{this.setState({about:null,title:"",activeRoute:n,showMobileSearch:!1});const r=n.replace("/chat/new","").replace("/chat/","");if(this.chatId=r.length<n.length?r:null,this.chatId&&(Pe.get("channels").get(this.chatId).get("isTyping").on(this.inject()),Pe.get("channels").get(this.chatId).get("theirLastActiveTime").on(this.inject())),n.indexOf("/chat/")===0&&n.indexOf("/chat/new")!==0)if(n.indexOf("/chat/")===0&&this.chatId===ye.getPubKey()){const i=d(ut,{children:[d("b",{style:"margin-right:5px",children:""})," ",d("b",{children:de("note_to_self")})]});this.setState({title:i})}else{const i=d(kn,{pub:this.chatId||""},this.chatId);this.setState({title:i})}})),this.updateRelayCount(),this.iv=setInterval(()=>this.updateRelayCount(),1e3)}onTitleClicked(){if(this.chatId&&this.chatId.indexOf("hashtag")===-1){const n=this.chatId.length<40?"/group/":"/";Lt(n+this.chatId)}}onLogoClick(n){n.preventDefault(),n.stopPropagation(),document.querySelector("a.logo").blur(),window.innerWidth>625&&Lt("/"),Pe.get("toggleMenu").put(!0)}updateRelayCount(){this.setState({connectedRelays:$n.getConnectedRelayCount()})}renderBackButton(){const{activeRoute:n}=this.state;return n&&n.indexOf("/chat/")===0?d("div",{id:"back-button",class:"visible-xs-inline-block",onClick:()=>this.backButtonClicked(),children:un.backArrow}):""}renderMenuIcon(){const{activeRoute:n}=this.state,r=n&&n.indexOf("/chat/")===0;return!Pt.isElectron&&!r?d("a",{href:"/",onClick:i=>this.onLogoClick(i),class:"visible-xs-flex logo",children:d("div",{class:"mobile-menu-icon",children:un.menu})}):""}renderSearchBox(){return this.chatId?"":d(ak,{onSelect:n=>Lt(`/${n.key}`)})}renderConnectedRelays(){return d("a",{href:"/settings/network",class:`connected-peers tooltip mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""} ${this.state.connectedRelays>0?"connected":""}`,children:[d("span",{class:"tooltiptext right",children:de("connected_relays")}),d("small",{children:[d("span",{class:"icon",children:un.network}),d("span",{children:this.state.connectedRelays})]})]})}renderHeaderText(){const{chat:n,activeRoute:r}=this.state,i=n&&n.isTyping,s=r&&r.indexOf("/chat/")===0;return d("div",{class:"text",style:this.chatId?"cursor:pointer;text-align:center":"",onClick:()=>this.onTitleClicked(),children:[this.state.title&&s?d("div",{class:"name",children:this.state.title}):"",i?d("small",{class:"typing-indicator",children:de("typing")}):"",this.state.about?d("small",{class:"participants",children:this.state.about}):"",this.chatId?d("small",{class:"last-seen",children:this.state.onlineStatus||""}):"",!s&&d("div",{id:"mobile-search",class:`mobile-search-visible ${this.state.showMobileSearch?"":"hidden-xs"}`,children:this.renderSearchBox()}),!!ye.getPubKey()&&this.renderMobileSearchButton(s)]})}renderMobileSearchButton(n){return n?"":d("div",{id:"mobile-search-btn",class:`mobile-search-hidden ${this.state.showMobileSearch?"hidden":"visible-xs-inline-block"}`,onClick:()=>{var i,s,a;(i=document.querySelector(".mobile-search-visible"))==null||i.classList.remove("hidden-xs","hidden"),(s=document.querySelector(".mobile-search-hidden"))==null||s.classList.remove("visible-xs-inline-block"),(a=document.querySelector(".mobile-search-hidden"))==null||a.classList.add("hidden");const r=document.querySelector(".search-box input");r&&setTimeout(()=>{r.focus()},0),this.setState({showMobileSearch:!0})},children:un.search})}renderMyProfile(){const n=ye.getPubKey(),r=ye.toNostrBech32Address(n,"npub");return d(Jf,{activeClassName:"active",href:`/${r}`,onClick:()=>Pe.get("scrollUp").put(!0),class:"hidden-xs my-profile",children:d(ti,{str:r,width:34})})}renderNotifications(){return d("a",{href:"/notifications",class:`notifications-button mobile-search-hidden ${this.state.showMobileSearch?"hidden":""}`,children:[this.state.activeRoute==="/notifications"?d(Yy,{width:28}):d(H_,{width:28}),this.state.unseenNotificationCount?d("span",{class:"unseen",children:this.state.unseenNotificationCount>99?"":this.state.unseenNotificationCount}):""]})}renderLogo(){return d("a",{tabIndex:3,href:"/",className:"logo",style:"margin-left: 15px;",children:[d("img",{src:mk,width:"30",height:"30",style:"margin-right: 9px;"}),d("span",{style:"font-size: 1.8em; color: var(--text-color);",children:"iris"})]})}renderLoginBtns(){return d("div",{class:"login-buttons",children:[d(Zt,{small:!0,onClick:()=>Pe.get("showLoginModal").put(!0),children:de("log_in")}),d(Ms,{small:!0,onClick:()=>Pe.get("showLoginModal").put(!0),children:de("sign_up")})]})}render(){const n=!!ye.getPubKey();return d("div",{className:"nav header",children:[!n&&this.renderLogo(),this.renderBackButton(),d("div",{className:"header-content",children:[d("div",{className:`mobile-search-hidden ${this.state.showMobileSearch?"hidden-xs":""}`,children:n&&this.renderMenuIcon()}),d("a",{className:`mobile-search-visible ${this.state.showMobileSearch?"":"hidden-xs"}`,href:"",onClick:r=>{r.preventDefault(),this.setState({showMobileSearch:!1})},children:d("span",{class:"visible-xs-inline-block",children:un.backArrow})}),n&&this.state.showConnectedRelays&&this.renderConnectedRelays(),this.renderHeaderText(),n&&this.renderNotifications(),n&&this.renderMyProfile(),!n&&this.renderLoginBtns()]})]})}}const Rf="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8";class zj extends fn{render(){return d(ut,{children:[d(Sa,{}),d("div",{className:"main-view",id:"settings",children:d("div",{className:"centered-container mobile-padding15",children:[d("h2",{children:de("about")}),d("p",{children:"Iris is like the social networking apps we're used to, but better:"}),d("ul",{children:[d("li",{children:[d("b",{children:"Accessible."})," No phone number or signup is required. Just type in your name or alias and go!"]}),d("li",{children:[d("b",{children:"Secure."})," It's open source. You can verify that your data stays safe."]}),d("li",{children:[d("b",{children:"Always available."})," It works offline-first and is not dependent on any single centrally managed server. Users can even connect directly to each other."]})]}),!Pt.isStandalone()&&d(ut,{children:[d("h3",{children:"Versions"}),d("p",{children:d("ul",{children:[d("li",{children:[d("a",{target:"_blank",href:"https://iris.to",children:"iris.to"})," ","(web)"]}),d("li",{children:[d("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/latest",children:"Desktop"})," ","(macOS, Windows, Linux)"]}),d("li",{children:d("a",{target:"_blank",href:"https://apps.apple.com/app/iris-the-nostr-client/id1665849007",children:"iOS"})}),d("li",{children:[d("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=to.iris.twa",children:"Android"})," ","(",d("a",{target:"_blank",href:"https://github.com/irislib/iris-messenger/releases/tag/jan2023",children:"apk"}),")"]})]})})]}),d("h3",{children:"Iris docs"}),d("p",{children:["Visit Iris ",d("a",{href:"https://docs.iris.to",children:"docs"})," for features, explanations and troubleshooting."]}),d("h3",{children:"Privacy"}),d("p",{children:de("application_security_warning")}),d("h3",{children:"Follow"}),d("div",{className:"profile-link-container",children:[d("a",{href:`/${Rf}`,className:"profile-link",children:[d(ti,{str:Rf,width:40}),d(kn,{pub:Rf,placeholder:"Iris"})]}),d(Rl,{id:Rf})]}),d("p",{children:[d("a",{href:"https://t.me/irismessenger",children:"Telegram"})," channel."]}),d("a",{href:"https://opencollective.com/iris-social/donate",target:"_blank",children:d("img",{src:"/assets/img/opencollective.png",width:200})}),d("p",{children:["Released under MIT license. Code:"," ",d("a",{href:"https://github.com/irislib/iris-messenger",children:"Github"}),"."]}),d("br",{})]})})]})}}class vk extends Er{constructor(){super(...arguments);xe(this,"state",{error:null})}static getDerivedStateFromError(n){return{error:n.message}}componentDidCatch(n){console.error(n),this.setState({error:n.message})}render(){return this.state.error?d("p",{style:"padding: 0 10px",children:["Error: ",this.state.error]}):this.props.children}}let bk=!0;const wk=function(){bk=!1,window.removeEventListener("popstate",wk)};window.addEventListener("popstate",wk);class Io extends fn{constructor(){super(...arguments);xe(this,"scrollElement",_a());xe(this,"class","");xe(this,"id","");xe(this,"observer",null);xe(this,"scrollPosition",0);xe(this,"saveScrollPosition",dr.debounce(()=>{const n=this.scrollElement.current;if(n){const r=n.scrollTop,s={...window.history.state,scrollPosition:r};window.history.replaceState(s,"")}},100));xe(this,"observeScrollElement",()=>{this.observer=new ResizeObserver(r=>{r.forEach(()=>{this.restoreScrollPosition(!1)})});const n=this.scrollElement.current;n&&(this.observer.observe(n),setTimeout(()=>{this.observer&&this.observer.disconnect()},1e3))})}render(){return d(ut,{children:[d(Sa,{}),d("div",{ref:this.scrollElement,onScroll:()=>this.saveScrollPosition(),class:`main-view ${this.class}`,id:this.id,children:d(vk,{children:this.renderView()})})]})}restoreScrollPosition(n=!0){var s,a;const r=window.history.state,i=(s=window.history.state)==null?void 0:s.previousState;if(!bk&&r!==i){n&&this.observeScrollElement();const c=this.scrollElement.current;this.scrollPosition||(this.scrollPosition=(a=window.history.state)==null?void 0:a.scrollPosition),c&&this.scrollPosition&&(c.scrollTop=this.scrollPosition)}else{const f={...window.history.state||{},previousState:r};window.history.replaceState(f,"")}}componentWillUnmount(){this.observer&&this.observer.disconnect()}}class Hj extends fn{constructor(){super(),this.state={latest:{},latestText:""}}onKeyUp(t){t.keyCode===13&&t.target.click()}getLatestMsg(){if(!this.props.latestMsgId)return;const t=De.db.by("id",this.props.latestMsgId);t&&(this.setState({latest:t}),ye.decryptMessage(this.props.latestMsgId,n=>{this.setState({latestText:n})}))}componentDidMount(){var n;this.getLatestMsg();const t="chats/"+this.props.chat+"/lastOpened";(n=Ui.public)==null||n.get(t,r=>{this.setState({lastOpened:r})})}componentDidUpdate(t){t.latestMsgId!==this.props.latestMsgId&&this.getLatestMsg()}hasUnseen(){return this.state.latest.pubkey===ye.getPubKey()?!1:!this.props.active&&!(this.state.latest.created_at<=this.state.lastOpened)}render(){const t=this.props.chat,n=this.props.active?"active-item":"",r=this.hasUnseen()?"has-unseen":"",i=this.hasUnseen()?Ct`<span class="unseen"></span>`:"",s=["online","active"].indexOf(t.activity)>-1?t.activity:"",a=this.state.latest.created_at&&Pt.getRelativeTimeText(new Date(this.state.latest.created_at*1e3))||"",c=ye.toNostrBech32Address(t,"npub");return Ct`
      <div
        onKeyUp=${f=>this.onKeyUp(f)}
        role="button"
        tabindex="0"
        class="chat-item ${s} ${r} ${n}"
        onClick=${()=>Lt(`/chat/${c}`)}
      >
        <${ti} str=${c} width="49" />
        <div class="text">
          <div>
            <span class="name"><${kn} pub=${this.props.chat} /></span>
            <small class="latest-time">${a}</small>
          </div>
          <small class="latest"> ${this.state.latestText} </small>
          ${i}
        </div>
      </div>
    `}}class qj extends fn{constructor(t){super(t),this.state={chats:new Map,sortedChats:[]}}enableDesktopNotifications(){window.Notification&&Notification.requestPermission(()=>{(Notification.permission==="granted"||Notification.permission==="denied")&&Tt("#enable-notifications-prompt").slideUp()})}componentDidMount(){De.getDirectMessages(t=>{const n=Array.from(t.keys()).sort((r,i)=>{const s=t.get(r).eventIds,a=t.get(i).eventIds,c=s.length?De.db.by("id",s[0]):null,f=a.length?De.db.by("id",a[0]):null;return(f==null?void 0:f.created_at)>(c==null?void 0:c.created_at)?1:(f==null?void 0:f.created_at)<(c==null?void 0:c.created_at)?-1:0});this.setState({chats:t,sortedChats:n})}),Pe.get("scrollUp").on(this.sub(()=>Pt.animateScrollTop(".chat-list")))}render(){const t=this.props.activeChat;return Ct`<section class="sidebar ${this.props.class||""}">
      <div
        id="enable-notifications-prompt"
        onClick=${()=>this.enableDesktopNotifications()}
      >
        <div class="title">${de("get_notified_new_messages")}</div>
        <div><a>${de("turn_on_desktop_notifications")}</a></div>
      </div>
      <div class="chat-list">
        ${this.state.sortedChats.map(n=>Ct`<${Hj}
              active=${n===t}
              key=${n}
              chat=${n}
              latestMsgId=${this.state.chats.get(n).eventIds[0]}
            />`)}
      </div>
    </section>`}}const Kj=d("span",{class:"seen-indicator",children:d("svg",{viewBox:"0 0 59 42",children:[d("polygon",{fill:"currentColor",points:"40.6,12.1 17,35.7 7.4,26.1 4.6,29 17,41.3 43.4,14.9"}),d("polygon",{class:"iris-delivered-checkmark",fill:"currentColor",points:"55.6,12.1 32,35.7 29.4,33.1 26.6,36 32,41.3 58.4,14.9"})]})}),Wj=e=>{const[t,n]=It("");on(()=>{Tt("a").click(w=>{const _=Tt(w.target).attr("href");_&&_.indexOf("https://iris.to/")===0&&(w.preventDefault(),Lt(_.replace("https://iris.to/","")))}),ye.decryptMessage(e.id,w=>{n(w)})},[e.id]);const r=()=>{Lt(`/${ye.toNostrBech32Address(e.pubkey,"npub")}`)},i=t&&t.length===2&&Pt.isEmoji(t),s=Pt.highlightEverything(t||""),a=typeof e.created_at=="object"?e.created_at:new Date(e.created_at*1e3),c="",f=c.seen?"seen":"",b=c.delivered?"delivered":"",m=e.selfAuthored?"our":"their";return d("div",{className:`msg ${m} ${f} ${b}`,children:d("div",{class:"msg-content",children:[d("div",{class:"msg-sender",children:e.showName&&d("small",{onClick:r,class:"msgSenderName",children:d(kn,{pub:e.pubkey},e.pubkey)})}),e.torrentId&&d(Su,{torrentId:e.torrentId}),d("div",{class:`text ${i&&"emoji-only"}`,children:s}),d("div",{class:"below-text",children:d("div",{class:"time",children:[e.id?Pt.getRelativeTimeText(a):Pt.formatTime(a),e.selfAuthored&&Kj]})})]})})};class Vj extends fn{componentDidMount(){!Pt.isMobile&&this.props.autofocus!==!1&&Tt(this.base).find(".new-msg").focus()}componentDidUpdate(){!Pt.isMobile&&this.props.autofocus!==!1&&Tt(this.base).find(".new-msg").focus()}encrypt(t){try{const n=ye.toNostrHexAddress(this.props.activeChat);if(!n)throw new Error("invalid public key "+n);return ye.encrypt(t,n)}catch(n){console.error(n)}}async onSubmit(t){t.preventDefault(),t.stopPropagation();const n=Tt(this.base).find(".new-msg"),r=n.val();if(!r.length)return;const i=await this.encrypt(r),s=ye.toNostrHexAddress(this.props.activeChat);if(!s)throw new Error("invalid public key "+s);De.publish({kind:4,content:i,tags:[["p",s]]}),n.val(""),Pt.scrollToMessageListBottom()}onMsgTextInput(t){Pe.get("channels").get(this.props.activeChat).get("msgDraft").put(Tt(t.target).val())}onKeyDown(t){(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&this.onSubmit(t)}render(){return Ct`<form
      autocomplete="off"
      class="message-form ${this.props.class||""}"
      onSubmit=${t=>this.onSubmit(t)}
    >
      <input
        name="attachment-input"
        type="file"
        class="hidden attachment-input"
        accept="image/*"
        multiple
        onChange=${()=>this.openAttachmentsPreview()}
      />
      <input
        onInput=${t=>this.onMsgTextInput(t)}
        onKeyDown=${t=>this.onKeyDown(t)}
        class="new-msg"
        type="text"
        placeholder="${de("type_a_message")}"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="sentences"
        spellcheck="off"
      />
      <button style="margin-right:0">
        <${hu} onClick=${t=>this.onSubmit(t)} width="28" />
      </button>
    </form>`}}const Gj=Ct`
  <svg
    x="0px"
    y="0px"
    width="451.847px"
    height="451.847px"
    viewBox="0 0 451.847 451.847"
    style="enable-background:new 0 0 451.847 451.847;"
  >
    <g>
      <path
        fill="currentColor"
        d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"
      />
    </g>
  </svg>
`;class Yj extends fn{constructor(){super(),this.ref=_a(),this.state={decryptedMessages:{},sortedMessages:[],sortedParticipants:[],showParticipants:!0,stickToBottom:!0,noLongerParticipant:!1}}shouldComponentUpdate(){return!0}updateLastOpened(){var n;const t=ye.toNostrHexAddress(this.props.id);(n=Ui.public)==null||n.set("chats/"+t+"/lastOpened",Math.floor(Date.now()/1e3))}componentDidMount(){const t=ye.toNostrHexAddress(this.props.id);if(!t){console.error("no id");return}this.unsub=Ft.subscribe({kinds:[4],"#p":[ye.getPubKey()],authors:[t]},void 0,"privateChat"),De.getDirectMessagesByUser(t,r=>{r&&this.setState({sortedMessages:r.reverse()})}),this.updateLastOpened(),document.addEventListener("visibilitychange",()=>{document.hidden||this.updateLastOpened()});const n=document.getElementById("message-list");if(n){n.style.paddingBottom=0,n.style.paddingTop=0;const r=Tt("#message-view");r.off("scroll").on("scroll",()=>{const i=r[0].scrollHeight-r.scrollTop()==r.outerHeight();this.state.stickToBottom&&!i?this.setState({stickToBottom:!1}):!this.state.stickToBottom&&i&&this.setState({stickToBottom:!0})})}}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("visibilitychange",()=>{document.hidden||this.updateLastOpened()}),this.unsub&&this.unsub()}componentDidUpdate(t){this.state.stickToBottom&&Pt.scrollToMessageListBottom(),t.id!==this.props.id&&this.updateLastOpened(),Tt(".msg-content img").off("load").on("load",()=>this.state.stickToBottom&&Pt.scrollToMessageListBottom()),setTimeout(()=>{this.chat&&!this.chat.uuid&&ye.toNostrHexAddress(this.props.id)!==ye.getPubKey()()&&(Tt(".msg.our").length&&!Tt(".msg.their").length&&!this.chat.theirMsgsLastSeenTime?Tt("#not-seen-by-them").slideDown():Tt("#not-seen-by-them").slideUp())},2e3)}addFloatingDaySeparator(){let t=Tt(".day-separator").last(),n=t.position();for(;t&&n&&n.top-55>0;)t=t.prevAll(".day-separator").first(),n=t.position();let r=t.clone(),i=Tt("<div>").css({position:"fixed",top:70,"text-align":"center"}).attr("id","floating-day-separator").width(Tt("#message-view").width()).append(r);Tt("#floating-day-separator").remove(),setTimeout(()=>r.fadeOut(),2e3),Tt("#message-view").prepend(i)}toggleScrollDownBtn(){const t=Tt("#message-view");t[0].scrollHeight-t.scrollTop()<=t.outerHeight()+200?Tt("#scroll-down-btn:visible").fadeOut(150):Tt("#scroll-down-btn:not(:visible)").fadeIn(150)}onMessageViewScroll(){this.messageViewScrollHandler=this.messageViewScrollHandler||Cm(()=>{Tt("#attachment-preview:visible").length||(this.addFloatingDaySeparator(),this.toggleScrollDownBtn())},200),this.messageViewScrollHandler()}scrollDown(){Pt.scrollToMessageListBottom();const t=document.getElementById("message-list");t&&(t.style.paddingBottom=0)}renderMainView(){let t;if(this.props.id&&this.props.id.length>20){const n=ye.getPubKey(),r=new Date,i=r.toLocaleDateString();let s,a;const c=[];this.state.sortedMessages.forEach(f=>{const b=De.db.by("id",f);if(!b)return null;const m=new Date(b.created_at*1e3);let w;if(m){const A=m.toLocaleDateString();if(A!==s){w=!0;let I=Pt.getDaySeparatorText(m,A,r,i);c.push(Ct`<div class="day-separator">
                ${de(I.toLowerCase())}
              </div>`)}s=A}let _=!1;b.pubkey!==n&&(w||a&&b.pubkey!==a)&&(c.push(Ct`<div class="from-separator" />`),_=!0),a=b.pubkey,c.push(Ct`
          <${Wj}
            ...${b}
            showName=${_}
            selfAuthored=${b.pubkey===n}
            key=${b.created_at+b.pubkey}
            chatId=${this.props.id}
          />
        `)}),t=Ct` <div
        class="main-view"
        id="message-view"
        onScroll=${f=>this.onMessageViewScroll(f)}
      >
        <div id="message-list">
          ${c}
          <p>
            <i>${de("dm_privacy_warning")}</i>
          </p>
        </div>
        <div
          id="attachment-preview"
          class="attachment-preview"
          style="display:none"
        ></div>
      </div>`}return t}renderMsgForm(){return this.props.id&&this.props.id.length>20?Ct`
          <div
            id="scroll-down-btn"
            style="display:none;"
            onClick=${()=>this.scrollDown()}
          >
            ${Gj}
          </div>
          <div class="chat-message-form">
            <${Vj}
              key=${this.props.id}
              activeChat=${this.props.id}
              onSubmit=${()=>this.scrollDown()}
            />
          </div>
        `:""}render(){return Ct`
      <${va}
        ><title>${this.chat&&this.chat.name||"Messages"}</title><//
      >
      <div
        id="chat-main"
        ref=${this.ref}
        class="${this.props.id?"":"hidden-xs"}"
      >
        ${this.renderMainView()} ${this.renderMsgForm()}
      </div>
    `}}class vg extends Io{constructor(){super(),this.id="chat-view"}renderView(){return Ct`
      <${qj}
        activeChat=${this.props.id}
        class=${this.props.id||this.props.hashtag?"hidden-xs":""}
      />
      <${Yj} id=${this.props.id} key=${this.props.id} />
    `}}const Zj=e=>{const[t,n]=It("");return d(ut,{children:[d("input",{type:"file",onChange:i=>{const s=i.target.files||i.dataTransfer.files;if(s&&s.length){const a=new FormData;a.append("fileToUpload",s[0]),fetch("https://nostr.build/api/upload/iris.php",{method:"POST",body:a}).then(async c=>{const f=await c.json();f&&e.onUrl&&e.onUrl(f)}).catch(c=>{console.error("upload error",c),n("upload failed: "+JSON.stringify(c))})}}}),t?d("p",{children:t}):null]})},Jj={lud16:"Bitcoin lightning address  (lud16)",picture:"Picture url",banner:"Banner url",nip05:"Nostr address (nip05)"};class Xj extends fn{constructor(n){super(n);xe(this,"saveOnChange",dr.debounce(()=>{const n=this.state.profile;Object.keys(n).forEach(r=>{typeof n[r]=="string"&&(n[r]=n[r].trim())}),rt.setMetadata(n)},2e3));xe(this,"setProfileAttribute",(n,r)=>{n=n.trim();const i=Object.assign({},this.state.profile);r?i[n]=r:delete i[n],this.setState({profile:i,edited:!0}),this.saveOnChange()});xe(this,"handleSubmit",n=>{n.preventDefault(),rt.setMetadata(this.state.profile);const r=ye.toNostrBech32Address(ye.getPubKey(),"npub");Lt("/"+r)});xe(this,"handleAddField",n=>{n.preventDefault();const r=this.state.newFieldName,i=this.state.newFieldValue;r&&i&&(this.setProfileAttribute(r,i),this.setState({newFieldName:"",newFieldValue:""}),rt.setMetadata(this.state.profile))});this.state={profile:{},newFieldName:"",newFieldValue:"",edited:!1}}componentDidMount(){rt.getProfile(ye.getPubKey(),n=>{!this.state.edited&&Object.keys(this.state.profile).length===0&&(delete n.created_at,this.setState({profile:n}))})}render(){const n=["name","picture","about","banner","website","lud16","nip05"];return Object.keys(this.state.profile).forEach(r=>{n.includes(r)||n.push(r)}),d(ut,{children:[d(Sa,{}),d("div",{class:"main-view",id:"settings",children:d("div",{class:"centered-container",style:"width: 650px;padding: 15px;",children:[d("h3",{children:de("edit_profile")}),d("form",{onSubmit:r=>this.handleSubmit(r),children:[n.map(r=>{const i=this.state.profile[r],s=typeof i=="string"||typeof i>"u";return d("p",{children:[d("label",{htmlFor:r,children:[Jj[r]||r,":"]}),d("br",{}),d("input",{style:{"margin-top":"5px",width:"100%"},type:"text",id:r,disabled:!s,value:s?i||"":JSON.stringify(i),onInput:a=>s&&this.setProfileAttribute(r,a.target.value)}),r==="lud16"&&!i&&d("p",{children:d("small",{children:de("install_lightning_wallet_prompt")})}),r==="picture"||r==="banner"?d(ut,{children:[d("p",{children:d(Zj,{onUrl:a=>this.setProfileAttribute(r,a)})}),i&&d("p",{children:d(js,{src:i})})]}):null]})}),d("p",{children:d(Zt,{type:"submit",children:"Save"})})]}),d("h4",{children:"Add new field"}),d("form",{onSubmit:r=>this.handleAddField(r),children:[d("p",{children:[d("label",{htmlFor:"newFieldName",children:"Field name:"}),d("br",{}),d("input",{value:this.state.newFieldName,type:"text",id:"newFieldName",style:{"margin-top":"5px",width:"100%"},onInput:r=>this.setState({newFieldName:r.target.value})})]}),d("p",{children:[d("label",{htmlFor:"newFieldValue",children:"Field value:"}),d("br",{}),d("input",{value:this.state.newFieldValue,type:"text",id:"newFieldValue",style:{"margin-top":"5px",width:"100%"},onInput:r=>this.setState({newFieldValue:r.target.value})})]}),d("p",{children:d(Zt,{type:"submit",children:"Add new attribute"})})]})]})})]})}}const kw=hn.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 10px 0;

  &:nth-child(odd) {
    background-color: var(--zebra-stripe-bg);
  }
`,Mf=hn.div`
  flex: 1;
  padding: 0 10px;

  &:first-of-type {
    flex: none;
  }
`,_k=({path:e})=>{const[t,n]=It(void 0);return on(()=>{var i;const r=(i=Ui.public)==null?void 0:i.get(e,n);return()=>r==null?void 0:r.off()}),typeof t=="object"&&t!==null?d(kw,{children:[d(Mf,{children:e}),d(Mf,{children:Object.keys(t).map(r=>d(_k,{path:`${e}/${r}`}))})]}):d(kw,{class:"node",children:[d(Mf,{children:e}),d(Mf,{children:JSON.stringify(t)})]})};function Sw({path:e}){return e=e||"/",d(ut,{children:[d(Sa,{}),d("div",{class:"main-view",id:"settings",children:d("div",{class:"centered-container",children:[d("h2",{children:[de("explorer")," ",e]}),d("div",{class:"explorer",children:d(_k,{path:e})})]})})]})}const Qj=({settings:e,onChange:t})=>{const[n,r]=It(e);on(()=>{r(e)},[e]);const i=()=>{const f=new URL(window.location.href);n.display==="grid"?f.searchParams.set("display","grid"):f.searchParams.delete("display"),n.showReplies===!1?f.searchParams.set("showReplies","0"):f.searchParams.delete("showReplies"),n.realtime?f.searchParams.set("realtime","1"):f.searchParams.delete("realtime"),window.history.replaceState({},document.title,f.toString())},s=()=>{t(n),i()},a=[{type:"checkbox",id:"display_realtime",checked:n.realtime,label:de("realtime"),onChange:()=>r({...n,realtime:!n.realtime})},{type:"checkbox",id:"show_replies",checked:n.showReplies,name:"show_replies",label:de("show_replies"),onChange:()=>r({...n,showReplies:!n.showReplies})}],c=[{label:de("display"),name:"display",inputs:[{value:"posts",id:"display_posts",label:de("posts")},{value:"grid",id:"display_grid",label:de("grid")}],checked:n.display,onChange:f=>r({...n,display:f.target.value})},{label:de("sort_by"),name:"sortBy",inputs:[{value:"created_at",id:"sortByTime",label:de("time")},{value:"likes",id:"sortByLikes",label:de("likes")},{value:"zaps",id:"sortByZaps",label:de("zaps")}],checked:n.sortBy,onChange:f=>r({...n,sortBy:f.target.value})},{label:de("sort_direction"),name:"ordering",inputs:[{value:"desc",id:"ordering_desc",label:""},{value:"asc",id:"ordering_asc",label:""}],checked:n.sortDirection,onChange:f=>r({...n,sortDirection:f.target.value})},{label:de("timespan"),name:"timespan",inputs:[{value:"all",id:"timespanAll",label:de("All time")},{value:"day",id:"timespanDay",label:de("day")},{value:"week",id:"timespanWeek",label:de("week")},{value:"month",id:"timespanMonth",label:de("month")},{value:"year",id:"timespanYear",label:de("year")}],checked:n.timespan,onChange:f=>r({...n,timespan:f.target.value})}];return d("div",{className:"msg",children:d("div",{className:"msg-content",children:d("div",{style:"display:flex;flex-direction:column",children:[d("div",{children:a.map((f,b)=>d("span",{children:[d("input",{...f}),d("label",{htmlFor:f.id,children:f.label})]},b))}),c.map((f,b)=>d("div",{style:{flexDirection:"column"},children:[d("p",{children:[f.label,":"]}),d("p",{children:f.inputs.map((m,w)=>d("span",{children:[d("input",{type:"radio",name:f.name,id:m.id,value:m.value,checked:f.checked===m.value,onChange:f.onChange}),d("label",{htmlFor:m.id,children:m.label})]},w))})]},b)),d("p",{children:d(Zt,{onClick:s,children:de("save")})})]})})})},Ew=hn.a`
  /* Default styles for all 'a' elements inside '.tabs' */

  &.isProfile_left {
    border-radius: 0;
  }

  &.isProfile_right {
    border-radius: 0;
  }

  @media (min-width: 626px) {
    &.isProfile_left {
      border-radius: 8px 0 0 0;
    }

    &.isProfile_right {
      border-radius: 0 8px 0 0;
    }
  }
`;function ez({setDisplay:e,display:t,index:n}){const r=["posts","postsAndReplies","likes"].includes(n);return d("div",{className:"tabs",children:[d(Ew,{onClick:()=>{e("posts"),Pe.get("settings").get("feed").get("display").put("posts")},className:`${t==="grid"?"":"active"} ${r?"isProfile_left":""}`,children:un.post}),d(Ew,{onClick:()=>{e("grid"),Pe.get("settings").get("feed").get("display").put("grid")},className:`${t==="grid"?"active":""} ${r?"isProfile_right":""}`,children:un.grid})]})}const tz=hn.div`
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 4px;
  @media (max-width: 625px) {
    grid-gap: 1px;
  }
`,nz=hn.a`
  padding-right: 10px;
  color: var(--text-color) !important;
`,rz=hn.a`
  padding: 0 10px;
  color: var(--text-color) !important;
`,iz=hn.div`
  display: flex;
  flex-direction: row;
  width: 100%;
  align-items: center;
  text-align: center;
`,sz=hn.div`
  flex: 1;
`;function oz({feedName:e,onClickSettings:t,index:n,settingsOpen:r}){const i=["global","follows"].includes(n);return d("div",{className:"msg",children:d("div",{className:"msg-content notification-msg",children:d(iz,{children:[i&&d(nz,{onClick:a=>{a.preventDefault(),r?t():Lt("/")},children:un.backArrow}),d(sz,{children:de(e)}),i&&d(rz,{onClick:t,children:r?d(MI,{width:24}):d(gI,{width:24})})]})})})}class az{constructor(t,n){xe(this,"eventMap");xe(this,"sortedEventIds");xe(this,"sortBy");xe(this,"sortDirection");this.sortBy=t,this.sortDirection=n,this.eventMap=new Map,this.sortedEventIds=[]}compareFn(t,n){var s,a,c,f;let r,i;return!t||!n?0:t&&!n?-1:!t&&n?1:(this.sortBy==="created_at"?(r=t.created_at,i=n.created_at):this.sortBy==="likes"?(r=((s=De.likesByMessageId.get(t.id))==null?void 0:s.size)||0,i=((a=De.likesByMessageId.get(n.id))==null?void 0:a.size)||0):this.sortBy==="zaps"&&(r=((c=De.zapsByNote.get(t.id))==null?void 0:c.size)||0,i=((f=De.zapsByNote.get(n.id))==null?void 0:f.size)||0),this.sortDirection==="desc"?i-r:r-i)}has(t){return this.eventMap.has(t)}add(t){if(!t||!t.id||!t.created_at)throw new Error("Invalid event");return this.eventMap.has(t.id)?!1:(this.eventMap.set(t.id,t),this.insertEventId(t.id),!0)}delete(t){if(!this.eventMap.delete(t))return!1;const r=this.sortedEventIds.findIndex(i=>i===t);return r===-1?!1:(this.sortedEventIds.splice(r,1),!0)}get eventIds(){return this.sortedEventIds}get(t){return this.eventMap.get(t)}events(){return this.sortedEventIds.map(t=>this.eventMap.get(t))}get size(){return this.eventMap.size}insertEventId(t){const n=this.eventMap.get(t);let r=0,i=this.sortedEventIds.length;for(;r<i;){const s=Math.floor((r+i)/2),a=this.eventMap.get(this.sortedEventIds[s]);this.compareFn(n,a)<0?i=s:r=s+1}this.sortedEventIds.splice(r,0,t)}}const Sc=10;let xk=!0;const kk=function(){xk=!1,window.removeEventListener("popstate",kk)};window.addEventListener("popstate",kk);const Aw={display:"posts",realtime:!1,showReplies:!1,sortBy:"created_at",sortDirection:"desc",timespan:"all"};let lz=class extends fn{constructor(n){super(n);xe(this,"openedAt");xe(this,"subscribeRetryTimeout");xe(this,"unsub");xe(this,"updateSortedEvents",n=>{if(this.unmounted||!n)return;const r=this.state.settings,i=[];let s;if(r.sortDirection==="desc"&&!r.realtime)for(let c=0;c<n.length;c++){const f=n[c],b=De.db.by("id",f);if(b&&b.created_at>this.state.eventsShownTime){if(b.pubkey===ye.getPubKey()&&!De.isRepost(b)){s=!0;break}i.push(f)}}s||(n=n.filter(c=>!i.includes(c)));const a=s?Math.floor(Date.now()/1e3):this.state.eventsShownTime;this.setState({sortedEvents:n,queuedEvents:i,eventsShownTime:a})});xe(this,"handleScroll",()=>{this.state.displayCount<this.state.sortedEvents.length&&this.props.scrollElement&&this.props.scrollElement.scrollTop+this.props.scrollElement.clientHeight>=this.props.scrollElement.scrollHeight-1e3&&this.setState({displayCount:this.state.displayCount+Sc}),this.checkScrollPosition()});xe(this,"checkScrollPosition",()=>{if(!this.props.scrollElement)return;const n=this.props.scrollElement.scrollTop>this.base.offsetTop-60;n!==this.state.showNewMsgsFixedTop&&this.setState({showNewMsgsFixedTop:n})});xe(this,"replaceState",dr.throttle(()=>{window.history.replaceState({...window.history.state,state:this.state},"")},1e3,{leading:!0,trailing:!0}));let r={display:void 0};Pe.get("settings").get("feed").once(i=>r=i),this.state={sortedEvents:[],queuedEvents:[],displayCount:Sc,eventsShownTime:Math.floor(Date.now()/1e3),settings:this.getSettings(r)},this.openedAt=Math.floor(Date.now()/1e3)}getSettings(n={display:void 0}){var i,s,a,c;let r={...Aw};["global","follows"].includes(((i=this.props)==null?void 0:i.index)||"")&&(r=Object.assign(r,n)),((s=this.props)==null?void 0:s.index)!=="notifications"&&n.display&&(r.display=n.display),((a=this.props)==null?void 0:a.index)==="posts"&&(r.showReplies=!1),["postsAndReplies","notifications","likes"].includes(((c=this.props)==null?void 0:c.index)||"")&&(r.showReplies=!0);for(const f in r){const b=Pt.getUrlParameter(f);b!==null&&(b==="1"||b==="0"?r[f]=b==="1":r[f]=b)}return this.props.keyword&&(r.showReplies=!0),r}saveSettings(){Pe.get("settings").get("feed").put(this.state.settings)}componentWillUnmount(){super.componentWillUnmount(),this.props.scrollElement&&this.props.scrollElement.removeEventListener("scroll",this.handleScroll),this.unsub&&this.unsub()}addScrollHandler(){this.props.scrollElement&&this.props.scrollElement.addEventListener("scroll",this.handleScroll)}componentDidMount(){this.addScrollHandler(),this.subscribe(),Ry(this.state.settings,Aw)&&Pe.get("settings").get("feed").on(this.sub(r=>{const i=this.getSettings(r);this.setState({settings:i})}));let n=!0;Pe.get("scrollUp").on(this.sub(()=>{!n&&Pt.animateScrollTop(".main-view"),n=!1}))}componentWillMount(){var n;!xk&&((n=window.history.state)!=null&&n.state)&&this.setState(window.history.state.state)}subscribe(){var f;(f=this.unsub)==null||f.call(this),clearTimeout(this.subscribeRetryTimeout);const n=new az(this.state.settings.sortBy,this.state.settings.sortDirection),r=()=>{this.updateSortedEvents(n.events().filter(b=>{var w;if(rt.blockedUsers.has(b.pubkey))return!1;const m=De.getEventReplyingTo(b);if(m){if(!this.state.settings.showReplies)return!1;const _=(w=De.db.by("id",m))==null?void 0:w.pubkey;if(_&&rt.blockedUsers.has(_))return!1}return!0}).map(b=>b.id))},i=dr.throttle(r,1e3);let s=!1;const a=b=>{n.has(b.id)||(n.add(b),n.size>50&&!s?(s=!0,r()):i())},c=()=>{var b,m;if((b=this.unsub)==null||b.call(this),this.props.index==="notifications")this.unsub=De.notifications.subscribe(w=>{w.forEach(_=>a(De.db.by("id",_)))});else{this.unsub=this.getEvents(a);const w=(m=rt.followedByUser.get(ye.getPubKey()))==null?void 0:m.size,_=Ft.subscribe({authors:[ye.getPubKey()],kinds:[3]},()=>{var A;w!==((A=rt.followedByUser.get(ye.getPubKey()))==null?void 0:A.size)&&(_(),this.subscribe())})}};c(),n.size===0&&(this.subscribeRetryTimeout=setTimeout(c,1e3))}getEvents(n){return()=>{}}componentDidUpdate(n,r){!n.scrollElement&&this.props.scrollElement&&this.addScrollHandler(),Ry(r.settings,this.state.settings)||(this.setState({displayCount:Sc}),this.subscribe()),this.handleScroll(),this.replaceState(),!this.state.queuedEvents.length&&r.queuedEvents.length&&Pt.animateScrollTop(".main-view"),(this.props.filter!==n.filter||this.props.keyword!==n.keyword)&&(this.setState({sortedEvents:[]}),this.componentDidMount())}showQueuedEvents(){const n=this.state.sortedEvents;console.log("sortedEvents.length",n.length),n.unshift(...this.state.queuedEvents),console.log("queuedEvents.length",this.state.queuedEvents.length),this.setState({sortedEvents:n,queuedEvents:[],eventsShownTime:Math.floor(Date.now()/1e3),displayCount:Sc})}renderShowNewEvents(){return d("div",{className:`msg ${this.state.showNewMsgsFixedTop?"fixedTop":""}`,onClick:()=>this.showQueuedEvents(),children:d("div",{className:"msg-content notification-msg colored",children:d("div",{style:"height: 27.5px; line-height: 27.5px",children:de("show_n_new_messages").replace("{n}",this.state.queuedEvents.length)})})})}renderShowMore(){return d("p",{children:d(Zt,{onClick:()=>this.setState({displayCount:this.state.displayCount+Sc}),children:de("show_more")})})}renderEvents(n,r,i){return this.state.sortedEvents.slice(0,n).map(s=>d(vk,{children:d(ki,{id:s,showRepliedMsg:i,renderAs:r,feedOpenedAt:this.openedAt,showReplies:0,fullWidth:!this.state.settings.showReplies},s)}))}render(){if(!this.props.scrollElement||this.unmounted)return;const n=this.state.displayCount,r=this.props.index!=="likes"&&!this.props.keyword,i=this.state.queuedEvents.length&&!this.state.settingsOpen,s=!i&&{global:"global_feed",follows:"following",notifications:"notifications"}[this.props.index||"global"],a=this.state.settings.display==="grid"?"NoteImage":null,c=this.renderEvents(n,a,r);return d("div",{className:"msg-feed",children:[d("div",{children:[i?this.renderShowNewEvents():null,s?d(oz,{feedName:s,onClickSettings:()=>this.setState({settingsOpen:!this.state.settingsOpen}),index:this.props.index,settingsOpen:this.state.settingsOpen}):null,this.props.index!=="notifications"&&this.state.settingsOpen&&d(Qj,{settings:this.state.settings,onChange:f=>this.setState({settings:f})}),this.props.index!=="notifications"&&d(ez,{index:this.props.index,display:this.state.settings.display,setDisplay:f=>this.setState({settings:{...this.state.settings,display:f}})}),c.length===0&&d("div",{className:"msg",children:d("div",{className:"msg-content notification-msg",children:this.props.emptyMessage||de("no_events_yet")})}),a==="NoteImage"?d(tz,{children:c}):c]}),n<this.state.sortedEvents.length?this.renderShowMore():""]})}};const cz={all:0,day:24*60*60,week:7*24*60*60,month:30*24*60*60,year:365*24*60*60};let jc=class extends lz{getSince(){if(this.state.settings.timespan!=="all")return Math.floor(Date.now()/1e3)-cz[this.state.settings.timespan]}getCallbackForPostsIndex(t){return n=>{this.props.index==="posts"&&De.getEventReplyingTo(n)&&!De.isRepost(n)||t(n)}}subscribeToNostrUser(t,n){return this.props.index==="likes"?Ft.subscribe({authors:[this.props.nostrUser||""],kinds:[7],since:t},n,!1,!1):Ft.subscribe({authors:[this.props.nostrUser||""],kinds:[1,6],since:t},this.getCallbackForPostsIndex(n),!1,!1)}subscribeToKeyword(t,n){const r=this.props.keyword.toLowerCase();return Ft.subscribe({keywords:[r],kinds:[1],limit:1e3,since:t},i=>{var s;return((s=i.content)==null?void 0:s.toLowerCase().includes(r))&&n(i)},!1)}subscribeToFollows(t,n){const r=ye.getPubKey(),i=Array.from(rt.followedByUser.get(r)||[]);i.push(r);const s={kinds:[1,6],limit:300,since:t,authors:void 0};return i.length<1e3&&(s.authors=i),Ft.subscribe(s,a=>{var c;(a.pubkey===r||(c=rt.followedByUser.get(r))!=null&&c.has(a.pubkey))&&n(a)},!0)}subscribeToGlobalFeed(t,n){return Ft.subscribe({kinds:[1,6],limit:300,since:t},n,!0)}getEvents(t){const n=this.getSince();return this.props.nostrUser?this.subscribeToNostrUser(n,t):this.props.keyword?this.subscribeToKeyword(n,t):this.props.index==="follows"?this.subscribeToFollows(n,t):this.subscribeToGlobalFeed(n,t)}};const uz=[["npub1sn0wdenkukak0d9dfczzeacvhkrgz92ak56egt7vdgzn8pv2wfqqhrjdv9",'"I used to work for the government. Now I work for the public."'],["npub1sg6plzptd64u62a878hep2kev88swjh3tw00gjsfl8f237lmu63q0uf63m","Former CEO of Twitter"],["npub1a2cww4kn9wqte4ry70vyfwqyqvpswksna27rtxd8vty6c74era8sdcw83a",'"Fundamental investing with a global macro overlay"'],["npub15dqlghlewk84wz3pkqqvzl2w2w36f97g89ljds8x6c094nlu02vqjllm5m","MicroStrategy Founder & Chairman"],["npub1g53mukxnjkcmr94fhryzkqutdz2ukq4ks0gvy5af25rgmwsl4ngq43drvk","iris.to developer"],["npub1z4m7gkva6yxgvdyclc7zp0vz4ta0s2d9jh8g83w03tp5vdf3kzdsxana6p","Digital artist"],["npub1az9xj85cmxv8e9j9y80lvqp97crsqdu2fpu3srwthd99qfu9qsgstam8y8","Bitcoin hardware entrepreneur and podcaster"],["npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6","Original developer of Nostr"],["npub1hu3hdctm5nkzd8gslnyedfr5ddz3z547jqcl5j88g4fame2jd08qh6h8nh",'"Lover of memes, maker of videos"']],fz=hn.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
`,hz=hn.div`
  position: absolute;
  top: 0;
  right: 0;
  cursor: pointer;
`;class dz extends fn{componentDidMount(){Pe.get("noFollowers").on(this.inject()),Pe.get("hasNostrFollowers").on(this.inject()),Pe.get("showFollowSuggestions").on(this.inject()),Pe.get("showNoIrisToAddress").on(this.inject()),Pe.get("existingIrisToAddress").on(this.inject())}renderFollowSuggestions(){return d("div",{style:"display:flex;flex-direction:column;flex:1",children:[d("p",{children:de("follow_someone_info")}),uz.map(([t,n])=>d("div",{class:"profile-link-container",children:[d("a",{href:`/${t}`,className:"profile-link",children:[d("div",{children:d(ti,{str:t,width:40})}),d("div",{style:"flex: 1",children:[d(kn,{pub:t,placeholder:"Suggested follow"}),d("br",{}),d("small",{children:n})]})]}),d(Rl,{id:t})]})),d("p",{children:d(Zt,{onClick:()=>Pe.get("showFollowSuggestions").put(!1),children:de("done")})}),d("p",{children:[de("alternatively"),d("i",{children:" "}),d("a",{href:`/${ye.toNostrBech32Address(ye.getPubKey(),"npub")}`,children:de("give_your_profile_link_to_someone")}),"."]})]})}renderNoFollowers(){return d(fz,{children:[d(hz,{onClick:()=>Pe.get("noFollowers").put(!1),children:d(V_,{width:24})}),d("p",{children:de("no_followers_yet")}),d("p",{children:[d(Ur,{text:de("copy_link"),copyStr:Pt.getMyProfileLink()}),d(Ms,{onClick:()=>this.setState({showQrModal:!0}),children:de("show_qr_code")})]}),d("small",{children:de("no_followers_yet_info")}),this.state.showQrModal&&d(n0,{onClose:()=>this.setState({showQrModal:!1}),pub:ye.getPubKey()})]})}renderGetIrisAddress(){if(!this.state.existingIrisToAddress)return d("div",{children:[d("p",{children:"Get your own iris.to/username?"}),d("p",{children:[d(Zt,{onClick:()=>Lt("/settings/iris_account"),children:"Yes please"}),d(Zt,{onClick:()=>Pe.get("showNoIrisToAddress").put(!1),children:"No thanks"})]})]})}render(){let t;return this.state.showFollowSuggestions?t=this.renderFollowSuggestions():this.state.showNoIrisToAddress?t=this.renderGetIrisAddress():this.state.noFollowers&&(t=this.renderNoFollowers()),t?d("div",{class:"msg",children:d("div",{class:"msg-content",children:t})}):""}}class bg extends Io{constructor(){super(),this.state={sortedMessages:[]},this.id="message-view",this.class="public-messages-view"}componentDidMount(){this.restoreScrollPosition()}renderView(){const t=this.props.index||"msgs";return d("div",{class:"centered-container",children:d("div",{style:"display:flex;flex-direction:row",children:d("div",{style:"flex:3;width: 100%",children:[this.props.keyword?d("h2",{children:[de("search"),': "',this.props.keyword,'"']}):d(dz,{}),d(jc,{scrollElement:this.scrollElement.current,keyword:this.props.keyword,index:this.props.index,path:t},this.props.index||"feed")]})})})}}class pz extends Io{constructor(){super(),this.class="public-messages-view",this.state={feeds:{following:{name:"Following",description:"Public messages from people you follow",icon:un.newFollower},global:{name:"Global",description:"Public messages from everyone in your social network",icon:un.global}}}}componentDidMount(){this.restoreScrollPosition()}openFeed(t){Pe.get("lastOpenedFeed").put(t),Lt(`/${t}`)}renderView(){return d("div",{className:"centered-container",children:Object.keys(this.state.feeds).map(t=>{const n=this.state.feeds[t];return d("div",{children:d("div",{style:"margin-bottom: 5px",className:"msg",onClick:()=>this.openFeed(t),children:d("div",{className:"msg-content",children:[d("div",{style:"margin-right: 15px",children:d("div",{children:n.icon})}),d("div",{className:"msg-body",style:"flex:1",children:[d("h3",{style:"margin-top:0",children:de(n.name)}),de(n.description)]})]})})})})})}}class Cw extends Io{constructor(){super();xe(this,"follows");xe(this,"myPub");xe(this,"updateSortedFollows",Cm(()=>{const n=(i,s)=>this.props.followers?this.sortByFollowDistance(i,s):this.sortByName(i,s),r=Array.from(this.follows).sort(n);this.setState({follows:r})},1e3,{leading:!0}));this.myPub=null,this.follows=new Set,this.id="follows-view",this.state={follows:[],contacts:{}}}sortByName(n,r){var a,c;const i=(a=rt.profiles.get(n))==null?void 0:a.name,s=(c=rt.profiles.get(r))==null?void 0:c.name;return!i&&!s?n.localeCompare(r):i?s?i.localeCompare(s):-1:1}sortByFollowDistance(n,r){const i=rt.followDistanceByUser.get(n),s=rt.followDistanceByUser.get(r);return i===s?this.sortByName(n,r):i?s?i-s:-1:1}getFollows(){const n=ye.toNostrHexAddress(this.props.id)||"";n&&rt.getFollowedByUser(n,r=>{this.follows=r,this.updateSortedFollows()})}shouldComponentUpdate(){return!0}getFollowers(){const n=ye.toNostrHexAddress(this.props.id)||"";n&&rt.getFollowersByUser(n,r=>{this.follows=r,this.updateSortedFollows()})}componentDidMount(){this.props.id&&(this.myPub=ye.toNostrBech32Address(ye.getPubKey(),"npub"),this.props.followers?this.getFollowers():this.getFollows(),Pe.get("contacts").on(this.inject()))}followAll(){confirm(`${de("follow_all")} (${this.state.follows.length})?`)&&rt.setFollowed(this.state.follows)}renderFollows(){return this.state.follows.map(n=>{var i;const r=ye.toNostrBech32Address(n,"npub")||"";return d("div",{className:"profile-link-container",children:[d("a",{href:`/${r}`,className:"profile-link",children:[d(ti,{str:r,width:49}),d("div",{children:[d(kn,{pub:r}),d("br",{}),d("small",{className:"follower-count",children:[((i=rt.followersByUser.get(n))==null?void 0:i.size)||0,d("i",{children:" "}),"followers"]})]})]}),n!==ye.getPubKey()&&d(Rl,{id:r})]},r)})}renderView(){const n=this.state.follows.length>1&&!(this.props.id===this.myPub&&!this.props.followers);return d("div",{className:"centered-container",children:[d("h3",{style:{display:"flex"},children:[d("a",{href:`/${this.props.id}`,children:d(kn,{pub:this.props.id})}),":",d("i",{children:" "}),d("span",{style:{flex:1},className:"mar-left5",children:this.props.followers?de("followers"):de("following")}),n?d("span",{style:"text-align: right",className:"hidden-xs",children:d(Zt,{small:!0,onClick:()=>this.followAll(),children:[de("follow_all")," (",this.state.follows.length,")"]})}):""]}),n?d("p",{style:"text-align: right",className:"visible-xs-block",children:d(Zt,{small:!0,onClick:()=>this.followAll(),children:[de("follow_all")," (",this.state.follows.length,")"]})}):"",d("div",{id:"follows-list",children:[this.renderFollows(),this.state.follows.length===0?"":""]})]})}}function gz(e){const[t,n]=It(""),r=ye.toNostrHexAddress(t),i=ye.toNostrBech32Address(t,"note"),s=ye.toNostrBech32Address(t,"npub"),a=ye.toNostrBech32Address(t,"nsec");return d(ut,{children:[d(Sa,{}),d("div",{class:"main-view",id:"settings",children:d("div",{class:"centered-container mobile-padding15",children:[d("h2",{children:de("key_converter")}),d("p",{children:d("input",{type:"text",style:{width:"100%"},placeholder:"Enter hex or bech32 key",onInput:c=>{var f;return n((f=c.target.value)==null?void 0:f.trim())}})}),t&&r&&(t===r?d(ut,{children:[d("p",{children:[d("b",{children:"note:"})," ",i]}),d("p",{children:[d("b",{children:"npub:"})," ",s]}),d("p",{children:[d("b",{children:"nsec:"})," ",a]})]}):d("p",{children:[d("b",{children:"hex:"})," ",r]})),t&&!r&&d("p",{children:d("b",{children:"Invalid key"})})]})})]})}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const r0=2n**256n,ya=r0-0x1000003d1n,i0=r0-0x14551231950b75fc4402da1732fc9bebfn,Sk=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,Ek=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,Ak={p:ya,n:i0,a:0n,b:7n,Gx:Sk,Gy:Ek},ma=32,Tw=e=>bt(bt(e*e)*e+Ak.b),Jn=(e="")=>{throw new Error(e)},Td=e=>typeof e=="bigint",Ck=e=>typeof e=="string",wg=e=>Td(e)&&0n<e&&e<ya,Tk=e=>Td(e)&&0n<e&&e<i0,Ik=(e,t)=>!(e instanceof Uint8Array)||typeof t=="number"&&t>0&&e.length!==t?Jn("Uint8Array expected"):e,lu=e=>new Uint8Array(e),s0=(e,t)=>Ik(Ck(e)?Id(e):lu(e),t),bt=(e,t=ya)=>{let n=e%t;return n>=0n?n:t+n},Iw=e=>e instanceof xi?e:Jn("Point expected");let $w;class xi{constructor(t,n,r){this.px=t,this.py=n,this.pz=r}static fromAffine(t){return new xi(t.x,t.y,1n)}static fromHex(t){t=s0(t);let n;const r=t[0],i=t.subarray(1),s=Pw(i,0,ma),a=t.length;if(a===33&&[2,3].includes(r)){wg(s)||Jn("Point hex invalid: x not FE");let c=yz(Tw(s));const f=(c&1n)===1n;(r&1)===1!==f&&(c=bt(-c)),n=new xi(s,c,1n)}return a===65&&r===4&&(n=new xi(s,Pw(i,ma,2*ma),1n)),n?n.ok():Jn("Point is not on curve")}static fromPrivateKey(t){return gl.mul(Ly(t))}get x(){return this.aff().x}get y(){return this.aff().y}equals(t){const{px:n,py:r,pz:i}=this,{px:s,py:a,pz:c}=Iw(t),f=bt(n*c),b=bt(s*i),m=bt(r*c),w=bt(a*i);return f===b&&m===w}negate(){return new xi(this.px,bt(-this.py),this.pz)}double(){return this.add(this)}add(t){const{px:n,py:r,pz:i}=this,{px:s,py:a,pz:c}=Iw(t),{a:f,b}=Ak;let m=0n,w=0n,_=0n;const A=bt(b*3n);let I=bt(n*s),C=bt(r*a),R=bt(i*c),$=bt(n+r),L=bt(s+a);$=bt($*L),L=bt(I+C),$=bt($-L),L=bt(n+i);let P=bt(s+c);return L=bt(L*P),P=bt(I+R),L=bt(L-P),P=bt(r+i),m=bt(a+c),P=bt(P*m),m=bt(C+R),P=bt(P-m),_=bt(f*L),m=bt(A*R),_=bt(m+_),m=bt(C-_),_=bt(C+_),w=bt(m*_),C=bt(I+I),C=bt(C+I),R=bt(f*R),L=bt(A*L),C=bt(C+R),R=bt(I-R),R=bt(f*R),L=bt(L+R),I=bt(C*L),w=bt(w+I),I=bt(P*L),m=bt($*m),m=bt(m-I),I=bt($*C),_=bt(P*_),_=bt(_+I),new xi(m,w,_)}mul(t,n=!0){if(!n&&t===0n)return Xf;if(Tk(t)||Jn("invalid scalar"),this.equals(gl))return vz(t).p;let r=Xf,i=gl;for(let s=this;t>0n;s=s.double(),t>>=1n)t&1n?r=r.add(s):n&&(i=i.add(s));return r}mulAddQUns(t,n,r){return this.mul(n,!1).add(t.mul(r,!1)).ok()}toAffine(){const{px:t,py:n,pz:r}=this;if(this.equals(Xf))return{x:0n,y:0n};if(r===1n)return{x:t,y:n};const i=Pk(r);return bt(r*i)!==1n&&Jn("invalid inverse"),{x:bt(t*i),y:bt(n*i)}}assertValidity(){const{x:t,y:n}=this.aff();return(!wg(t)||!wg(n))&&Jn("Point invalid: x or y"),bt(n*n)===Tw(t)?this:Jn("Point invalid: not on curve")}multiply(t){return this.mul(t)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(t=!0){const{x:n,y:r}=this.aff();return(t?(r&1n)===0n?"02":"03":"04")+Ow(n)+(t?"":Ow(r))}toRawBytes(t=!0){return Id(this.toHex(t))}}xi.BASE=new xi(Sk,Ek,1n);xi.ZERO=new xi(0n,1n,0n);const{BASE:gl,ZERO:Xf}=xi,$k=(e,t)=>e.toString(16).padStart(t,"0"),o0=e=>Array.from(e).map(t=>$k(t,2)).join(""),Id=e=>{const t=e.length;(!Ck(e)||t%2)&&Jn("hex invalid 1");const n=lu(t/2);for(let r=0;r<n.length;r++){const i=r*2,s=e.slice(i,i+2),a=Number.parseInt(s,16);(Number.isNaN(a)||a<0)&&Jn("hex invalid 2"),n[r]=a}return n},$d=e=>BigInt("0x"+(o0(e)||"0")),Pw=(e,t,n)=>$d(e.slice(t,n)),a0=e=>Td(e)&&e>=0n&&e<r0?Id($k(e,2*ma)):Jn("bigint expected"),Ow=e=>o0(a0(e)),Nw=(...e)=>{const t=lu(e.reduce((r,i)=>r+Ik(i).length,0));let n=0;return e.forEach(r=>{t.set(r,n),n+=r.length}),t},Pk=(e,t=ya)=>{(e===0n||t<=0n)&&Jn("no inverse n="+e+" mod="+t);let n=bt(e,t),r=t,i=0n,s=1n;for(;n!==0n;){const a=r/n,c=r%n,f=i-s*a;r=n,n=c,i=s,s=f}return r===1n?bt(i,t):Jn("no inverse")},yz=e=>{let t=1n;for(let n=e,r=(ya+1n)/4n;r>0n;r>>=1n)r&1n&&(t=t*n%ya),n=n*n%ya;return bt(t*t)===e?t:Jn("sqrt invalid")},Ly=e=>(Td(e)||(e=$d(s0(e,ma))),Tk(e)?e:Jn("private key out of range")),Rw=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let Qf;function Ok(e){e=s0(e);const t=ma+8;(e.length<t||e.length>1024)&&Jn("expected proper params");const n=bt($d(e),i0-1n)+1n;return a0(n)}const Nk={hexToBytes:Id,bytesToHex:o0,concatBytes:Nw,bytesToNumberBE:$d,numberToBytesBE:a0,mod:bt,invert:Pk,hmacSha256Async:async(e,...t)=>{const n=Rw();if(!n)return Jn("etc.hmacSha256Async not set");const r=n.subtle,i=await r.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return lu(await r.sign("HMAC",i,Nw(...t)))},hmacSha256Sync:Qf,hashToPrivateKey:Ok,randomBytes:e=>{const t=Rw();return t||Jn("crypto.getRandomValues must be defined"),t.getRandomValues(lu(e))}},Mw={normPrivateKeyToScalar:Ly,isValidPrivateKey:e=>{try{return!!Ly(e)}catch{return!1}},randomPrivateKey:()=>Ok(Nk.randomBytes(ma+8)),precompute(e=8,t=gl){return t.multiply(3n),t}};Object.defineProperties(Nk,{hmacSha256Sync:{configurable:!1,get(){return Qf},set(e){Qf||(Qf=e)}}});const sa=8,mz=()=>{const e=[],t=256/sa+1;let n=gl,r=n;for(let i=0;i<t;i++){r=n,e.push(r);for(let s=1;s<2**(sa-1);s++)r=r.add(n),e.push(r);n=r.double()}return e},vz=e=>{const t=$w||($w=mz()),n=(m,w)=>{let _=w.negate();return m?_:w};let r=Xf,i=gl;const s=1+256/sa,a=2**(sa-1),c=BigInt(2**sa-1),f=2**sa,b=BigInt(sa);for(let m=0;m<s;m++){const w=m*a;let _=Number(e&c);e>>=b,_>a&&(_-=f,e+=1n);const A=w,I=w+Math.abs(_)-1,C=m%2!==0,R=_<0;_===0?i=i.add(n(C,t[A])):r=r.add(n(R,t[I]))}return{p:r,f:i}},bz="/assets/android-chrome-192x192-f67a838c.png",wz=d(ut,{children:[d("b",{children:"End User Licence Agreement"}),d("p",{children:'This End User Licence Agreement ("EULA") is a legal agreement between you and Sirius Business Ltd. for the use of the mobile application Iris. By installing, accessing, or using our application, you agree to be bound by the terms and conditions of this EULA. If you do not agree to this EULA, you may not use our Application.'}),d("p",{children:"You agree not to use Iris for Prohibited Content or Conduct that includes, but is not limited to:"}),d("ul",{children:[d("li",{children:"impersonate, harass or bully others, harmful to minors, incite or promote hate speech, illegal;"}),d("li",{children:"obscene, sexually explicit, offensive, defamatory, libellous, slanderous, violent and/or unlawful content or profanity;"}),d("li",{children:"content that infringes upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights, or that is deceptive or fraudulent;"}),d("li",{children:"content that promotes the use or sale of illegal or regulated substances, tobacco products, ammunition and/or firearms; and"}),d("li",{children:"illegal content related to gambling."})]}),d("p",{children:"Any violation of this EULA, including the Prohibited Content and Conduct outlined above, may result in the termination of your access to our application."}),d("p",{children:'Our application is provided "as is" and "as available" without warranty of any kind, either express or implied, including but not limited to the implied warranties of merchantability and fitness for a particular purpose. We do not guarantee that our application will be uninterrupted or error-free. In no event shall Sirius Business Ltd. be liable for any damages whatsoever, including but not limited to direct, indirect, special, incidental, or consequential damages, arising out of or in connection with the use or inability to use our application.'}),d("p",{children:"We reserve the right to modify this EULA at any time and without prior notice. Your continued use of the app after the posting of any modified EULA indicates your acceptance of the terms of the modified EULA."}),d("p",{children:"If you have any questions about this EULA, please contact us at sirius@iris.to."})]});function _z({onAccept:e,onDecline:t}){return d("div",{class:"eula",children:d("div",{class:"eula__content",style:"margin: 5px; background-color: var(--login-background); overflow-y: scroll;position:absolute;left:0;top:0;right:0;bottom:0",children:[d("div",{class:"eula__content__text",children:wz}),d("p",{children:[d(Zt,{onClick:e,children:"Accept"}),d(Zt,{onClick:t,children:"Decline"})]})]})})}function xz(e){const t=e.target,n=Tt(t).val();al.indexOf(n)>=0&&(localStorage.setItem("language",n),location.reload())}const kz=()=>d(ut,{children:[un.language,d("select",{className:"language-selector",onChange:e=>xz(e),value:is,children:Object.keys(su).map(e=>d("option",{value:e,children:su[e]}))})]});class eh extends Er{constructor(){super(...arguments);xe(this,"state",{showSwitchAccount:!1,privateKeyError:null,showEula:!1,inputStyle:null})}componentDidMount(){const n=document.getElementById("login-form-name");n&&n.focus(),setTimeout(()=>this.setState({}),100),setTimeout(()=>this.setState({}),1e3)}async nostrExtensionLogin(n){n.preventDefault();const r=await window.nostr.getPublicKey();ye.login({rpub:r},this.props.fullScreen)}async onPasteKey(n){var s;const r=(s=n.target.value)==null?void 0:s.trim();if(!r.length){this.setState({privateKeyError:null});return}let i;try{i=JSON.parse(r)}catch{}if(!i)if(Mw.isValidPrivateKey(r))i={priv:r,rpub:ye.getPublicKey(r)};else try{const{data:a,prefix:c}=Og(r),f=Pt.arrayToHex(a);c==="npub"?i={rpub:f}:c==="nsec"&&(i={priv:f,rpub:ye.getPublicKey(f)})}catch(a){this.setState({privateKeyError:de("invalid_private_key")}),console.error(a)}i&&(await ye.login(i,this.props.fullScreen),n.target.value="",Pt.copyToClipboard(""))}showCreateAccount(n){n.preventDefault(),this.setState({showSwitchAccount:!1})}loginAsNewUser(){const n=document.getElementById("login-form-name"),r=n==null?void 0:n.value;ye.loginAsNewUser(this.props.fullScreen),Pe.get("showFollowSuggestions").put(!0),r&&setTimeout(()=>{rt.setMetadata({display_name:r})},100);const i=Math.floor(Date.now()/1e3);De.notificationsSeenTime=i}onLoginFormSubmit(n){n.preventDefault(),Pt.isStandalone()?this.setState({showEula:!0}):this.loginAsNewUser()}onNameChange(n){const r=n.target.value;if(r.indexOf('"priv"')!==-1||Mw.isValidPrivateKey(r)||r.startsWith("nsec")||r.startsWith("npub")){this.onPasteKey(n),n.target.value="";return}this.setState({inputStyle:r.length?"text-align: center":""})}renderExistingAccountLogin(){return d(ut,{children:[d("input",{id:"paste-privkey",autoFocus:!0,onInput:n=>this.onPasteKey(n),placeholder:de("paste_private_key"),type:"password"}),this.state.privateKeyError&&d("p",{className:"error",children:this.state.privateKeyError})]})}render(){return d("section",{id:"login",className:this.props.fullScreen?"fullscreen":"",children:[this.state.showEula&&d(_z,{onAccept:()=>this.loginAsNewUser(),onDecline:()=>this.setState({showEula:!1})}),d("div",{id:"login-content",children:this.state.showSwitchAccount?d("div",{id:"existing-account-login",children:[d("p",{children:d("a",{href:"",id:"show-create-account",onClick:n=>this.showCreateAccount(n),children:de("back")})}),this.renderExistingAccountLogin()]}):d("form",{id:"login-form",autocomplete:"off",onSubmit:n=>this.onLoginFormSubmit(n),children:d("div",{id:"create-account",children:[d("img",{width:"86",height:"86",src:bz,alt:"iris"}),d("h1",{children:"iris"}),d("input",{style:this.state.inputStyle,onInput:n=>this.onNameChange(n),autocomplete:"off",autocorrect:"off",autocapitalize:"sentences",spellcheck:!1,id:"login-form-name",type:"text",name:"name",placeholder:de("whats_your_name")}),d("p",{children:d(Zt,{id:"sign-up",type:"submit",children:de("new_user_go")})}),d("br",{}),window.nostr?d("p",{children:d("a",{href:"",onClick:n=>this.nostrExtensionLogin(n),children:de("nostr_extension_login")})}):null,d("p",{children:d("a",{href:"",id:"show-existing-account-login",onClick:n=>{n.preventDefault(),this.setState({showSwitchAccount:!0})},children:de("private_key_login")})}),d("p",{children:d(kz,{})})]})})})]})}}class Sz extends eh{render(){return this.renderExistingAccountLogin()}}function Ez(e){return d("div",{class:"main-view",id:"logout-confirmation",children:d("div",{class:"centered-container",children:[d("p",{children:de("logout_confirmation_info")}),d("p",{children:d(Zt,{onClick:()=>Lt("/settings"),children:de("back")})}),d("p",{children:d(Zt,{className:"logout-button",onClick:()=>Ui.logOut(),children:de("log_out")})})]})})}class Dw extends Io{constructor(){super(),this.class="public-messages-view"}componentDidMount(){const t=ye.toNostrBech32Address(this.props.id,"note");if(t&&this.props.id!==t){Lt(`/${t}`,!0);return}this.restoreScrollPosition()}componentDidUpdate(t){t.id!==this.props.id&&this.restoreScrollPosition()}renderView(){let t;return this.props.id==="new"?t=d("div",{className:"mar-top15",children:d(t0,{placeholder:de("whats_on_your_mind"),forceAutofocusMobile:!0,autofocus:!0,onSubmit:()=>Lt("/")})}):t=d(ki,{id:this.props.id,standalone:!0,showRepliedMsg:!0,showReplies:1/0},this.props.id),d("div",{className:"centered-container",children:t})}}class Az extends Io{constructor(){super(...arguments);xe(this,"class","public-messages-view");xe(this,"updateNotificationsLastOpened",dr.debounce(()=>{const n=Pe.get("settings").get("notifications").get("saveLastOpened");n.once(r=>{var i;if(r!==!1){const s=Math.floor(Date.now()/1e3);((i=Ui.public)==null?void 0:i.set("notifications/lastOpened",s))||(console.log("user rejected"),n.put(!1)),Pe.get("unseenNotificationCount").put(0)}})},1e3))}componentDidMount(){this.restoreScrollPosition(),this.updateNotificationsLastOpened()}renderView(){return d("div",{class:"centered-container",children:d(jc,{scrollElement:this.scrollElement.current,index:"notifications",emptyMessage:de("no_notifications_yet")},"notifications")})}}class Cz extends Jm{constructor(){super(),this.cls="block",this.key="reported",this.activeClass="blocked",this.action=de("report_public"),this.actionDone=de("reported"),this.hoverAction=de("unreport")}onClick(t){t.preventDefault();const n=!this.state[this.key];if(confirm(n?"Publicly report this user?":"Unreport user?")){const r=ye.toNostrHexAddress(this.props.id);r&&rt.flag(r,n)}}componentDidMount(){rt.getFlaggedUsers(t=>{const n=ye.toNostrHexAddress(this.props.id),r=n&&(t==null?void 0:t.has(n));this.setState({reported:r})})}}const Tz=({picture:e,onError:t})=>{const[n,r]=It(!1),i=()=>{r(!0)},s=()=>{r(!1)};return e?d(ut,{children:[d(js,{class:"profile-picture",src:e,onError:t,onClick:i}),n&&d(To,{centerVertically:!0,onClose:s,children:d(js,{src:e,onError:t})})]}):null};class Df extends Io{constructor(){super();xe(this,"followedUsers");xe(this,"followers");xe(this,"subscriptions");xe(this,"unsub");this.state={followedUserCount:0,followerCount:0},this.followedUsers=new Set,this.followers=new Set,this.id="profile",this.subscriptions=[]}getNotification(){if(this.state.noFollowers&&this.followers.has(ye.getPubKey()))return Ct`
        <div class="msg">
          <div class="msg-content">
            <p>
              Share your profile link so ${this.state.name||"this user"} can
              follow you:
            </p>
            <p>
              <${Ur}
                text=${de("copy_link")}
                copyStr=${Pt.getMyProfileLink()}
              />
            </p>
            <small>${de("no_followers_yet_info")}</small>
          </div>
        </div>
      `}renderLinks(){return Ct`
      <div
        class="profile-links"
        style="flex:1; display: flex; flex-direction: row; align-items: center;"
      >
        ${this.state.lightning?Ct`
              <div style="flex:1">
                <a
                  href=${this.state.lightning}
                  onClick=${n=>Pt.handleLightningLinkClick(n)}
                >
                   ${de("tip_lightning")}
                </a>
              </div>
            `:""}
        ${this.state.website?Ct`
              <div style="flex:1">
                <a href=${this.state.website} target="_blank">
                  ${this.state.website.replace(/^https?:\/\//,"")}
                </a>
              </div>
            `:""}
      </div>
    `}async viewAs(n){n.preventDefault(),Lt("/"),ye.login({rpub:this.state.hexPub})}renderDetails(){var c;if(!this.state.hexPub)return"";let n;this.state.picture&&!this.state.blocked&&!this.state.profilePictureError?n=Ct`<${Tz}
        key="${this.state.hexPub}picture"
        picture=${this.state.picture}
        onError=${()=>this.setState({profilePictureError:!0})}
      />`:n=Ct`<${ti}
        key="${this.state.npub}identicon"
        str=${this.state.npub}
        hidePicture=${!0}
        width="250"
      />`;let r=[];const i=De.db.findOne({kind:0,pubkey:this.state.hexPub}),s=De.db.findOne({kind:3,pubkey:this.state.hexPub});i&&(delete i.$loki,r.push(i)),s&&(delete s.$loki,r.push(s)),r=JSON.stringify(r,null,2);const a=this.state.loggedIn;return Ct`
      <div class="profile-top" key="${this.state.hexPub}details">
        <div class="profile-header" style="flex-direction: column">
          <div
            class="profile-header-top"
            style="display: flex; flex-direction: row"
          >
            <div
              class="profile-picture-container"
              style="flex: 2;margin-top:${this.state.banner?"-100px;":""}"
            >
              ${n}
            </div>
            <div
              class="profile-header-info"
              style="flex: 5;flex-direction: row; display:flex;margin-top:15px;justify-content: flex-end"
            >
              <div
                onClick=${()=>!a&&Pe.get("showLoginModal").put(!0)}
              >
                ${this.state.isMyProfile?Ct`<${Ms}
                      small
                      onClick=${()=>a&&Lt("/profile/edit")}
                      >${de("edit_profile")}<//
                    >`:Ct`
                      <${Rl}
                        key=${`${this.state.hexPub}follow`}
                        id=${this.state.hexPub}
                      />
                      ${this.state.npub!=="npub1wnwwcv0a8wx0m9stck34ajlwhzuua68ts8mw3kjvspn42dcfyjxs4n95l8"?Ct` <${Ms}
                            small
                            onClick=${()=>a&&Lt(`/chat/${this.state.npub}`)}
                          >
                            <span class="hidden-xs">
                              ${de("send_message")}
                            </span>
                            <span class="visible-xs-inline-block msg-btn-icon">
                              <${hu} width="24" />
                            </span>
                          <//>`:""}
                    `}
              </div>
              <div class="profile-actions">
                <span style="margin: 0 15px">
                  <${K5}>
                    <${Ur}
                      key=${`${this.state.hexPub}copyLink`}
                      text=${de("copy_link")}
                      title=${this.state.name}
                      copyStr=${window.location.href}
                    />
                    <${Ur}
                      key=${`${this.state.hexPub}copyNpub`}
                      text=${de("copy_user_ID")}
                      title=${this.state.name}
                      copyStr=${this.state.npub}
                    />
                    <${Ms}
                      onClick=${()=>this.setState({showQR:!this.state.showQR})}
                      >${de("show_qr_code")}<//
                    >
                    <${Ur}
                      key=${`${this.state.hexPub}copyData`}
                      text=${de("copy_raw_data")}
                      title=${this.state.name}
                      copyStr=${r}
                    />
                    ${!this.state.isMyProfile&&!ye.getPrivKey()?Ct`
                          <${Ms} onClick=${f=>this.viewAs(f)}>
                            ${de("view_as")+" "}
                            <${kn}
                              pub=${this.state.hexPub}
                              hideBadge=${!0}
                            />
                          <//>
                        `:""}
                    ${this.state.isMyProfile?"":Ct`
                          <${Jm} id=${this.state.hexPub} />
                          <${Cz} id=${this.state.hexPub} />
                        `}
                  <//>
                </span>
              </div>
            </div>
          </div>
          <div class="profile-header-stuff">
            <div style="flex: 1" class="profile-name">
              <h3 style="margin-top:5px;margin-bottom:0">
                <${kn} pub=${this.state.hexPub} />
                ${this.state.nip05?Ct`<br /><small class="positive"
                        >${this.state.nip05.replace(/^_@/,"")}</small
                      >`:""}
              </h3>
            </div>
            <div class="profile-about">
              <p class="profile-about-content">${this.state.about}</p>
              ${this.renderLinks()}
            </div>
            <div class="profile-actions">
              <div class="follow-count">
                <a href="/follows/${this.state.npub}">
                  <span>${this.state.followedUserCount}</span> ${de("following")}
                </a>
                <a href="/followers/${this.state.npub}">
                  <span>${this.state.followerCount}</span> ${de("followers")}
                </a>
              </div>
              ${(c=rt.followedByUser.get(this.state.hexPub))!=null&&c.has(ye.getPubKey())?Ct` <div><small>${de("follows_you")}</small></div> `:""}
            </div>
          </div>
        </div>
        ${this.state.showQR?Ct`
              <${n0}
                pub=${this.state.hexPub}
                onClose=${()=>this.setState({showQR:!1})}
              />
            `:""}
      </div>
    `}renderTabs(){return Ct`
      <div class="tabs">
        <${Jf}
          activeClassName="active"
          href="/${this.state.nostrAddress||this.state.npub}"
          >${de("posts")} ${this.state.noPosts?"(0)":""}<//
        >
        <${Jf}
          activeClassName="active"
          href="/${this.state.nostrAddress||this.state.npub}/replies"
          >${de("posts")} & ${de("replies")}
          ${this.state.noReplies?"(0)":""}<//
        >
        <${Jf}
          activeClassName="active"
          href="/${this.state.nostrAddress||this.state.npub}/likes"
          >${de("likes")} ${this.state.noLikes?"(0)":""}<//
        >
      </div>
    `}renderTab(){return this.state.hexPub?this.props.tab==="replies"?Ct`
        <div class="public-messages-view">
          <${jc}
            scrollElement=${this.scrollElement.current}
            key="replies${this.state.hexPub}"
            index="postsAndReplies"
            nostrUser=${this.state.hexPub}
          />
        </div>
      `:this.props.tab==="likes"?Ct`
        <div class="public-messages-view">
          <${jc}
            scrollElement=${this.scrollElement.current}
            key="likes${this.state.hexPub}"
            index="likes"
            nostrUser=${this.state.hexPub}
          />
        </div>
      `:this.props.tab==="media"?Ct`TODO media message feed`:Ct`
      <div>
        <div class="public-messages-view">
          ${this.getNotification()}
          <${jc}
            scrollElement=${this.scrollElement.current}
            key="posts${this.state.hexPub}"
            index="posts"
            nostrUser=${this.state.hexPub}
          />
        </div>
      </div>
    `:Ct`<div></div>`}onNftImgError(n){n.target.style="display:none"}renderView(){var s;if(!this.state.hexPub)return Ct`<div></div>`;const n=this.state.display_name||this.state.name||"Profile",r=`${n} | Iris`,i=`Latest posts by ${this.state.display_name||this.state.name||"user"}. ${((s=this.state.profile)==null?void 0:s.about)||""}`;return Ct`
      ${this.state.banner?Ct`
            <div
              class="profile-banner"
              style="background-image: url(${this.state.banner})"
            ></div>
          `:""}
      <div class="content">
        <${va}>
          <title>${n}</title>
          <meta name="description" content=${i} />
          <meta property="og:type" content="profile" />
          ${this.state.picture?Ct`
                <meta property="og:image" content=${this.state.picture} />
                <meta name="twitter:image" content=${this.state.picture} />
              `:""}
          <meta property="og:title" content=${r} />
          <meta property="og:description" content=${i} />
        <//>
        ${this.renderDetails()} ${this.state.blocked?"":this.renderTabs()}
        ${this.state.blocked?"":this.renderTab()}
      </div>
    `}getNostrProfile(n,r){this.unsub=Ft.subscribe({authors:[n],kinds:[0,3]},void 0,!1,!1),fetch(`https://us.rbr.bio/${n}/info.json`).then(a=>{a.ok&&a.json().then(c=>{var f;c&&this.setState({followerCount:c.followerCount||this.state.followerCount,followedUserCount:((f=c.following)==null?void 0:f.length)||this.state.followedUserCount})})});const i=()=>{var a,c;n&&this.setState({followedUserCount:Math.max(((a=rt.followedByUser.get(n))==null?void 0:a.size)??0,this.state.followedUserCount),followerCount:Math.max(((c=rt.followersByUser.get(n))==null?void 0:c.size)??0,this.state.followerCount)})};setTimeout(()=>{this.subscriptions.push(rt.getFollowersByUser(n,i)),this.subscriptions.push(rt.getFollowedByUser(n,i))},1e3);const s=rt.getProfile(n,a=>{if(!a)return;if(!(r&&r.endsWith("@iris.to"))&&a.nip05&&a.nip05valid){const w=a.nip05,_=w.split("@"),A=_[0],I=_[1];let C;I==="iris.to"?A==="_"?C="iris":C=A:A==="_"?C=I:C=w,this.setState({nostrAddress:C}),C=window.location.pathname.replace(/[^/]+/,C);const R=window.history.state;window.history.replaceState(R,"",C)}let f=a.lud16||a.lud06;f&&!f.startsWith("lightning:")&&(f="lightning:"+f);let b=a.website&&(a.website.match(/^https?:\/\//)?a.website:"http://"+a.website);b&&b.endsWith("/")&&(b=b.slice(0,-1));let m;try{m=a.banner&&new URL(a.banner).toString(),m=G5(m)?m:`https://imgproxy.iris.to/insecure/plain/${m}`}catch{console.log("Invalid banner URL",a.banner)}this.setState({name:a.name,display_name:a.display_name,about:Pt.highlightText(a.about),picture:a.picture,nip05:a.nip05valid&&a.nip05,lightning:f,website:b,banner:m,profile:a})},!0);this.subscriptions.push(s)}loadProfile(n,r){const i=n===ye.getPubKey();this.setState({isMyProfile:i}),this.followedUsers=new Set,this.followers=new Set,Pe.get("noFollowers").on(this.inject()),this.getNostrProfile(n,r),this.subscriptions.push(rt.getBlockedUsers(s=>{this.setState({blocked:s.has(n)})}))}componentWillUnmount(){var n;super.componentWillUnmount(),(n=this.unsub)==null||n.call(this)}componentDidUpdate(n,r){var i;!r.name&&this.state.name&&((i=this.unsub)==null||i.call(this),setTimeout(()=>{window.prerenderReady=!0},1e3))}componentDidMount(){this.restoreScrollPosition();const n=this.props.id,r=ye.toNostrBech32Address(n,"npub");if(Pe.get("loggedIn").on(this.inject()),r&&r!==n){Lt(`/${r}`,!0);return}const i=ye.toNostrHexAddress(n);if(!i){let s=n;s.match(/.+@.+\..+/)||(s.match(/.+\..+/)?s="_@"+s:s=s+"@iris.to"),ye.getPubKeyByNip05Address(s).then(a=>{if(a){const c=ye.toNostrBech32Address(a,"npub");c&&c!==a&&(this.setState({npub:c,hexPub:a}),this.loadProfile(a,s))}else this.setState({notFound:!0})});return}this.setState({hexPub:i,npub:ye.toNostrBech32Address(i,"npub")}),this.loadProfile(i)}}class Iz extends fn{onLogoutClick(t){t?Lt("/logout"):Ui.logOut()}async onExtensionLoginClick(t){t.preventDefault();const n=await window.nostr.getPublicKey();ye.login({rpub:n})}deleteAccount(){confirm(`${de("delete_account")}?`)&&(De.publish({kind:0,content:JSON.stringify({deleted:!0})}),De.publish({kind:3,content:JSON.stringify({})}),setTimeout(()=>{Ui.logOut()},1e3))}render(){const t=ye.getPrivKey();let n;t&&(n=vh.nsecEncode(t));const r=ye.getPubKey(),i=vh.npubEncode(r),s=!!ye.getPrivKey();return d(ut,{children:d("div",{class:"centered-container",children:[d("h2",{children:de("account")}),d("p",{children:s?d(ut,{children:[d("b",{children:de("save_backup_of_privkey_first")})," ",de("otherwise_cant_log_in_again")]}):null}),d("p",{children:[d(Zt,{onClick:()=>this.onLogoutClick(s),children:de("log_out")}),d(Zt,{onClick:()=>this.setState({showSwitchAccount:!this.state.showSwitchAccount}),children:de("switch_account")})]}),this.state.showSwitchAccount?Ct`
                <p>
                  <${Sz} />
                </p>
                <p>
                  <a href="" onClick=${a=>this.onExtensionLoginClick(a)}>
                    ${de("nostr_extension_login")}
                  </a>
                </p>
              `:"",d("h3",{children:de("public_key")}),d("p",{children:d("small",{children:i})}),d("p",{children:[d(Ur,{copyStr:i,text:"Copy npub"}),d(Ur,{copyStr:r,text:"Copy hex"})]}),d("h3",{children:de("private_key")}),d("p",{children:t?d(ut,{children:[d(Ur,{copyStr:n,text:"Copy nsec"}),d(Ur,{copyStr:t,text:"Copy hex"})]}):d("p",{children:de("private_key_not_present_good")})}),t?d("p",{children:de("private_key_warning")}):"",Pt.isStandalone()?d(ut,{children:[d("h3",{children:de("delete_account")}),d("p",{children:d(Zt,{onClick:()=>this.deleteAccount(),children:de("delete_account")})})]}):null]})})}}const $z=()=>{const[e,t]=It("dark"),[n,r]=It(!1);on(()=>{var s;(s=Ui.public)==null||s.get("settings/colorScheme",a=>{t(a.value)}),Pe.get("showConnectedRelays").on(r)},[]);const i=s=>{var f;const c=s.target.value;(f=Ui.public)==null||f.set("settings/colorScheme",c)};return d(ut,{children:d("div",{class:"centered-container",children:[d("h3",{children:de("appearance")}),d("p",{children:[d("label",{for:"colorScheme",children:de("color_scheme")}),d("select",{id:"colorScheme",name:"colorScheme",onChange:i,value:e,children:[d("option",{value:"default",children:de("system_default")}),d("option",{value:"light",children:de("light")}),d("option",{value:"dark",children:de("dark")})]})]}),d("p",{children:[d("input",{type:"checkbox",id:"showConnectedRelays",name:"showConnectedRelays",checked:n,onChange:s=>{Pe.get("showConnectedRelays").put(s.currentTarget.checked)}}),d("label",{htmlFor:"showConnectedRelays",children:de("show_connected_relays_in_header")})]})]})})};class Pz extends fn{profileExportJson(){const t=ye.getPubKey();let n=[];const r=De.db.findOne({kind:0,pubkey:t}),i=De.db.findOne({kind:3,pubkey:t});return r&&n.push(r),i&&n.push(i),n=JSON.stringify(n,null,2),n}async exportMyEvents(){console.log("exporting my events");const t=ye.getPubKey(),n=[];let r=0;return this.setState({downloadMyEventsMessage:"Fetching events..."}),await Ns.db.events.where({pubkey:t}).each(i=>{n.push(i),r++}),this.setState({saveMessage:`Found ${r} events`,downloadMyEventsMessage:null}),JSON.stringify(n)}render(){return d(ut,{children:d("div",{class:"centered-container",children:[d("h2",{children:de("backup")}),d("h3",{children:de("save")}),d("p",{children:[de("profile")," & ",de("follows"),":"]}),d("p",{children:[d(Zt,{onClick:()=>this.onClickDownload("nostr-my-profile-and-follows.json",()=>this.profileExportJson()),children:de("download")}),d(Ur,{text:de("copy_raw_data"),copyStr:()=>this.profileExportJson()},`${this.state.hexPub}copyData`)]}),d("p",{children:[de("your_events"),":"]}),d("p",{children:d(Zt,{onClick:()=>this.onClickDownload("nostr-my-events.json",()=>this.exportMyEvents()),children:this.state.downloadMyEventsMessage||de("download")})}),this.state.saveMessage&&d("p",{children:this.state.saveMessage}),this.state.saveError&&d("p",{class:"warning",children:this.state.saveError}),d("h3",{children:de("load")}),d("p",{children:d(Zt,{onClick:()=>this.onUploadJsonClick(),children:"Upload .json file"})}),d("p",{children:d("textarea",{onInput:t=>this.import(t.target.value),placeholder:de("paste_event_json")})}),this.state.loadError&&d("p",{class:"warning",children:this.state.loadError}),this.state.importedEvents&&d("p",{class:"positive",children:de("loaded_and_published_{n}_events").replace("{n}",this.state.importedEvents)}),this.state.restoredFollows&&d(ut,{children:[d("p",{class:"positive",children:de("restored_{n}_follows").replace("{n}",this.state.restoredFollows.length)}),this.state.restoredFollows.map(t=>d("div",{className:"profile-link-container",children:[d("a",{href:`/${ye.toNostrBech32Address(t,"npub")}`,className:"profile-link",children:[d(ti,{str:t,width:40}),d(kn,{pub:t})]}),d(Rl,{id:t})]}))]})]})})}async onClickDownload(t,n){try{this.setState({saveMessage:null,saveError:null});const r=await n(),i="data:text/json;charset=utf-8,"+encodeURIComponent(r),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()}catch(r){console.error(r),this.setState({saveError:r.message,downloadMyEventsMessage:null})}}onUploadJsonClick(){const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=n=>{var s;const i=(s=n.target.files)==null?void 0:s[0];if(i){const a=new FileReader;a.onload=c=>{this.import(a.result)},a.readAsText(i)}},t.click()}import(t){var n;if(!t||t.length===0){this.setState({loadError:null,importedEvents:null,restoredFollows:null});return}try{let r=JSON.parse(t);Array.isArray(r)||(r=[r]);for(const i of r){if(!i.sig)continue;De.publish(i);const s=ye.getPubKey();if(i.pubkey===s&&i.kind===3){const a=i.tags.filter(b=>b[0]==="p").map(b=>b[1]),c=(((n=De.db.findOne({kind:3,pubkey:s}))==null?void 0:n.tags)||[]).filter(b=>b[0]==="p").map(b=>b[1]),f=a.filter(b=>!c.includes(b));rt.setFollowed(f),this.setState({restoredFollows:f})}}this.setState({loadError:null,importedEvents:r.length})}catch(r){this.setState({loadError:r.message})}}}class Oz extends fn{constructor(){super(),this.state={settings:{}}}componentDidMount(){Pe.get("settings").on(this.inject())}render(){const t=[{setting:"loadReactions",label:"Replies and reactions"},{setting:"showLikes",label:"Likes"},{setting:"showZaps",label:"Zaps"},{setting:"showReposts",label:"Reposts"}],n=[{setting:"enableImages",label:"Images"},{setting:"enableAudio",label:"Audio"},{setting:"enableVideos",label:"Videos"},{setting:"autoplayVideos",label:"Autoplay videos"},{setting:"enableAppleMusic",label:"Apple Music"},{setting:"enableInstagram",label:"Instagram"},{setting:"enableSoundCloud",label:"SoundCloud"},{setting:"enableSpotify",label:"Spotify"},{setting:"enableTidal",label:"Tidal"},{setting:"enableTiktok",label:"TikTok"},{setting:"enableTwitch",label:"Twitch"},{setting:"enableTwitter",label:"Twitter"},{setting:"enableYoutube",label:"YouTube"},{setting:"enableWavlake",label:"Wavlake"},{setting:"enableWebtorrent",label:"Webtorrent"}];return d(ut,{children:d("div",{class:"centered-container",children:[d("h2",{children:de("content")}),d("h3",{children:de("notes")}),t.map(({setting:r,label:i})=>d("p",{children:[d("input",{type:"checkbox",checked:this.state.settings[r]!==!1,onChange:()=>Pe.get("settings").get(r).put(this.state.settings[r]===!1),id:r}),d("label",{htmlFor:r,children:i})]},r)),d("h3",{children:de("media")}),n.map(({setting:r,label:i})=>d("p",{children:[d("input",{type:"checkbox",checked:this.state.settings[r]!==!1,onChange:()=>Pe.get("settings").get(r).put(this.state.settings[r]===!1),id:r}),d("label",{htmlFor:r,children:i})]},r))]})})}}class Nz extends fn{render(){const t=(r,i,s)=>d("p",{children:[d("input",{type:"checkbox",id:r,checked:this.state[r]===void 0?s:this.state[r],onChange:a=>{const c=a.target.checked;Pe.get("dev").get(r).put(c)}}),d("label",{htmlFor:r,children:i})]}),n=[{key:"logSubscriptions",label:"Log RelayPool subscriptions",defaultValue:!1},{key:"indexed03",label:"Use central index server for kinds 0 and 3",defaultValue:!0},{key:"indexedDbSave",label:"Save events to IndexedDB",defaultValue:!0},{key:"indexedDbLoad",label:"Load events from IndexedDB",defaultValue:!0},{key:"askEventsFromRelays",label:"Ask events from relays",defaultValue:!0}];return d(ut,{children:d("div",{class:"centered-container",children:[d("h3",{children:"Developer"}),d("p",{children:"Settings intended for Iris developers."}),n.map(({key:r,label:i,defaultValue:s})=>t(r,i,s))]})})}componentDidMount(){Pe.get("dev").on(this.sub(t=>this.setState(t)))}}class Rz extends fn{constructor(){super(...arguments);xe(this,"state",{irisToActive:!1,existing:null,profile:null,newUserName:"",newUserNameValid:!1,error:null,showChallenge:!1,invalidUsernameMessage:null});xe(this,"checkAvailabilityFromAPI",dr.debounce(async n=>{const r=await fetch(`https://api.iris.to/user/available?name=${encodeURIComponent(n)}`);if(n===this.state.newUserName)if(r.status<500){const i=await r.json();i.available?this.setState({newUserNameValid:!0}):this.setState({newUserNameValid:!1,invalidUsernameMessage:i.message})}else this.setState({newUserNameValid:!1,invalidUsernameMessage:"Error checking username availability"})},500))}renderAccountName(n,r=!0){return d(ut,{children:[d("p",{children:["Username: ",d("b",{children:n})]}),d("p",{children:["Short link:"," ",r?d("a",{href:`https://iris.to/${n}`,onClick:i=>{i.preventDefault(),Lt(`/${n}`)},children:["iris.to/",n]}):d(ut,{children:["iris.to/",n]})]}),d("p",{children:["Nostr address (nip05): ",d("b",{children:[n,"@iris.to"]})]})]})}render(){let n;if(this.state.irisToActive){const r=this.state.profile.nip05.split("@")[0];n=this.renderAccountName(r)}else this.state.existing&&this.state.existing.confirmed?n=d("div",{children:[d("div",{className:"negative",children:["You have an active iris.to account:",this.renderAccountName(this.state.existing.name)]}),d("p",{children:d(Zt,{onClick:()=>this.setAsPrimary(),children:"Set as primary Nostr address (nip05)"})})]}):this.state.existing?n=d("div",{children:[d("p",{className:"positive",children:["Username iris.to/",d("b",{children:this.state.existing.name})," is reserved for you until 12 March 2023!"]}),this.renderAccountName(this.state.existing.name,!1),d("p",{children:d(Zt,{onClick:()=>this.enableReserved(),children:"Yes please"})}),d("p",{children:d(Zt,{onClick:()=>this.declineReserved(),children:"No thanks"})})]}):this.state.error?n=d("div",{className:"negative",children:["Error: ",this.state.error]}):this.state.showChallenge?(window.cf_turnstile_callback=r=>this.register(r),n=d(ut,{children:[d("script",{src:"https://challenges.cloudflare.com/turnstile/v0/api.js",async:!0,defer:!0}),d("div",{className:"cf-turnstile","data-sitekey":["iris.to","beta.iris.to"].includes(window.location.hostname)?"0x4AAAAAAACsEd8XuwpPTFwz":"3x00000000000000000000FF","data-callback":"cf_turnstile_callback"})]})):n=d("div",{children:[d("p",{children:"Register an Iris username (iris.to/username)"}),d("form",{onSubmit:r=>this.showChallenge(r),children:[d("input",{type:"text",placeholder:"Username",value:this.state.newUserName,onInput:r=>this.onNewUserNameChange(r)}),d(Zt,{type:"submit",enabled:this.state.newUserNameValid,children:"Register"}),d("p",{children:this.state.newUserNameValid?d(ut,{children:[d("span",{className:"text-success",children:"Username is available"}),this.renderAccountName(this.state.newUserName,!1)]}):d("span",{className:"text-warning",children:this.state.invalidUsernameMessage})})]})]});return d(ut,{children:d("div",{class:"centered-container",children:[d("h3",{children:"Iris.to account"}),n,d("p",{children:d("a",{href:"https://github.com/irislib/faq#iris-username",children:"FAQ"})})]})})}async onNewUserNameChange(n){const r=n.target.value;if(r.length===0){this.setState({newUserName:r,newUserNameValid:!1,invalidUsernameMessage:""});return}if(r.length<6||r.length>15){this.setState({newUserName:r,newUserNameValid:!1,invalidUsernameMessage:"Username must be between 6 and 15 characters"});return}if(!r.match(/^[a-z0-9_.]+$/)){this.setState({newUserName:r,newUserNameValid:!1,invalidUsernameMessage:"Username must only contain lowercase letters and numbers"});return}this.setState({newUserName:r,invalidUsernameMessage:""}),this.checkAvailabilityFromAPI(r)}showChallenge(n){n.preventDefault(),this.state.newUserNameValid&&this.setState({showChallenge:!0})}async register(n){console.log("register",n);const r=ye.getPubKey(),i={content:`iris.to/${this.state.newUserName}`,kind:1,tags:[],pubkey:r,created_at:Math.floor(Date.now()/1e3)};i.id=De.getEventHash(i),i.sig=await ye.sign(i);const s=await fetch("https://api.iris.to/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:i,cfToken:n})});s.status===200?(this.setState({error:null,existing:{confirmed:!0,name:this.state.newUserName}}),delete window.cf_turnstile_callback):s.json().then(a=>{this.setState({error:a.message||"error"})}).catch(()=>{this.setState({error:"error"})})}setAsPrimary(){const n=this.state.existing.name+"@iris.to",r=setTimeout(()=>{rt.setMetadata({nip05:n})},2e3);rt.getProfile(ye.getPubKey(),i=>{i&&(clearTimeout(r),i.nip05!==n&&(i.nip05=n,rt.setMetadata(i))),this.setState({profile:i,irisToActive:!0})})}async enableReserved(){const n=ye.getPubKey(),r={content:`iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};r.id=De.getEventHash(r),r.sig=await ye.sign(r);const i=await fetch("https://api.iris.to/user/confirm_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});Pe.get("showNoIrisToAddress").put(!1),Pe.get("existingIrisToAddress").put({confirmed:!0,name}),i.status===200?this.setState({error:null,existing:{confirmed:!0,name:this.state.existing.name}}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}async declineReserved(){if(!confirm(`Are you sure you want to decline iris.to/${this.state.existing.name}?`))return;const n=ye.getPubKey(),r={content:`decline iris.to/${this.state.existing.name}`,kind:1,tags:[],pubkey:n,created_at:Math.floor(Date.now()/1e3)};r.id=De.getEventHash(r),r.sig=await ye.sign(r);const i=await fetch("https://api.iris.to/user/decline_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});i.status===200?this.setState({confirmSuccess:!1,error:null,existing:null}):i.json().then(s=>{this.setState({error:s.message||"error"})}).catch(()=>{this.setState({error:"error"})})}componentDidMount(){const n=ye.getPubKey();rt.getProfile(n,r=>{const i=r&&r.nip05&&r.nip05valid&&r.nip05.endsWith("@iris.to");this.setState({profile:r,irisToActive:i}),r&&!i&&this.checkExistingAccount(n)},!0),this.checkExistingAccount(n)}async checkExistingAccount(n){const r=await fetch(`https://api.iris.to/user/find?public_key=${n}`);if(r.status===200){const i=await r.json();this.setState({existing:i})}}}const Mz=()=>d(ut,{children:d("div",{class:"centered-container",children:[d("h3",{children:de("language")}),d("div",{class:"centered-container",children:Object.keys(su).map(e=>{let t;return e==is?t=d("input",{type:"radio",name:"language",id:e,onChange:n=>Bw(n),value:e,checked:!0}):t=d("input",{type:"radio",name:"language",id:e,onChange:n=>Bw(n),value:e}),d(ut,{children:[t,d("label",{for:e,children:su[e]}),d("br",{})]},e)})})]})});function Bw(e){const t=e.target.value;al.indexOf(t)>=0&&(localStorage.setItem("language",t),location.reload())}const Dz=()=>{const[e,t]=It(Array.from($n.relays.values())),[n,r]=It([]),[i,s]=It("");on(()=>{const w=setInterval(()=>{t(Array.from($n.relays.values()))},2e3);return()=>clearInterval(w)}),on(()=>{r($n.getPopularRelays())},[]);const a=w=>{Pe.get("relays").get(w.url).put(null),$n.remove(w.url)},c=w=>w.includes("://")?w:`wss://${w}`,f=(w,_)=>{const A=c(_);Pe.get("relays").get(A).put({enabled:!0,newRelayUrlWithProtocol:A}),w.preventDefault(),$n.add(A),s("")},b=w=>{try{return Ft.relayPool.relayByUrl.get(w.url).status}catch{return 3}},m=w=>{switch(b(w)){case 0:return"neutral";case 1:return"positive";case 2:return"neutral";case 3:return"";default:return"status"}};return d("div",{className:"centered-container",children:[d("h2",{children:de("network")}),d("div",{id:"peers",className:"flex-table",children:[e.map(w=>d("div",{className:"flex-row peer",children:[d("div",{className:"flex-cell",children:[d("span",{className:m(w),children:" "}),w.url]},w.url),d("div",{className:"flex-cell no-flex",children:d(Zt,{onClick:()=>a(w),children:de("remove")})}),d("div",{className:"flex-cell no-flex",children:d("input",{type:"checkbox",checked:w.enabled!==!1,onChange:()=>{w.enabled=w.enabled===!1,w.enabled?$n.enable(w.url):$n.disable(w.url)}})})]})),d("div",{className:"flex-row peer",children:[d("div",{className:"flex-cell",children:d("input",{id:"new-relay-url",type:"text",placeholder:de("new_relay_url"),value:i,onChange:w=>s(w.target.value)})},"new"),d("div",{className:"flex-cell no-flex",children:d(Zt,{onClick:w=>f(w,i),children:de("add")})})]}),d("p",{children:[d(Zt,{onClick:()=>$n.saveToContacts(),children:de("save_relays_publicly")}),d(Zt,{onClick:()=>$n.restoreDefaults(),children:de("restore_defaults")})]})]}),d("h3",{children:de("popular_relays")}),d("div",{id:"popular-relays",className:"flex-table",children:[d("div",{className:"flex-row peer",children:[d("div",{className:"flex-cell no-flex",children:de("users")}),d("div",{className:"flex-cell",children:"URL"})]}),n.map(w=>d("div",{className:"flex-row peer",children:[d("div",{className:"flex-cell no-flex",children:w.users}),d("div",{className:"flex-cell",children:w.url}),d("div",{className:"flex-cell no-flex",children:d(Zt,{onClick:_=>f(_,w.url),children:de("add")})})]},w.url))]})]})},Bz=()=>{const[e,t]=It("USD"),[n,r]=It(1e3);on(()=>{Pe.get("displayCurrency").on(s=>{t(s)})},[]),on(()=>{Pe.get("defaultZapAmount").on(s=>{r(s)})});const i=s=>{const c=s.target.value;Pe.get("displayCurrency").put(c)};return d(ut,{children:d("div",{class:"centered-container",children:[d("h3",{children:de("payments")}),d("p",{children:["Payments on Iris are called Zaps and are made with Bitcoin."," ",d("a",{href:"https://github.com/irislib/faq#zapping",children:"FAQ"})]}),d("p",{children:[d("label",{for:"displayCurrency",children:de("display_currency")}),d("select",{id:"displayCurrency",name:"displayCurrency",onChange:i,value:e,children:[d("option",{value:"USD",children:"USD"}),d("option",{value:"EUR",children:"EUR"}),d("option",{value:"JPY",children:"JPY"}),d("option",{value:"BTC",children:"SATS (Satoshi, 0.00000001 BTC)"})]})]}),d("p",{children:[d("label",{for:"defaultZapAmount",children:[de("default_zap_amount")," (sats):"]}),d("input",{type:"number",id:"defaultZapAmount",name:"defaultZapAmount",value:n,onChange:s=>{Pe.get("defaultZapAmount").put(s.currentTarget.value)}})]})]})})};class Lz extends fn{constructor(){super();xe(this,"refreshInterval");this.state={blockedUsers:[],globalFilter:{}}}render(){let n=!1;const r=this.state.blockedUsers.map(s=>{const a=ye.toNostrBech32Address(s,"npub");if(a)return n=!0,d("div",{children:d("a",{href:`/${a}`,children:d(kn,{pub:s})})},s)}),i=Array.from(rt.usersByFollowDistance.entries()).slice(1);return d(ut,{children:d("div",{class:"centered-container",children:[d("h2",{children:de("social_network")}),d("h3",{children:"Stored on your device"}),d("p",{children:["Total size: ",i.reduce((s,a)=>s+a[1].size,0)," ","users"]}),d("p",{children:["Depth: ",i.length," degrees of separation"]}),i.sort().map(s=>d("div",{children:[s[0]||de("unknown"),": ",s[1].size," users"]})),d("p",{children:"Filter incoming events by follow distance:"}),d("select",{value:this.state.globalFilter.maxFollowDistance,onChange:s=>{const a=s.target;Pe.get("globalFilter").get("maxFollowDistance").put(parseInt(a.value))},children:[d("option",{value:"0",children:"Off"}),d("option",{value:"1",children:"1"}),d("option",{value:"2",children:"2"}),d("option",{value:"3",children:"3"}),d("option",{value:"4",children:"4"}),d("option",{value:"5",children:"5"}),d("option",{value:"6",children:"6"})]}),d("p",{children:"Minimum number of followers at maximum follow distance:"}),d("input",{type:"number",value:this.state.globalFilter.minFollowersAtMaxDistance||De.DEFAULT_GLOBAL_FILTER.minFollowersAtMaxDistance,onChange:s=>{const a=s.target;Pe.get("globalFilter").get("minFollowersAtMaxDistance").put(parseInt(a.value))}}),d("h3",{children:de("blocked_users")}),!n&&de("none"),d("p",{children:d("a",{href:"",onClick:s=>{s.preventDefault(),this.setState({showBlockedUsers:!this.state.showBlockedUsers})},children:[this.state.showBlockedUsers?de("hide"):de("show")," ",r.length]})}),this.state.showBlockedUsers&&r]})})}componentDidMount(){rt.getBlockedUsers(n=>{this.setState({blockedUsers:n})}),Pe.get("globalFilter").on(this.inject()),this.refreshInterval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.refreshInterval)}}class Fz extends fn{constructor(){super();xe(this,"content","");xe(this,"pages",{account:Iz,network:Dz,appearance:$z,language:Mz,content:Oz,payments:Bz,backup:Pz,social_network:Lz,iris_account:Rz,dev:Nz});this.content="home"}render(){const n=this.pages[this.props.id]||this.pages.account;return d(n,{})}}const th={account:"account",appearance:"appearance",content:"content",payments:"payments",network:"network",backup:"backup",language:"language",social_network:"social_network",iris_account:void 0};["iris.to","beta.iris.to","localhost"].includes(window.location.hostname)&&(th.iris_account="iris.to");class Uz extends fn{menuLinkClicked(t,n){n.preventDefault(),Pe.get("toggleSettingsMenu").put(!1),Pe.get("scrollUp").put(!0),Lt(`/settings/${t}`)}render(){const t=this.props.activePage||"account";return d(ut,{children:d("div",{className:this.props.activePage?"settings-list hidden-xs":"settings-list",children:[Pt.isElectron?d("div",{class:"electron-padding"}):d("h3",{class:"visible-xs-block",style:"padding: 0px 15px;",children:de("settings")}),Object.keys(th).map(n=>{if(th[n])return d("a",{href:"#",class:t===n&&window.innerWidth>624?"active":"",onClick:r=>this.menuLinkClicked(n,r),children:d("span",{class:"text",children:[de(th[n]),n==="language"&&d("small",{className:"mar-left5",children:un.language})]})},n)})]})})}}const jz=e=>d(ut,{children:[d(Sa,{}),d("div",{class:"main-view",id:"settings",children:d("div",{style:"flex-direction: row; width:100%;",id:"settings",children:[d("div",{class:"logo",className:e.page?"visible-xs-flex":"hidden",children:d("a",{href:"/settings",style:"margin: 1em; display:flex; color: var(--text-color)",children:d("span",{children:un.backArrow})})}),d(Uz,{activePage:e.page}),d("div",{className:e.page?"":"hidden-xs",style:"padding: 0px 15px; overflow: auto; width: 100%;",children:d(Fz,{id:e.page})})]})})]});class zz extends fn{render(){return d(ut,{children:[d(Sa,{}),d("div",{className:"main-view",id:"settings",children:d("div",{className:"centered-container mobile-padding15",children:[d("h2",{children:de("subscribe")}),d("h3",{children:"Iris Supporter"}),d("p",{children:"Support open source development and get extra features!"}),d("p",{children:d("ul",{children:[d("li",{children:"Iris Supporter Badge"}),d("li",{children:"Purple checkmark on Iris"}),d("li",{children:"High-quality automatic translations (via deepl.com)"}),d("li",{children:"Iris Supporters' private group chat"}),d("li",{children:"More features to come!"})]})}),d("p",{children:[d("input",{defaultChecked:!0,type:"radio",id:"subscription_annually",name:"subscription",value:"1"}),d("label",{htmlFor:"subscription_annually",children:[d("b",{children:"8  / month"})," charged annually (96  / year)"]})]}),d("p",{children:[d("input",{type:"radio",id:"subscription_monthly",name:"subscription",value:"2"}),d("label",{htmlFor:"subscription_monthly",children:[d("b",{children:"10  / month"})," charged monthly (120  / year)"]})]}),d("p",{children:d(Zt,{children:"Subscribe"})}),d("h3",{children:"Iris Titan"}),d("p",{children:["True Mighty Titan status. Lifetime Iris Purple access, plus:",d("ul",{children:[d("li",{children:"Iris Titan Badge"}),d("li",{children:"Iris Titans private group chat"}),d("li",{children:"Priority support"})]})]}),d("p",{children:[d("b",{children:"1000 "})," one-time payment."]}),d("p",{children:d(Zt,{children:"Subscribe"})}),d("br",{}),d("br",{})]})})]})}}class Hz extends Io{constructor(){super(),this.class="public-messages-view"}renderView(){return Ct`
      <div id="message-list" class="centered-container">
        <${Su}
          standalone=${!0}
          showFiles=${!0}
          torrentId=${this.props.id}
        />
      </div>
    `}}Ui.init({autologin:!1,autofollow:!1});class qz extends fn{componentDidMount(){window.location.hash.length&&(window.location.href=window.location.origin+window.location.hash.replace("#","")),window.onload=()=>{Pe.get("loggedIn").on(this.inject())},Pe.get("toggleMenu").put(!1),Pe.get("toggleMenu").on(t=>this.toggleMenu(t)),Pe.get("unseenMsgsTotal").on(this.inject()),$5.then(()=>this.setState({translationLoaded:!0})),Pe.get("showLoginModal").on(this.inject())}handleRoute(t){const n=t.url;this.setState({activeRoute:n}),Pe.get("activeRoute").put(n)}onClickOverlay(){this.state.showMenu&&this.setState({showMenu:!1})}toggleMenu(t){this.setState({showMenu:typeof t>"u"?!this.state.showMenu:t})}electronCmd(t){console.log(t)}render(){let t="";const n=this.state;n.activeRoute&&n.activeRoute.length>1&&(t=Pt.capitalize(n.activeRoute.replace("/","").split("?")[0]));const r=n.platform&&n.platform!=="darwin",i=n.unseenMsgsTotal?`(${n.unseenMsgsTotal}) %s | iris`:"%s | iris",s=n.unseenMsgsTotal?`(${n.unseenMsgsTotal}) iris`:"iris";if(!n.translationLoaded)return d("div",{id:"main-content"});if(!n.loggedIn&&window.location.pathname.length<=1)return d("div",{id:"main-content",children:d(eh,{fullScreen:!0})});const a=c=>{var f;return(f=c.id)!=null&&f.startsWith("note")?d(Dw,{id:c.id}):d(Df,{id:c.id,tab:"posts",path:c.path})};return d("div",{id:"main-content",children:[r?d("div",{className:"windows-titlebar",children:[d("span",{children:"iris"}),d("div",{className:"title-bar-btns",children:[d("button",{className:"min-btn",onClick:()=>this.electronCmd("minimize"),children:"-"}),d("button",{className:"max-btn",onClick:()=>this.electronCmd("maximize"),children:"+"}),d("button",{className:"close-btn",onClick:()=>this.electronCmd("close"),children:"x"})]})]}):null,d("section",{className:`main ${r?"desktop-non-mac":""} ${n.showMenu?"menu-visible-xs":""}`,style:"flex-direction: row;",children:[n.loggedIn?d(Uj,{}):null,d(va,{titleTemplate:i,defaultTitle:s,children:[d("title",{children:t}),d("meta",{name:"description",content:"Social Networking Freedom"}),d("meta",{property:"og:type",content:"website"}),d("meta",{property:"og:title",content:t}),d("meta",{property:"og:description",content:"Social Networking Freedom"}),d("meta",{property:"og:image",content:"https://iris.to/assets/img/irisconnects.png"}),d("meta",{name:"twitter:card",content:"summary_large_image"}),d("meta",{name:"twitter:image",content:"https://iris.to/assets/img/irisconnects.png"})]}),d("div",{className:"overlay",onClick:()=>this.onClickOverlay()}),d("div",{className:"view-area",children:d(j_,{onChange:c=>this.handleRoute(c),children:[d(pz,{path:"/"}),d(gz,{path:"/key"}),d(bg,{path:"/following",index:"follows"}),d(bg,{path:"/global",index:"global"}),d(bg,{path:"/search/:keyword?"}),d(eh,{path:"/login",fullScreen:!0}),d(Az,{path:"/notifications"}),d(vg,{path:"/chat/hashtag/:hashtag?"}),d(vg,{path:"/chat/:id?"}),d(vg,{path:"/chat/new/:id"}),d(Dw,{path:"/post/:id+"}),d(Hz,{path:"/torrent/:id+"}),d(zj,{path:"/about"}),d(jz,{path:"/settings/:page?"}),d(Ez,{path:"/logout"}),d(Sw,{path:"/explorer/:path?"}),d(Sw,{path:"/explorer/:path+"}),d(Xj,{path:"/profile/edit"}),d(zz,{path:"/subscribe"}),d(Df,{path:"/profile/:id",tab:"posts"}),d(Df,{path:"/:id/replies",tab:"replies"}),d(Df,{path:"/:id/likes",tab:"likes"}),d(Cw,{path:"/follows/:id"}),d(Cw,{followers:!0,path:"/followers/:id"}),d(a,{path:"/:id"})]})})]}),d(Lj,{}),d(Dj,{}),this.state.showLoginModal&&d(To,{centerVertically:!0,showContainer:!0,onClose:()=>Pe.get("showLoginModal").put(!1),children:d(eh,{})})]})}}Pt.showConsoleWarning();yl(d(qz,{}),document.getElementById("app"));export{Dn as c,jr as g,oO as r};
